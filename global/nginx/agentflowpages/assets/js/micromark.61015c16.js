import{c as fn}from"./micromark-util-combine-extensions.69813562.js";import{f as K}from"./micromark-factory-space.49ece02c.js";import{m as V}from"./micromark-util-character.48ebe765.js";import{s as B,p as dn}from"./micromark-util-chunked.6f054bfc.js";import{b as hn,c as pn,l as _,a as xn,d as gn,e as Q,h as mn,t as U,s as Z,f as kn,g as nn,i as rn,j as sn,k as G,m as wn,n as J,o as bn,p as _n,q as yn,r as Cn,u as In,v as vn}from"./micromark-core-commonmark.8ad5320e.js";import{r as Sn}from"./micromark-util-resolve-all.8a85a8df.js";const zn={tokenize:En};function En(n){const i=n.attempt(this.parser.constructs.contentInitial,e,s);let r;return i;function e(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),K(n,i,"linePrefix")}function s(u){return n.enter("paragraph"),t(u)}function t(u){const a=n.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=a),r=a,o(u)}function o(u){if(u===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(u);return}return V(u)?(n.consume(u),n.exit("chunkText"),t):(n.consume(u),o)}}const Fn={tokenize:Tn},en={tokenize:On};function Tn(n){const i=this,r=[];let e=0,s,t,o;return u;function u(c){if(e<r.length){const w=r[e];return i.containerState=w[1],n.attempt(w[0].continuation,a,l)(c)}return l(c)}function a(c){if(e++,i.containerState._closeFlow){i.containerState._closeFlow=void 0,s&&E();const w=i.events.length;let b=w,m;for(;b--;)if(i.events[b][0]==="exit"&&i.events[b][1].type==="chunkFlow"){m=i.events[b][1].end;break}I(e);let C=w;for(;C<i.events.length;)i.events[C][1].end=Object.assign({},m),C++;return B(i.events,b+1,0,i.events.slice(w)),i.events.length=C,l(c)}return u(c)}function l(c){if(e===r.length){if(!s)return d(c);if(s.currentConstruct&&s.currentConstruct.concrete)return y(c);i.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return i.containerState={},n.check(en,x,g)(c)}function x(c){return s&&E(),I(e),d(c)}function g(c){return i.parser.lazy[i.now().line]=e!==r.length,o=i.now().offset,y(c)}function d(c){return i.containerState={},n.attempt(en,h,y)(c)}function h(c){return e++,r.push([i.currentConstruct,i.containerState]),d(c)}function y(c){if(c===null){s&&E(),I(0),n.consume(c);return}return s=s||i.parser.flow(i.now()),n.enter("chunkFlow",{contentType:"flow",previous:t,_tokenizer:s}),F(c)}function F(c){if(c===null){S(n.exit("chunkFlow"),!0),I(0),n.consume(c);return}return V(c)?(n.consume(c),S(n.exit("chunkFlow")),e=0,i.interrupt=void 0,u):(n.consume(c),F)}function S(c,w){const b=i.sliceStream(c);if(w&&b.push(null),c.previous=t,t&&(t.next=c),t=c,s.defineSkip(c.start),s.write(b),i.parser.lazy[c.start.line]){let m=s.events.length;for(;m--;)if(s.events[m][1].start.offset<o&&(!s.events[m][1].end||s.events[m][1].end.offset>o))return;const C=i.events.length;let T=C,P,O;for(;T--;)if(i.events[T][0]==="exit"&&i.events[T][1].type==="chunkFlow"){if(P){O=i.events[T][1].end;break}P=!0}for(I(e),m=C;m<i.events.length;)i.events[m][1].end=Object.assign({},O),m++;B(i.events,T+1,0,i.events.slice(C)),i.events.length=m}}function I(c){let w=r.length;for(;w-- >c;){const b=r[w];i.containerState=b[1],b[0].exit.call(i,n)}r.length=c}function E(){s.write([null]),t=void 0,s=void 0,i.containerState._closeFlow=void 0}}function On(n,i,r){return K(n,n.attempt(this.parser.constructs.document,i,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const An={tokenize:jn};function jn(n){const i=this,r=n.attempt(hn,e,n.attempt(this.parser.constructs.flowInitial,s,K(n,n.attempt(this.parser.constructs.flow,s,n.attempt(pn,s)),"linePrefix")));return r;function e(t){if(t===null){n.consume(t);return}return n.enter("lineEndingBlank"),n.consume(t),n.exit("lineEndingBlank"),i.currentConstruct=void 0,r}function s(t){if(t===null){n.consume(t);return}return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),i.currentConstruct=void 0,r}}const Bn={resolveAll:ln()},Pn=on("string"),Ln=on("text");function on(n){return{tokenize:i,resolveAll:ln(n==="text"?$n:void 0)};function i(r){const e=this,s=this.parser.constructs[n],t=r.attempt(s,o,u);return o;function o(x){return l(x)?t(x):u(x)}function u(x){if(x===null){r.consume(x);return}return r.enter("data"),r.consume(x),a}function a(x){return l(x)?(r.exit("data"),t(x)):(r.consume(x),a)}function l(x){if(x===null)return!0;const g=s[x];let d=-1;if(g)for(;++d<g.length;){const h=g[d];if(!h.previous||h.previous.call(e,e.previous))return!0}return!1}}}function ln(n){return i;function i(r,e){let s=-1,t;for(;++s<=r.length;)t===void 0?r[s]&&r[s][1].type==="data"&&(t=s,s++):(!r[s]||r[s][1].type!=="data")&&(s!==t+2&&(r[t][1].end=r[s-1][1].end,r.splice(t+2,s-t-2),s=t+2),t=void 0);return n?n(r,e):r}}function $n(n,i){let r=0;for(;++r<=n.length;)if((r===n.length||n[r][1].type==="lineEnding")&&n[r-1][1].type==="data"){const e=n[r-1][1],s=i.sliceStream(e);let t=s.length,o=-1,u=0,a;for(;t--;){const l=s[t];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)u++,o--;if(o)break;o=-1}else if(l===-2)a=!0,u++;else if(l!==-1){t++;break}}if(u){const l={type:r===n.length||a||u<2?"lineSuffix":"hardBreakTrailing",start:{line:e.end.line,column:e.end.column-u,offset:e.end.offset-u,_index:e.start._index+t,_bufferIndex:t?o:e.start._bufferIndex+o},end:Object.assign({},e.end)};e.end=Object.assign({},l.start),e.start.offset===e.end.offset?Object.assign(e,l):(n.splice(r,0,["enter",l,i],["exit",l,i]),r+=2)}r++}return n}function Mn(n,i,r){let e=Object.assign(r?Object.assign({},r):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},t=[];let o=[],u=[];const a={consume:E,enter:c,exit:w,attempt:C(b),check:C(m),interrupt:C(m,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:h,sliceSerialize:d,now:y,defineSkip:F,write:g};let x=i.tokenize.call(l,a);return i.resolveAll&&t.push(i),l;function g(f){return o=dn(o,f),S(),o[o.length-1]!==null?[]:(T(i,0),l.events=Sn(t,l.events,l),l.events)}function d(f,p){return Dn(h(f),p)}function h(f){return Nn(o,f)}function y(){const{line:f,column:p,offset:v,_index:z,_bufferIndex:j}=e;return{line:f,column:p,offset:v,_index:z,_bufferIndex:j}}function F(f){s[f.line]=f.column,O()}function S(){let f;for(;e._index<o.length;){const p=o[e._index];if(typeof p=="string")for(f=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===f&&e._bufferIndex<p.length;)I(p.charCodeAt(e._bufferIndex));else I(p)}}function I(f){x=x(f)}function E(f){V(f)?(e.line++,e.column=1,e.offset+=f===-3?2:1,O()):f!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===o[e._index].length&&(e._bufferIndex=-1,e._index++)),l.previous=f}function c(f,p){const v=p||{};return v.type=f,v.start=y(),l.events.push(["enter",v,l]),u.push(v),v}function w(f){const p=u.pop();return p.end=y(),l.events.push(["exit",p,l]),p}function b(f,p){T(f,p.from)}function m(f,p){p.restore()}function C(f,p){return v;function v(z,j,L){let D,$,W,R;return Array.isArray(z)?q(z):"tokenize"in z?q([z]):un(z);function un(k){return H;function H(A){const M=A!==null&&k[A],N=A!==null&&k.null,cn=[...Array.isArray(M)?M:M?[M]:[],...Array.isArray(N)?N:N?[N]:[]];return q(cn)(A)}}function q(k){return D=k,$=0,k.length===0?L:X(k[$])}function X(k){return H;function H(A){return R=P(),W=k,k.partial||(l.currentConstruct=k),k.name&&l.parser.constructs.disable.null.includes(k.name)?Y():k.tokenize.call(p?Object.assign(Object.create(l),p):l,a,an,Y)(A)}}function an(k){return f(W,R),j}function Y(k){return R.restore(),++$<D.length?X(D[$]):L}}}function T(f,p){f.resolveAll&&!t.includes(f)&&t.push(f),f.resolve&&B(l.events,p,l.events.length-p,f.resolve(l.events.slice(p),l)),f.resolveTo&&(l.events=f.resolveTo(l.events,l))}function P(){const f=y(),p=l.previous,v=l.currentConstruct,z=l.events.length,j=Array.from(u);return{restore:L,from:z};function L(){e=f,l.previous=p,l.currentConstruct=v,l.events.length=z,u=j,O()}}function O(){e.line in s&&e.column<2&&(e.column=s[e.line],e.offset+=s[e.line]-1)}}function Nn(n,i){const r=i.start._index,e=i.start._bufferIndex,s=i.end._index,t=i.end._bufferIndex;let o;if(r===s)o=[n[r].slice(e,t)];else{if(o=n.slice(r,s),e>-1){const u=o[0];typeof u=="string"?o[0]=u.slice(e):o.shift()}t>0&&o.push(n[s].slice(0,t))}return o}function Dn(n,i){let r=-1;const e=[];let s;for(;++r<n.length;){const t=n[r];let o;if(typeof t=="string")o=t;else switch(t){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=i?" ":"	";break}case-1:{if(!i&&s)continue;o=" ";break}default:o=String.fromCharCode(t)}s=t===-2,e.push(o)}return e.join("")}const Rn={42:_,43:_,45:_,48:_,49:_,50:_,51:_,52:_,53:_,54:_,55:_,56:_,57:_,62:xn},qn={91:gn},Hn={[-2]:Q,[-1]:Q,32:Q},Qn={35:mn,42:U,45:[Z,U],60:kn,61:Z,95:U,96:nn,126:nn},Un={38:rn,92:sn},Gn={[-5]:G,[-4]:G,[-3]:G,33:wn,38:rn,42:J,60:[bn,_n],91:yn,92:[Cn,sn],93:In,95:J,96:vn},Jn={null:[J,Bn]},Kn={null:[42,95]},Vn={null:[]},Wn=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Kn,contentInitial:qn,disable:Vn,document:Rn,flow:Qn,flowInitial:Hn,insideSpan:Jn,string:Un,text:Gn},Symbol.toStringTag,{value:"Module"}));function se(n){const r=fn([Wn,...(n||{}).extensions||[]]),e={defined:[],lazy:{},constructs:r,content:s(zn),document:s(Fn),flow:s(An),string:s(Pn),text:s(Ln)};return e;function s(t){return o;function o(u){return Mn(e,t,u)}}}function Xn(n){const i={};let r=-1,e,s,t,o,u,a,l;for(;++r<n.length;){for(;r in i;)r=i[r];if(e=n[r],r&&e[1].type==="chunkFlow"&&n[r-1][1].type==="listItemPrefix"&&(a=e[1]._tokenizer.events,t=0,t<a.length&&a[t][1].type==="lineEndingBlank"&&(t+=2),t<a.length&&a[t][1].type==="content"))for(;++t<a.length&&a[t][1].type!=="content";)a[t][1].type==="chunkText"&&(a[t][1]._isInFirstContentOfListItem=!0,t++);if(e[0]==="enter")e[1].contentType&&(Object.assign(i,Yn(n,r)),r=i[r],l=!0);else if(e[1]._container){for(t=r,s=void 0;t--&&(o=n[t],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(s&&(n[s][1].type="lineEndingBlank"),o[1].type="lineEnding",s=t);s&&(e[1].end=Object.assign({},n[s][1].start),u=n.slice(s,r),u.unshift(e),B(n,s,r-s+1,u))}}return!l}function Yn(n,i){const r=n[i][1],e=n[i][2];let s=i-1;const t=[],o=r._tokenizer||e.parser[r.contentType](r.start),u=o.events,a=[],l={};let x,g,d=-1,h=r,y=0,F=0;const S=[F];for(;h;){for(;n[++s][1]!==h;);t.push(s),h._tokenizer||(x=e.sliceStream(h),h.next||x.push(null),g&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(x),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),g=h,h=h.next}for(h=r;++d<u.length;)u[d][0]==="exit"&&u[d-1][0]==="enter"&&u[d][1].type===u[d-1][1].type&&u[d][1].start.line!==u[d][1].end.line&&(F=d+1,S.push(F),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):S.pop(),d=S.length;d--;){const I=u.slice(S[d],S[d+1]),E=t.pop();a.unshift([E,E+I.length-1]),B(n,E,2,I)}for(d=-1;++d<a.length;)l[y+a[d][0]]=y+a[d][1],y+=a[d][1]-a[d][0]-1;return l}function oe(n){for(;!Xn(n););return n}const tn=/[\0\t\n\r]/g;function le(){let n=1,i="",r=!0,e;return s;function s(t,o,u){const a=[];let l,x,g,d,h;for(t=i+(typeof t=="string"?t.toString():new TextDecoder(o||void 0).decode(t)),g=0,i="",r&&(t.charCodeAt(0)===65279&&g++,r=void 0);g<t.length;){if(tn.lastIndex=g,l=tn.exec(t),d=l&&l.index!==void 0?l.index:t.length,h=t.charCodeAt(d),!l){i=t.slice(g);break}if(h===10&&g===d&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),g<d&&(a.push(t.slice(g,d)),n+=d-g),h){case 0:{a.push(65533),n++;break}case 9:{for(x=Math.ceil(n/4)*4,a.push(-2);n++<x;)a.push(-1);break}case 10:{a.push(-4),n=1;break}default:e=!0,n=1}g=d+1}return u&&(e&&a.push(-5),i&&a.push(i),a.push(null)),a}}export{se as a,le as b,oe as p};
