import{d as Ie,a as Af,b as Lf,c as Bf}from"./dayjs.9271b02c.js";import{d as Vr}from"./@braintree.f19cff0e.js";import"./d3-transition.34008921.js";import"./d3-zoom.3be85aa0.js";import{p as Os}from"./dompurify.8e338605.js";import{s as pt,e as Oh}from"./d3-selection.6113bbad.js";import{w as Ki,G as nr,l as ns,a as Ph,r as Ff,b as If,i as sr,c as Mh}from"./dagre-d3-es.3600c2ae.js";import{a as ss,b as Df,d as Rf,e as Nf,f as Of,g as Pf,h as Mf,i as Vf,j as zf,k as qf,m as Wf,n as Yf,c as ri,o as Hf,p as Uf,q as jf,r as Gf,s as Xf,t as $f,u as Qf,l as xr,v as rn,w as Kf}from"./d3-shape.61cba864.js";import{l as Ct,a as st,i as bt,r as An,d as wt,b as zr,c as Zf}from"./khroma.dc7cc5cc.js";import{v as Jf}from"./uuid.55471c42.js";import{t as tp,l as Pn,o as Vh,b as sc}from"./d3-scale.53920ec2.js";import{m as ep,e as ip}from"./d3-array.58f6faf7.js";import{h as rp}from"./d3-interpolate.4ba04183.js";import{a as np,b as sp}from"./d3-axis.8d489beb.js";import{t as ac}from"./d3-time-format.97d0bb68.js";import{d as oc,b as lc,a as cc,t as hc,s as uc,n as dc,i as ap,o as op,p as lp,j as cp,q as hp,r as up,c as dp}from"./d3-time.1f25ed1e.js";import{E as fp}from"./elkjs.81de41dc.js";import{d as zh}from"./ts-dedent.356e4a49.js";import{s as qh}from"./micromark-util-subtokenize.5284e242.js";import{d as Go}from"./decode-named-character-reference.29ded5ae.js";import{d as Wh}from"./micromark-util-decode-numeric-character-reference.bd25dc10.js";import{c as Yh}from"./cytoscape.80b55ff7.js";import{c as pp}from"./cytoscape-cose-bilkent.f92ddd4f.js";import{H as Xo,A as gp,d as qa}from"./lodash-es.d20cff6b.js";import{s as yp,a as mp,c as xp}from"./stylis.fad5b415.js";import{S as bp,s as kp,l as _p,r as Tp,c as Cp,j as Ep}from"./d3-sankey.15198533.js";import{s as Sp}from"./d3-scale-chromatic.1b767f5e.js";const wp="modulepreload",vp=function(t){return"/agentflowpages/"+t},fc={},he=function(e,i,r){if(!i||i.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=vp(s),s in fc)return;fc[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let u=n.length-1;u>=0;u--){const f=n[u];if(f.href===s&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":wp,a||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),a)return new Promise((u,f)=>{h.addEventListener("load",u),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},Ui={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},D={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},$o=function(t="fatal"){let e=Ui.fatal;typeof t=="string"?(t=t.toLowerCase(),t in Ui&&(e=Ui[t])):typeof t=="number"&&(e=t),D.trace=()=>{},D.debug=()=>{},D.info=()=>{},D.warn=()=>{},D.error=()=>{},D.fatal=()=>{},e<=Ui.fatal&&(D.fatal=console.error?console.error.bind(console,li("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",li("FATAL"))),e<=Ui.error&&(D.error=console.error?console.error.bind(console,li("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",li("ERROR"))),e<=Ui.warn&&(D.warn=console.warn?console.warn.bind(console,li("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",li("WARN"))),e<=Ui.info&&(D.info=console.info?console.info.bind(console,li("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",li("INFO"))),e<=Ui.debug&&(D.debug=console.debug?console.debug.bind(console,li("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",li("DEBUG"))),e<=Ui.trace&&(D.trace=console.debug?console.debug.bind(console,li("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",li("TRACE")))},li=t=>`%c${Ie().format("ss.SSS")} : ${t} : `,as=/<br\s*\/?>/gi,Ap=t=>t?Uh(t).replace(/\\n/g,"#br#").split("#br#"):[""],Hh=t=>Os.sanitize(t),pc=(t,e)=>{var i;if(((i=e.flowchart)==null?void 0:i.htmlLabels)!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=Hh(t):r!=="loose"&&(t=Uh(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=Ip(t))}return t},Ce=(t,e)=>t&&(e.dompurifyConfig?t=Os.sanitize(pc(t,e),e.dompurifyConfig).toString():t=Os.sanitize(pc(t,e),{FORBID_TAGS:["style"]}).toString(),t),Lp=(t,e)=>typeof t=="string"?Ce(t,e):t.flat().map(i=>Ce(i,e)),Bp=t=>as.test(t),Fp=t=>t.split(as),Ip=t=>t.replace(/#br#/g,"<br/>"),Uh=t=>t.replace(as,"#br#"),Dp=t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},me=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),Rp=function(...t){const e=t.filter(i=>!isNaN(i));return Math.max(...e)},Np=function(...t){const e=t.filter(i=>!isNaN(i));return Math.min(...e)},Ln=function(t){const e=t.split(/(,)/),i=[];for(let r=0;r<e.length;r++){let n=e[r];if(n===","&&r>0&&r+1<e.length){const s=e[r-1],a=e[r+1];Op(s,a)&&(n=s+","+a,r++,i.pop())}i.push(Pp(n))}return i.join("")},Ja=(t,e)=>Math.max(0,t.split(e).length-1),Op=(t,e)=>{const i=Ja(t,"~"),r=Ja(e,"~");return i===1&&r===1},Pp=t=>{const e=Ja(t,"~");let i=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),i=!0);const r=[...t];let n=r.indexOf("~"),s=r.lastIndexOf("~");for(;n!==-1&&s!==-1&&n!==s;)r[n]="<",r[s]=">",n=r.indexOf("~"),s=r.lastIndexOf("~");return i&&r.unshift("~"),r.join("")},yt={getRows:Ap,sanitizeText:Ce,sanitizeTextOrArray:Lp,hasBreaks:Bp,splitBreaks:Fp,lineBreakRegex:as,removeScript:Hh,getUrl:Dp,evaluate:me,getMax:Rp,getMin:Np},Ve=(t,e)=>e?st(t,{s:-40,l:10}):st(t,{s:-40,l:-10}),pa="#ffffff",ga="#f2f2f2";let Mp=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var e,i,r,n,s,a,o,l,h,u,f;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||st(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||st(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Ve(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Ve(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||bt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||bt(this.tertiaryColor),this.lineColor=this.lineColor||bt(this.background),this.arrowheadColor=this.arrowheadColor||bt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?wt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||wt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||bt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ct(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||st(this.primaryColor,{h:30}),this.cScale4=this.cScale4||st(this.primaryColor,{h:60}),this.cScale5=this.cScale5||st(this.primaryColor,{h:90}),this.cScale6=this.cScale6||st(this.primaryColor,{h:120}),this.cScale7=this.cScale7||st(this.primaryColor,{h:150}),this.cScale8=this.cScale8||st(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||st(this.primaryColor,{h:270}),this.cScale10=this.cScale10||st(this.primaryColor,{h:300}),this.cScale11=this.cScale11||st(this.primaryColor,{h:330}),this.darkMode)for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=wt(this["cScale"+p],75);else for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=wt(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||bt(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||Ct(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||wt(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;const d=this.darkMode?-4:-1;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||st(this.mainBkg,{h:180,s:-15,l:d*(5+p*3)}),this["surfacePeer"+p]=this["surfacePeer"+p]||st(this.mainBkg,{h:180,s:-15,l:d*(8+p*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||st(this.primaryColor,{h:64}),this.fillType3=this.fillType3||st(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||st(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||st(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||st(this.primaryColor,{h:128}),this.fillType7=this.fillType7||st(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||st(this.primaryColor,{l:-10}),this.pie5=this.pie5||st(this.secondaryColor,{l:-10}),this.pie6=this.pie6||st(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||st(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||st(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||st(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||st(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||st(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||st(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||st(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||st(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||st(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||st(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||st(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||st(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zr(this.quadrant1Fill)?Ct(this.quadrant1Fill):wt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?wt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||st(this.primaryColor,{h:-30}),this.git4=this.git4||st(this.primaryColor,{h:-60}),this.git5=this.git5||st(this.primaryColor,{h:-90}),this.git6=this.git6||st(this.primaryColor,{h:60}),this.git7=this.git7||st(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=wt(this.git0,25),this.git1=wt(this.git1,25),this.git2=wt(this.git2,25),this.git3=wt(this.git3,25),this.git4=wt(this.git4,25),this.git5=wt(this.git5,25),this.git6=wt(this.git6,25),this.git7=wt(this.git7,25)),this.gitInv0=this.gitInv0||bt(this.git0),this.gitInv1=this.gitInv1||bt(this.git1),this.gitInv2=this.gitInv2||bt(this.git2),this.gitInv3=this.gitInv3||bt(this.git3),this.gitInv4=this.gitInv4||bt(this.git4),this.gitInv5=this.gitInv5||bt(this.git5),this.gitInv6=this.gitInv6||bt(this.git6),this.gitInv7=this.gitInv7||bt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||pa,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ga}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const Vp=t=>{const e=new Mp;return e.calculate(t),e};let zp=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ct(this.primaryColor,16),this.tertiaryColor=st(this.primaryColor,{h:-160}),this.primaryBorderColor=bt(this.background),this.secondaryBorderColor=Ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=bt(this.primaryColor),this.secondaryTextColor=bt(this.secondaryColor),this.tertiaryTextColor=bt(this.tertiaryColor),this.lineColor=bt(this.background),this.textColor=bt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ct(bt("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=An(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=wt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=wt(this.sectionBkgColor,10),this.taskBorderColor=An(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=An(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,i,r,n,s,a,o,l,h,u,f;this.secondBkg=Ct(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ct(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ct(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=st(this.primaryColor,{h:64}),this.fillType3=st(this.secondaryColor,{h:64}),this.fillType4=st(this.primaryColor,{h:-64}),this.fillType5=st(this.secondaryColor,{h:-64}),this.fillType6=st(this.primaryColor,{h:128}),this.fillType7=st(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||st(this.primaryColor,{h:30}),this.cScale4=this.cScale4||st(this.primaryColor,{h:60}),this.cScale5=this.cScale5||st(this.primaryColor,{h:90}),this.cScale6=this.cScale6||st(this.primaryColor,{h:120}),this.cScale7=this.cScale7||st(this.primaryColor,{h:150}),this.cScale8=this.cScale8||st(this.primaryColor,{h:210}),this.cScale9=this.cScale9||st(this.primaryColor,{h:270}),this.cScale10=this.cScale10||st(this.primaryColor,{h:300}),this.cScale11=this.cScale11||st(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||bt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||st(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||st(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||st(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||st(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||st(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||st(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||st(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||st(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zr(this.quadrant1Fill)?Ct(this.quadrant1Fill):wt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?wt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ct(this.secondaryColor,20),this.git1=Ct(this.pie2||this.secondaryColor,20),this.git2=Ct(this.pie3||this.tertiaryColor,20),this.git3=Ct(this.pie4||st(this.primaryColor,{h:-30}),20),this.git4=Ct(this.pie5||st(this.primaryColor,{h:-60}),20),this.git5=Ct(this.pie6||st(this.primaryColor,{h:-90}),10),this.git6=Ct(this.pie7||st(this.primaryColor,{h:60}),10),this.git7=Ct(this.pie8||st(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||bt(this.git0),this.gitInv1=this.gitInv1||bt(this.git1),this.gitInv2=this.gitInv2||bt(this.git2),this.gitInv3=this.gitInv3||bt(this.git3),this.gitInv4=this.gitInv4||bt(this.git4),this.gitInv5=this.gitInv5||bt(this.git5),this.gitInv6=this.gitInv6||bt(this.git6),this.gitInv7=this.gitInv7||bt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||bt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||bt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ct(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ct(this.background,2)}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const qp=t=>{const e=new zp;return e.calculate(t),e};let Wp=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=st(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=st(this.primaryColor,{h:-160}),this.primaryBorderColor=Ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=bt(this.primaryColor),this.secondaryTextColor=bt(this.secondaryColor),this.tertiaryTextColor=bt(this.tertiaryColor),this.lineColor=bt(this.background),this.textColor=bt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=An(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,i,r,n,s,a,o,l,h,u,f;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||st(this.primaryColor,{h:30}),this.cScale4=this.cScale4||st(this.primaryColor,{h:60}),this.cScale5=this.cScale5||st(this.primaryColor,{h:90}),this.cScale6=this.cScale6||st(this.primaryColor,{h:120}),this.cScale7=this.cScale7||st(this.primaryColor,{h:150}),this.cScale8=this.cScale8||st(this.primaryColor,{h:210}),this.cScale9=this.cScale9||st(this.primaryColor,{h:270}),this.cScale10=this.cScale10||st(this.primaryColor,{h:300}),this.cScale11=this.cScale11||st(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||wt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||wt(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=wt(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||wt(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||st(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||st(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||st(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||bt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||bt(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=st(this.primaryColor,{h:64}),this.fillType3=st(this.secondaryColor,{h:64}),this.fillType4=st(this.primaryColor,{h:-64}),this.fillType5=st(this.secondaryColor,{h:-64}),this.fillType6=st(this.primaryColor,{h:128}),this.fillType7=st(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||st(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||st(this.primaryColor,{l:-10}),this.pie5=this.pie5||st(this.secondaryColor,{l:-30}),this.pie6=this.pie6||st(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||st(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||st(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||st(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||st(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||st(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||st(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||st(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||st(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||st(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||st(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||st(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||st(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zr(this.quadrant1Fill)?Ct(this.quadrant1Fill):wt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||st(this.primaryColor,{h:-30}),this.git4=this.git4||st(this.primaryColor,{h:-60}),this.git5=this.git5||st(this.primaryColor,{h:-90}),this.git6=this.git6||st(this.primaryColor,{h:60}),this.git7=this.git7||st(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=wt(this.git0,25),this.git1=wt(this.git1,25),this.git2=wt(this.git2,25),this.git3=wt(this.git3,25),this.git4=wt(this.git4,25),this.git5=wt(this.git5,25),this.git6=wt(this.git6,25),this.git7=wt(this.git7,25)),this.gitInv0=this.gitInv0||wt(bt(this.git0),25),this.gitInv1=this.gitInv1||bt(this.git1),this.gitInv2=this.gitInv2||bt(this.git2),this.gitInv3=this.gitInv3||bt(this.git3),this.gitInv4=this.gitInv4||bt(this.git4),this.gitInv5=this.gitInv5||bt(this.git5),this.gitInv6=this.gitInv6||bt(this.git6),this.gitInv7=this.gitInv7||bt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||bt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||bt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||pa,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ga}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const Qo=t=>{const e=new Wp;return e.calculate(t),e};let Yp=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ct("#cde498",10),this.primaryBorderColor=Ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=bt(this.primaryColor),this.secondaryTextColor=bt(this.secondaryColor),this.tertiaryTextColor=bt(this.primaryColor),this.lineColor=bt(this.background),this.textColor=bt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,n,s,a,o,l,h,u,f;this.actorBorder=wt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||st(this.primaryColor,{h:30}),this.cScale4=this.cScale4||st(this.primaryColor,{h:60}),this.cScale5=this.cScale5||st(this.primaryColor,{h:90}),this.cScale6=this.cScale6||st(this.primaryColor,{h:120}),this.cScale7=this.cScale7||st(this.primaryColor,{h:150}),this.cScale8=this.cScale8||st(this.primaryColor,{h:210}),this.cScale9=this.cScale9||st(this.primaryColor,{h:270}),this.cScale10=this.cScale10||st(this.primaryColor,{h:300}),this.cScale11=this.cScale11||st(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||wt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||wt(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=wt(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||wt(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||st(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||st(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||st(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=st(this.primaryColor,{h:64}),this.fillType3=st(this.secondaryColor,{h:64}),this.fillType4=st(this.primaryColor,{h:-64}),this.fillType5=st(this.secondaryColor,{h:-64}),this.fillType6=st(this.primaryColor,{h:128}),this.fillType7=st(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||st(this.primaryColor,{l:-30}),this.pie5=this.pie5||st(this.secondaryColor,{l:-30}),this.pie6=this.pie6||st(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||st(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||st(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||st(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||st(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||st(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||st(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||st(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||st(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||st(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||st(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||st(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||st(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zr(this.quadrant1Fill)?Ct(this.quadrant1Fill):wt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||st(this.primaryColor,{h:-30}),this.git4=this.git4||st(this.primaryColor,{h:-60}),this.git5=this.git5||st(this.primaryColor,{h:-90}),this.git6=this.git6||st(this.primaryColor,{h:60}),this.git7=this.git7||st(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ct(this.git0,25),this.git1=Ct(this.git1,25),this.git2=Ct(this.git2,25),this.git3=Ct(this.git3,25),this.git4=Ct(this.git4,25),this.git5=Ct(this.git5,25),this.git6=Ct(this.git6,25),this.git7=Ct(this.git7,25)):(this.git0=wt(this.git0,25),this.git1=wt(this.git1,25),this.git2=wt(this.git2,25),this.git3=wt(this.git3,25),this.git4=wt(this.git4,25),this.git5=wt(this.git5,25),this.git6=wt(this.git6,25),this.git7=wt(this.git7,25)),this.gitInv0=this.gitInv0||bt(this.git0),this.gitInv1=this.gitInv1||bt(this.git1),this.gitInv2=this.gitInv2||bt(this.git2),this.gitInv3=this.gitInv3||bt(this.git3),this.gitInv4=this.gitInv4||bt(this.git4),this.gitInv5=this.gitInv5||bt(this.git5),this.gitInv6=this.gitInv6||bt(this.git6),this.gitInv7=this.gitInv7||bt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||bt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||bt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||pa,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ga}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}};const Hp=t=>{const e=new Yp;return e.calculate(t),e};class Up{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ct(this.contrast,55),this.background="#ffffff",this.tertiaryColor=st(this.primaryColor,{h:-160}),this.primaryBorderColor=Ve(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ve(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ve(this.tertiaryColor,this.darkMode),this.primaryTextColor=bt(this.primaryColor),this.secondaryTextColor=bt(this.secondaryColor),this.tertiaryTextColor=bt(this.tertiaryColor),this.lineColor=bt(this.background),this.textColor=bt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,i,r,n,s,a,o,l,h,u,f;this.secondBkg=Ct(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ct(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||bt(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||Ct(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||wt(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||st(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||st(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ct(this.contrast,30),this.sectionBkgColor2=Ct(this.contrast,30),this.taskBorderColor=wt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ct(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=wt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=st(this.primaryColor,{h:64}),this.fillType3=st(this.secondaryColor,{h:64}),this.fillType4=st(this.primaryColor,{h:-64}),this.fillType5=st(this.secondaryColor,{h:-64}),this.fillType6=st(this.primaryColor,{h:128}),this.fillType7=st(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||st(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||st(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||st(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||st(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||st(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||st(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zr(this.quadrant1Fill)?Ct(this.quadrant1Fill):wt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((h=this.xyChart)==null?void 0:h.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=wt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||st(this.primaryColor,{h:-30}),this.git4=this.pie5||st(this.primaryColor,{h:-60}),this.git5=this.pie6||st(this.primaryColor,{h:-90}),this.git6=this.pie7||st(this.primaryColor,{h:60}),this.git7=this.pie8||st(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||bt(this.git0),this.gitInv1=this.gitInv1||bt(this.git1),this.gitInv2=this.gitInv2||bt(this.git2),this.gitInv3=this.gitInv3||bt(this.git3),this.gitInv4=this.gitInv4||bt(this.git4),this.gitInv5=this.gitInv5||bt(this.git5),this.gitInv6=this.gitInv6||bt(this.git6),this.gitInv7=this.gitInv7||bt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||pa,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ga}calculate(e){if(typeof e!="object"){this.updateColors();return}const i=Object.keys(e);i.forEach(r=>{this[r]=e[r]}),this.updateColors(),i.forEach(r=>{this[r]=e[r]})}}const jp=t=>{const e=new Up;return e.calculate(t),e},er={base:{getThemeVariables:Vp},dark:{getThemeVariables:qp},default:{getThemeVariables:Qo},forest:{getThemeVariables:Hp},neutral:{getThemeVariables:jp}},ji={flowchart:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},theme:"default",maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,fontSize:16},jh={...ji,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:er.default.getThemeVariables(),sequence:{...ji.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...ji.gantt,tickInterval:void 0,useWidth:void 0},c4:{...ji.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...ji.pie,useWidth:984},xyChart:{...ji.xyChart,useWidth:void 0},requirement:{...ji.requirement,useWidth:void 0},gitGraph:{...ji.gitGraph,useMaxWidth:!1},sankey:{...ji.sankey,useMaxWidth:!1}},Gh=(t,e="")=>Object.keys(t).reduce((i,r)=>Array.isArray(t[r])?i:typeof t[r]=="object"&&t[r]!==null?[...i,e+r,...Gh(t[r],"")]:[...i,e+r],[]),Gp=new Set(Gh(jh,"")),le=jh,Ps=t=>{if(D.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Ps(e));return}for(const e of Object.keys(t)){if(D.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!Gp.has(e)||t[e]==null){D.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){D.debug("sanitizing object",e),Ps(t[e]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const r of i)e.includes(r)&&(D.debug("sanitizing css option",e),t[e]=Xp(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const i=t.themeVariables[e];i!=null&&i.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}D.debug("After sanitization",t)}},Xp=t=>{let e=0,i=0;for(const r of t){if(e<i)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&i++}return e!==i?"{ /* ERROR: Unbalanced CSS */ }":t},Xh=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Bn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,$p=/\s*%%.*\n/gm;class $h extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}}const nn={},ya=function(t,e){t=t.replace(Xh,"").replace(Bn,"").replace($p,`
`);for(const[i,{detector:r}]of Object.entries(nn))if(r(t,e))return i;throw new $h(`No diagram type detected matching given configuration for text: ${t}`)},Qh=(...t)=>{for(const{id:e,detector:i,loader:r}of t)Kh(e,i,r)},Kh=(t,e,i)=>{nn[t]?D.error(`Detector with key ${t} already exists`):nn[t]={detector:e,loader:i},D.debug(`Detector with key ${t} added${i?" with loader":""}`)},Qp=t=>nn[t].loader,to=(t,e,{depth:i=2,clobber:r=!1}={})=>{const n={depth:i,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>to(t,s,n)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||i<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=to(t[s],e[s],{depth:i-1,clobber:r})):(r||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},Te=to,Zh="​",Kp={curveBasis:ss,curveBasisClosed:Df,curveBasisOpen:Rf,curveBumpX:Nf,curveBumpY:Of,curveBundle:Pf,curveCardinalClosed:Mf,curveCardinalOpen:Vf,curveCardinal:zf,curveCatmullRomClosed:qf,curveCatmullRomOpen:Wf,curveCatmullRom:Yf,curveLinear:ri,curveLinearClosed:Hf,curveMonotoneX:Uf,curveMonotoneY:jf,curveNatural:Gf,curveStep:Xf,curveStepAfter:$f,curveStepBefore:Qf},Zp=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Jp=function(t,e){const i=Jh(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(i)){const a=i.map(o=>o.args);Ps(a),r=Te(r,[...a])}else r=i.args;if(!r)return;let n=ya(t,e);const s="config";return r[s]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),r[n]=r[s],delete r[s]),r},Jh=function(t,e=null){try{const i=new RegExp(`[%]{2}(?![{]${Zp.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),D.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const n=[];for(;(r=Bn.exec(t))!==null;)if(r.index===Bn.lastIndex&&Bn.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const s=r[1]?r[1]:r[2],a=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;n.push({type:s,args:a})}return n.length===0?{type:t,args:null}:n.length===1?n[0]:n}catch(i){return D.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},t2=function(t){return t.replace(Bn,"")},e2=function(t,e){for(const[i,r]of e.entries())if(r.match(t))return i;return-1};function pi(t,e){if(!t)return e;const i=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return Kp[i]??e}function i2(t,e){const i=t.trim();if(i)return e.securityLevel!=="loose"?Vr.sanitizeUrl(i):i}const r2=(t,...e)=>{const i=t.split("."),r=i.length-1,n=i[r];let s=window;for(let a=0;a<r;a++)if(s=s[i[a]],!s){D.error(`Function name: ${t} not found in window`);return}s[n](...e)};function tu(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function n2(t){let e,i=0;t.forEach(n=>{i+=tu(n,e),e=n});const r=i/2;return Ko(t,r)}function s2(t){return t.length===1?t[0]:n2(t)}const gc=(t,e=2)=>{const i=Math.pow(10,e);return Math.round(t*i)/i},Ko=(t,e)=>{let i,r=e;for(const n of t){if(i){const s=tu(n,i);if(s<r)r-=s;else{const a=r/s;if(a<=0)return i;if(a>=1)return{x:n.x,y:n.y};if(a>0&&a<1)return{x:gc((1-a)*i.x+a*n.x,5),y:gc((1-a)*i.y+a*n.y,5)}}}i=n}throw new Error("Could not find a suitable point for the given distance")},a2=(t,e,i)=>{D.info(`our points ${JSON.stringify(e)}`),e[0]!==i&&(e=e.reverse());const n=Ko(e,25),s=t?10:5,a=Math.atan2(e[0].y-n.y,e[0].x-n.x),o={x:0,y:0};return o.x=Math.sin(a)*s+(e[0].x+n.x)/2,o.y=-Math.cos(a)*s+(e[0].y+n.y)/2,o};function o2(t,e,i){const r=structuredClone(i);D.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const n=25+t,s=Ko(r,n),a=10+t*.5,o=Math.atan2(r[0].y-s.y,r[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(r[0].x+s.x)/2,l.y=-Math.cos(o+Math.PI)*a+(r[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(r[0].x+s.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(r[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(o)*a+(r[0].x+s.x)/2-5,l.y=-Math.cos(o)*a+(r[0].y+s.y)/2-5):(l.x=Math.sin(o)*a+(r[0].x+s.x)/2,l.y=-Math.cos(o)*a+(r[0].y+s.y)/2),l}function Ci(t){let e="",i="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":e=e+r+";");return{style:e,labelStyle:i}}let yc=0;const eu=()=>(yc++,"id-"+Math.random().toString(36).substr(2,12)+"-"+yc);function l2(t){let e="";const i="0123456789abcdef",r=i.length;for(let n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*r));return e}const iu=t=>l2(t.length),c2=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},h2=function(t,e){const i=e.text.replace(yt.lineBreakRegex," "),[,r]=mn(e.fontSize),n=t.append("text");n.attr("x",e.x),n.attr("y",e.y),n.style("text-anchor",e.anchor),n.style("font-family",e.fontFamily),n.style("font-size",r),n.style("font-weight",e.fontWeight),n.attr("fill",e.fill),e.class!==void 0&&n.attr("class",e.class);const s=n.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(i),n},ru=Xo((t,e,i)=>{if(!t||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),yt.lineBreakRegex.test(t)))return t;const r=t.split(" "),n=[];let s="";return r.forEach((a,o)=>{const l=Fi(`${a} `,i),h=Fi(s,i);if(l>e){const{hyphenatedStrings:d,remainingWord:p}=u2(a,e,"-",i);n.push(s,...d),s=p}else h+l>=e?(n.push(s),s=a):s=[s,a].filter(Boolean).join(" ");o+1===r.length&&n.push(s)}),n.filter(a=>a!=="").join(i.joinWith)},(t,e,i)=>`${t}${e}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),u2=Xo((t,e,i="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const n=[...t],s=[];let a="";return n.forEach((o,l)=>{const h=`${a}${o}`;if(Fi(h,r)>=e){const f=l+1,d=n.length===f,p=`${h}${i}`;s.push(d?h:p),a=""}else a=h}),{hyphenatedStrings:s,remainingWord:a}},(t,e,i="-",r)=>`${t}${e}${i}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function eo(t,e){return Zo(t,e).height}function Fi(t,e){return Zo(t,e).width}const Zo=Xo((t,e)=>{const{fontSize:i=12,fontFamily:r="Arial",fontWeight:n=400}=e;if(!t)return{width:0,height:0};const[,s]=mn(i),a=["sans-serif",r],o=t.split(yt.lineBreakRegex),l=[],h=pt("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const d of a){let p=0;const y={width:0,height:0,lineHeight:0};for(const b of o){const C=c2();C.text=b||Zh;const E=h2(u,C).style("font-size",s).style("font-weight",n).style("font-family",d),k=(E._groups||E)[0][0].getBBox();if(k.width===0&&k.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,k.width)),p=Math.round(k.height),y.height+=p,y.lineHeight=Math.round(Math.max(y.lineHeight,p))}l.push(y)}u.remove();const f=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[f]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`);class d2{constructor(e=!1,i){this.count=0,this.count=i?i.length:0,this.next=e?()=>this.count++:()=>Date.now()}}let bs;const f2=function(t){return bs=bs||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),bs.innerHTML=t,unescape(bs.textContent)};function nu(t){return"str"in t}const p2=(t,e,i,r)=>{var n;if(!r)return;const s=(n=t.node())==null?void 0:n.getBBox();s&&t.append("text").text(r).attr("x",s.x+s.width/2).attr("y",-i).attr("class",e)},mn=t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]};function os(t,e){return gp({},t,e)}const Rt={assignWithDepth:Te,wrapLabel:ru,calculateTextHeight:eo,calculateTextWidth:Fi,calculateTextDimensions:Zo,cleanAndMerge:os,detectInit:Jp,detectDirective:Jh,isSubstringInArray:e2,interpolateToCurve:pi,calcLabelPosition:s2,calcCardinalityPosition:a2,calcTerminalLabelPosition:o2,formatUrl:i2,getStylesFromArray:Ci,generateId:eu,random:iu,runFunc:r2,entityDecode:f2,insertTitle:p2,parseFontSize:mn,InitIDGenerator:d2},mc="10.6.1",sn=Object.freeze(le);let $e=Te({},sn),su,an=[],Fn=Te({},sn);const ma=(t,e)=>{let i=Te({},t),r={};for(const n of e)lu(n),r=Te(r,n);if(i=Te(i,r),r.theme&&r.theme in er){const n=Te({},su),s=Te(n.themeVariables||{},r.themeVariables);i.theme&&i.theme in er&&(i.themeVariables=er[i.theme].getThemeVariables(s))}return Fn=i,cu(Fn),Fn},g2=t=>($e=Te({},sn),$e=Te($e,t),t.theme&&er[t.theme]&&($e.themeVariables=er[t.theme].getThemeVariables(t.themeVariables)),ma($e,an),$e),y2=t=>{su=Te({},t)},m2=t=>($e=Te($e,t),ma($e,an),$e),au=()=>Te({},$e),ou=t=>(cu(t),Te(Fn,t),we()),we=()=>Te({},Fn),lu=t=>{t&&(["secure",...$e.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(D.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&lu(t[e])}))},x2=t=>{Ps(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),an.push(t),ma($e,an)},Ms=(t=$e)=>{an=[],ma(t,an)},b2={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},xc={},k2=t=>{xc[t]||(D.warn(b2[t]),xc[t]=!0)},cu=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&k2("LAZY_LOAD_DEPRECATED")},hu="c4",_2=t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),T2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>Vx),void 0);return{id:hu,diagram:t}},C2={id:hu,detector:_2,loader:T2},E2=C2,uu="flowchart",S2=(t,e)=>{var i,r;return((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},w2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>Sk),void 0);return{id:uu,diagram:t}},v2={id:uu,detector:S2,loader:w2},A2=v2,du="flowchart-v2",L2=(t,e)=>{var i,r,n;return((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-d3"||((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)&&((n=e==null?void 0:e.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)},B2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>vk),void 0);return{id:du,diagram:t}},F2={id:du,detector:L2,loader:B2},I2=F2,fu="er",D2=t=>/^\s*erDiagram/.test(t),R2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>Zk),void 0);return{id:fu,diagram:t}},N2={id:fu,detector:D2,loader:R2},O2=N2,pu="gitGraph",P2=t=>/^\s*gitGraph/.test(t),M2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>A6),void 0);return{id:pu,diagram:t}},V2={id:pu,detector:P2,loader:M2},z2=V2,gu="gantt",q2=t=>/^\s*gantt/.test(t),W2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>x_),void 0);return{id:gu,diagram:t}},Y2={id:gu,detector:q2,loader:W2},H2=Y2,yu="info",U2=t=>/^\s*info/.test(t),j2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>v_),void 0);return{id:yu,diagram:t}},G2={id:yu,detector:U2,loader:j2},mu="pie",X2=t=>/^\s*pie/.test(t),$2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>H_),void 0);return{id:mu,diagram:t}},Q2={id:mu,detector:X2,loader:$2},xu="quadrantChart",K2=t=>/^\s*quadrantChart/.test(t),Z2=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>u7),void 0);return{id:xu,diagram:t}},J2={id:xu,detector:K2,loader:Z2},tg=J2,bu="xychart",eg=t=>/^\s*xychart-beta/.test(t),ig=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>z7),void 0);return{id:bu,diagram:t}},rg={id:bu,detector:eg,loader:ig},ng=rg,ku="requirement",sg=t=>/^\s*requirement(Diagram)?/.test(t),ag=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>x8),void 0);return{id:ku,diagram:t}},og={id:ku,detector:sg,loader:ag},lg=og,_u="sequence",cg=t=>/^\s*sequenceDiagram/.test(t),hg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>wT),void 0);return{id:_u,diagram:t}},ug={id:_u,detector:cg,loader:hg},dg=ug,Tu="class",fg=(t,e)=>{var i;return((i=e==null?void 0:e.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},pg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>aC),void 0);return{id:Tu,diagram:t}},gg={id:Tu,detector:fg,loader:pg},yg=gg,Cu="classDiagram",mg=(t,e)=>{var i;return/^\s*classDiagram/.test(t)&&((i=e==null?void 0:e.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},xg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>pC),void 0);return{id:Cu,diagram:t}},bg={id:Cu,detector:mg,loader:xg},kg=bg,Eu="state",_g=(t,e)=>{var i;return((i=e==null?void 0:e.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},Tg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>nE),void 0);return{id:Eu,diagram:t}},Cg={id:Eu,detector:_g,loader:Tg},Eg=Cg,Su="stateDiagram",Sg=(t,e)=>{var i;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((i=e==null?void 0:e.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper")},wg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>BE),void 0);return{id:Su,diagram:t}},vg={id:Su,detector:Sg,loader:wg},Ag=vg,wu="journey",Lg=t=>/^\s*journey/.test(t),Bg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>JE),void 0);return{id:wu,diagram:t}},Fg={id:wu,detector:Lg,loader:Bg},Ig=Fg,Dg=function(t,e){for(let i of e)t.attr(i[0],i[1])},Rg=function(t,e,i){let r=new Map;return i?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},Ne=function(t,e,i,r){const n=Rg(e,i,r);Dg(t,n)},qr=function(t,e,i,r){const n=e.node().getBBox(),s=n.width,a=n.height;D.info(`SVG bounds: ${s}x${a}`,n);let o=0,l=0;D.info(`Graph bounds: ${o}x${l}`,t),o=s+i*2,l=a+i*2,D.info(`Calculated bounds: ${o}x${l}`),Ne(e,l,o,r);const h=`${n.x-i} ${n.y-i} ${n.width+2*i} ${n.height+2*i}`;e.attr("viewBox",h)},Ss={},Ng=(t,e,i)=>{let r="";return t in Ss&&Ss[t]?r=Ss[t](i):D.warn(`No theme found for ${t}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${e}
`},Og=(t,e)=>{e!==void 0&&(Ss[t]=e)},Pg=Ng;let Jo="",tl="",el="";const il=t=>Ce(t,we()),We=()=>{Jo="",el="",tl=""},Oe=t=>{Jo=il(t).replace(/^\s+/g,"")},Ye=()=>Jo,He=t=>{el=il(t).replace(/\n\s+/g,`
`)},Ue=()=>el,ni=t=>{tl=il(t)},je=()=>tl,vu=Object.freeze(Object.defineProperty({__proto__:null,clear:We,getAccDescription:Ue,getAccTitle:Ye,getDiagramTitle:je,setAccDescription:He,setAccTitle:Oe,setDiagramTitle:ni},Symbol.toStringTag,{value:"Module"})),Mg=D,Vg=$o,G=we,zg=ou,Au=sn,qg=t=>Ce(t,G()),Lu=qr,Wg=()=>vu,Vs={},zs=(t,e,i)=>{var r;if(Vs[t])throw new Error(`Diagram ${t} already registered.`);Vs[t]=e,i&&Kh(t,i),Og(t,e.styles),(r=e.injectUtils)==null||r.call(e,Mg,Vg,G,qg,Lu,Wg(),()=>{})},rl=t=>{if(t in Vs)return Vs[t];throw new Yg(t)};class Yg extends Error{constructor(e){super(`Diagram ${e} not found.`)}}const xa=t=>{var e;const{securityLevel:i}=G();let r=pt("body");if(i==="sandbox"){const a=((e=pt(`#i${t}`).node())==null?void 0:e.contentDocument)??document;r=pt(a.body)}return r.select(`#${t}`)},Hg=(t,e,i)=>{D.debug(`renering svg for syntax error
`);const r=xa(e);r.attr("viewBox","0 0 2412 512"),Ne(r,100,512,!0);const n=r.append("g");n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},Bu={draw:Hg},Ug=Bu,jg={db:{},renderer:Bu,parser:{parser:{yy:{}},parse:()=>{}}},Gg=jg,Fu="flowchart-elk",Xg=(t,e)=>{var i;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="elk")},$g=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>yS),void 0);return{id:Fu,diagram:t}},Qg={id:Fu,detector:Xg,loader:$g},Kg=Qg,Iu="timeline",Zg=t=>/^\s*timeline/.test(t),Jg=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>VS),void 0);return{id:Iu,diagram:t}},ty={id:Iu,detector:Zg,loader:Jg},ey=ty,Du="mindmap",iy=t=>/^\s*mindmap/.test(t),ry=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>mw),void 0);return{id:Du,diagram:t}},ny={id:Du,detector:iy,loader:ry},sy=ny,Ru="sankey",ay=t=>/^\s*sankey-beta/.test(t),oy=async()=>{const{diagram:t}=await he(()=>Promise.resolve().then(()=>Dw),void 0);return{id:Ru,diagram:t}},ly={id:Ru,detector:ay,loader:oy},cy=ly;let bc=!1;const nl=()=>{bc||(bc=!0,zs("error",Gg,t=>t.toLowerCase().trim()==="error"),zs("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),Qh(E2,kg,yg,O2,H2,G2,Q2,lg,dg,Kg,I2,A2,sy,ey,z2,Ag,Eg,Ig,tg,cy,ng))};class Nu{constructor(e,i={}){this.text=e,this.metadata=i,this.type="graph",this.text+=`
`;const r=we();try{this.type=ya(e,r)}catch(s){this.type="error",this.detectError=s}const n=rl(this.type);D.debug("Type "+this.type),this.db=n.db,this.renderer=n.renderer,this.parser=n.parser,this.parser.parser.yy=this.db,this.init=n.init,this.parse()}parse(){var e,i,r,n,s;if(this.detectError)throw this.detectError;(i=(e=this.db).clear)==null||i.call(e);const a=we();(r=this.init)==null||r.call(this,a),this.metadata.title&&((s=(n=this.db).setDiagramTitle)==null||s.call(n,this.metadata.title)),this.parser.parse(this.text)}async render(e,i){await this.renderer.draw(this.text,e,i,this)}getParser(){return this.parser}getType(){return this.type}}const sl=async(t,e={})=>{const i=ya(t,we());try{rl(i)}catch{const n=Qp(i);if(!n)throw new $h(`Diagram ${i} not found.`);const{id:s,diagram:a}=await n();zs(s,a)}return new Nu(t,e)};let io=[];const hy=t=>{io.push(t)},uy=()=>{io.forEach(t=>{t()}),io=[]},dy="graphics-document document";function fy(t,e){t.attr("role",dy),e!==""&&t.attr("aria-roledescription",e)}function py(t,e,i,r){if(t.insert!==void 0){if(i){const n=`chart-desc-${r}`;t.attr("aria-describedby",n),t.insert("desc",":first-child").attr("id",n).text(i)}if(e){const n=`chart-title-${r}`;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(e)}}}const gy=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Ou(t){return typeof t>"u"||t===null}function yy(t){return typeof t=="object"&&t!==null}function my(t){return Array.isArray(t)?t:Ou(t)?[]:[t]}function xy(t,e){var i,r,n,s;if(e)for(s=Object.keys(e),i=0,r=s.length;i<r;i+=1)n=s[i],t[n]=e[n];return t}function by(t,e){var i="",r;for(r=0;r<e;r+=1)i+=t;return i}function ky(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var _y=Ou,Ty=yy,Cy=my,Ey=by,Sy=ky,wy=xy,Me={isNothing:_y,isObject:Ty,toArray:Cy,repeat:Ey,isNegativeZero:Sy,extend:wy};function Pu(t,e){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function Mn(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Pu(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Mn.prototype=Object.create(Error.prototype);Mn.prototype.constructor=Mn;Mn.prototype.toString=function(e){return this.name+": "+Pu(this,e)};var $i=Mn;function Wa(t,e,i,r,n){var s="",a="",o=Math.floor(n/2)-1;return r-e>o&&(s=" ... ",e=r-o+s.length),i-r>o&&(a=" ...",i=r+o-a.length),{str:s+t.slice(e,i).replace(/\t/g,"→")+a,pos:r-e+s.length}}function Ya(t,e){return Me.repeat(" ",e-t.length)+t}function vy(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],n=[],s,a=-1;s=i.exec(t.buffer);)n.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var o="",l,h,u=Math.min(t.line+e.linesAfter,n.length).toString().length,f=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)h=Wa(t.buffer,r[a-l],n[a-l],t.position-(r[a]-r[a-l]),f),o=Me.repeat(" ",e.indent)+Ya((t.line-l+1).toString(),u)+" | "+h.str+`
`+o;for(h=Wa(t.buffer,r[a],n[a],t.position,f),o+=Me.repeat(" ",e.indent)+Ya((t.line+1).toString(),u)+" | "+h.str+`
`,o+=Me.repeat("-",e.indent+u+3+h.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=n.length);l++)h=Wa(t.buffer,r[a+l],n[a+l],t.position-(r[a]-r[a+l]),f),o+=Me.repeat(" ",e.indent)+Ya((t.line+l+1).toString(),u)+" | "+h.str+`
`;return o.replace(/\n$/,"")}var Ay=vy,Ly=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],By=["scalar","sequence","mapping"];function Fy(t){var e={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){e[String(r)]=i})}),e}function Iy(t,e){if(e=e||{},Object.keys(e).forEach(function(i){if(Ly.indexOf(i)===-1)throw new $i('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Fy(e.styleAliases||null),By.indexOf(this.kind)===-1)throw new $i('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Re=Iy;function kc(t,e){var i=[];return t[e].forEach(function(r){var n=i.length;i.forEach(function(s,a){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(n=a)}),i[n]=r}),i}function Dy(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function r(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(r);return t}function ro(t){return this.extend(t)}ro.prototype.extend=function(e){var i=[],r=[];if(e instanceof Re)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new $i("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(s){if(!(s instanceof Re))throw new $i("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new $i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new $i("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Re))throw new $i("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(ro.prototype);return n.implicit=(this.implicit||[]).concat(i),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=kc(n,"implicit"),n.compiledExplicit=kc(n,"explicit"),n.compiledTypeMap=Dy(n.compiledImplicit,n.compiledExplicit),n};var Ry=ro,Ny=new Re("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Oy=new Re("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Py=new Re("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),My=new Ry({explicit:[Ny,Oy,Py]});function Vy(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function zy(){return null}function qy(t){return t===null}var Wy=new Re("tag:yaml.org,2002:null",{kind:"scalar",resolve:Vy,construct:zy,predicate:qy,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Yy(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Hy(t){return t==="true"||t==="True"||t==="TRUE"}function Uy(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var jy=new Re("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Yy,construct:Hy,predicate:Uy,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Gy(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Xy(t){return 48<=t&&t<=55}function $y(t){return 48<=t&&t<=57}function Qy(t){if(t===null)return!1;var e=t.length,i=0,r=!1,n;if(!e)return!1;if(n=t[i],(n==="-"||n==="+")&&(n=t[++i]),n==="0"){if(i+1===e)return!0;if(n=t[++i],n==="b"){for(i++;i<e;i++)if(n=t[i],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(i++;i<e;i++)if(n=t[i],n!=="_"){if(!Gy(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(i++;i<e;i++)if(n=t[i],n!=="_"){if(!Xy(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;i<e;i++)if(n=t[i],n!=="_"){if(!$y(t.charCodeAt(i)))return!1;r=!0}return!(!r||n==="_")}function Ky(t){var e=t,i=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return i*parseInt(e.slice(2),2);if(e[1]==="x")return i*parseInt(e.slice(2),16);if(e[1]==="o")return i*parseInt(e.slice(2),8)}return i*parseInt(e,10)}function Zy(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Me.isNegativeZero(t)}var Jy=new Re("tag:yaml.org,2002:int",{kind:"scalar",resolve:Qy,construct:Ky,predicate:Zy,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),tm=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function em(t){return!(t===null||!tm.test(t)||t[t.length-1]==="_")}function im(t){var e,i;return e=t.replace(/_/g,"").toLowerCase(),i=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:i*parseFloat(e,10)}var rm=/^[-+]?[0-9]+e/;function nm(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Me.isNegativeZero(t))return"-0.0";return i=t.toString(10),rm.test(i)?i.replace("e",".e"):i}function sm(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Me.isNegativeZero(t))}var am=new Re("tag:yaml.org,2002:float",{kind:"scalar",resolve:em,construct:im,predicate:sm,represent:nm,defaultStyle:"lowercase"}),Mu=My.extend({implicit:[Wy,jy,Jy,am]}),om=Mu,Vu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),zu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lm(t){return t===null?!1:Vu.exec(t)!==null||zu.exec(t)!==null}function cm(t){var e,i,r,n,s,a,o,l=0,h=null,u,f,d;if(e=Vu.exec(t),e===null&&(e=zu.exec(t)),e===null)throw new Error("Date resolve error");if(i=+e[1],r=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(i,r,n));if(s=+e[4],a=+e[5],o=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],f=+(e[11]||0),h=(u*60+f)*6e4,e[9]==="-"&&(h=-h)),d=new Date(Date.UTC(i,r,n,s,a,o,l)),h&&d.setTime(d.getTime()-h),d}function hm(t){return t.toISOString()}var um=new Re("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lm,construct:cm,instanceOf:Date,represent:hm});function dm(t){return t==="<<"||t===null}var fm=new Re("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dm}),al=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pm(t){if(t===null)return!1;var e,i,r=0,n=t.length,s=al;for(i=0;i<n;i++)if(e=s.indexOf(t.charAt(i)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function gm(t){var e,i,r=t.replace(/[\r\n=]/g,""),n=r.length,s=al,a=0,o=[];for(e=0;e<n;e++)e%4===0&&e&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(r.charAt(e));return i=n%4*6,i===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):i===18?(o.push(a>>10&255),o.push(a>>2&255)):i===12&&o.push(a>>4&255),new Uint8Array(o)}function ym(t){var e="",i=0,r,n,s=t.length,a=al;for(r=0;r<s;r++)r%3===0&&r&&(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]),i=(i<<8)+t[r];return n=s%3,n===0?(e+=a[i>>18&63],e+=a[i>>12&63],e+=a[i>>6&63],e+=a[i&63]):n===2?(e+=a[i>>10&63],e+=a[i>>4&63],e+=a[i<<2&63],e+=a[64]):n===1&&(e+=a[i>>2&63],e+=a[i<<4&63],e+=a[64],e+=a[64]),e}function mm(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var xm=new Re("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pm,construct:gm,predicate:mm,represent:ym}),bm=Object.prototype.hasOwnProperty,km=Object.prototype.toString;function _m(t){if(t===null)return!0;var e=[],i,r,n,s,a,o=t;for(i=0,r=o.length;i<r;i+=1){if(n=o[i],a=!1,km.call(n)!=="[object Object]")return!1;for(s in n)if(bm.call(n,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function Tm(t){return t!==null?t:[]}var Cm=new Re("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_m,construct:Tm}),Em=Object.prototype.toString;function Sm(t){if(t===null)return!0;var e,i,r,n,s,a=t;for(s=new Array(a.length),e=0,i=a.length;e<i;e+=1){if(r=a[e],Em.call(r)!=="[object Object]"||(n=Object.keys(r),n.length!==1))return!1;s[e]=[n[0],r[n[0]]]}return!0}function wm(t){if(t===null)return[];var e,i,r,n,s,a=t;for(s=new Array(a.length),e=0,i=a.length;e<i;e+=1)r=a[e],n=Object.keys(r),s[e]=[n[0],r[n[0]]];return s}var vm=new Re("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Sm,construct:wm}),Am=Object.prototype.hasOwnProperty;function Lm(t){if(t===null)return!0;var e,i=t;for(e in i)if(Am.call(i,e)&&i[e]!==null)return!1;return!0}function Bm(t){return t!==null?t:{}}var Fm=new Re("tag:yaml.org,2002:set",{kind:"mapping",resolve:Lm,construct:Bm}),Im=om.extend({implicit:[um,fm],explicit:[xm,Cm,vm,Fm]}),br=Object.prototype.hasOwnProperty,qs=1,qu=2,Wu=3,Ws=4,Ha=1,Dm=2,_c=3,Rm=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Nm=/[\x85\u2028\u2029]/,Om=/[,\[\]\{\}]/,Yu=/^(?:!|!!|![a-z\-]+!)$/i,Hu=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Tc(t){return Object.prototype.toString.call(t)}function Ii(t){return t===10||t===13}function Fr(t){return t===9||t===32}function Ze(t){return t===9||t===32||t===10||t===13}function $r(t){return t===44||t===91||t===93||t===123||t===125}function Pm(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Mm(t){return t===120?2:t===117?4:t===85?8:0}function Vm(t){return 48<=t&&t<=57?t-48:-1}function Cc(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function zm(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Uu=new Array(256),ju=new Array(256);for(var jr=0;jr<256;jr++)Uu[jr]=Cc(jr)?1:0,ju[jr]=Cc(jr);function qm(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Im,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gu(t,e){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=Ay(i),new $i(e,i)}function St(t,e){throw Gu(t,e)}function Ys(t,e){t.onWarning&&t.onWarning.call(null,Gu(t,e))}var Ec={YAML:function(e,i,r){var n,s,a;e.version!==null&&St(e,"duplication of %YAML directive"),r.length!==1&&St(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),n===null&&St(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),a=parseInt(n[2],10),s!==1&&St(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Ys(e,"unsupported YAML version of the document")},TAG:function(e,i,r){var n,s;r.length!==2&&St(e,"TAG directive accepts exactly two arguments"),n=r[0],s=r[1],Yu.test(n)||St(e,"ill-formed tag handle (first argument) of the TAG directive"),br.call(e.tagMap,n)&&St(e,'there is a previously declared suffix for "'+n+'" tag handle'),Hu.test(s)||St(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{St(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s}};function gr(t,e,i,r){var n,s,a,o;if(e<i){if(o=t.input.slice(e,i),r)for(n=0,s=o.length;n<s;n+=1)a=o.charCodeAt(n),a===9||32<=a&&a<=1114111||St(t,"expected valid JSON character");else Rm.test(o)&&St(t,"the stream contains non-printable characters");t.result+=o}}function Sc(t,e,i,r){var n,s,a,o;for(Me.isObject(i)||St(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(i),a=0,o=n.length;a<o;a+=1)s=n[a],br.call(e,s)||(e[s]=i[s],r[s]=!0)}function Qr(t,e,i,r,n,s,a,o,l){var h,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),h=0,u=n.length;h<u;h+=1)Array.isArray(n[h])&&St(t,"nested arrays are not supported inside keys"),typeof n=="object"&&Tc(n[h])==="[object Object]"&&(n[h]="[object Object]");if(typeof n=="object"&&Tc(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(h=0,u=s.length;h<u;h+=1)Sc(t,e,s[h],i);else Sc(t,e,s,i);else!t.json&&!br.call(i,n)&&br.call(e,n)&&(t.line=a||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,St(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete i[n];return e}function ol(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):St(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function fe(t,e,i){for(var r=0,n=t.input.charCodeAt(t.position);n!==0;){for(;Fr(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(Ii(n))for(ol(t),n=t.input.charCodeAt(t.position),r++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&Ys(t,"deficient indentation"),r}function ba(t){var e=t.position,i;return i=t.input.charCodeAt(e),!!((i===45||i===46)&&i===t.input.charCodeAt(e+1)&&i===t.input.charCodeAt(e+2)&&(e+=3,i=t.input.charCodeAt(e),i===0||Ze(i)))}function ll(t,e){e===1?t.result+=" ":e>1&&(t.result+=Me.repeat(`
`,e-1))}function Wm(t,e,i){var r,n,s,a,o,l,h,u,f=t.kind,d=t.result,p;if(p=t.input.charCodeAt(t.position),Ze(p)||$r(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(n=t.input.charCodeAt(t.position+1),Ze(n)||i&&$r(n)))return!1;for(t.kind="scalar",t.result="",s=a=t.position,o=!1;p!==0;){if(p===58){if(n=t.input.charCodeAt(t.position+1),Ze(n)||i&&$r(n))break}else if(p===35){if(r=t.input.charCodeAt(t.position-1),Ze(r))break}else{if(t.position===t.lineStart&&ba(t)||i&&$r(p))break;if(Ii(p))if(l=t.line,h=t.lineStart,u=t.lineIndent,fe(t,!1,-1),t.lineIndent>=e){o=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=h,t.lineIndent=u;break}}o&&(gr(t,s,a,!1),ll(t,t.line-l),s=a=t.position,o=!1),Fr(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return gr(t,s,a,!1),t.result?!0:(t.kind=f,t.result=d,!1)}function Ym(t,e){var i,r,n;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(gr(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,n=t.position;else return!0;else Ii(i)?(gr(t,r,n,!0),ll(t,fe(t,!1,e)),r=n=t.position):t.position===t.lineStart&&ba(t)?St(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);St(t,"unexpected end of the stream within a single quoted scalar")}function Hm(t,e){var i,r,n,s,a,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return gr(t,i,t.position,!0),t.position++,!0;if(o===92){if(gr(t,i,t.position,!0),o=t.input.charCodeAt(++t.position),Ii(o))fe(t,!1,e);else if(o<256&&Uu[o])t.result+=ju[o],t.position++;else if((a=Mm(o))>0){for(n=a,s=0;n>0;n--)o=t.input.charCodeAt(++t.position),(a=Pm(o))>=0?s=(s<<4)+a:St(t,"expected hexadecimal character");t.result+=zm(s),t.position++}else St(t,"unknown escape sequence");i=r=t.position}else Ii(o)?(gr(t,i,r,!0),ll(t,fe(t,!1,e)),i=r=t.position):t.position===t.lineStart&&ba(t)?St(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}St(t,"unexpected end of the stream within a double quoted scalar")}function Um(t,e){var i=!0,r,n,s,a=t.tag,o,l=t.anchor,h,u,f,d,p,y=Object.create(null),b,C,E,k;if(k=t.input.charCodeAt(t.position),k===91)u=93,p=!1,o=[];else if(k===123)u=125,p=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),k=t.input.charCodeAt(++t.position);k!==0;){if(fe(t,!0,e),k=t.input.charCodeAt(t.position),k===u)return t.position++,t.tag=a,t.anchor=l,t.kind=p?"mapping":"sequence",t.result=o,!0;i?k===44&&St(t,"expected the node content, but found ','"):St(t,"missed comma between flow collection entries"),C=b=E=null,f=d=!1,k===63&&(h=t.input.charCodeAt(t.position+1),Ze(h)&&(f=d=!0,t.position++,fe(t,!0,e))),r=t.line,n=t.lineStart,s=t.position,on(t,e,qs,!1,!0),C=t.tag,b=t.result,fe(t,!0,e),k=t.input.charCodeAt(t.position),(d||t.line===r)&&k===58&&(f=!0,k=t.input.charCodeAt(++t.position),fe(t,!0,e),on(t,e,qs,!1,!0),E=t.result),p?Qr(t,o,y,C,b,E,r,n,s):f?o.push(Qr(t,null,y,C,b,E,r,n,s)):o.push(b),fe(t,!0,e),k=t.input.charCodeAt(t.position),k===44?(i=!0,k=t.input.charCodeAt(++t.position)):i=!1}St(t,"unexpected end of the stream within a flow collection")}function jm(t,e){var i,r,n=Ha,s=!1,a=!1,o=e,l=0,h=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Ha===n?n=f===43?_c:Dm:St(t,"repeat of a chomping mode identifier");else if((u=Vm(f))>=0)u===0?St(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?St(t,"repeat of an indentation width identifier"):(o=e+u-1,a=!0);else break;if(Fr(f)){do f=t.input.charCodeAt(++t.position);while(Fr(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Ii(f)&&f!==0)}for(;f!==0;){for(ol(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!a||t.lineIndent<o)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>o&&(o=t.lineIndent),Ii(f)){l++;continue}if(t.lineIndent<o){n===_c?t.result+=Me.repeat(`
`,s?1+l:l):n===Ha&&s&&(t.result+=`
`);break}for(r?Fr(f)?(h=!0,t.result+=Me.repeat(`
`,s?1+l:l)):h?(h=!1,t.result+=Me.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=Me.repeat(`
`,l):t.result+=Me.repeat(`
`,s?1+l:l),s=!0,a=!0,l=0,i=t.position;!Ii(f)&&f!==0;)f=t.input.charCodeAt(++t.position);gr(t,i,t.position,!1)}return!0}function wc(t,e){var i,r=t.tag,n=t.anchor,s=[],a,o=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,St(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!Ze(a))));){if(o=!0,t.position++,fe(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(i=t.line,on(t,e,Wu,!1,!0),s.push(t.result),fe(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&l!==0)St(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=r,t.anchor=n,t.kind="sequence",t.result=s,!0):!1}function Gm(t,e,i){var r,n,s,a,o,l,h=t.tag,u=t.anchor,f={},d=Object.create(null),p=null,y=null,b=null,C=!1,E=!1,k;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),k=t.input.charCodeAt(t.position);k!==0;){if(!C&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,St(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(k===63||k===58)&&Ze(r))k===63?(C&&(Qr(t,f,d,p,y,null,a,o,l),p=y=b=null),E=!0,C=!0,n=!0):C?(C=!1,n=!0):St(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,k=r;else{if(a=t.line,o=t.lineStart,l=t.position,!on(t,i,qu,!1,!0))break;if(t.line===s){for(k=t.input.charCodeAt(t.position);Fr(k);)k=t.input.charCodeAt(++t.position);if(k===58)k=t.input.charCodeAt(++t.position),Ze(k)||St(t,"a whitespace character is expected after the key-value separator within a block mapping"),C&&(Qr(t,f,d,p,y,null,a,o,l),p=y=b=null),E=!0,C=!1,n=!1,p=t.tag,y=t.result;else if(E)St(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(E)St(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(C&&(a=t.line,o=t.lineStart,l=t.position),on(t,e,Ws,!0,n)&&(C?y=t.result:b=t.result),C||(Qr(t,f,d,p,y,b,a,o,l),p=y=b=null),fe(t,!0,-1),k=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&k!==0)St(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return C&&Qr(t,f,d,p,y,null,a,o,l),E&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=f),E}function Xm(t){var e,i=!1,r=!1,n,s,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&St(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(i=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,n="!!",a=t.input.charCodeAt(++t.position)):n="!",e=t.position,i){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(s=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):St(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Ze(a);)a===33&&(r?St(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),Yu.test(n)||St(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Om.test(s)&&St(t,"tag suffix cannot contain flow indicator characters")}s&&!Hu.test(s)&&St(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{St(t,"tag name is malformed: "+s)}return i?t.tag=s:br.call(t.tagMap,n)?t.tag=t.tagMap[n]+s:n==="!"?t.tag="!"+s:n==="!!"?t.tag="tag:yaml.org,2002:"+s:St(t,'undeclared tag handle "'+n+'"'),!0}function $m(t){var e,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&St(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Ze(i)&&!$r(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&St(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Qm(t){var e,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Ze(r)&&!$r(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&St(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),br.call(t.anchorMap,i)||St(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],fe(t,!0,-1),!0}function on(t,e,i,r,n){var s,a,o,l=1,h=!1,u=!1,f,d,p,y,b,C;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=a=o=Ws===i||Wu===i,r&&fe(t,!0,-1)&&(h=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Xm(t)||$m(t);)fe(t,!0,-1)?(h=!0,o=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):o=!1;if(o&&(o=h||n),(l===1||Ws===i)&&(qs===i||qu===i?b=e:b=e+1,C=t.position-t.lineStart,l===1?o&&(wc(t,C)||Gm(t,C,b))||Um(t,b)?u=!0:(a&&jm(t,b)||Ym(t,b)||Hm(t,b)?u=!0:Qm(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&St(t,"alias node should not have any properties")):Wm(t,b,qs===i)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=o&&wc(t,C))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&St(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,d=t.implicitTypes.length;f<d;f+=1)if(y=t.implicitTypes[f],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(br.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,d=p.length;f<d;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){y=p[f];break}y||St(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&St(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):St(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Km(t){var e=t.position,i,r,n,s=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(fe(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(s=!0,a=t.input.charCodeAt(++t.position),i=t.position;a!==0&&!Ze(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),n=[],r.length<1&&St(t,"directive name must not be less than one character in length");a!==0;){for(;Fr(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Ii(a));break}if(Ii(a))break;for(i=t.position;a!==0&&!Ze(a);)a=t.input.charCodeAt(++t.position);n.push(t.input.slice(i,t.position))}a!==0&&ol(t),br.call(Ec,r)?Ec[r](t,r,n):Ys(t,'unknown document directive "'+r+'"')}if(fe(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,fe(t,!0,-1)):s&&St(t,"directives end mark is expected"),on(t,t.lineIndent-1,Ws,!1,!0),fe(t,!0,-1),t.checkLineBreaks&&Nm.test(t.input.slice(e,t.position))&&Ys(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ba(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,fe(t,!0,-1));return}if(t.position<t.length-1)St(t,"end of the stream or a document separator is expected");else return}function Xu(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new qm(t,e),r=t.indexOf("\0");for(r!==-1&&(i.position=r,St(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)Km(i);return i.documents}function Zm(t,e,i){e!==null&&typeof e=="object"&&typeof i>"u"&&(i=e,e=null);var r=Xu(t,i);if(typeof e!="function")return r;for(var n=0,s=r.length;n<s;n+=1)e(r[n])}function Jm(t,e){var i=Xu(t,e);if(i.length!==0){if(i.length===1)return i[0];throw new $i("expected a single document in the stream, but found more")}}var t3=Zm,e3=Jm,i3={loadAll:t3,load:e3},r3=Mu,n3=i3.load;function s3(t){const e=t.match(Xh);if(!e)return{text:t,metadata:{}};let i=n3(e[1],{schema:r3})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const r={};return i.displayMode&&(r.displayMode=i.displayMode.toString()),i.title&&(r.title=i.title.toString()),i.config&&(r.config=i.config),{text:t.slice(e[0].length),metadata:r}}const a3=t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,i,r)=>"<"+i+r.replace(/="([^"]*)"/g,"='$1'")+">"),o3=t=>{const{text:e,metadata:i}=s3(t),{displayMode:r,title:n,config:s={}}=i;return r&&(s.gantt||(s.gantt={}),s.gantt.displayMode=r),{title:n,config:s,text:e}},l3=t=>{const e=Rt.detectInit(t)??{},i=Rt.detectDirective(t,"wrap");return Array.isArray(i)?e.wrap=i.some(({type:r})=>{}):(i==null?void 0:i.type)==="wrap"&&(e.wrap=!0),{text:t2(t),directive:e}};function c3(t){const e=a3(t),i=o3(e),r=l3(i.text),n=os(i.config,r.directive);return t=gy(r.text),{code:t,title:i.title,config:n}}const h3=5e4,u3="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",d3="sandbox",f3="loose",p3="http://www.w3.org/2000/svg",g3="http://www.w3.org/1999/xlink",y3="http://www.w3.org/1999/xhtml",m3="100%",x3="100%",b3="border:0;margin:0;",k3="margin:0",_3="allow-top-navigation-by-user-activation allow-popups",T3='The "iframe" tag is not supported by your browser.',C3=["foreignobject"],E3=["dominant-baseline"];function $u(t){const e=c3(t);return Ms(),x2(e.config??{}),e}async function S3(t,e){nl(),t=$u(t).code;try{await sl(t)}catch(i){if(e!=null&&e.suppressErrors)return!1;throw i}return!0}const w3=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),e=e.replace(/#\w+;/g,function(i){const r=i.substring(1,i.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),e},Vn=function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},vc=(t,e,i=[])=>`
.${t} ${e} { ${i.join(" !important; ")} !important; }`,v3=(t,e={})=>{var i;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!qa(e)){const o=t.htmlLabels||((i=t.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in e){const h=e[l];qa(h.styles)||o.forEach(u=>{r+=vc(h.id,u,h.styles)}),qa(h.textStyles)||(r+=vc(h.id,"tspan",h.textStyles))}}return r},A3=(t,e,i,r)=>{const n=v3(t,i),s=Pg(e,n,t.themeVariables);return yp(xp(`${r}{${s}}`),mp)},L3=(t="",e,i)=>{let r=t;return!i&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=Vn(r),r=r.replace(/<br>/g,"<br/>"),r},B3=(t="",e)=>{var i,r;const n=(r=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&r.height?e.viewBox.baseVal.height+"px":x3,s=btoa('<body style="'+k3+'">'+t+"</body>");return`<iframe style="width:${m3};height:${n};${b3}" src="data:text/html;base64,${s}" sandbox="${_3}">
  ${T3}
</iframe>`},Ac=(t,e,i,r,n)=>{const s=t.append("div");s.attr("id",i),r&&s.attr("style",r);const a=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",p3);return n&&a.attr("xmlns:xlink",n),a.append("g"),t};function Lc(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const F3=(t,e,i,r)=>{var n,s,a;(n=t.getElementById(e))==null||n.remove(),(s=t.getElementById(i))==null||s.remove(),(a=t.getElementById(r))==null||a.remove()},I3=async function(t,e,i){var r,n,s,a,o,l;nl();const h=$u(e);e=h.code;const u=we();D.debug(u),e.length>((u==null?void 0:u.maxTextSize)??h3)&&(e=u3);const f="#"+t,d="i"+t,p="#"+d,y="d"+t,b="#"+y;let C=pt("body");const E=u.securityLevel===d3,k=u.securityLevel===f3,I=u.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),E){const F=Lc(pt(i),d);C=pt(F.nodes()[0].contentDocument.body),C.node().style.margin=0}else C=pt(i);Ac(C,t,y,`font-family: ${I}`,g3)}else{if(F3(document,t,y,d),E){const F=Lc(pt("body"),d);C=pt(F.nodes()[0].contentDocument.body),C.node().style.margin=0}else C=pt("body");Ac(C,t,y)}e=w3(e);let R,B;try{R=await sl(e,{title:h.title})}catch(F){R=new Nu("error"),B=F}const _=C.select(b).node(),O=R.type,L=_.firstChild,m=L.firstChild,v=(n=(r=R.renderer).getClasses)==null?void 0:n.call(r,e,R),g=A3(u,O,v,f),S=document.createElement("style");S.innerHTML=g,L.insertBefore(S,m);try{await R.renderer.draw(e,t,mc,R)}catch(F){throw Ug.draw(e,t,mc),F}const x=C.select(`${b} svg`),M=(a=(s=R.db).getAccTitle)==null?void 0:a.call(s),H=(l=(o=R.db).getAccDescription)==null?void 0:l.call(o);R3(O,x,M,H),C.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",y3);let P=C.select(b).node().innerHTML;if(D.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),P=L3(P,E,me(u.arrowMarkerAbsolute)),E){const F=C.select(b+" svg").node();P=B3(P,F)}else k||(P=Os.sanitize(P,{ADD_TAGS:C3,ADD_ATTR:E3}));if(uy(),B)throw B;const V=pt(E?p:b).node();return V&&"remove"in V&&V.remove(),{svg:P,bindFunctions:R.db.bindFunctions}};function D3(t={}){var e;t!=null&&t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),y2(t),t!=null&&t.theme&&t.theme in er?t.themeVariables=er[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=er.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?g2(t):au();$o(i.logLevel),nl()}function R3(t,e,i,r){fy(e,t),py(e,i,r,e.attr("id"))}const Dr=Object.freeze({render:I3,parse:S3,getDiagramFromText:sl,initialize:D3,getConfig:we,setConfig:ou,getSiteConfig:au,updateSiteConfig:m2,reset:()=>{Ms()},globalReset:()=>{Ms(sn)},defaultConfig:sn});$o(we().logLevel);Ms(we());const N3=async()=>{D.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(nn).map(async([i,{detector:r,loader:n}])=>{if(n)try{rl(i)}catch{try{const{diagram:a,id:o}=await n();zs(o,a,r)}catch(a){throw D.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete nn[i],a}}}))).filter(i=>i.status==="rejected");if(e.length>0){D.error(`Failed to load ${e.length} external diagrams`);for(const i of e)D.error(i);throw new Error(`Failed to load ${e.length} external diagrams`)}},O3=(t,e,i)=>{D.warn(t),nu(t)?(i&&i(t.str,t.hash),e.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},Qu=async function(t={querySelector:".mermaid"}){try{await P3(t)}catch(e){if(nu(e)&&D.error(e.str),Di.parseError&&Di.parseError(e),!t.suppressErrors)throw D.error("Use the suppressErrors option to suppress these errors"),e}},P3=async function({postRenderCallback:t,querySelector:e,nodes:i}={querySelector:".mermaid"}){const r=Dr.getConfig();D.debug(`${t?"":"No "}Callback function found`);let n;if(i)n=i;else if(e)n=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");D.debug(`Found ${n.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(D.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),Dr.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const s=new Rt.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const o=[];for(const l of Array.from(n)){D.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const h=`mermaid-${s.next()}`;a=l.innerHTML,a=zh(Rt.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Rt.detectInit(a);u&&D.debug("Detected early reinit: ",u);try{const{svg:f,bindFunctions:d}=await t1(h,a,l);l.innerHTML=f,t&&await t(h),d&&d(l)}catch(f){O3(f,o,Di.parseError)}}if(o.length>0)throw o[0]},Ku=function(t){Dr.initialize(t)},M3=async function(t,e,i){D.warn("mermaid.init is deprecated. Please use run instead."),t&&Ku(t);const r={postRenderCallback:i,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await Qu(r)},V3=async(t,{lazyLoad:e=!0}={})=>{Qh(...t),e===!1&&await N3()},Zu=function(){if(Di.startOnLoad){const{startOnLoad:t}=Dr.getConfig();t&&Di.run().catch(e=>D.error("Mermaid failed to initialize",e))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",Zu,!1)}const z3=function(t){Di.parseError=t},Hs=[];let Ua=!1;const Ju=async()=>{if(!Ua){for(Ua=!0;Hs.length>0;){const t=Hs.shift();if(t)try{await t()}catch(e){D.error("Error executing queue",e)}}Ua=!1}},q3=async(t,e)=>new Promise((i,r)=>{const n=()=>new Promise((s,a)=>{Dr.parse(t,e).then(o=>{s(o),i(o)},o=>{var l;D.error("Error parsing",o),(l=Di.parseError)==null||l.call(Di,o),a(o),r(o)})});Hs.push(n),Ju().catch(r)}),t1=(t,e,i)=>new Promise((r,n)=>{const s=()=>new Promise((a,o)=>{Dr.render(t,e,i).then(l=>{a(l),r(l)},l=>{var h;D.error("Error parsing",l),(h=Di.parseError)==null||h.call(Di,l),o(l),n(l)})});Hs.push(s),Ju().catch(n)}),Di={startOnLoad:!0,mermaidAPI:Dr,parse:q3,render:t1,init:M3,run:Qu,registerExternalDiagrams:V3,initialize:Ku,parseError:void 0,contentLoaded:Zu,setParseErrorHandler:z3,detectType:ya},ka=(t,e)=>{const i=t.append("rect");if(i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),e.rx!==void 0&&i.attr("rx",e.rx),e.ry!==void 0&&i.attr("ry",e.ry),e.attrs!==void 0)for(const r in e.attrs)i.attr(r,e.attrs[r]);return e.class!==void 0&&i.attr("class",e.class),i},e1=(t,e)=>{const i={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};ka(t,i).lower()},W3=(t,e)=>{const i=e.text.replace(as," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const n=r.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.text(i),r},Y3=(t,e,i,r)=>{const n=t.append("image");n.attr("x",e),n.attr("y",i);const s=Vr.sanitizeUrl(r);n.attr("xlink:href",s)},H3=(t,e,i,r)=>{const n=t.append("use");n.attr("x",e),n.attr("y",i);const s=Vr.sanitizeUrl(r);n.attr("xlink:href",`#${s}`)},Wr=()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),cl=()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0});var Us=function(){var t=function(vt,gt,dt,kt){for(dt=dt||{},kt=vt.length;kt--;dt[vt[kt]]=gt);return dt},e=[1,24],i=[1,25],r=[1,26],n=[1,27],s=[1,28],a=[1,63],o=[1,64],l=[1,65],h=[1,66],u=[1,67],f=[1,68],d=[1,69],p=[1,29],y=[1,30],b=[1,31],C=[1,32],E=[1,33],k=[1,34],I=[1,35],R=[1,36],B=[1,37],_=[1,38],O=[1,39],L=[1,40],m=[1,41],v=[1,42],g=[1,43],S=[1,44],x=[1,45],M=[1,46],H=[1,47],P=[1,48],A=[1,50],V=[1,51],F=[1,52],T=[1,53],W=[1,54],lt=[1,55],w=[1,56],ht=[1,57],J=[1,58],j=[1,59],at=[1,60],ct=[14,42],it=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],rt=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],N=[1,82],Z=[1,83],q=[1,84],tt=[1,85],z=[12,14,42],Q=[12,14,33,42],$=[12,14,33,42,76,77,79,80],nt=[12,33],mt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Nt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:function(gt,dt,kt,U,ut,K,_t){var ot=K.length-1;switch(ut){case 3:U.setDirection("TB");break;case 4:U.setDirection("BT");break;case 5:U.setDirection("RL");break;case 6:U.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:U.setC4Type(K[ot-3]);break;case 19:U.setTitle(K[ot].substring(6)),this.$=K[ot].substring(6);break;case 20:U.setAccDescription(K[ot].substring(15)),this.$=K[ot].substring(15);break;case 21:this.$=K[ot].trim(),U.setTitle(this.$);break;case 22:case 23:this.$=K[ot].trim(),U.setAccDescription(this.$);break;case 28:case 29:K[ot].splice(2,0,"ENTERPRISE"),U.addPersonOrSystemBoundary(...K[ot]),this.$=K[ot];break;case 30:U.addPersonOrSystemBoundary(...K[ot]),this.$=K[ot];break;case 31:K[ot].splice(2,0,"CONTAINER"),U.addContainerBoundary(...K[ot]),this.$=K[ot];break;case 32:U.addDeploymentNode("node",...K[ot]),this.$=K[ot];break;case 33:U.addDeploymentNode("nodeL",...K[ot]),this.$=K[ot];break;case 34:U.addDeploymentNode("nodeR",...K[ot]),this.$=K[ot];break;case 35:U.popBoundaryParseStack();break;case 39:U.addPersonOrSystem("person",...K[ot]),this.$=K[ot];break;case 40:U.addPersonOrSystem("external_person",...K[ot]),this.$=K[ot];break;case 41:U.addPersonOrSystem("system",...K[ot]),this.$=K[ot];break;case 42:U.addPersonOrSystem("system_db",...K[ot]),this.$=K[ot];break;case 43:U.addPersonOrSystem("system_queue",...K[ot]),this.$=K[ot];break;case 44:U.addPersonOrSystem("external_system",...K[ot]),this.$=K[ot];break;case 45:U.addPersonOrSystem("external_system_db",...K[ot]),this.$=K[ot];break;case 46:U.addPersonOrSystem("external_system_queue",...K[ot]),this.$=K[ot];break;case 47:U.addContainer("container",...K[ot]),this.$=K[ot];break;case 48:U.addContainer("container_db",...K[ot]),this.$=K[ot];break;case 49:U.addContainer("container_queue",...K[ot]),this.$=K[ot];break;case 50:U.addContainer("external_container",...K[ot]),this.$=K[ot];break;case 51:U.addContainer("external_container_db",...K[ot]),this.$=K[ot];break;case 52:U.addContainer("external_container_queue",...K[ot]),this.$=K[ot];break;case 53:U.addComponent("component",...K[ot]),this.$=K[ot];break;case 54:U.addComponent("component_db",...K[ot]),this.$=K[ot];break;case 55:U.addComponent("component_queue",...K[ot]),this.$=K[ot];break;case 56:U.addComponent("external_component",...K[ot]),this.$=K[ot];break;case 57:U.addComponent("external_component_db",...K[ot]),this.$=K[ot];break;case 58:U.addComponent("external_component_queue",...K[ot]),this.$=K[ot];break;case 60:U.addRel("rel",...K[ot]),this.$=K[ot];break;case 61:U.addRel("birel",...K[ot]),this.$=K[ot];break;case 62:U.addRel("rel_u",...K[ot]),this.$=K[ot];break;case 63:U.addRel("rel_d",...K[ot]),this.$=K[ot];break;case 64:U.addRel("rel_l",...K[ot]),this.$=K[ot];break;case 65:U.addRel("rel_r",...K[ot]),this.$=K[ot];break;case 66:U.addRel("rel_b",...K[ot]),this.$=K[ot];break;case 67:K[ot].splice(0,1),U.addRel("rel",...K[ot]),this.$=K[ot];break;case 68:U.updateElStyle("update_el_style",...K[ot]),this.$=K[ot];break;case 69:U.updateRelStyle("update_rel_style",...K[ot]),this.$=K[ot];break;case 70:U.updateLayoutConfig("update_layout_config",...K[ot]),this.$=K[ot];break;case 71:this.$=[K[ot]];break;case 72:K[ot].unshift(K[ot-1]),this.$=K[ot];break;case 73:case 75:this.$=K[ot].trim();break;case 74:let Dt={};Dt[K[ot-1].trim()]=K[ot].trim(),this.$=Dt;break;case 76:this.$="";break}},table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:i,24:r,26:n,28:s,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at},{13:70,19:20,20:21,21:22,22:e,23:i,24:r,26:n,28:s,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at},{13:71,19:20,20:21,21:22,22:e,23:i,24:r,26:n,28:s,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at},{13:72,19:20,20:21,21:22,22:e,23:i,24:r,26:n,28:s,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at},{13:73,19:20,20:21,21:22,22:e,23:i,24:r,26:n,28:s,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at},{14:[1,74]},t(ct,[2,13],{43:23,29:49,30:61,32:62,20:75,34:a,36:o,37:l,38:h,39:u,40:f,41:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at}),t(ct,[2,14]),t(it,[2,16],{12:[1,76]}),t(ct,[2,36],{12:[1,77]}),t(rt,[2,19]),t(rt,[2,20]),{25:[1,78]},{27:[1,79]},t(rt,[2,23]),{35:80,75:81,76:N,77:Z,79:q,80:tt},{35:86,75:81,76:N,77:Z,79:q,80:tt},{35:87,75:81,76:N,77:Z,79:q,80:tt},{35:88,75:81,76:N,77:Z,79:q,80:tt},{35:89,75:81,76:N,77:Z,79:q,80:tt},{35:90,75:81,76:N,77:Z,79:q,80:tt},{35:91,75:81,76:N,77:Z,79:q,80:tt},{35:92,75:81,76:N,77:Z,79:q,80:tt},{35:93,75:81,76:N,77:Z,79:q,80:tt},{35:94,75:81,76:N,77:Z,79:q,80:tt},{35:95,75:81,76:N,77:Z,79:q,80:tt},{35:96,75:81,76:N,77:Z,79:q,80:tt},{35:97,75:81,76:N,77:Z,79:q,80:tt},{35:98,75:81,76:N,77:Z,79:q,80:tt},{35:99,75:81,76:N,77:Z,79:q,80:tt},{35:100,75:81,76:N,77:Z,79:q,80:tt},{35:101,75:81,76:N,77:Z,79:q,80:tt},{35:102,75:81,76:N,77:Z,79:q,80:tt},{35:103,75:81,76:N,77:Z,79:q,80:tt},{35:104,75:81,76:N,77:Z,79:q,80:tt},t(z,[2,59]),{35:105,75:81,76:N,77:Z,79:q,80:tt},{35:106,75:81,76:N,77:Z,79:q,80:tt},{35:107,75:81,76:N,77:Z,79:q,80:tt},{35:108,75:81,76:N,77:Z,79:q,80:tt},{35:109,75:81,76:N,77:Z,79:q,80:tt},{35:110,75:81,76:N,77:Z,79:q,80:tt},{35:111,75:81,76:N,77:Z,79:q,80:tt},{35:112,75:81,76:N,77:Z,79:q,80:tt},{35:113,75:81,76:N,77:Z,79:q,80:tt},{35:114,75:81,76:N,77:Z,79:q,80:tt},{35:115,75:81,76:N,77:Z,79:q,80:tt},{20:116,29:49,30:61,32:62,34:a,36:o,37:l,38:h,39:u,40:f,41:d,43:23,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at},{12:[1,118],33:[1,117]},{35:119,75:81,76:N,77:Z,79:q,80:tt},{35:120,75:81,76:N,77:Z,79:q,80:tt},{35:121,75:81,76:N,77:Z,79:q,80:tt},{35:122,75:81,76:N,77:Z,79:q,80:tt},{35:123,75:81,76:N,77:Z,79:q,80:tt},{35:124,75:81,76:N,77:Z,79:q,80:tt},{35:125,75:81,76:N,77:Z,79:q,80:tt},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(ct,[2,15]),t(it,[2,17],{21:22,19:130,22:e,23:i,24:r,26:n,28:s}),t(ct,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:i,24:r,26:n,28:s,34:a,36:o,37:l,38:h,39:u,40:f,41:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I,51:R,52:B,53:_,54:O,55:L,56:m,57:v,58:g,59:S,60:x,61:M,62:H,63:P,64:A,65:V,66:F,67:T,68:W,69:lt,70:w,71:ht,72:J,73:j,74:at}),t(rt,[2,21]),t(rt,[2,22]),t(z,[2,39]),t(Q,[2,71],{75:81,35:132,76:N,77:Z,79:q,80:tt}),t($,[2,73]),{78:[1,133]},t($,[2,75]),t($,[2,76]),t(z,[2,40]),t(z,[2,41]),t(z,[2,42]),t(z,[2,43]),t(z,[2,44]),t(z,[2,45]),t(z,[2,46]),t(z,[2,47]),t(z,[2,48]),t(z,[2,49]),t(z,[2,50]),t(z,[2,51]),t(z,[2,52]),t(z,[2,53]),t(z,[2,54]),t(z,[2,55]),t(z,[2,56]),t(z,[2,57]),t(z,[2,58]),t(z,[2,60]),t(z,[2,61]),t(z,[2,62]),t(z,[2,63]),t(z,[2,64]),t(z,[2,65]),t(z,[2,66]),t(z,[2,67]),t(z,[2,68]),t(z,[2,69]),t(z,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(nt,[2,28]),t(nt,[2,29]),t(nt,[2,30]),t(nt,[2,31]),t(nt,[2,32]),t(nt,[2,33]),t(nt,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(it,[2,18]),t(ct,[2,38]),t(Q,[2,72]),t($,[2,74]),t(z,[2,24]),t(z,[2,35]),t(mt,[2,25]),t(mt,[2,26],{12:[1,138]}),t(mt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:function(gt,dt){if(dt.recoverable)this.trace(gt);else{var kt=new Error(gt);throw kt.hash=dt,kt}},parse:function(gt){var dt=this,kt=[0],U=[],ut=[null],K=[],_t=this.table,ot="",Dt=0,Wt=0,Ht=2,It=1,te=K.slice.call(arguments,1),At=Object.create(this.lexer),ee={yy:{}};for(var jt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,jt)&&(ee.yy[jt]=this.yy[jt]);At.setInput(gt,ee.yy),ee.yy.lexer=At,ee.yy.parser=this,typeof At.yylloc>"u"&&(At.yylloc={});var Ae=At.yylloc;K.push(Ae);var gs=At.options&&At.options.ranges;typeof ee.yy.parseError=="function"?this.parseError=ee.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ys(){var Le;return Le=U.pop()||At.lex()||It,typeof Le!="number"&&(Le instanceof Array&&(U=Le,Le=U.pop()),Le=dt.symbols_[Le]||Le),Le}for(var xe,Si,zt,Ee,Pt={},ae,Qt,Yt,Mt;;){if(Si=kt[kt.length-1],this.defaultActions[Si]?zt=this.defaultActions[Si]:((xe===null||typeof xe>"u")&&(xe=ys()),zt=_t[Si]&&_t[Si][xe]),typeof zt>"u"||!zt.length||!zt[0]){var qt="";Mt=[];for(ae in _t[Si])this.terminals_[ae]&&ae>Ht&&Mt.push("'"+this.terminals_[ae]+"'");At.showPosition?qt="Parse error on line "+(Dt+1)+`:
`+At.showPosition()+`
Expecting `+Mt.join(", ")+", got '"+(this.terminals_[xe]||xe)+"'":qt="Parse error on line "+(Dt+1)+": Unexpected "+(xe==It?"end of input":"'"+(this.terminals_[xe]||xe)+"'"),this.parseError(qt,{text:At.match,token:this.terminals_[xe]||xe,line:At.yylineno,loc:Ae,expected:Mt})}if(zt[0]instanceof Array&&zt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Si+", token: "+xe);switch(zt[0]){case 1:kt.push(xe),ut.push(At.yytext),K.push(At.yylloc),kt.push(zt[1]),xe=null,Wt=At.yyleng,ot=At.yytext,Dt=At.yylineno,Ae=At.yylloc;break;case 2:if(Qt=this.productions_[zt[1]][1],Pt.$=ut[ut.length-Qt],Pt._$={first_line:K[K.length-(Qt||1)].first_line,last_line:K[K.length-1].last_line,first_column:K[K.length-(Qt||1)].first_column,last_column:K[K.length-1].last_column},gs&&(Pt._$.range=[K[K.length-(Qt||1)].range[0],K[K.length-1].range[1]]),Ee=this.performAction.apply(Pt,[ot,Wt,Dt,ee.yy,zt[1],ut,K].concat(te)),typeof Ee<"u")return Ee;Qt&&(kt=kt.slice(0,-1*Qt*2),ut=ut.slice(0,-1*Qt),K=K.slice(0,-1*Qt)),kt.push(this.productions_[zt[1]][0]),ut.push(Pt.$),K.push(Pt._$),Yt=_t[kt[kt.length-2]][kt[kt.length-1]],kt.push(Yt);break;case 3:return!0}}return!0}},Bt=function(){var vt={EOF:1,parseError:function(dt,kt){if(this.yy.parser)this.yy.parser.parseError(dt,kt);else throw new Error(dt)},setInput:function(gt,dt){return this.yy=dt||this.yy||{},this._input=gt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var gt=this._input[0];this.yytext+=gt,this.yyleng++,this.offset++,this.match+=gt,this.matched+=gt;var dt=gt.match(/(?:\r\n?|\n).*/g);return dt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),gt},unput:function(gt){var dt=gt.length,kt=gt.split(/(?:\r\n?|\n)/g);this._input=gt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-dt),this.offset-=dt;var U=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),kt.length-1&&(this.yylineno-=kt.length-1);var ut=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:kt?(kt.length===U.length?this.yylloc.first_column:0)+U[U.length-kt.length].length-kt[0].length:this.yylloc.first_column-dt},this.options.ranges&&(this.yylloc.range=[ut[0],ut[0]+this.yyleng-dt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(gt){this.unput(this.match.slice(gt))},pastInput:function(){var gt=this.matched.substr(0,this.matched.length-this.match.length);return(gt.length>20?"...":"")+gt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var gt=this.match;return gt.length<20&&(gt+=this._input.substr(0,20-gt.length)),(gt.substr(0,20)+(gt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var gt=this.pastInput(),dt=new Array(gt.length+1).join("-");return gt+this.upcomingInput()+`
`+dt+"^"},test_match:function(gt,dt){var kt,U,ut;if(this.options.backtrack_lexer&&(ut={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ut.yylloc.range=this.yylloc.range.slice(0))),U=gt[0].match(/(?:\r\n?|\n).*/g),U&&(this.yylineno+=U.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:U?U[U.length-1].length-U[U.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+gt[0].length},this.yytext+=gt[0],this.match+=gt[0],this.matches=gt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(gt[0].length),this.matched+=gt[0],kt=this.performAction.call(this,this.yy,this,dt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),kt)return kt;if(this._backtrack){for(var K in ut)this[K]=ut[K];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var gt,dt,kt,U;this._more||(this.yytext="",this.match="");for(var ut=this._currentRules(),K=0;K<ut.length;K++)if(kt=this._input.match(this.rules[ut[K]]),kt&&(!dt||kt[0].length>dt[0].length)){if(dt=kt,U=K,this.options.backtrack_lexer){if(gt=this.test_match(kt,ut[K]),gt!==!1)return gt;if(this._backtrack){dt=!1;continue}else return!1}else if(!this.options.flex)break}return dt?(gt=this.test_match(dt,ut[U]),gt!==!1?gt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var dt=this.next();return dt||this.lex()},begin:function(dt){this.conditionStack.push(dt)},popState:function(){var dt=this.conditionStack.length-1;return dt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(dt){return dt=this.conditionStack.length-1-Math.abs(dt||0),dt>=0?this.conditionStack[dt]:"INITIAL"},pushState:function(dt){this.begin(dt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(dt,kt,U,ut){switch(U){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return vt}();Nt.lexer=Bt;function Gt(){this.yy={}}return Gt.prototype=Nt,Nt.Parser=Gt,new Gt}();Us.parser=Us;const U3=Us;let Ei=[],yr=[""],ze="global",Ti="",Ri=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],zn=[],hl="",ul=!1,js=4,Gs=2;var i1;const j3=function(){return i1},G3=function(t){i1=Ce(t,G())},X3=function(t,e,i,r,n,s,a,o,l){if(t==null||e===void 0||e===null||i===void 0||i===null||r===void 0||r===null)return;let h={};const u=zn.find(f=>f.from===e&&f.to===i);if(u?h=u:zn.push(h),h.type=t,h.from=e,h.to=i,h.label={text:r},n==null)h.techn={text:""};else if(typeof n=="object"){let[f,d]=Object.entries(n)[0];h[f]={text:d}}else h.techn={text:n};if(s==null)h.descr={text:""};else if(typeof s=="object"){let[f,d]=Object.entries(s)[0];h[f]={text:d}}else h.descr={text:s};if(typeof a=="object"){let[f,d]=Object.entries(a)[0];h[f]=d}else h.sprite=a;if(typeof o=="object"){let[f,d]=Object.entries(o)[0];h[f]=d}else h.tags=o;if(typeof l=="object"){let[f,d]=Object.entries(l)[0];h[f]=d}else h.link=l;h.wrap=Cr()},$3=function(t,e,i,r,n,s,a){if(e===null||i===null)return;let o={};const l=Ei.find(h=>h.alias===e);if(l&&e===l.alias?o=l:(o.alias=e,Ei.push(o)),i==null?o.label={text:""}:o.label={text:i},r==null)o.descr={text:""};else if(typeof r=="object"){let[h,u]=Object.entries(r)[0];o[h]={text:u}}else o.descr={text:r};if(typeof n=="object"){let[h,u]=Object.entries(n)[0];o[h]=u}else o.sprite=n;if(typeof s=="object"){let[h,u]=Object.entries(s)[0];o[h]=u}else o.tags=s;if(typeof a=="object"){let[h,u]=Object.entries(a)[0];o[h]=u}else o.link=a;o.typeC4Shape={text:t},o.parentBoundary=ze,o.wrap=Cr()},Q3=function(t,e,i,r,n,s,a,o){if(e===null||i===null)return;let l={};const h=Ei.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ei.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,f]=Object.entries(r)[0];l[u]={text:f}}else l.techn={text:r};if(n==null)l.descr={text:""};else if(typeof n=="object"){let[u,f]=Object.entries(n)[0];l[u]={text:f}}else l.descr={text:n};if(typeof s=="object"){let[u,f]=Object.entries(s)[0];l[u]=f}else l.sprite=s;if(typeof a=="object"){let[u,f]=Object.entries(a)[0];l[u]=f}else l.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];l[u]=f}else l.link=o;l.wrap=Cr(),l.typeC4Shape={text:t},l.parentBoundary=ze},K3=function(t,e,i,r,n,s,a,o){if(e===null||i===null)return;let l={};const h=Ei.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ei.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.techn={text:""};else if(typeof r=="object"){let[u,f]=Object.entries(r)[0];l[u]={text:f}}else l.techn={text:r};if(n==null)l.descr={text:""};else if(typeof n=="object"){let[u,f]=Object.entries(n)[0];l[u]={text:f}}else l.descr={text:n};if(typeof s=="object"){let[u,f]=Object.entries(s)[0];l[u]=f}else l.sprite=s;if(typeof a=="object"){let[u,f]=Object.entries(a)[0];l[u]=f}else l.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];l[u]=f}else l.link=o;l.wrap=Cr(),l.typeC4Shape={text:t},l.parentBoundary=ze},Z3=function(t,e,i,r,n){if(t===null||e===null)return;let s={};const a=Ri.find(o=>o.alias===t);if(a&&t===a.alias?s=a:(s.alias=t,Ri.push(s)),e==null?s.label={text:""}:s.label={text:e},i==null)s.type={text:"system"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];s[o]={text:l}}else s.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];s[o]=l}else s.tags=r;if(typeof n=="object"){let[o,l]=Object.entries(n)[0];s[o]=l}else s.link=n;s.parentBoundary=ze,s.wrap=Cr(),Ti=ze,ze=t,yr.push(Ti)},J3=function(t,e,i,r,n){if(t===null||e===null)return;let s={};const a=Ri.find(o=>o.alias===t);if(a&&t===a.alias?s=a:(s.alias=t,Ri.push(s)),e==null?s.label={text:""}:s.label={text:e},i==null)s.type={text:"container"};else if(typeof i=="object"){let[o,l]=Object.entries(i)[0];s[o]={text:l}}else s.type={text:i};if(typeof r=="object"){let[o,l]=Object.entries(r)[0];s[o]=l}else s.tags=r;if(typeof n=="object"){let[o,l]=Object.entries(n)[0];s[o]=l}else s.link=n;s.parentBoundary=ze,s.wrap=Cr(),Ti=ze,ze=t,yr.push(Ti)},tx=function(t,e,i,r,n,s,a,o){if(e===null||i===null)return;let l={};const h=Ri.find(u=>u.alias===e);if(h&&e===h.alias?l=h:(l.alias=e,Ri.push(l)),i==null?l.label={text:""}:l.label={text:i},r==null)l.type={text:"node"};else if(typeof r=="object"){let[u,f]=Object.entries(r)[0];l[u]={text:f}}else l.type={text:r};if(n==null)l.descr={text:""};else if(typeof n=="object"){let[u,f]=Object.entries(n)[0];l[u]={text:f}}else l.descr={text:n};if(typeof a=="object"){let[u,f]=Object.entries(a)[0];l[u]=f}else l.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];l[u]=f}else l.link=o;l.nodeType=t,l.parentBoundary=ze,l.wrap=Cr(),Ti=ze,ze=e,yr.push(Ti)},ex=function(){ze=Ti,yr.pop(),Ti=yr.pop(),yr.push(Ti)},ix=function(t,e,i,r,n,s,a,o,l,h,u){let f=Ei.find(d=>d.alias===e);if(!(f===void 0&&(f=Ri.find(d=>d.alias===e),f===void 0))){if(i!=null)if(typeof i=="object"){let[d,p]=Object.entries(i)[0];f[d]=p}else f.bgColor=i;if(r!=null)if(typeof r=="object"){let[d,p]=Object.entries(r)[0];f[d]=p}else f.fontColor=r;if(n!=null)if(typeof n=="object"){let[d,p]=Object.entries(n)[0];f[d]=p}else f.borderColor=n;if(s!=null)if(typeof s=="object"){let[d,p]=Object.entries(s)[0];f[d]=p}else f.shadowing=s;if(a!=null)if(typeof a=="object"){let[d,p]=Object.entries(a)[0];f[d]=p}else f.shape=a;if(o!=null)if(typeof o=="object"){let[d,p]=Object.entries(o)[0];f[d]=p}else f.sprite=o;if(l!=null)if(typeof l=="object"){let[d,p]=Object.entries(l)[0];f[d]=p}else f.techn=l;if(h!=null)if(typeof h=="object"){let[d,p]=Object.entries(h)[0];f[d]=p}else f.legendText=h;if(u!=null)if(typeof u=="object"){let[d,p]=Object.entries(u)[0];f[d]=p}else f.legendSprite=u}},rx=function(t,e,i,r,n,s,a){const o=zn.find(l=>l.from===e&&l.to===i);if(o!==void 0){if(r!=null)if(typeof r=="object"){let[l,h]=Object.entries(r)[0];o[l]=h}else o.textColor=r;if(n!=null)if(typeof n=="object"){let[l,h]=Object.entries(n)[0];o[l]=h}else o.lineColor=n;if(s!=null)if(typeof s=="object"){let[l,h]=Object.entries(s)[0];o[l]=parseInt(h)}else o.offsetX=parseInt(s);if(a!=null)if(typeof a=="object"){let[l,h]=Object.entries(a)[0];o[l]=parseInt(h)}else o.offsetY=parseInt(a)}},nx=function(t,e,i){let r=js,n=Gs;if(typeof e=="object"){const s=Object.values(e)[0];r=parseInt(s)}else r=parseInt(e);if(typeof i=="object"){const s=Object.values(i)[0];n=parseInt(s)}else n=parseInt(i);r>=1&&(js=r),n>=1&&(Gs=n)},sx=function(){return js},ax=function(){return Gs},ox=function(){return ze},lx=function(){return Ti},r1=function(t){return t==null?Ei:Ei.filter(e=>e.parentBoundary===t)},cx=function(t){return Ei.find(e=>e.alias===t)},hx=function(t){return Object.keys(r1(t))},ux=function(t){return t==null?Ri:Ri.filter(e=>e.parentBoundary===t)},dx=function(){return zn},fx=function(){return hl},px=function(t){ul=t},Cr=function(){return ul},gx=function(){Ei=[],Ri=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],Ti="",ze="global",yr=[""],zn=[],yr=[""],hl="",ul=!1,js=4,Gs=2},yx={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},mx={FILLED:0,OPEN:1},xx={LEFTOF:0,RIGHTOF:1,OVER:2},bx=function(t){hl=Ce(t,G())},no={addPersonOrSystem:$3,addPersonOrSystemBoundary:Z3,addContainer:Q3,addContainerBoundary:J3,addComponent:K3,addDeploymentNode:tx,popBoundaryParseStack:ex,addRel:X3,updateElStyle:ix,updateRelStyle:rx,updateLayoutConfig:nx,autoWrap:Cr,setWrap:px,getC4ShapeArray:r1,getC4Shape:cx,getC4ShapeKeys:hx,getBoundarys:ux,getCurrentBoundaryParse:ox,getParentBoundaryParse:lx,getRels:dx,getTitle:fx,getC4Type:j3,getC4ShapeInRow:sx,getC4BoundaryInRow:ax,setAccTitle:Oe,getAccTitle:Ye,getAccDescription:Ue,setAccDescription:He,getConfig:()=>G().c4,clear:gx,LINETYPE:yx,ARROWTYPE:mx,PLACEMENT:xx,setTitle:bx,setC4Type:G3},dl=function(t,e){return ka(t,e)},n1=function(t,e,i,r,n,s){const a=t.append("image");a.attr("width",e),a.attr("height",i),a.attr("x",r),a.attr("y",n);let o=s.startsWith("data:image/png;base64")?s:Vr.sanitizeUrl(s);a.attr("xlink:href",o)},kx=(t,e,i)=>{const r=t.append("g");let n=0;for(let s of e){let a=s.textColor?s.textColor:"#444444",o=s.lineColor?s.lineColor:"#444444",l=s.offsetX?parseInt(s.offsetX):0,h=s.offsetY?parseInt(s.offsetY):0,u="";if(n===0){let d=r.append("line");d.attr("x1",s.startPoint.x),d.attr("y1",s.startPoint.y),d.attr("x2",s.endPoint.x),d.attr("y2",s.endPoint.y),d.attr("stroke-width","1"),d.attr("stroke",o),d.style("fill","none"),s.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(s.type==="birel"||s.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)"),n=-1}else{let d=r.append("path");d.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",s.startPoint.x).replaceAll("starty",s.startPoint.y).replaceAll("controlx",s.startPoint.x+(s.endPoint.x-s.startPoint.x)/2-(s.endPoint.x-s.startPoint.x)/4).replaceAll("controly",s.startPoint.y+(s.endPoint.y-s.startPoint.y)/2).replaceAll("stopx",s.endPoint.x).replaceAll("stopy",s.endPoint.y)),s.type!=="rel_b"&&d.attr("marker-end","url("+u+"#arrowhead)"),(s.type==="birel"||s.type==="rel_b")&&d.attr("marker-start","url("+u+"#arrowend)")}let f=i.messageFont();Zi(i)(s.label.text,r,Math.min(s.startPoint.x,s.endPoint.x)+Math.abs(s.endPoint.x-s.startPoint.x)/2+l,Math.min(s.startPoint.y,s.endPoint.y)+Math.abs(s.endPoint.y-s.startPoint.y)/2+h,s.label.width,s.label.height,{fill:a},f),s.techn&&s.techn.text!==""&&(f=i.messageFont(),Zi(i)("["+s.techn.text+"]",r,Math.min(s.startPoint.x,s.endPoint.x)+Math.abs(s.endPoint.x-s.startPoint.x)/2+l,Math.min(s.startPoint.y,s.endPoint.y)+Math.abs(s.endPoint.y-s.startPoint.y)/2+i.messageFontSize+5+h,Math.max(s.label.width,s.techn.width),s.techn.height,{fill:a,"font-style":"italic"},f))}},_x=function(t,e,i){const r=t.append("g");let n=e.bgColor?e.bgColor:"none",s=e.borderColor?e.borderColor:"#444444",a=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:n,stroke:s,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};dl(r,l);let h=i.boundaryFont();h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,Zi(i)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},h),e.type&&e.type.text!==""&&(h=i.boundaryFont(),h.fontColor=a,Zi(i)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},h)),e.descr&&e.descr.text!==""&&(h=i.boundaryFont(),h.fontSize=h.fontSize-2,h.fontColor=a,Zi(i)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},h))},Tx=function(t,e,i){var r;let n=e.bgColor?e.bgColor:i[e.typeC4Shape.text+"_bg_color"],s=e.borderColor?e.borderColor:i[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const l=t.append("g");l.attr("class","person-man");const h=Wr();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=e.x,h.y=e.y,h.fill=n,h.width=e.width,h.height=e.height,h.stroke=s,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},dl(l,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":l.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":l.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),l.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=Fx(i,e.typeC4Shape.text);switch(l.append("text").attr("fill",a).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":n1(l,48,48,e.x+e.width/2-24,e.y+e.image.Y,o);break}let f=i[e.typeC4Shape.text+"Font"]();return f.fontWeight="bold",f.fontSize=f.fontSize+2,f.fontColor=a,Zi(i)(e.label.text,l,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},f),f=i[e.typeC4Shape.text+"Font"](),f.fontColor=a,e.techn&&((r=e.techn)==null?void 0:r.text)!==""?Zi(i)(e.techn.text,l,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},f):e.type&&e.type.text!==""&&Zi(i)(e.type.text,l,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},f),e.descr&&e.descr.text!==""&&(f=i.personFont(),f.fontColor=a,Zi(i)(e.descr.text,l,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},f)),e.height},Cx=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},Ex=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},Sx=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},wx=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},vx=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},Ax=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},Lx=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},Bx=function(t){const i=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);i.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),i.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},Fx=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Zi=function(){function t(n,s,a,o,l,h,u){const f=s.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(n);r(f,u)}function e(n,s,a,o,l,h,u,f){const{fontSize:d,fontFamily:p,fontWeight:y}=f,b=n.split(yt.lineBreakRegex);for(let C=0;C<b.length;C++){const E=C*d-d*(b.length-1)/2,k=s.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",d).style("font-weight",y).style("font-family",p);k.append("tspan").attr("dy",E).text(b[C]).attr("alignment-baseline","mathematical"),r(k,u)}}function i(n,s,a,o,l,h,u,f){const d=s.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,d,a,o,l,h,u,f),r(y,u)}function r(n,s){for(const a in s)s.hasOwnProperty(a)&&n.attr(a,s[a])}return function(n){return n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}}(),Ai={drawRect:dl,drawBoundary:_x,drawC4Shape:Tx,drawRels:kx,drawImage:n1,insertArrowHead:wx,insertArrowEnd:vx,insertArrowFilledHead:Ax,insertDynamicNumber:Lx,insertArrowCrossHead:Bx,insertDatabaseIcon:Cx,insertComputerIcon:Ex,insertClockIcon:Sx};let Xs=0,$s=0,s1=4,so=2;Us.yy=no;let Tt={};class a1{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,ao(e.db.getConfig())}setData(e,i,r,n){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=i,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=n}updateVal(e,i,r,n){e[i]===void 0?e[i]=r:e[i]=n(r,e[i])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let i=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,r=i+e.width,n=this.nextData.starty+e.margin*2,s=n+e.height;(i>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>s1)&&(i=this.nextData.startx+e.margin+Tt.nextLinePaddingX,n=this.nextData.stopy+e.margin*2,this.nextData.stopx=r=i+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=s=n+e.height,this.nextData.cnt=1),e.x=i,e.y=n,this.updateVal(this.data,"startx",i,Math.min),this.updateVal(this.data,"starty",n,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",s,Math.max),this.updateVal(this.nextData,"startx",i,Math.min),this.updateVal(this.nextData,"starty",n,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",s,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},ao(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}}const ao=function(t){Te(Tt,t),t.fontFamily&&(Tt.personFontFamily=Tt.systemFontFamily=Tt.messageFontFamily=t.fontFamily),t.fontSize&&(Tt.personFontSize=Tt.systemFontSize=Tt.messageFontSize=t.fontSize),t.fontWeight&&(Tt.personFontWeight=Tt.systemFontWeight=Tt.messageFontWeight=t.fontWeight)},kn=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),ws=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),Ix=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function bi(t,e,i,r,n){if(!e[t].width)if(i)e[t].text=ru(e[t].text,n,r),e[t].textLines=e[t].text.split(yt.lineBreakRegex).length,e[t].width=n,e[t].height=eo(e[t].text,r);else{let s=e[t].text.split(yt.lineBreakRegex);e[t].textLines=s.length;let a=0;e[t].height=0,e[t].width=0;for(const o of s)e[t].width=Math.max(Fi(o,r),e[t].width),a=eo(o,r),e[t].height=e[t].height+a}}const o1=function(t,e,i){e.x=i.data.startx,e.y=i.data.starty,e.width=i.data.stopx-i.data.startx,e.height=i.data.stopy-i.data.starty,e.label.y=Tt.c4ShapeMargin-35;let r=e.wrap&&Tt.wrap,n=ws(Tt);n.fontSize=n.fontSize+2,n.fontWeight="bold";let s=Fi(e.label.text,n);bi("label",e,r,n,s),Ai.drawBoundary(t,e,Tt)},l1=function(t,e,i,r){let n=0;for(const s of r){n=0;const a=i[s];let o=kn(Tt,a.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,a.typeC4Shape.width=Fi("«"+a.typeC4Shape.text+"»",o),a.typeC4Shape.height=o.fontSize+2,a.typeC4Shape.Y=Tt.c4ShapePadding,n=a.typeC4Shape.Y+a.typeC4Shape.height-4,a.image={width:0,height:0,Y:0},a.typeC4Shape.text){case"person":case"external_person":a.image.width=48,a.image.height=48,a.image.Y=n,n=a.image.Y+a.image.height;break}a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=n,n=a.image.Y+a.image.height);let l=a.wrap&&Tt.wrap,h=Tt.width-Tt.c4ShapePadding*2,u=kn(Tt,a.typeC4Shape.text);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",bi("label",a,l,u,h),a.label.Y=n+8,n=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let p=kn(Tt,a.typeC4Shape.text);bi("type",a,l,p,h),a.type.Y=n+5,n=a.type.Y+a.type.height}else if(a.techn&&a.techn.text!==""){a.techn.text="["+a.techn.text+"]";let p=kn(Tt,a.techn.text);bi("techn",a,l,p,h),a.techn.Y=n+5,n=a.techn.Y+a.techn.height}let f=n,d=a.label.width;if(a.descr&&a.descr.text!==""){let p=kn(Tt,a.typeC4Shape.text);bi("descr",a,l,p,h),a.descr.Y=n+20,n=a.descr.Y+a.descr.height,d=Math.max(a.label.width,a.descr.width),f=n-a.descr.textLines*5}d=d+Tt.c4ShapePadding,a.width=Math.max(a.width||Tt.width,d,Tt.width),a.height=Math.max(a.height||Tt.height,f,Tt.height),a.margin=a.margin||Tt.c4ShapeMargin,t.insert(a),Ai.drawC4Shape(e,a,Tt)}t.bumpLastMargin(Tt.c4ShapeMargin)};class ci{constructor(e,i){this.x=e,this.y=i}}let Bc=function(t,e){let i=t.x,r=t.y,n=e.x,s=e.y,a=i+t.width/2,o=r+t.height/2,l=Math.abs(i-n),h=Math.abs(r-s),u=h/l,f=t.height/t.width,d=null;return r==s&&i<n?d=new ci(i+t.width,o):r==s&&i>n?d=new ci(i,o):i==n&&r<s?d=new ci(a,r+t.height):i==n&&r>s&&(d=new ci(a,r)),i>n&&r<s?f>=u?d=new ci(i,o+u*t.width/2):d=new ci(a-l/h*t.height/2,r+t.height):i<n&&r<s?f>=u?d=new ci(i+t.width,o+u*t.width/2):d=new ci(a+l/h*t.height/2,r+t.height):i<n&&r>s?f>=u?d=new ci(i+t.width,o-u*t.width/2):d=new ci(a+t.height/2*l/h,r):i>n&&r>s&&(f>=u?d=new ci(i,o-t.width/2*u):d=new ci(a-t.height/2*l/h,r)),d},Dx=function(t,e){let i={x:0,y:0};i.x=e.x+e.width/2,i.y=e.y+e.height/2;let r=Bc(t,i);i.x=t.x+t.width/2,i.y=t.y+t.height/2;let n=Bc(e,i);return{startPoint:r,endPoint:n}};const Rx=function(t,e,i,r){let n=0;for(let s of e){n=n+1;let a=s.wrap&&Tt.wrap,o=Ix(Tt);r.db.getC4Type()==="C4Dynamic"&&(s.label.text=n+": "+s.label.text);let h=Fi(s.label.text,o);bi("label",s,a,o,h),s.techn&&s.techn.text!==""&&(h=Fi(s.techn.text,o),bi("techn",s,a,o,h)),s.descr&&s.descr.text!==""&&(h=Fi(s.descr.text,o),bi("descr",s,a,o,h));let u=i(s.from),f=i(s.to),d=Dx(u,f);s.startPoint=d.startPoint,s.endPoint=d.endPoint}Ai.drawRels(t,e,Tt)};function c1(t,e,i,r,n){let s=new a1(n);s.data.widthLimit=i.data.widthLimit/Math.min(so,r.length);for(let[a,o]of r.entries()){let l=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=l,l=o.image.Y+o.image.height);let h=o.wrap&&Tt.wrap,u=ws(Tt);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",bi("label",o,h,u,s.data.widthLimit),o.label.Y=l+8,l=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=ws(Tt);bi("type",o,h,y,s.data.widthLimit),o.type.Y=l+5,l=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=ws(Tt);y.fontSize=y.fontSize-2,bi("descr",o,h,y,s.data.widthLimit),o.descr.Y=l+20,l=o.descr.Y+o.descr.height}if(a==0||a%so===0){let y=i.data.startx+Tt.diagramMarginX,b=i.data.stopy+Tt.diagramMarginY+l;s.setData(y,y,b,b)}else{let y=s.data.stopx!==s.data.startx?s.data.stopx+Tt.diagramMarginX:s.data.startx,b=s.data.starty;s.setData(y,y,b,b)}s.name=o.alias;let f=n.db.getC4ShapeArray(o.alias),d=n.db.getC4ShapeKeys(o.alias);d.length>0&&l1(s,t,f,d),e=o.alias;let p=n.db.getBoundarys(e);p.length>0&&c1(t,e,s,p,n),o.alias!=="global"&&o1(t,o,s),i.data.stopy=Math.max(s.data.stopy+Tt.c4ShapeMargin,i.data.stopy),i.data.stopx=Math.max(s.data.stopx+Tt.c4ShapeMargin,i.data.stopx),Xs=Math.max(Xs,i.data.stopx),$s=Math.max($s,i.data.stopy)}}const Nx=function(t,e,i,r){Tt=G().c4;const n=G().securityLevel;let s;n==="sandbox"&&(s=pt("#i"+e));const a=n==="sandbox"?pt(s.nodes()[0].contentDocument.body):pt("body");let o=r.db;r.db.setWrap(Tt.wrap),s1=o.getC4ShapeInRow(),so=o.getC4BoundaryInRow(),D.debug(`C:${JSON.stringify(Tt,null,2)}`);const l=n==="sandbox"?a.select(`[id="${e}"]`):pt(`[id="${e}"]`);Ai.insertComputerIcon(l),Ai.insertDatabaseIcon(l),Ai.insertClockIcon(l);let h=new a1(r);h.setData(Tt.diagramMarginX,Tt.diagramMarginX,Tt.diagramMarginY,Tt.diagramMarginY),h.data.widthLimit=screen.availWidth,Xs=Tt.diagramMarginX,$s=Tt.diagramMarginY;const u=r.db.getTitle();let f=r.db.getBoundarys("");c1(l,"",h,f,r),Ai.insertArrowHead(l),Ai.insertArrowEnd(l),Ai.insertArrowCrossHead(l),Ai.insertArrowFilledHead(l),Rx(l,r.db.getRels(),r.db.getC4Shape,r),h.data.stopx=Xs,h.data.stopy=$s;const d=h.data;let y=d.stopy-d.starty+2*Tt.diagramMarginY;const C=d.stopx-d.startx+2*Tt.diagramMarginX;u&&l.append("text").text(u).attr("x",(d.stopx-d.startx)/2-4*Tt.diagramMarginX).attr("y",d.starty+Tt.diagramMarginY),Ne(l,y,C,Tt.useMaxWidth);const E=u?60:0;l.attr("viewBox",d.startx-Tt.diagramMarginX+" -"+(Tt.diagramMarginY+E)+" "+C+" "+(y+E)),D.debug("models:",d)},Fc={drawPersonOrSystemArray:l1,drawBoundary:o1,setConf:ao,draw:Nx},Ox=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,Px=Ox,Mx={parser:U3,db:no,renderer:Fc,styles:Px,init:({c4:t,wrap:e})=>{Fc.setConf(t),no.setWrap(e)}},Vx=Object.freeze(Object.defineProperty({__proto__:null,diagram:Mx},Symbol.toStringTag,{value:"Module"}));var oo=function(){var t=function(hr,Et,Lt,Ot){for(Lt=Lt||{},Ot=hr.length;Ot--;Lt[hr[Ot]]=Et);return Lt},e=[1,4],i=[1,3],r=[1,5],n=[1,8,9,10,11,27,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],s=[2,2],a=[1,13],o=[1,14],l=[1,15],h=[1,16],u=[1,23],f=[1,25],d=[1,26],p=[1,27],y=[1,49],b=[1,48],C=[1,29],E=[1,30],k=[1,31],I=[1,32],R=[1,33],B=[1,44],_=[1,46],O=[1,42],L=[1,47],m=[1,43],v=[1,50],g=[1,45],S=[1,51],x=[1,52],M=[1,34],H=[1,35],P=[1,36],A=[1,37],V=[1,57],F=[1,8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],T=[1,61],W=[1,60],lt=[1,62],w=[8,9,11,73,75],ht=[1,88],J=[1,93],j=[1,92],at=[1,89],ct=[1,85],it=[1,91],rt=[1,87],N=[1,94],Z=[1,90],q=[1,95],tt=[1,86],z=[8,9,10,11,73,75],Q=[8,9,10,11,44,73,75],$=[8,9,10,11,29,42,44,46,48,50,52,54,56,58,61,63,65,66,68,73,75,86,99,102,103,106,108,111,112,113],nt=[8,9,11,42,58,73,75,86,99,102,103,106,108,111,112,113],mt=[42,58,86,99,102,103,106,108,111,112,113],Nt=[1,121],Bt=[1,120],Gt=[1,128],vt=[1,142],gt=[1,143],dt=[1,144],kt=[1,145],U=[1,130],ut=[1,132],K=[1,136],_t=[1,137],ot=[1,138],Dt=[1,139],Wt=[1,140],Ht=[1,141],It=[1,146],te=[1,147],At=[1,126],ee=[1,127],jt=[1,134],Ae=[1,129],gs=[1,133],ys=[1,131],xe=[8,9,10,11,27,32,34,36,38,42,58,81,82,83,84,85,86,99,102,103,106,108,111,112,113,118,119,120,121],Si=[1,149],zt=[8,9,11],Ee=[8,9,10,11,14,42,58,86,102,103,106,108,111,112,113],Pt=[1,169],ae=[1,165],Qt=[1,166],Yt=[1,170],Mt=[1,167],qt=[1,168],Le=[75,113,116],Kt=[8,9,10,11,12,14,27,29,32,42,58,73,81,82,83,84,85,86,87,102,106,108,111,112,113],tc=[10,103],cr=[31,47,49,51,53,55,60,62,64,65,67,69,113,114,115],Ni=[1,235],Oi=[1,233],Pi=[1,237],Mi=[1,231],Vi=[1,232],zi=[1,234],qi=[1,236],Wi=[1,238],Hr=[1,255],ec=[8,9,11,103],wi=[8,9,10,11,58,81,102,103,106,107,108,109],Na={trace:function(){},yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeperator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,verticeStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,link:39,node:40,styledVertex:41,AMP:42,vertex:43,STYLE_SEPARATOR:44,idString:45,DOUBLECIRCLESTART:46,DOUBLECIRCLEEND:47,PS:48,PE:49,"(-":50,"-)":51,STADIUMSTART:52,STADIUMEND:53,SUBROUTINESTART:54,SUBROUTINEEND:55,VERTEX_WITH_PROPS_START:56,"NODE_STRING[field]":57,COLON:58,"NODE_STRING[value]":59,PIPE:60,CYLINDERSTART:61,CYLINDEREND:62,DIAMOND_START:63,DIAMOND_STOP:64,TAGEND:65,TRAPSTART:66,TRAPEND:67,INVTRAPSTART:68,INVTRAPEND:69,linkStatement:70,arrowText:71,TESTSTR:72,START_LINK:73,edgeText:74,LINK:75,edgeTextToken:76,STR:77,MD_STR:78,textToken:79,keywords:80,STYLE:81,LINKSTYLE:82,CLASSDEF:83,CLASS:84,CLICK:85,DOWN:86,UP:87,textNoTagsToken:88,stylesOpt:89,"idString[vertex]":90,"idString[class]":91,CALLBACKNAME:92,CALLBACKARGS:93,HREF:94,LINK_TARGET:95,"STR[link]":96,"STR[tooltip]":97,alphaNum:98,DEFAULT:99,numList:100,INTERPOLATE:101,NUM:102,COMMA:103,style:104,styleComponent:105,NODE_STRING:106,UNIT:107,BRKT:108,PCT:109,idStringToken:110,MINUS:111,MULT:112,UNICODE_TEXT:113,TEXT:114,TAGSTART:115,EDGE_TEXT:116,alphaNumToken:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",42:"AMP",44:"STYLE_SEPARATOR",46:"DOUBLECIRCLESTART",47:"DOUBLECIRCLEEND",48:"PS",49:"PE",50:"(-",51:"-)",52:"STADIUMSTART",53:"STADIUMEND",54:"SUBROUTINESTART",55:"SUBROUTINEEND",56:"VERTEX_WITH_PROPS_START",57:"NODE_STRING[field]",58:"COLON",59:"NODE_STRING[value]",60:"PIPE",61:"CYLINDERSTART",62:"CYLINDEREND",63:"DIAMOND_START",64:"DIAMOND_STOP",65:"TAGEND",66:"TRAPSTART",67:"TRAPEND",68:"INVTRAPSTART",69:"INVTRAPEND",72:"TESTSTR",73:"START_LINK",75:"LINK",77:"STR",78:"MD_STR",81:"STYLE",82:"LINKSTYLE",83:"CLASSDEF",84:"CLASS",85:"CLICK",86:"DOWN",87:"UP",90:"idString[vertex]",91:"idString[class]",92:"CALLBACKNAME",93:"CALLBACKARGS",94:"HREF",95:"LINK_TARGET",96:"STR[link]",97:"STR[tooltip]",99:"DEFAULT",101:"INTERPOLATE",102:"NUM",103:"COMMA",106:"NODE_STRING",107:"UNIT",108:"BRKT",109:"PCT",111:"MINUS",112:"MULT",113:"UNICODE_TEXT",114:"TEXT",115:"TAGSTART",116:"EDGE_TEXT",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[20,3],[20,4],[20,2],[20,1],[40,1],[40,5],[41,1],[41,3],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,8],[43,4],[43,4],[43,4],[43,6],[43,4],[43,4],[43,4],[43,4],[43,4],[43,1],[39,2],[39,3],[39,3],[39,1],[39,3],[74,1],[74,2],[74,1],[74,1],[70,1],[71,3],[30,1],[30,2],[30,1],[30,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[100,1],[100,3],[89,1],[89,3],[104,1],[104,2],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[105,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[79,1],[79,1],[79,1],[79,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[76,1],[76,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[45,1],[45,2],[98,1],[98,2],[33,1],[33,1],[33,1],[33,1]],performAction:function(Et,Lt,Ot,xt,ie,Y,bn){var X=Y.length-1;switch(ie){case 2:this.$=[];break;case 3:(!Array.isArray(Y[X])||Y[X].length>0)&&Y[X-1].push(Y[X]),this.$=Y[X-1];break;case 4:case 176:this.$=Y[X];break;case 11:xt.setDirection("TB"),this.$="TB";break;case 12:xt.setDirection(Y[X-1]),this.$=Y[X-1];break;case 27:this.$=Y[X-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=xt.addSubGraph(Y[X-6],Y[X-1],Y[X-4]);break;case 34:this.$=xt.addSubGraph(Y[X-3],Y[X-1],Y[X-3]);break;case 35:this.$=xt.addSubGraph(void 0,Y[X-1],void 0);break;case 37:this.$=Y[X].trim(),xt.setAccTitle(this.$);break;case 38:case 39:this.$=Y[X].trim(),xt.setAccDescription(this.$);break;case 43:xt.addLink(Y[X-2].stmt,Y[X],Y[X-1]),this.$={stmt:Y[X],nodes:Y[X].concat(Y[X-2].nodes)};break;case 44:xt.addLink(Y[X-3].stmt,Y[X-1],Y[X-2]),this.$={stmt:Y[X-1],nodes:Y[X-1].concat(Y[X-3].nodes)};break;case 45:this.$={stmt:Y[X-1],nodes:Y[X-1]};break;case 46:this.$={stmt:Y[X],nodes:Y[X]};break;case 47:this.$=[Y[X]];break;case 48:this.$=Y[X-4].concat(Y[X]);break;case 49:this.$=Y[X];break;case 50:this.$=Y[X-2],xt.setClass(Y[X-2],Y[X]);break;case 51:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"square");break;case 52:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"doublecircle");break;case 53:this.$=Y[X-5],xt.addVertex(Y[X-5],Y[X-2],"circle");break;case 54:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"ellipse");break;case 55:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"stadium");break;case 56:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"subroutine");break;case 57:this.$=Y[X-7],xt.addVertex(Y[X-7],Y[X-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Y[X-5],Y[X-3]]]));break;case 58:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"cylinder");break;case 59:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"round");break;case 60:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"diamond");break;case 61:this.$=Y[X-5],xt.addVertex(Y[X-5],Y[X-2],"hexagon");break;case 62:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"odd");break;case 63:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"trapezoid");break;case 64:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"inv_trapezoid");break;case 65:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"lean_right");break;case 66:this.$=Y[X-3],xt.addVertex(Y[X-3],Y[X-1],"lean_left");break;case 67:this.$=Y[X],xt.addVertex(Y[X]);break;case 68:Y[X-1].text=Y[X],this.$=Y[X-1];break;case 69:case 70:Y[X-2].text=Y[X-1],this.$=Y[X-2];break;case 71:this.$=Y[X];break;case 72:var ai=xt.destructLink(Y[X],Y[X-2]);this.$={type:ai.type,stroke:ai.stroke,length:ai.length,text:Y[X-1]};break;case 73:this.$={text:Y[X],type:"text"};break;case 74:this.$={text:Y[X-1].text+""+Y[X],type:Y[X-1].type};break;case 75:this.$={text:Y[X],type:"string"};break;case 76:this.$={text:Y[X],type:"markdown"};break;case 77:var ai=xt.destructLink(Y[X]);this.$={type:ai.type,stroke:ai.stroke,length:ai.length};break;case 78:this.$=Y[X-1];break;case 79:this.$={text:Y[X],type:"text"};break;case 80:this.$={text:Y[X-1].text+""+Y[X],type:Y[X-1].type};break;case 81:this.$={text:Y[X],type:"string"};break;case 82:case 97:this.$={text:Y[X],type:"markdown"};break;case 94:this.$={text:Y[X],type:"text"};break;case 95:this.$={text:Y[X-1].text+""+Y[X],type:Y[X-1].type};break;case 96:this.$={text:Y[X],type:"text"};break;case 98:this.$=Y[X-4],xt.addClass(Y[X-2],Y[X]);break;case 99:this.$=Y[X-4],xt.setClass(Y[X-2],Y[X]);break;case 100:case 108:this.$=Y[X-1],xt.setClickEvent(Y[X-1],Y[X]);break;case 101:case 109:this.$=Y[X-3],xt.setClickEvent(Y[X-3],Y[X-2]),xt.setTooltip(Y[X-3],Y[X]);break;case 102:this.$=Y[X-2],xt.setClickEvent(Y[X-2],Y[X-1],Y[X]);break;case 103:this.$=Y[X-4],xt.setClickEvent(Y[X-4],Y[X-3],Y[X-2]),xt.setTooltip(Y[X-4],Y[X]);break;case 104:this.$=Y[X-2],xt.setLink(Y[X-2],Y[X]);break;case 105:this.$=Y[X-4],xt.setLink(Y[X-4],Y[X-2]),xt.setTooltip(Y[X-4],Y[X]);break;case 106:this.$=Y[X-4],xt.setLink(Y[X-4],Y[X-2],Y[X]);break;case 107:this.$=Y[X-6],xt.setLink(Y[X-6],Y[X-4],Y[X]),xt.setTooltip(Y[X-6],Y[X-2]);break;case 110:this.$=Y[X-1],xt.setLink(Y[X-1],Y[X]);break;case 111:this.$=Y[X-3],xt.setLink(Y[X-3],Y[X-2]),xt.setTooltip(Y[X-3],Y[X]);break;case 112:this.$=Y[X-3],xt.setLink(Y[X-3],Y[X-2],Y[X]);break;case 113:this.$=Y[X-5],xt.setLink(Y[X-5],Y[X-4],Y[X]),xt.setTooltip(Y[X-5],Y[X-2]);break;case 114:this.$=Y[X-4],xt.addVertex(Y[X-2],void 0,void 0,Y[X]);break;case 115:this.$=Y[X-4],xt.updateLink([Y[X-2]],Y[X]);break;case 116:this.$=Y[X-4],xt.updateLink(Y[X-2],Y[X]);break;case 117:this.$=Y[X-8],xt.updateLinkInterpolate([Y[X-6]],Y[X-2]),xt.updateLink([Y[X-6]],Y[X]);break;case 118:this.$=Y[X-8],xt.updateLinkInterpolate(Y[X-6],Y[X-2]),xt.updateLink(Y[X-6],Y[X]);break;case 119:this.$=Y[X-6],xt.updateLinkInterpolate([Y[X-4]],Y[X]);break;case 120:this.$=Y[X-6],xt.updateLinkInterpolate(Y[X-4],Y[X]);break;case 121:case 123:this.$=[Y[X]];break;case 122:case 124:Y[X-2].push(Y[X]),this.$=Y[X-2];break;case 126:this.$=Y[X-1]+Y[X];break;case 174:this.$=Y[X];break;case 175:this.$=Y[X-1]+""+Y[X];break;case 177:this.$=Y[X-1]+""+Y[X];break;case 178:this.$={stmt:"dir",value:"TB"};break;case 179:this.$={stmt:"dir",value:"BT"};break;case 180:this.$={stmt:"dir",value:"RL"};break;case 181:this.$={stmt:"dir",value:"LR"};break}},table:[{3:1,4:2,9:e,10:i,12:r},{1:[3]},t(n,s,{5:6}),{4:7,9:e,10:i,12:r},{4:8,9:e,10:i,12:r},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:b,81:C,82:E,83:k,84:I,85:R,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x,118:M,119:H,120:P,121:A},t(n,[2,9]),t(n,[2,10]),t(n,[2,11]),{8:[1,54],9:[1,55],10:V,15:53,18:56},t(F,[2,3]),t(F,[2,4]),t(F,[2,5]),t(F,[2,6]),t(F,[2,7]),t(F,[2,8]),{8:T,9:W,11:lt,21:58,39:59,70:63,73:[1,64],75:[1,65]},{8:T,9:W,11:lt,21:66},{8:T,9:W,11:lt,21:67},{8:T,9:W,11:lt,21:68},{8:T,9:W,11:lt,21:69},{8:T,9:W,11:lt,21:70},{8:T,9:W,10:[1,71],11:lt,21:72},t(F,[2,36]),{35:[1,73]},{37:[1,74]},t(F,[2,39]),t(w,[2,46],{18:75,10:V}),{10:[1,76]},{10:[1,77]},{10:[1,78]},{10:[1,79]},{14:ht,42:J,58:j,77:[1,83],86:at,92:[1,80],94:[1,81],98:82,102:ct,103:it,106:rt,108:N,111:Z,112:q,113:tt,117:84},t(F,[2,178]),t(F,[2,179]),t(F,[2,180]),t(F,[2,181]),t(z,[2,47]),t(z,[2,49],{44:[1,96]}),t(Q,[2,67],{110:109,29:[1,97],42:y,46:[1,98],48:[1,99],50:[1,100],52:[1,101],54:[1,102],56:[1,103],58:b,61:[1,104],63:[1,105],65:[1,106],66:[1,107],68:[1,108],86:B,99:_,102:O,103:L,106:m,108:v,111:g,112:S,113:x}),t($,[2,174]),t($,[2,135]),t($,[2,136]),t($,[2,137]),t($,[2,138]),t($,[2,139]),t($,[2,140]),t($,[2,141]),t($,[2,142]),t($,[2,143]),t($,[2,144]),t($,[2,145]),t(n,[2,12]),t(n,[2,18]),t(n,[2,19]),{9:[1,110]},t(nt,[2,26],{18:111,10:V}),t(F,[2,27]),{40:112,41:38,42:y,43:39,45:40,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},t(F,[2,40]),t(F,[2,41]),t(F,[2,42]),t(mt,[2,71],{71:113,60:[1,115],72:[1,114]}),{74:116,76:117,77:[1,118],78:[1,119],113:Nt,116:Bt},t([42,58,60,72,86,99,102,103,106,108,111,112,113],[2,77]),t(F,[2,28]),t(F,[2,29]),t(F,[2,30]),t(F,[2,31]),t(F,[2,32]),{10:Gt,12:vt,14:gt,27:dt,28:122,32:kt,42:U,58:ut,73:K,77:[1,124],78:[1,125],80:135,81:_t,82:ot,83:Dt,84:Wt,85:Ht,86:It,87:te,88:123,102:At,106:ee,108:jt,111:Ae,112:gs,113:ys},t(xe,s,{5:148}),t(F,[2,37]),t(F,[2,38]),t(w,[2,45],{42:Si}),{42:y,45:150,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},{99:[1,151],100:152,102:[1,153]},{42:y,45:154,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},{42:y,45:155,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},t(zt,[2,100],{10:[1,156],93:[1,157]}),{77:[1,158]},t(zt,[2,108],{117:160,10:[1,159],14:ht,42:J,58:j,86:at,102:ct,103:it,106:rt,108:N,111:Z,112:q,113:tt}),t(zt,[2,110],{10:[1,161]}),t(Ee,[2,176]),t(Ee,[2,163]),t(Ee,[2,164]),t(Ee,[2,165]),t(Ee,[2,166]),t(Ee,[2,167]),t(Ee,[2,168]),t(Ee,[2,169]),t(Ee,[2,170]),t(Ee,[2,171]),t(Ee,[2,172]),t(Ee,[2,173]),{42:y,45:162,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},{30:163,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:171,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:173,48:[1,172],65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:174,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:175,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:176,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{106:[1,177]},{30:178,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:179,63:[1,180],65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:181,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:182,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{30:183,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},t($,[2,175]),t(n,[2,20]),t(nt,[2,25]),t(w,[2,43],{18:184,10:V}),t(mt,[2,68],{10:[1,185]}),{10:[1,186]},{30:187,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{75:[1,188],76:189,113:Nt,116:Bt},t(Le,[2,73]),t(Le,[2,75]),t(Le,[2,76]),t(Le,[2,161]),t(Le,[2,162]),{8:T,9:W,10:Gt,11:lt,12:vt,14:gt,21:191,27:dt,29:[1,190],32:kt,42:U,58:ut,73:K,80:135,81:_t,82:ot,83:Dt,84:Wt,85:Ht,86:It,87:te,88:192,102:At,106:ee,108:jt,111:Ae,112:gs,113:ys},t(Kt,[2,94]),t(Kt,[2,96]),t(Kt,[2,97]),t(Kt,[2,150]),t(Kt,[2,151]),t(Kt,[2,152]),t(Kt,[2,153]),t(Kt,[2,154]),t(Kt,[2,155]),t(Kt,[2,156]),t(Kt,[2,157]),t(Kt,[2,158]),t(Kt,[2,159]),t(Kt,[2,160]),t(Kt,[2,83]),t(Kt,[2,84]),t(Kt,[2,85]),t(Kt,[2,86]),t(Kt,[2,87]),t(Kt,[2,88]),t(Kt,[2,89]),t(Kt,[2,90]),t(Kt,[2,91]),t(Kt,[2,92]),t(Kt,[2,93]),{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,193],33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:b,81:C,82:E,83:k,84:I,85:R,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x,118:M,119:H,120:P,121:A},{10:V,18:194},{10:[1,195],42:y,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:109,111:g,112:S,113:x},{10:[1,196]},{10:[1,197],103:[1,198]},t(tc,[2,121]),{10:[1,199],42:y,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:109,111:g,112:S,113:x},{10:[1,200],42:y,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:109,111:g,112:S,113:x},{77:[1,201]},t(zt,[2,102],{10:[1,202]}),t(zt,[2,104],{10:[1,203]}),{77:[1,204]},t(Ee,[2,177]),{77:[1,205],95:[1,206]},t(z,[2,50],{110:109,42:y,58:b,86:B,99:_,102:O,103:L,106:m,108:v,111:g,112:S,113:x}),{31:[1,207],65:Pt,79:208,113:Yt,114:Mt,115:qt},t(cr,[2,79]),t(cr,[2,81]),t(cr,[2,82]),t(cr,[2,146]),t(cr,[2,147]),t(cr,[2,148]),t(cr,[2,149]),{47:[1,209],65:Pt,79:208,113:Yt,114:Mt,115:qt},{30:210,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{49:[1,211],65:Pt,79:208,113:Yt,114:Mt,115:qt},{51:[1,212],65:Pt,79:208,113:Yt,114:Mt,115:qt},{53:[1,213],65:Pt,79:208,113:Yt,114:Mt,115:qt},{55:[1,214],65:Pt,79:208,113:Yt,114:Mt,115:qt},{58:[1,215]},{62:[1,216],65:Pt,79:208,113:Yt,114:Mt,115:qt},{64:[1,217],65:Pt,79:208,113:Yt,114:Mt,115:qt},{30:218,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},{31:[1,219],65:Pt,79:208,113:Yt,114:Mt,115:qt},{65:Pt,67:[1,220],69:[1,221],79:208,113:Yt,114:Mt,115:qt},{65:Pt,67:[1,223],69:[1,222],79:208,113:Yt,114:Mt,115:qt},t(w,[2,44],{42:Si}),t(mt,[2,70]),t(mt,[2,69]),{60:[1,224],65:Pt,79:208,113:Yt,114:Mt,115:qt},t(mt,[2,72]),t(Le,[2,74]),{30:225,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},t(xe,s,{5:226}),t(Kt,[2,95]),t(F,[2,35]),{41:227,42:y,43:39,45:40,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},{10:Ni,58:Oi,81:Pi,89:228,102:Mi,104:229,105:230,106:Vi,107:zi,108:qi,109:Wi},{10:Ni,58:Oi,81:Pi,89:239,101:[1,240],102:Mi,104:229,105:230,106:Vi,107:zi,108:qi,109:Wi},{10:Ni,58:Oi,81:Pi,89:241,101:[1,242],102:Mi,104:229,105:230,106:Vi,107:zi,108:qi,109:Wi},{102:[1,243]},{10:Ni,58:Oi,81:Pi,89:244,102:Mi,104:229,105:230,106:Vi,107:zi,108:qi,109:Wi},{42:y,45:245,58:b,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x},t(zt,[2,101]),{77:[1,246]},{77:[1,247],95:[1,248]},t(zt,[2,109]),t(zt,[2,111],{10:[1,249]}),t(zt,[2,112]),t(Q,[2,51]),t(cr,[2,80]),t(Q,[2,52]),{49:[1,250],65:Pt,79:208,113:Yt,114:Mt,115:qt},t(Q,[2,59]),t(Q,[2,54]),t(Q,[2,55]),t(Q,[2,56]),{106:[1,251]},t(Q,[2,58]),t(Q,[2,60]),{64:[1,252],65:Pt,79:208,113:Yt,114:Mt,115:qt},t(Q,[2,62]),t(Q,[2,63]),t(Q,[2,65]),t(Q,[2,64]),t(Q,[2,66]),t([10,42,58,86,99,102,103,106,108,111,112,113],[2,78]),{31:[1,253],65:Pt,79:208,113:Yt,114:Mt,115:qt},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,254],33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:b,81:C,82:E,83:k,84:I,85:R,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x,118:M,119:H,120:P,121:A},t(z,[2,48]),t(zt,[2,114],{103:Hr}),t(ec,[2,123],{105:256,10:Ni,58:Oi,81:Pi,102:Mi,106:Vi,107:zi,108:qi,109:Wi}),t(wi,[2,125]),t(wi,[2,127]),t(wi,[2,128]),t(wi,[2,129]),t(wi,[2,130]),t(wi,[2,131]),t(wi,[2,132]),t(wi,[2,133]),t(wi,[2,134]),t(zt,[2,115],{103:Hr}),{10:[1,257]},t(zt,[2,116],{103:Hr}),{10:[1,258]},t(tc,[2,122]),t(zt,[2,98],{103:Hr}),t(zt,[2,99],{110:109,42:y,58:b,86:B,99:_,102:O,103:L,106:m,108:v,111:g,112:S,113:x}),t(zt,[2,103]),t(zt,[2,105],{10:[1,259]}),t(zt,[2,106]),{95:[1,260]},{49:[1,261]},{60:[1,262]},{64:[1,263]},{8:T,9:W,11:lt,21:264},t(F,[2,34]),{10:Ni,58:Oi,81:Pi,102:Mi,104:265,105:230,106:Vi,107:zi,108:qi,109:Wi},t(wi,[2,126]),{14:ht,42:J,58:j,86:at,98:266,102:ct,103:it,106:rt,108:N,111:Z,112:q,113:tt,117:84},{14:ht,42:J,58:j,86:at,98:267,102:ct,103:it,106:rt,108:N,111:Z,112:q,113:tt,117:84},{95:[1,268]},t(zt,[2,113]),t(Q,[2,53]),{30:269,65:Pt,77:ae,78:Qt,79:164,113:Yt,114:Mt,115:qt},t(Q,[2,61]),t(xe,s,{5:270}),t(ec,[2,124],{105:256,10:Ni,58:Oi,81:Pi,102:Mi,106:Vi,107:zi,108:qi,109:Wi}),t(zt,[2,119],{117:160,10:[1,271],14:ht,42:J,58:j,86:at,102:ct,103:it,106:rt,108:N,111:Z,112:q,113:tt}),t(zt,[2,120],{117:160,10:[1,272],14:ht,42:J,58:j,86:at,102:ct,103:it,106:rt,108:N,111:Z,112:q,113:tt}),t(zt,[2,107]),{31:[1,273],65:Pt,79:208,113:Yt,114:Mt,115:qt},{6:11,7:12,8:a,9:o,10:l,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,274],33:24,34:f,36:d,38:p,40:28,41:38,42:y,43:39,45:40,58:b,81:C,82:E,83:k,84:I,85:R,86:B,99:_,102:O,103:L,106:m,108:v,110:41,111:g,112:S,113:x,118:M,119:H,120:P,121:A},{10:Ni,58:Oi,81:Pi,89:275,102:Mi,104:229,105:230,106:Vi,107:zi,108:qi,109:Wi},{10:Ni,58:Oi,81:Pi,89:276,102:Mi,104:229,105:230,106:Vi,107:zi,108:qi,109:Wi},t(Q,[2,57]),t(F,[2,33]),t(zt,[2,117],{103:Hr}),t(zt,[2,118],{103:Hr})],defaultActions:{},parseError:function(Et,Lt){if(Lt.recoverable)this.trace(Et);else{var Ot=new Error(Et);throw Ot.hash=Lt,Ot}},parse:function(Et){var Lt=this,Ot=[0],xt=[],ie=[null],Y=[],bn=this.table,X="",ai=0,ic=0,Ef=2,rc=1,Sf=Y.slice.call(arguments,1),be=Object.create(this.lexer),Sr={yy:{}};for(var Pa in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Pa)&&(Sr.yy[Pa]=this.yy[Pa]);be.setInput(Et,Sr.yy),Sr.yy.lexer=be,Sr.yy.parser=this,typeof be.yylloc>"u"&&(be.yylloc={});var Ma=be.yylloc;Y.push(Ma);var wf=be.options&&be.options.ranges;typeof Sr.yy.parseError=="function"?this.parseError=Sr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function vf(){var Hi;return Hi=xt.pop()||be.lex()||rc,typeof Hi!="number"&&(Hi instanceof Array&&(xt=Hi,Hi=xt.pop()),Hi=Lt.symbols_[Hi]||Hi),Hi}for(var Ge,wr,oi,Va,Ur={},ms,Yi,nc,xs;;){if(wr=Ot[Ot.length-1],this.defaultActions[wr]?oi=this.defaultActions[wr]:((Ge===null||typeof Ge>"u")&&(Ge=vf()),oi=bn[wr]&&bn[wr][Ge]),typeof oi>"u"||!oi.length||!oi[0]){var za="";xs=[];for(ms in bn[wr])this.terminals_[ms]&&ms>Ef&&xs.push("'"+this.terminals_[ms]+"'");be.showPosition?za="Parse error on line "+(ai+1)+`:
`+be.showPosition()+`
Expecting `+xs.join(", ")+", got '"+(this.terminals_[Ge]||Ge)+"'":za="Parse error on line "+(ai+1)+": Unexpected "+(Ge==rc?"end of input":"'"+(this.terminals_[Ge]||Ge)+"'"),this.parseError(za,{text:be.match,token:this.terminals_[Ge]||Ge,line:be.yylineno,loc:Ma,expected:xs})}if(oi[0]instanceof Array&&oi.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wr+", token: "+Ge);switch(oi[0]){case 1:Ot.push(Ge),ie.push(be.yytext),Y.push(be.yylloc),Ot.push(oi[1]),Ge=null,ic=be.yyleng,X=be.yytext,ai=be.yylineno,Ma=be.yylloc;break;case 2:if(Yi=this.productions_[oi[1]][1],Ur.$=ie[ie.length-Yi],Ur._$={first_line:Y[Y.length-(Yi||1)].first_line,last_line:Y[Y.length-1].last_line,first_column:Y[Y.length-(Yi||1)].first_column,last_column:Y[Y.length-1].last_column},wf&&(Ur._$.range=[Y[Y.length-(Yi||1)].range[0],Y[Y.length-1].range[1]]),Va=this.performAction.apply(Ur,[X,ic,ai,Sr.yy,oi[1],ie,Y].concat(Sf)),typeof Va<"u")return Va;Yi&&(Ot=Ot.slice(0,-1*Yi*2),ie=ie.slice(0,-1*Yi),Y=Y.slice(0,-1*Yi)),Ot.push(this.productions_[oi[1]][0]),ie.push(Ur.$),Y.push(Ur._$),nc=bn[Ot[Ot.length-2]][Ot[Ot.length-1]],Ot.push(nc);break;case 3:return!0}}return!0}},Cf=function(){var hr={EOF:1,parseError:function(Lt,Ot){if(this.yy.parser)this.yy.parser.parseError(Lt,Ot);else throw new Error(Lt)},setInput:function(Et,Lt){return this.yy=Lt||this.yy||{},this._input=Et,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Et=this._input[0];this.yytext+=Et,this.yyleng++,this.offset++,this.match+=Et,this.matched+=Et;var Lt=Et.match(/(?:\r\n?|\n).*/g);return Lt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Et},unput:function(Et){var Lt=Et.length,Ot=Et.split(/(?:\r\n?|\n)/g);this._input=Et+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Lt),this.offset-=Lt;var xt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ot.length-1&&(this.yylineno-=Ot.length-1);var ie=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ot?(Ot.length===xt.length?this.yylloc.first_column:0)+xt[xt.length-Ot.length].length-Ot[0].length:this.yylloc.first_column-Lt},this.options.ranges&&(this.yylloc.range=[ie[0],ie[0]+this.yyleng-Lt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Et){this.unput(this.match.slice(Et))},pastInput:function(){var Et=this.matched.substr(0,this.matched.length-this.match.length);return(Et.length>20?"...":"")+Et.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Et=this.match;return Et.length<20&&(Et+=this._input.substr(0,20-Et.length)),(Et.substr(0,20)+(Et.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Et=this.pastInput(),Lt=new Array(Et.length+1).join("-");return Et+this.upcomingInput()+`
`+Lt+"^"},test_match:function(Et,Lt){var Ot,xt,ie;if(this.options.backtrack_lexer&&(ie={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ie.yylloc.range=this.yylloc.range.slice(0))),xt=Et[0].match(/(?:\r\n?|\n).*/g),xt&&(this.yylineno+=xt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xt?xt[xt.length-1].length-xt[xt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Et[0].length},this.yytext+=Et[0],this.match+=Et[0],this.matches=Et,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Et[0].length),this.matched+=Et[0],Ot=this.performAction.call(this,this.yy,this,Lt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ot)return Ot;if(this._backtrack){for(var Y in ie)this[Y]=ie[Y];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Et,Lt,Ot,xt;this._more||(this.yytext="",this.match="");for(var ie=this._currentRules(),Y=0;Y<ie.length;Y++)if(Ot=this._input.match(this.rules[ie[Y]]),Ot&&(!Lt||Ot[0].length>Lt[0].length)){if(Lt=Ot,xt=Y,this.options.backtrack_lexer){if(Et=this.test_match(Ot,ie[Y]),Et!==!1)return Et;if(this._backtrack){Lt=!1;continue}else return!1}else if(!this.options.flex)break}return Lt?(Et=this.test_match(Lt,ie[xt]),Et!==!1?Et:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Lt=this.next();return Lt||this.lex()},begin:function(Lt){this.conditionStack.push(Lt)},popState:function(){var Lt=this.conditionStack.length-1;return Lt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Lt){return Lt=this.conditionStack.length-1-Math.abs(Lt||0),Lt>=0?this.conditionStack[Lt]:"INITIAL"},pushState:function(Lt){this.begin(Lt)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Lt,Ot,xt,ie){switch(xt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:this.begin("callbackname");break;case 8:this.popState();break;case 9:this.popState(),this.begin("callbackargs");break;case 10:return 92;case 11:this.popState();break;case 12:return 93;case 13:return"MD_STR";case 14:this.popState();break;case 15:this.begin("md_string");break;case 16:return"STR";case 17:this.popState();break;case 18:this.pushState("string");break;case 19:return 81;case 20:return 99;case 21:return 82;case 22:return 101;case 23:return 83;case 24:return 84;case 25:return 94;case 26:this.begin("click");break;case 27:this.popState();break;case 28:return 85;case 29:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 30:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 31:return Lt.lex.firstGraph()&&this.begin("dir"),12;case 32:return 27;case 33:return 32;case 34:return 95;case 35:return 95;case 36:return 95;case 37:return 95;case 38:return this.popState(),13;case 39:return this.popState(),14;case 40:return this.popState(),14;case 41:return this.popState(),14;case 42:return this.popState(),14;case 43:return this.popState(),14;case 44:return this.popState(),14;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return 118;case 50:return 119;case 51:return 120;case 52:return 121;case 53:return 102;case 54:return 108;case 55:return 44;case 56:return 58;case 57:return 42;case 58:return 8;case 59:return 103;case 60:return 112;case 61:return this.popState(),75;case 62:return this.pushState("edgeText"),73;case 63:return 116;case 64:return this.popState(),75;case 65:return this.pushState("thickEdgeText"),73;case 66:return 116;case 67:return this.popState(),75;case 68:return this.pushState("dottedEdgeText"),73;case 69:return 116;case 70:return 75;case 71:return this.popState(),51;case 72:return"TEXT";case 73:return this.pushState("ellipseText"),50;case 74:return this.popState(),53;case 75:return this.pushState("text"),52;case 76:return this.popState(),55;case 77:return this.pushState("text"),54;case 78:return 56;case 79:return this.pushState("text"),65;case 80:return this.popState(),62;case 81:return this.pushState("text"),61;case 82:return this.popState(),47;case 83:return this.pushState("text"),46;case 84:return this.popState(),67;case 85:return this.popState(),69;case 86:return 114;case 87:return this.pushState("trapText"),66;case 88:return this.pushState("trapText"),68;case 89:return 115;case 90:return 65;case 91:return 87;case 92:return"SEP";case 93:return 86;case 94:return 112;case 95:return 108;case 96:return 42;case 97:return 106;case 98:return 111;case 99:return 113;case 100:return this.popState(),60;case 101:return this.pushState("text"),60;case 102:return this.popState(),49;case 103:return this.pushState("text"),48;case 104:return this.popState(),31;case 105:return this.pushState("text"),29;case 106:return this.popState(),64;case 107:return this.pushState("text"),63;case 108:return"TEXT";case 109:return"QUOTE";case 110:return 9;case 111:return 10;case 112:return 11}},rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{callbackargs:{rules:[11,12,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},callbackname:{rules:[8,9,10,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},href:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},click:{rules:[15,18,27,28,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dottedEdgeText:{rules:[15,18,67,69,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},thickEdgeText:{rules:[15,18,64,66,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},edgeText:{rules:[15,18,61,63,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},trapText:{rules:[15,18,70,73,75,77,81,83,84,85,86,87,88,101,103,105,107],inclusive:!1},ellipseText:{rules:[15,18,70,71,72,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},text:{rules:[15,18,70,73,74,75,76,77,80,81,82,83,87,88,100,101,102,103,104,105,106,107,108],inclusive:!1},vertex:{rules:[15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},dir:{rules:[15,18,38,39,40,41,42,43,44,45,46,47,48,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr_multiline:{rules:[5,6,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_descr:{rules:[3,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},acc_title:{rules:[1,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},md_string:{rules:[13,14,15,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},string:{rules:[15,16,17,18,70,73,75,77,81,83,87,88,101,103,105,107],inclusive:!1},INITIAL:{rules:[0,2,4,7,15,18,19,20,21,22,23,24,25,26,29,30,31,32,33,34,35,36,37,49,50,51,52,53,54,55,56,57,58,59,60,61,62,64,65,67,68,70,73,75,77,78,79,81,83,87,88,89,90,91,92,93,94,95,96,97,98,99,101,103,105,107,109,110,111,112],inclusive:!0}}};return hr}();Na.lexer=Cf;function Oa(){this.yy={}}return Oa.prototype=Na,Na.Parser=Oa,new Oa}();oo.parser=oo;const fl=oo,zx="flowchart-";let Ic=0,pl=G(),Jt={},kr=[],Kr={},rr=[],Qs={},Ks={},vs=0,lo=!0,hi,_a,Ta=[];const Ca=t=>yt.sanitizeText(t,pl),ls=function(t){const e=Object.keys(Jt);for(const i of e)if(Jt[i].id===t)return Jt[i].domId;return t},h1=function(t,e,i,r,n,s,a={}){let o,l=t;l!==void 0&&l.trim().length!==0&&(Jt[l]===void 0&&(Jt[l]={id:l,labelType:"text",domId:zx+l+"-"+Ic,styles:[],classes:[]}),Ic++,e!==void 0?(pl=G(),o=Ca(e.text.trim()),Jt[l].labelType=e.type,o[0]==='"'&&o[o.length-1]==='"'&&(o=o.substring(1,o.length-1)),Jt[l].text=o):Jt[l].text===void 0&&(Jt[l].text=t),i!==void 0&&(Jt[l].type=i),r!=null&&r.forEach(function(h){Jt[l].styles.push(h)}),n!=null&&n.forEach(function(h){Jt[l].classes.push(h)}),s!==void 0&&(Jt[l].dir=s),Jt[l].props===void 0?Jt[l].props=a:a!==void 0&&Object.assign(Jt[l].props,a))},u1=function(t,e,i){const s={start:t,end:e,type:void 0,text:"",labelType:"text"};D.info("abc78 Got edge...",s);const a=i.text;if(a!==void 0&&(s.text=Ca(a.text.trim()),s.text[0]==='"'&&s.text[s.text.length-1]==='"'&&(s.text=s.text.substring(1,s.text.length-1)),s.labelType=a.type),i!==void 0&&(s.type=i.type,s.stroke=i.stroke,s.length=i.length),(s==null?void 0:s.length)>10&&(s.length=10),kr.length<280)D.info("abc78 pushing edge..."),kr.push(s);else throw new Error("Too many edges")},d1=function(t,e,i){D.info("addLink (abc78)",t,e,i);let r,n;for(r=0;r<t.length;r++)for(n=0;n<e.length;n++)u1(t[r],e[n],i)},f1=function(t,e){t.forEach(function(i){i==="default"?kr.defaultInterpolate=e:kr[i].interpolate=e})},p1=function(t,e){t.forEach(function(i){i==="default"?kr.defaultStyle=e:(Rt.isSubstringInArray("fill",e)===-1&&e.push("fill:none"),kr[i].style=e)})},g1=function(t,e){t.split(",").forEach(function(i){Kr[i]===void 0&&(Kr[i]={id:i,styles:[],textStyles:[]}),e!=null&&e.forEach(function(r){if(r.match("color")){const n=r.replace("fill","bgFill").replace("color","fill");Kr[i].textStyles.push(n)}Kr[i].styles.push(r)})})},y1=function(t){hi=t,hi.match(/.*</)&&(hi="RL"),hi.match(/.*\^/)&&(hi="BT"),hi.match(/.*>/)&&(hi="LR"),hi.match(/.*v/)&&(hi="TB"),hi==="TD"&&(hi="TB")},Ea=function(t,e){t.split(",").forEach(function(i){let r=i;Jt[r]!==void 0&&Jt[r].classes.push(e),Qs[r]!==void 0&&Qs[r].classes.push(e)})},qx=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(Ks[_a==="gen-1"?ls(i):i]=Ca(e))})},Wx=function(t,e,i){let r=ls(t);if(G().securityLevel!=="loose"||e===void 0)return;let n=[];if(typeof i=="string"){n=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let s=0;s<n.length;s++){let a=n[s].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),n[s]=a}}n.length===0&&n.push(t),Jt[t]!==void 0&&(Jt[t].haveCallback=!0,Ta.push(function(){const s=document.querySelector(`[id="${r}"]`);s!==null&&s.addEventListener("click",function(){Rt.runFunc(e,...n)},!1)}))},m1=function(t,e,i){t.split(",").forEach(function(r){Jt[r]!==void 0&&(Jt[r].link=Rt.formatUrl(e,pl),Jt[r].linkTarget=i)}),Ea(t,"clickable")},x1=function(t){if(Ks.hasOwnProperty(t))return Ks[t]},b1=function(t,e,i){t.split(",").forEach(function(r){Wx(r,e,i)}),Ea(t,"clickable")},k1=function(t){Ta.forEach(function(e){e(t)})},_1=function(){return hi.trim()},T1=function(){return Jt},C1=function(){return kr},E1=function(){return Kr},S1=function(t){let e=pt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=pt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),pt(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=pt(this);if(n.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),pt(this).classed("hover",!1)})};Ta.push(S1);const w1=function(t="gen-1"){Jt={},Kr={},kr=[],Ta=[S1],rr=[],Qs={},vs=0,Ks={},lo=!0,_a=t,We()},v1=t=>{_a=t||"gen-2"},A1=function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},L1=function(t,e,i){let r=t.text.trim(),n=i.text;t===i&&i.text.match(/\s/)&&(r=void 0);function s(u){const f={boolean:{},number:{},string:{}},d=[];let p;return{nodeList:u.filter(function(b){const C=typeof b;return b.stmt&&b.stmt==="dir"?(p=b.value,!1):b.trim()===""?!1:C in f?f[C].hasOwnProperty(b)?!1:f[C][b]=!0:d.includes(b)?!1:d.push(b)}),dir:p}}let a=[];const{nodeList:o,dir:l}=s(a.concat.apply(a,e));if(a=o,_a==="gen-1")for(let u=0;u<a.length;u++)a[u]=ls(a[u]);r=r||"subGraph"+vs,n=n||"",n=Ca(n),vs=vs+1;const h={id:r,nodes:a,title:n.trim(),classes:[],dir:l,labelType:i.type};return D.info("Adding",h.id,h.nodes,h.dir),h.nodes=M1(h,rr).nodes,rr.push(h),Qs[r]=h,r},Yx=function(t){for(const[e,i]of rr.entries())if(i.id===t)return e;return-1};let En=-1;const B1=[],F1=function(t,e){const i=rr[e].nodes;if(En=En+1,En>2e3)return;if(B1[En]=e,rr[e].id===t)return{result:!0,count:0};let r=0,n=1;for(;r<i.length;){const s=Yx(i[r]);if(s>=0){const a=F1(t,s);if(a.result)return{result:!0,count:n+a.count};n=n+a.count}r=r+1}return{result:!1,count:n}},I1=function(t){return B1[t]},D1=function(){En=-1,rr.length>0&&F1("none",rr.length-1)},R1=function(){return rr},N1=()=>lo?(lo=!1,!0):!1,Hx=t=>{let e=t.trim(),i="arrow_open";switch(e[0]){case"<":i="arrow_point",e=e.slice(1);break;case"x":i="arrow_cross",e=e.slice(1);break;case"o":i="arrow_circle",e=e.slice(1);break}let r="normal";return e.includes("=")&&(r="thick"),e.includes(".")&&(r="dotted"),{type:i,stroke:r}},Ux=(t,e)=>{const i=e.length;let r=0;for(let n=0;n<i;++n)e[n]===t&&++r;return r},jx=t=>{const e=t.trim();let i=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross",e[0]==="x"&&(r="double_"+r,i=i.slice(1));break;case">":r="arrow_point",e[0]==="<"&&(r="double_"+r,i=i.slice(1));break;case"o":r="arrow_circle",e[0]==="o"&&(r="double_"+r,i=i.slice(1));break}let n="normal",s=i.length-1;i[0]==="="&&(n="thick"),i[0]==="~"&&(n="invisible");let a=Ux(".",i);return a&&(n="dotted",s=a),{type:r,stroke:n,length:s}},O1=(t,e)=>{const i=jx(t);let r;if(e){if(r=Hx(e),r.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if(r.type==="arrow_open")r.type=i.type;else{if(r.type!==i.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return r.type==="double_arrow"&&(r.type="double_arrow_point"),r.length=i.length,r}return i},P1=(t,e)=>{let i=!1;return t.forEach(r=>{r.nodes.indexOf(e)>=0&&(i=!0)}),i},M1=(t,e)=>{const i=[];return t.nodes.forEach((r,n)=>{P1(e,r)||i.push(t.nodes[n])}),{nodes:i}},V1={firstGraph:N1},Ir={defaultConfig:()=>Au.flowchart,setAccTitle:Oe,getAccTitle:Ye,getAccDescription:Ue,setAccDescription:He,addVertex:h1,lookUpDomId:ls,addLink:d1,updateLinkInterpolate:f1,updateLink:p1,addClass:g1,setDirection:y1,setClass:Ea,setTooltip:qx,getTooltip:x1,setClickEvent:b1,setLink:m1,bindFunctions:k1,getDirection:_1,getVertices:T1,getEdges:C1,getClasses:E1,clear:w1,setGen:v1,defaultStyle:A1,addSubGraph:L1,getDepthFirstPos:I1,indexNodes:D1,getSubGraphs:R1,destructLink:O1,lex:V1,exists:P1,makeUniq:M1,setDiagramTitle:ni,getDiagramTitle:je},Gx=Object.freeze(Object.defineProperty({__proto__:null,addClass:g1,addLink:d1,addSingleLink:u1,addSubGraph:L1,addVertex:h1,bindFunctions:k1,clear:w1,default:Ir,defaultStyle:A1,destructLink:O1,firstGraph:N1,getClasses:E1,getDepthFirstPos:I1,getDirection:_1,getEdges:C1,getSubGraphs:R1,getTooltip:x1,getVertices:T1,indexNodes:D1,lex:V1,lookUpDomId:ls,setClass:Ea,setClickEvent:b1,setDirection:y1,setGen:v1,setLink:m1,updateLink:p1,updateLinkInterpolate:f1},Symbol.toStringTag,{value:"Module"})),Xx={};function $x(t,e){const i=e||Xx,r=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,n=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return z1(t,r,n)}function z1(t,e,i){if(Qx(t)){if("value"in t)return t.type==="html"&&!i?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Dc(t.children,e,i)}return Array.isArray(t)?Dc(t,e,i):""}function Dc(t,e,i){const r=[];let n=-1;for(;++n<t.length;)r[n]=z1(t[n],e,i);return r.join("")}function Qx(t){return!!(t&&typeof t=="object")}function _r(t,e,i,r){const n=t.length;let s=0,a;if(e<0?e=-e>n?0:n+e:e=e>n?n:e,i=i>0?i:0,r.length<1e4)a=Array.from(r),a.unshift(e,i),t.splice(...a);else for(i&&t.splice(e,i);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function fi(t,e){return t.length>0?(_r(t,t.length,0,e),t):e}const Rc={}.hasOwnProperty;function Kx(t){const e={};let i=-1;for(;++i<t.length;)Zx(e,t[i]);return e}function Zx(t,e){let i;for(i in e){const n=(Rc.call(t,i)?t[i]:void 0)||(t[i]={}),s=e[i];let a;if(s)for(a in s){Rc.call(n,a)||(n[a]=[]);const o=s[a];Jx(n[a],Array.isArray(o)?o:o?[o]:[])}}}function Jx(t,e){let i=-1;const r=[];for(;++i<e.length;)(e[i].add==="after"?t:r).push(e[i]);_r(t,0,0,r)}const t4=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Li=Er(/[A-Za-z]/),ki=Er(/[\dA-Za-z]/),e4=Er(/[#-'*+\--9=?A-Z^-~]/);function co(t){return t!==null&&(t<32||t===127)}const ho=Er(/\d/),i4=Er(/[\dA-Fa-f]/),r4=Er(/[!-/:-@[-`{-~]/);function Ft(t){return t!==null&&t<-2}function Je(t){return t!==null&&(t<0||t===32)}function Ut(t){return t===-2||t===-1||t===32}const n4=Er(t4),s4=Er(/\s/);function Er(t){return e;function e(i){return i!==null&&t.test(String.fromCharCode(i))}}function Zt(t,e,i,r){const n=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return Ut(l)?(t.enter(i),o(l)):e(l)}function o(l){return Ut(l)&&s++<n?(t.consume(l),o):(t.exit(i),e(l))}}const a4={tokenize:o4};function o4(t){const e=t.attempt(this.parser.constructs.contentInitial,r,n);let i;return e;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Zt(t,e,"linePrefix")}function n(o){return t.enter("paragraph"),s(o)}function s(o){const l=t.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=l),i=l,a(o)}function a(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return Ft(o)?(t.consume(o),t.exit("chunkText"),s):(t.consume(o),a)}}const l4={tokenize:c4},Nc={tokenize:h4};function c4(t){const e=this,i=[];let r=0,n,s,a;return o;function o(I){if(r<i.length){const R=i[r];return e.containerState=R[1],t.attempt(R[0].continuation,l,h)(I)}return h(I)}function l(I){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,n&&k();const R=e.events.length;let B=R,_;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){_=e.events[B][1].end;break}E(r);let O=R;for(;O<e.events.length;)e.events[O][1].end=Object.assign({},_),O++;return _r(e.events,B+1,0,e.events.slice(R)),e.events.length=O,h(I)}return o(I)}function h(I){if(r===i.length){if(!n)return d(I);if(n.currentConstruct&&n.currentConstruct.concrete)return y(I);e.interrupt=!!(n.currentConstruct&&!n._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Nc,u,f)(I)}function u(I){return n&&k(),E(r),d(I)}function f(I){return e.parser.lazy[e.now().line]=r!==i.length,a=e.now().offset,y(I)}function d(I){return e.containerState={},t.attempt(Nc,p,y)(I)}function p(I){return r++,i.push([e.currentConstruct,e.containerState]),d(I)}function y(I){if(I===null){n&&k(),E(0),t.consume(I);return}return n=n||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:n}),b(I)}function b(I){if(I===null){C(t.exit("chunkFlow"),!0),E(0),t.consume(I);return}return Ft(I)?(t.consume(I),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,o):(t.consume(I),b)}function C(I,R){const B=e.sliceStream(I);if(R&&B.push(null),I.previous=s,s&&(s.next=I),s=I,n.defineSkip(I.start),n.write(B),e.parser.lazy[I.start.line]){let _=n.events.length;for(;_--;)if(n.events[_][1].start.offset<a&&(!n.events[_][1].end||n.events[_][1].end.offset>a))return;const O=e.events.length;let L=O,m,v;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if(m){v=e.events[L][1].end;break}m=!0}for(E(r),_=O;_<e.events.length;)e.events[_][1].end=Object.assign({},v),_++;_r(e.events,L+1,0,e.events.slice(O)),e.events.length=_}}function E(I){let R=i.length;for(;R-- >I;){const B=i[R];e.containerState=B[1],B[0].exit.call(e,t)}i.length=I}function k(){n.write([null]),s=void 0,n=void 0,e.containerState._closeFlow=void 0}}function h4(t,e,i){return Zt(t,t.attempt(this.parser.constructs.document,e,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Oc(t){if(t===null||Je(t)||s4(t))return 1;if(n4(t))return 2}function gl(t,e,i){const r=[];let n=-1;for(;++n<t.length;){const s=t[n].resolveAll;s&&!r.includes(s)&&(e=s(e,i),r.push(s))}return e}const uo={name:"attention",tokenize:d4,resolveAll:u4};function u4(t,e){let i=-1,r,n,s,a,o,l,h,u;for(;++i<t.length;)if(t[i][0]==="enter"&&t[i][1].type==="attentionSequence"&&t[i][1]._close){for(r=i;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[i][1]).charCodeAt(0)){if((t[r][1]._close||t[i][1]._open)&&(t[i][1].end.offset-t[i][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[i][1].end.offset-t[i][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[i][1].end.offset-t[i][1].start.offset>1?2:1;const f=Object.assign({},t[r][1].end),d=Object.assign({},t[i][1].start);Pc(f,-l),Pc(d,l),a={type:l>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},t[r][1].end)},o={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[i][1].start),end:d},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},t[r][1].end),end:Object.assign({},t[i][1].start)},n={type:l>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},t[r][1].end=Object.assign({},a.start),t[i][1].start=Object.assign({},o.end),h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=fi(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=fi(h,[["enter",n,e],["enter",a,e],["exit",a,e],["enter",s,e]]),h=fi(h,gl(e.parser.constructs.insideSpan.null,t.slice(r+1,i),e)),h=fi(h,[["exit",s,e],["enter",o,e],["exit",o,e],["exit",n,e]]),t[i][1].end.offset-t[i][1].start.offset?(u=2,h=fi(h,[["enter",t[i][1],e],["exit",t[i][1],e]])):u=0,_r(t,r-1,i-r+3,h),i=r+h.length-u-2;break}}for(i=-1;++i<t.length;)t[i][1].type==="attentionSequence"&&(t[i][1].type="data");return t}function d4(t,e){const i=this.parser.constructs.attentionMarkers.null,r=this.previous,n=Oc(r);let s;return a;function a(l){return s=l,t.enter("attentionSequence"),o(l)}function o(l){if(l===s)return t.consume(l),o;const h=t.exit("attentionSequence"),u=Oc(l),f=!u||u===2&&n||i.includes(l),d=!n||n===2&&u||i.includes(r);return h._open=!!(s===42?f:f&&(n||!d)),h._close=!!(s===42?d:d&&(u||!f)),e(l)}}function Pc(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const f4={name:"autolink",tokenize:p4};function p4(t,e,i){let r=0;return n;function n(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return Li(p)?(t.consume(p),a):h(p)}function a(p){return p===43||p===45||p===46||ki(p)?(r=1,o(p)):h(p)}function o(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||ki(p))&&r++<32?(t.consume(p),o):(r=0,h(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||co(p)?i(p):(t.consume(p),l)}function h(p){return p===64?(t.consume(p),u):e4(p)?(t.consume(p),h):i(p)}function u(p){return ki(p)?f(p):i(p)}function f(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):d(p)}function d(p){if((p===45||ki(p))&&r++<63){const y=p===45?d:f;return t.consume(p),y}return i(p)}}const Sa={tokenize:g4,partial:!0};function g4(t,e,i){return r;function r(s){return Ut(s)?Zt(t,n,"linePrefix")(s):n(s)}function n(s){return s===null||Ft(s)?e(s):i(s)}}const q1={name:"blockQuote",tokenize:y4,continuation:{tokenize:m4},exit:x4};function y4(t,e,i){const r=this;return n;function n(a){if(a===62){const o=r.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return i(a)}function s(a){return Ut(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function m4(t,e,i){const r=this;return n;function n(a){return Ut(a)?Zt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(q1,e,i)(a)}}function x4(t){t.exit("blockQuote")}const W1={name:"characterEscape",tokenize:b4};function b4(t,e,i){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),n}function n(s){return r4(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):i(s)}}const Y1={name:"characterReference",tokenize:k4};function k4(t,e,i){const r=this;let n=0,s,a;return o;function o(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,a=ki,u(f))}function h(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=i4,u):(t.enter("characterReferenceValue"),s=7,a=ho,u(f))}function u(f){if(f===59&&n){const d=t.exit("characterReferenceValue");return a===ki&&!Go(r.sliceSerialize(d))?i(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(f)&&n++<s?(t.consume(f),u):i(f)}}const Mc={tokenize:T4,partial:!0},Vc={name:"codeFenced",tokenize:_4,concrete:!0};function _4(t,e,i){const r=this,n={tokenize:B,partial:!0};let s=0,a=0,o;return l;function l(_){return h(_)}function h(_){const O=r.events[r.events.length-1];return s=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,o=_,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(_)}function u(_){return _===o?(a++,t.consume(_),u):a<3?i(_):(t.exit("codeFencedFenceSequence"),Ut(_)?Zt(t,f,"whitespace")(_):f(_))}function f(_){return _===null||Ft(_)?(t.exit("codeFencedFence"),r.interrupt?e(_):t.check(Mc,b,R)(_)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(_))}function d(_){return _===null||Ft(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(_)):Ut(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Zt(t,p,"whitespace")(_)):_===96&&_===o?i(_):(t.consume(_),d)}function p(_){return _===null||Ft(_)?f(_):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===null||Ft(_)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(_)):_===96&&_===o?i(_):(t.consume(_),y)}function b(_){return t.attempt(n,R,C)(_)}function C(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),E}function E(_){return s>0&&Ut(_)?Zt(t,k,"linePrefix",s+1)(_):k(_)}function k(_){return _===null||Ft(_)?t.check(Mc,b,R)(_):(t.enter("codeFlowValue"),I(_))}function I(_){return _===null||Ft(_)?(t.exit("codeFlowValue"),k(_)):(t.consume(_),I)}function R(_){return t.exit("codeFenced"),e(_)}function B(_,O,L){let m=0;return v;function v(H){return _.enter("lineEnding"),_.consume(H),_.exit("lineEnding"),g}function g(H){return _.enter("codeFencedFence"),Ut(H)?Zt(_,S,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):S(H)}function S(H){return H===o?(_.enter("codeFencedFenceSequence"),x(H)):L(H)}function x(H){return H===o?(m++,_.consume(H),x):m>=a?(_.exit("codeFencedFenceSequence"),Ut(H)?Zt(_,M,"whitespace")(H):M(H)):L(H)}function M(H){return H===null||Ft(H)?(_.exit("codeFencedFence"),O(H)):L(H)}}}function T4(t,e,i){const r=this;return n;function n(a){return a===null?i(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?i(a):e(a)}}const ja={name:"codeIndented",tokenize:E4},C4={tokenize:S4,partial:!0};function E4(t,e,i){const r=this;return n;function n(h){return t.enter("codeIndented"),Zt(t,s,"linePrefix",4+1)(h)}function s(h){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(h):i(h)}function a(h){return h===null?l(h):Ft(h)?t.attempt(C4,a,l)(h):(t.enter("codeFlowValue"),o(h))}function o(h){return h===null||Ft(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),o)}function l(h){return t.exit("codeIndented"),e(h)}}function S4(t,e,i){const r=this;return n;function n(a){return r.parser.lazy[r.now().line]?i(a):Ft(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n):Zt(t,s,"linePrefix",4+1)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):Ft(a)?n(a):i(a)}}const w4={name:"codeText",tokenize:L4,resolve:v4,previous:A4};function v4(t){let e=t.length-4,i=3,r,n;if((t[i][1].type==="lineEnding"||t[i][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=i;++r<e;)if(t[r][1].type==="codeTextData"){t[i][1].type="codeTextPadding",t[e][1].type="codeTextPadding",i+=2,e-=2;break}}for(r=i-1,e++;++r<=e;)n===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(n=r):(r===e||t[r][1].type==="lineEnding")&&(t[n][1].type="codeTextData",r!==n+2&&(t[n][1].end=t[r-1][1].end,t.splice(n+2,r-n-2),e-=r-n-2,r=n+2),n=void 0);return t}function A4(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function L4(t,e,i){let r=0,n,s;return a;function a(f){return t.enter("codeText"),t.enter("codeTextSequence"),o(f)}function o(f){return f===96?(t.consume(f),r++,o):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?i(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(s=t.enter("codeTextSequence"),n=0,u(f)):Ft(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||Ft(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),h)}function u(f){return f===96?(t.consume(f),n++,u):n===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",h(f))}}const B4={tokenize:D4,resolve:I4},F4={tokenize:R4,partial:!0};function I4(t){return qh(t),t}function D4(t,e){let i;return r;function r(o){return t.enter("content"),i=t.enter("chunkContent",{contentType:"content"}),n(o)}function n(o){return o===null?s(o):Ft(o)?t.check(F4,a,s)(o):(t.consume(o),n)}function s(o){return t.exit("chunkContent"),t.exit("content"),e(o)}function a(o){return t.consume(o),t.exit("chunkContent"),i.next=t.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,n}}function R4(t,e,i){const r=this;return n;function n(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Zt(t,s,"linePrefix")}function s(a){if(a===null||Ft(a))return i(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,i,e)(a)}}function H1(t,e,i,r,n,s,a,o,l){const h=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(E){return E===60?(t.enter(r),t.enter(n),t.enter(s),t.consume(E),t.exit(s),d):E===null||E===32||E===41||co(E)?i(E):(t.enter(r),t.enter(a),t.enter(o),t.enter("chunkString",{contentType:"string"}),b(E))}function d(E){return E===62?(t.enter(s),t.consume(E),t.exit(s),t.exit(n),t.exit(r),e):(t.enter(o),t.enter("chunkString",{contentType:"string"}),p(E))}function p(E){return E===62?(t.exit("chunkString"),t.exit(o),d(E)):E===null||E===60||Ft(E)?i(E):(t.consume(E),E===92?y:p)}function y(E){return E===60||E===62||E===92?(t.consume(E),p):p(E)}function b(E){return!u&&(E===null||E===41||Je(E))?(t.exit("chunkString"),t.exit(o),t.exit(a),t.exit(r),e(E)):u<h&&E===40?(t.consume(E),u++,b):E===41?(t.consume(E),u--,b):E===null||E===32||E===40||co(E)?i(E):(t.consume(E),E===92?C:b)}function C(E){return E===40||E===41||E===92?(t.consume(E),b):b(E)}}function U1(t,e,i,r,n,s){const a=this;let o=0,l;return h;function h(p){return t.enter(r),t.enter(n),t.consume(p),t.exit(n),t.enter(s),u}function u(p){return o>999||p===null||p===91||p===93&&!l||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?i(p):p===93?(t.exit(s),t.enter(n),t.consume(p),t.exit(n),t.exit(r),e):Ft(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===null||p===91||p===93||Ft(p)||o++>999?(t.exit("chunkString"),u(p)):(t.consume(p),l||(l=!Ut(p)),p===92?d:f)}function d(p){return p===91||p===92||p===93?(t.consume(p),o++,f):f(p)}}function j1(t,e,i,r,n,s){let a;return o;function o(d){return d===34||d===39||d===40?(t.enter(r),t.enter(n),t.consume(d),t.exit(n),a=d===40?41:d,l):i(d)}function l(d){return d===a?(t.enter(n),t.consume(d),t.exit(n),t.exit(r),e):(t.enter(s),h(d))}function h(d){return d===a?(t.exit(s),l(a)):d===null?i(d):Ft(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),Zt(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===a||d===null||Ft(d)?(t.exit("chunkString"),h(d)):(t.consume(d),d===92?f:u)}function f(d){return d===a||d===92?(t.consume(d),u):u(d)}}function In(t,e){let i;return r;function r(n){return Ft(n)?(t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),i=!0,r):Ut(n)?Zt(t,r,i?"linePrefix":"lineSuffix")(n):e(n)}}function Jr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const N4={name:"definition",tokenize:P4},O4={tokenize:M4,partial:!0};function P4(t,e,i){const r=this;let n;return s;function s(p){return t.enter("definition"),a(p)}function a(p){return U1.call(r,t,o,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return n=Jr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):i(p)}function l(p){return Je(p)?In(t,h)(p):h(p)}function h(p){return H1(t,u,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(O4,f,f)(p)}function f(p){return Ut(p)?Zt(t,d,"whitespace")(p):d(p)}function d(p){return p===null||Ft(p)?(t.exit("definition"),r.parser.defined.push(n),e(p)):i(p)}}function M4(t,e,i){return r;function r(o){return Je(o)?In(t,n)(o):i(o)}function n(o){return j1(t,s,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Ut(o)?Zt(t,a,"whitespace")(o):a(o)}function a(o){return o===null||Ft(o)?e(o):i(o)}}const V4={name:"hardBreakEscape",tokenize:z4};function z4(t,e,i){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),n}function n(s){return Ft(s)?(t.exit("hardBreakEscape"),e(s)):i(s)}}const q4={name:"headingAtx",tokenize:Y4,resolve:W4};function W4(t,e){let i=t.length-2,r=3,n,s;return t[r][1].type==="whitespace"&&(r+=2),i-2>r&&t[i][1].type==="whitespace"&&(i-=2),t[i][1].type==="atxHeadingSequence"&&(r===i-1||i-4>r&&t[i-2][1].type==="whitespace")&&(i-=r+1===i?2:4),i>r&&(n={type:"atxHeadingText",start:t[r][1].start,end:t[i][1].end},s={type:"chunkText",start:t[r][1].start,end:t[i][1].end,contentType:"text"},_r(t,r,i-r+1,[["enter",n,e],["enter",s,e],["exit",s,e],["exit",n,e]])),t}function Y4(t,e,i){let r=0;return n;function n(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&r++<6?(t.consume(u),a):u===null||Je(u)?(t.exit("atxHeadingSequence"),o(u)):i(u)}function o(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Ft(u)?(t.exit("atxHeading"),e(u)):Ut(u)?Zt(t,o,"whitespace")(u):(t.enter("atxHeadingText"),h(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),o(u))}function h(u){return u===null||u===35||Je(u)?(t.exit("atxHeadingText"),o(u)):(t.consume(u),h)}}const H4=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zc=["pre","script","style","textarea"],U4={name:"htmlFlow",tokenize:$4,resolveTo:X4,concrete:!0},j4={tokenize:K4,partial:!0},G4={tokenize:Q4,partial:!0};function X4(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function $4(t,e,i){const r=this;let n,s,a,o,l;return h;function h(w){return u(w)}function u(w){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(w),f}function f(w){return w===33?(t.consume(w),d):w===47?(t.consume(w),s=!0,b):w===63?(t.consume(w),n=3,r.interrupt?e:T):Li(w)?(t.consume(w),a=String.fromCharCode(w),C):i(w)}function d(w){return w===45?(t.consume(w),n=2,p):w===91?(t.consume(w),n=5,o=0,y):Li(w)?(t.consume(w),n=4,r.interrupt?e:T):i(w)}function p(w){return w===45?(t.consume(w),r.interrupt?e:T):i(w)}function y(w){const ht="CDATA[";return w===ht.charCodeAt(o++)?(t.consume(w),o===ht.length?r.interrupt?e:S:y):i(w)}function b(w){return Li(w)?(t.consume(w),a=String.fromCharCode(w),C):i(w)}function C(w){if(w===null||w===47||w===62||Je(w)){const ht=w===47,J=a.toLowerCase();return!ht&&!s&&zc.includes(J)?(n=1,r.interrupt?e(w):S(w)):H4.includes(a.toLowerCase())?(n=6,ht?(t.consume(w),E):r.interrupt?e(w):S(w)):(n=7,r.interrupt&&!r.parser.lazy[r.now().line]?i(w):s?k(w):I(w))}return w===45||ki(w)?(t.consume(w),a+=String.fromCharCode(w),C):i(w)}function E(w){return w===62?(t.consume(w),r.interrupt?e:S):i(w)}function k(w){return Ut(w)?(t.consume(w),k):v(w)}function I(w){return w===47?(t.consume(w),v):w===58||w===95||Li(w)?(t.consume(w),R):Ut(w)?(t.consume(w),I):v(w)}function R(w){return w===45||w===46||w===58||w===95||ki(w)?(t.consume(w),R):B(w)}function B(w){return w===61?(t.consume(w),_):Ut(w)?(t.consume(w),B):I(w)}function _(w){return w===null||w===60||w===61||w===62||w===96?i(w):w===34||w===39?(t.consume(w),l=w,O):Ut(w)?(t.consume(w),_):L(w)}function O(w){return w===l?(t.consume(w),l=null,m):w===null||Ft(w)?i(w):(t.consume(w),O)}function L(w){return w===null||w===34||w===39||w===47||w===60||w===61||w===62||w===96||Je(w)?B(w):(t.consume(w),L)}function m(w){return w===47||w===62||Ut(w)?I(w):i(w)}function v(w){return w===62?(t.consume(w),g):i(w)}function g(w){return w===null||Ft(w)?S(w):Ut(w)?(t.consume(w),g):i(w)}function S(w){return w===45&&n===2?(t.consume(w),P):w===60&&n===1?(t.consume(w),A):w===62&&n===4?(t.consume(w),W):w===63&&n===3?(t.consume(w),T):w===93&&n===5?(t.consume(w),F):Ft(w)&&(n===6||n===7)?(t.exit("htmlFlowData"),t.check(j4,lt,x)(w)):w===null||Ft(w)?(t.exit("htmlFlowData"),x(w)):(t.consume(w),S)}function x(w){return t.check(G4,M,lt)(w)}function M(w){return t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),H}function H(w){return w===null||Ft(w)?x(w):(t.enter("htmlFlowData"),S(w))}function P(w){return w===45?(t.consume(w),T):S(w)}function A(w){return w===47?(t.consume(w),a="",V):S(w)}function V(w){if(w===62){const ht=a.toLowerCase();return zc.includes(ht)?(t.consume(w),W):S(w)}return Li(w)&&a.length<8?(t.consume(w),a+=String.fromCharCode(w),V):S(w)}function F(w){return w===93?(t.consume(w),T):S(w)}function T(w){return w===62?(t.consume(w),W):w===45&&n===2?(t.consume(w),T):S(w)}function W(w){return w===null||Ft(w)?(t.exit("htmlFlowData"),lt(w)):(t.consume(w),W)}function lt(w){return t.exit("htmlFlow"),e(w)}}function Q4(t,e,i){const r=this;return n;function n(a){return Ft(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):i(a)}function s(a){return r.parser.lazy[r.now().line]?i(a):e(a)}}function K4(t,e,i){return r;function r(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),t.attempt(Sa,e,i)}}const Z4={name:"htmlText",tokenize:J4};function J4(t,e,i){const r=this;let n,s,a;return o;function o(T){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(T),l}function l(T){return T===33?(t.consume(T),h):T===47?(t.consume(T),B):T===63?(t.consume(T),I):Li(T)?(t.consume(T),L):i(T)}function h(T){return T===45?(t.consume(T),u):T===91?(t.consume(T),s=0,y):Li(T)?(t.consume(T),k):i(T)}function u(T){return T===45?(t.consume(T),p):i(T)}function f(T){return T===null?i(T):T===45?(t.consume(T),d):Ft(T)?(a=f,A(T)):(t.consume(T),f)}function d(T){return T===45?(t.consume(T),p):f(T)}function p(T){return T===62?P(T):T===45?d(T):f(T)}function y(T){const W="CDATA[";return T===W.charCodeAt(s++)?(t.consume(T),s===W.length?b:y):i(T)}function b(T){return T===null?i(T):T===93?(t.consume(T),C):Ft(T)?(a=b,A(T)):(t.consume(T),b)}function C(T){return T===93?(t.consume(T),E):b(T)}function E(T){return T===62?P(T):T===93?(t.consume(T),E):b(T)}function k(T){return T===null||T===62?P(T):Ft(T)?(a=k,A(T)):(t.consume(T),k)}function I(T){return T===null?i(T):T===63?(t.consume(T),R):Ft(T)?(a=I,A(T)):(t.consume(T),I)}function R(T){return T===62?P(T):I(T)}function B(T){return Li(T)?(t.consume(T),_):i(T)}function _(T){return T===45||ki(T)?(t.consume(T),_):O(T)}function O(T){return Ft(T)?(a=O,A(T)):Ut(T)?(t.consume(T),O):P(T)}function L(T){return T===45||ki(T)?(t.consume(T),L):T===47||T===62||Je(T)?m(T):i(T)}function m(T){return T===47?(t.consume(T),P):T===58||T===95||Li(T)?(t.consume(T),v):Ft(T)?(a=m,A(T)):Ut(T)?(t.consume(T),m):P(T)}function v(T){return T===45||T===46||T===58||T===95||ki(T)?(t.consume(T),v):g(T)}function g(T){return T===61?(t.consume(T),S):Ft(T)?(a=g,A(T)):Ut(T)?(t.consume(T),g):m(T)}function S(T){return T===null||T===60||T===61||T===62||T===96?i(T):T===34||T===39?(t.consume(T),n=T,x):Ft(T)?(a=S,A(T)):Ut(T)?(t.consume(T),S):(t.consume(T),M)}function x(T){return T===n?(t.consume(T),n=void 0,H):T===null?i(T):Ft(T)?(a=x,A(T)):(t.consume(T),x)}function M(T){return T===null||T===34||T===39||T===60||T===61||T===96?i(T):T===47||T===62||Je(T)?m(T):(t.consume(T),M)}function H(T){return T===47||T===62||Je(T)?m(T):i(T)}function P(T){return T===62?(t.consume(T),t.exit("htmlTextData"),t.exit("htmlText"),e):i(T)}function A(T){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),V}function V(T){return Ut(T)?Zt(t,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):F(T)}function F(T){return t.enter("htmlTextData"),a(T)}}const yl={name:"labelEnd",tokenize:sb,resolveTo:nb,resolveAll:rb},tb={tokenize:ab},eb={tokenize:ob},ib={tokenize:lb};function rb(t){let e=-1;for(;++e<t.length;){const i=t[e][1];(i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd")&&(t.splice(e+1,i.type==="labelImage"?4:2),i.type="data",e++)}return t}function nb(t,e){let i=t.length,r=0,n,s,a,o;for(;i--;)if(n=t[i][1],s){if(n.type==="link"||n.type==="labelLink"&&n._inactive)break;t[i][0]==="enter"&&n.type==="labelLink"&&(n._inactive=!0)}else if(a){if(t[i][0]==="enter"&&(n.type==="labelImage"||n.type==="labelLink")&&!n._balanced&&(s=i,n.type!=="labelLink")){r=2;break}}else n.type==="labelEnd"&&(a=i);const l={type:t[s][1].type==="labelLink"?"link":"image",start:Object.assign({},t[s][1].start),end:Object.assign({},t[t.length-1][1].end)},h={type:"label",start:Object.assign({},t[s][1].start),end:Object.assign({},t[a][1].end)},u={type:"labelText",start:Object.assign({},t[s+r+2][1].end),end:Object.assign({},t[a-2][1].start)};return o=[["enter",l,e],["enter",h,e]],o=fi(o,t.slice(s+1,s+r+3)),o=fi(o,[["enter",u,e]]),o=fi(o,gl(e.parser.constructs.insideSpan.null,t.slice(s+r+4,a-3),e)),o=fi(o,[["exit",u,e],t[a-2],t[a-1],["exit",h,e]]),o=fi(o,t.slice(a+1)),o=fi(o,[["exit",l,e]]),_r(t,s,t.length,o),t}function sb(t,e,i){const r=this;let n=r.events.length,s,a;for(;n--;)if((r.events[n][1].type==="labelImage"||r.events[n][1].type==="labelLink")&&!r.events[n][1]._balanced){s=r.events[n][1];break}return o;function o(d){return s?s._inactive?f(d):(a=r.parser.defined.includes(Jr(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelEnd"),l):i(d)}function l(d){return d===40?t.attempt(tb,u,a?u:f)(d):d===91?t.attempt(eb,u,a?h:f)(d):a?u(d):f(d)}function h(d){return t.attempt(ib,u,f)(d)}function u(d){return e(d)}function f(d){return s._balanced=!0,i(d)}}function ab(t,e,i){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),n}function n(f){return Je(f)?In(t,s)(f):s(f)}function s(f){return f===41?u(f):H1(t,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return Je(f)?In(t,l)(f):u(f)}function o(f){return i(f)}function l(f){return f===34||f===39||f===40?j1(t,h,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function h(f){return Je(f)?In(t,u)(f):u(f)}function u(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):i(f)}}function ob(t,e,i){const r=this;return n;function n(o){return U1.call(r,t,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Jr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):i(o)}function a(o){return i(o)}}function lb(t,e,i){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),n}function n(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):i(s)}}const cb={name:"labelStartImage",tokenize:hb,resolveAll:yl.resolveAll};function hb(t,e,i){const r=this;return n;function n(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),s}function s(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),a):i(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?i(o):e(o)}}const ub={name:"labelStartLink",tokenize:db,resolveAll:yl.resolveAll};function db(t,e,i){const r=this;return n;function n(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?i(a):e(a)}}const Ga={name:"lineEnding",tokenize:fb};function fb(t,e){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Zt(t,e,"linePrefix")}}const As={name:"thematicBreak",tokenize:pb};function pb(t,e,i){let r=0,n;return s;function s(h){return t.enter("thematicBreak"),a(h)}function a(h){return n=h,o(h)}function o(h){return h===n?(t.enter("thematicBreakSequence"),l(h)):r>=3&&(h===null||Ft(h))?(t.exit("thematicBreak"),e(h)):i(h)}function l(h){return h===n?(t.consume(h),r++,l):(t.exit("thematicBreakSequence"),Ut(h)?Zt(t,o,"whitespace")(h):o(h))}}const Xe={name:"list",tokenize:mb,continuation:{tokenize:xb},exit:kb},gb={tokenize:_b,partial:!0},yb={tokenize:bb,partial:!0};function mb(t,e,i){const r=this,n=r.events[r.events.length-1];let s=n&&n[1].type==="linePrefix"?n[2].sliceSerialize(n[1],!0).length:0,a=0;return o;function o(p){const y=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:ho(p)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(As,i,h)(p):h(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return i(p)}function l(p){return ho(p)&&++a<10?(t.consume(p),l):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),h(p)):i(p)}function h(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(Sa,r.interrupt?i:u,t.attempt(gb,d,f))}function u(p){return r.containerState.initialBlankLine=!0,s++,d(p)}function f(p){return Ut(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),d):i(p)}function d(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function xb(t,e,i){const r=this;return r.containerState._closeFlow=void 0,t.check(Sa,n,s);function n(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Zt(t,e,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!Ut(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(yb,e,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Zt(t,t.attempt(Xe,e,i),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function bb(t,e,i){const r=this;return Zt(t,n,"listItemIndent",r.containerState.size+1);function n(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):i(s)}}function kb(t){t.exit(this.containerState.type)}function _b(t,e,i){const r=this;return Zt(t,n,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function n(s){const a=r.events[r.events.length-1];return!Ut(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):i(s)}}const qc={name:"setextUnderline",tokenize:Cb,resolveTo:Tb};function Tb(t,e){let i=t.length,r,n,s;for(;i--;)if(t[i][0]==="enter"){if(t[i][1].type==="content"){r=i;break}t[i][1].type==="paragraph"&&(n=i)}else t[i][1].type==="content"&&t.splice(i,1),!s&&t[i][1].type==="definition"&&(s=i);const a={type:"setextHeading",start:Object.assign({},t[n][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[n][1].type="setextHeadingText",s?(t.splice(n,0,["enter",a,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end=Object.assign({},t[s][1].end)):t[r][1]=a,t.push(["exit",a,e]),t}function Cb(t,e,i){const r=this;let n;return s;function s(h){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),n=h,a(h)):i(h)}function a(h){return t.enter("setextHeadingLineSequence"),o(h)}function o(h){return h===n?(t.consume(h),o):(t.exit("setextHeadingLineSequence"),Ut(h)?Zt(t,l,"lineSuffix")(h):l(h))}function l(h){return h===null||Ft(h)?(t.exit("setextHeadingLine"),e(h)):i(h)}}const Eb={tokenize:Sb};function Sb(t){const e=this,i=t.attempt(Sa,r,t.attempt(this.parser.constructs.flowInitial,n,Zt(t,t.attempt(this.parser.constructs.flow,n,t.attempt(B4,n)),"linePrefix")));return i;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,i}function n(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,i}}const wb={resolveAll:X1()},vb=G1("string"),Ab=G1("text");function G1(t){return{tokenize:e,resolveAll:X1(t==="text"?Lb:void 0)};function e(i){const r=this,n=this.parser.constructs[t],s=i.attempt(n,a,o);return a;function a(u){return h(u)?s(u):o(u)}function o(u){if(u===null){i.consume(u);return}return i.enter("data"),i.consume(u),l}function l(u){return h(u)?(i.exit("data"),s(u)):(i.consume(u),l)}function h(u){if(u===null)return!0;const f=n[u];let d=-1;if(f)for(;++d<f.length;){const p=f[d];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function X1(t){return e;function e(i,r){let n=-1,s;for(;++n<=i.length;)s===void 0?i[n]&&i[n][1].type==="data"&&(s=n,n++):(!i[n]||i[n][1].type!=="data")&&(n!==s+2&&(i[s][1].end=i[n-1][1].end,i.splice(s+2,n-s-2),n=s+2),s=void 0);return t?t(i,r):i}}function Lb(t,e){let i=0;for(;++i<=t.length;)if((i===t.length||t[i][1].type==="lineEnding")&&t[i-1][1].type==="data"){const r=t[i-1][1],n=e.sliceStream(r);let s=n.length,a=-1,o=0,l;for(;s--;){const h=n[s];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(h===-2)l=!0,o++;else if(h!==-1){s++;break}}if(o){const h={type:i===t.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+s,_bufferIndex:s?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},h.start),r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(i,0,["enter",h,e],["exit",h,e]),i+=2)}i++}return t}function Bb(t,e,i){let r=Object.assign(i?Object.assign({},i):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const n={},s=[];let a=[],o=[];const l={consume:k,enter:I,exit:R,attempt:O(B),check:O(_),interrupt:O(_,{interrupt:!0})},h={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:p,sliceSerialize:d,now:y,defineSkip:b,write:f};let u=e.tokenize.call(h,l);return e.resolveAll&&s.push(e),h;function f(g){return a=fi(a,g),C(),a[a.length-1]!==null?[]:(L(e,0),h.events=gl(s,h.events,h),h.events)}function d(g,S){return Ib(p(g),S)}function p(g){return Fb(a,g)}function y(){const{line:g,column:S,offset:x,_index:M,_bufferIndex:H}=r;return{line:g,column:S,offset:x,_index:M,_bufferIndex:H}}function b(g){n[g.line]=g.column,v()}function C(){let g;for(;r._index<a.length;){const S=a[r._index];if(typeof S=="string")for(g=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===g&&r._bufferIndex<S.length;)E(S.charCodeAt(r._bufferIndex));else E(S)}}function E(g){u=u(g)}function k(g){Ft(g)?(r.line++,r.column=1,r.offset+=g===-3?2:1,v()):g!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=g}function I(g,S){const x=S||{};return x.type=g,x.start=y(),h.events.push(["enter",x,h]),o.push(x),x}function R(g){const S=o.pop();return S.end=y(),h.events.push(["exit",S,h]),S}function B(g,S){L(g,S.from)}function _(g,S){S.restore()}function O(g,S){return x;function x(M,H,P){let A,V,F,T;return Array.isArray(M)?lt(M):"tokenize"in M?lt([M]):W(M);function W(j){return at;function at(ct){const it=ct!==null&&j[ct],rt=ct!==null&&j.null,N=[...Array.isArray(it)?it:it?[it]:[],...Array.isArray(rt)?rt:rt?[rt]:[]];return lt(N)(ct)}}function lt(j){return A=j,V=0,j.length===0?P:w(j[V])}function w(j){return at;function at(ct){return T=m(),F=j,j.partial||(h.currentConstruct=j),j.name&&h.parser.constructs.disable.null.includes(j.name)?J():j.tokenize.call(S?Object.assign(Object.create(h),S):h,l,ht,J)(ct)}}function ht(j){return g(F,T),H}function J(j){return T.restore(),++V<A.length?w(A[V]):P}}}function L(g,S){g.resolveAll&&!s.includes(g)&&s.push(g),g.resolve&&_r(h.events,S,h.events.length-S,g.resolve(h.events.slice(S),h)),g.resolveTo&&(h.events=g.resolveTo(h.events,h))}function m(){const g=y(),S=h.previous,x=h.currentConstruct,M=h.events.length,H=Array.from(o);return{restore:P,from:M};function P(){r=g,h.previous=S,h.currentConstruct=x,h.events.length=M,o=H,v()}}function v(){r.line in n&&r.column<2&&(r.column=n[r.line],r.offset+=n[r.line]-1)}}function Fb(t,e){const i=e.start._index,r=e.start._bufferIndex,n=e.end._index,s=e.end._bufferIndex;let a;if(i===n)a=[t[i].slice(r,s)];else{if(a=t.slice(i,n),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(t[n].slice(0,s))}return a}function Ib(t,e){let i=-1;const r=[];let n;for(;++i<t.length;){const s=t[i];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&n)continue;a=" ";break}default:a=String.fromCharCode(s)}n=s===-2,r.push(a)}return r.join("")}const Db={42:Xe,43:Xe,45:Xe,48:Xe,49:Xe,50:Xe,51:Xe,52:Xe,53:Xe,54:Xe,55:Xe,56:Xe,57:Xe,62:q1},Rb={91:N4},Nb={[-2]:ja,[-1]:ja,32:ja},Ob={35:q4,42:As,45:[qc,As],60:U4,61:qc,95:As,96:Vc,126:Vc},Pb={38:Y1,92:W1},Mb={[-5]:Ga,[-4]:Ga,[-3]:Ga,33:cb,38:Y1,42:uo,60:[f4,Z4],91:ub,92:[V4,W1],93:yl,95:uo,96:w4},Vb={null:[uo,wb]},zb={null:[42,95]},qb={null:[]},Wb=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zb,contentInitial:Rb,disable:qb,document:Db,flow:Ob,flowInitial:Nb,insideSpan:Vb,string:Pb,text:Mb},Symbol.toStringTag,{value:"Module"}));function Yb(t){const i=Kx([Wb,...(t||{}).extensions||[]]),r={defined:[],lazy:{},constructs:i,content:n(a4),document:n(l4),flow:n(Eb),string:n(vb),text:n(Ab)};return r;function n(s){return a;function a(o){return Bb(r,s,o)}}}const Wc=/[\0\t\n\r]/g;function Hb(){let t=1,e="",i=!0,r;return n;function n(s,a,o){const l=[];let h,u,f,d,p;for(s=e+s.toString(a),f=0,e="",i&&(s.charCodeAt(0)===65279&&f++,i=void 0);f<s.length;){if(Wc.lastIndex=f,h=Wc.exec(s),d=h&&h.index!==void 0?h.index:s.length,p=s.charCodeAt(d),!h){e=s.slice(f);break}if(p===10&&f===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<d&&(l.push(s.slice(f,d)),t+=d-f),p){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=d+1}return o&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}function Ub(t){for(;!qh(t););return t}const jb=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Gb(t){return t.replace(jb,Xb)}function Xb(t,e,i){if(e)return e;if(i.charCodeAt(0)===35){const n=i.charCodeAt(1),s=n===120||n===88;return Wh(i.slice(s?2:1),s?16:10)}return Go(i)||t}function Ls(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Yc(t.position):"start"in t||"end"in t?Yc(t):"line"in t||"column"in t?fo(t):""}function fo(t){return Hc(t&&t.line)+":"+Hc(t&&t.column)}function Yc(t){return fo(t&&t.start)+"-"+fo(t&&t.end)}function Hc(t){return t&&typeof t=="number"?t:1}const $1={}.hasOwnProperty,Q1=function(t,e,i){return typeof e!="string"&&(i=e,e=void 0),$b(i)(Ub(Yb(i).document().write(Hb()(t,e,!0))))};function $b(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Nt),autolinkProtocol:g,autolinkEmail:g,atxHeading:o(Q),blockQuote:o(N),characterEscape:g,characterReference:g,codeFenced:o(Z),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(Z,l),codeText:o(q,l),codeTextData:g,data:g,codeFlowValue:g,definition:o(tt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(z),hardBreakEscape:o($),hardBreakTrailing:o($),htmlFlow:o(nt,l),htmlFlowData:g,htmlText:o(nt,l),htmlTextData:g,image:o(mt),label:l,link:o(Nt),listItem:o(Gt),listItemValue:y,listOrdered:o(Bt,p),listUnordered:o(Bt),paragraph:o(vt),reference:J,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(Q),strong:o(gt),thematicBreak:o(kt)},exit:{atxHeading:u(),atxHeadingSequence:O,autolink:u(),autolinkEmail:rt,autolinkProtocol:it,blockQuote:u(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:at,characterReferenceMarkerNumeric:at,characterReferenceValue:ct,codeFenced:u(k),codeFencedFence:E,codeFencedFenceInfo:b,codeFencedFenceMeta:C,codeFlowValue:S,codeIndented:u(I),codeText:u(A),codeTextData:S,data:S,definition:u(),definitionDestinationString:_,definitionLabelString:R,definitionTitleString:B,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(H),htmlFlowData:S,htmlText:u(P),htmlTextData:S,image:u(F),label:W,labelText:T,lineEnding:x,link:u(V),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:j,resourceDestinationString:lt,resourceTitleString:w,resource:ht,setextHeading:u(v),setextHeadingLineSequence:m,setextHeadingText:L,strong:u(),thematicBreak:u()}};K1(e,(t||{}).mdastExtensions||[]);const i={};return r;function r(U){let ut={type:"root",children:[]};const K={stack:[ut],tokenStack:[],config:e,enter:h,exit:f,buffer:l,resume:d,setData:s,getData:a},_t=[];let ot=-1;for(;++ot<U.length;)if(U[ot][1].type==="listOrdered"||U[ot][1].type==="listUnordered")if(U[ot][0]==="enter")_t.push(ot);else{const Dt=_t.pop();ot=n(U,Dt,ot)}for(ot=-1;++ot<U.length;){const Dt=e[U[ot][0]];$1.call(Dt,U[ot][1].type)&&Dt[U[ot][1].type].call(Object.assign({sliceSerialize:U[ot][2].sliceSerialize},K),U[ot][1])}if(K.tokenStack.length>0){const Dt=K.tokenStack[K.tokenStack.length-1];(Dt[1]||Uc).call(K,void 0,Dt[0])}for(ut.position={start:ur(U.length>0?U[0][1].start:{line:1,column:1,offset:0}),end:ur(U.length>0?U[U.length-2][1].end:{line:1,column:1,offset:0})},ot=-1;++ot<e.transforms.length;)ut=e.transforms[ot](ut)||ut;return ut}function n(U,ut,K){let _t=ut-1,ot=-1,Dt=!1,Wt,Ht,It,te;for(;++_t<=K;){const At=U[_t];if(At[1].type==="listUnordered"||At[1].type==="listOrdered"||At[1].type==="blockQuote"?(At[0]==="enter"?ot++:ot--,te=void 0):At[1].type==="lineEndingBlank"?At[0]==="enter"&&(Wt&&!te&&!ot&&!It&&(It=_t),te=void 0):At[1].type==="linePrefix"||At[1].type==="listItemValue"||At[1].type==="listItemMarker"||At[1].type==="listItemPrefix"||At[1].type==="listItemPrefixWhitespace"||(te=void 0),!ot&&At[0]==="enter"&&At[1].type==="listItemPrefix"||ot===-1&&At[0]==="exit"&&(At[1].type==="listUnordered"||At[1].type==="listOrdered")){if(Wt){let ee=_t;for(Ht=void 0;ee--;){const jt=U[ee];if(jt[1].type==="lineEnding"||jt[1].type==="lineEndingBlank"){if(jt[0]==="exit")continue;Ht&&(U[Ht][1].type="lineEndingBlank",Dt=!0),jt[1].type="lineEnding",Ht=ee}else if(!(jt[1].type==="linePrefix"||jt[1].type==="blockQuotePrefix"||jt[1].type==="blockQuotePrefixWhitespace"||jt[1].type==="blockQuoteMarker"||jt[1].type==="listItemIndent"))break}It&&(!Ht||It<Ht)&&(Wt._spread=!0),Wt.end=Object.assign({},Ht?U[Ht][1].start:At[1].end),U.splice(Ht||_t,0,["exit",Wt,At[2]]),_t++,K++}At[1].type==="listItemPrefix"&&(Wt={type:"listItem",_spread:!1,start:Object.assign({},At[1].start),end:void 0},U.splice(_t,0,["enter",Wt,At[2]]),_t++,K++,It=void 0,te=!0)}}return U[ut][1]._spread=Dt,K}function s(U,ut){i[U]=ut}function a(U){return i[U]}function o(U,ut){return K;function K(_t){h.call(this,U(_t),_t),ut&&ut.call(this,_t)}}function l(){this.stack.push({type:"fragment",children:[]})}function h(U,ut,K){return this.stack[this.stack.length-1].children.push(U),this.stack.push(U),this.tokenStack.push([ut,K]),U.position={start:ur(ut.start)},U}function u(U){return ut;function ut(K){U&&U.call(this,K),f.call(this,K)}}function f(U,ut){const K=this.stack.pop(),_t=this.tokenStack.pop();if(_t)_t[0].type!==U.type&&(ut?ut.call(this,U,_t[0]):(_t[1]||Uc).call(this,U,_t[0]));else throw new Error("Cannot close `"+U.type+"` ("+Ls({start:U.start,end:U.end})+"): it’s not open");return K.position.end=ur(U.end),K}function d(){return $x(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function y(U){if(a("expectingFirstListItemValue")){const ut=this.stack[this.stack.length-2];ut.start=Number.parseInt(this.sliceSerialize(U),10),s("expectingFirstListItemValue")}}function b(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.lang=U}function C(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.meta=U}function E(){a("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function k(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.value=U.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function I(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.value=U.replace(/(\r?\n|\r)$/g,"")}function R(U){const ut=this.resume(),K=this.stack[this.stack.length-1];K.label=ut,K.identifier=Jr(this.sliceSerialize(U)).toLowerCase()}function B(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.title=U}function _(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.url=U}function O(U){const ut=this.stack[this.stack.length-1];if(!ut.depth){const K=this.sliceSerialize(U).length;ut.depth=K}}function L(){s("setextHeadingSlurpLineEnding",!0)}function m(U){const ut=this.stack[this.stack.length-1];ut.depth=this.sliceSerialize(U).charCodeAt(0)===61?1:2}function v(){s("setextHeadingSlurpLineEnding")}function g(U){const ut=this.stack[this.stack.length-1];let K=ut.children[ut.children.length-1];(!K||K.type!=="text")&&(K=dt(),K.position={start:ur(U.start)},ut.children.push(K)),this.stack.push(K)}function S(U){const ut=this.stack.pop();ut.value+=this.sliceSerialize(U),ut.position.end=ur(U.end)}function x(U){const ut=this.stack[this.stack.length-1];if(a("atHardBreak")){const K=ut.children[ut.children.length-1];K.position.end=ur(U.end),s("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&e.canContainEols.includes(ut.type)&&(g.call(this,U),S.call(this,U))}function M(){s("atHardBreak",!0)}function H(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.value=U}function P(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.value=U}function A(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.value=U}function V(){const U=this.stack[this.stack.length-1];if(a("inReference")){const ut=a("referenceType")||"shortcut";U.type+="Reference",U.referenceType=ut,delete U.url,delete U.title}else delete U.identifier,delete U.label;s("referenceType")}function F(){const U=this.stack[this.stack.length-1];if(a("inReference")){const ut=a("referenceType")||"shortcut";U.type+="Reference",U.referenceType=ut,delete U.url,delete U.title}else delete U.identifier,delete U.label;s("referenceType")}function T(U){const ut=this.sliceSerialize(U),K=this.stack[this.stack.length-2];K.label=Gb(ut),K.identifier=Jr(ut).toLowerCase()}function W(){const U=this.stack[this.stack.length-1],ut=this.resume(),K=this.stack[this.stack.length-1];if(s("inReference",!0),K.type==="link"){const _t=U.children;K.children=_t}else K.alt=ut}function lt(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.url=U}function w(){const U=this.resume(),ut=this.stack[this.stack.length-1];ut.title=U}function ht(){s("inReference")}function J(){s("referenceType","collapsed")}function j(U){const ut=this.resume(),K=this.stack[this.stack.length-1];K.label=ut,K.identifier=Jr(this.sliceSerialize(U)).toLowerCase(),s("referenceType","full")}function at(U){s("characterReferenceType",U.type)}function ct(U){const ut=this.sliceSerialize(U),K=a("characterReferenceType");let _t;K?(_t=Wh(ut,K==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):_t=Go(ut);const ot=this.stack.pop();ot.value+=_t,ot.position.end=ur(U.end)}function it(U){S.call(this,U);const ut=this.stack[this.stack.length-1];ut.url=this.sliceSerialize(U)}function rt(U){S.call(this,U);const ut=this.stack[this.stack.length-1];ut.url="mailto:"+this.sliceSerialize(U)}function N(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function q(){return{type:"inlineCode",value:""}}function tt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function z(){return{type:"emphasis",children:[]}}function Q(){return{type:"heading",depth:void 0,children:[]}}function $(){return{type:"break"}}function nt(){return{type:"html",value:""}}function mt(){return{type:"image",title:null,url:"",alt:null}}function Nt(){return{type:"link",title:null,url:"",children:[]}}function Bt(U){return{type:"list",ordered:U.type==="listOrdered",start:null,spread:U._spread,children:[]}}function Gt(U){return{type:"listItem",spread:U._spread,checked:null,children:[]}}function vt(){return{type:"paragraph",children:[]}}function gt(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function kt(){return{type:"thematicBreak"}}}function ur(t){return{line:t.line,column:t.column,offset:t.offset}}function K1(t,e){let i=-1;for(;++i<e.length;){const r=e[i];Array.isArray(r)?K1(t,r):Qb(t,r)}}function Qb(t,e){let i;for(i in e)if($1.call(e,i)){if(i==="canContainEols"){const r=e[i];r&&t[i].push(...r)}else if(i==="transforms"){const r=e[i];r&&t[i].push(...r)}else if(i==="enter"||i==="exit"){const r=e[i];r&&Object.assign(t[i],r)}}}function Uc(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Ls({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Ls({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ls({start:e.start,end:e.end})+") is still open")}function Kb(t){const e=t.replace(/\n{2,}/g,`
`);return zh(e)}function Zb(t){const e=Kb(t),{children:i}=Q1(e),r=[[]];let n=0;function s(a,o="normal"){a.type==="text"?a.value.split(`
`).forEach((h,u)=>{u!==0&&(n++,r.push([])),h.split(" ").forEach(f=>{f&&r[n].push({content:f,type:o})})}):(a.type==="strong"||a.type==="emphasis")&&a.children.forEach(l=>{s(l,a.type)})}return i.forEach(a=>{a.type==="paragraph"&&a.children.forEach(o=>{s(o)})}),r}function Jb(t){const{children:e}=Q1(t);function i(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(i).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(i).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(i).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(i).join("")}function t5(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}function e5(t,e){const i=t5(e.content);return Z1(t,[],i,e.type)}function Z1(t,e,i,r){if(i.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[n,...s]=i,a=[...e,n];return t([{content:a.join(""),type:r}])?Z1(t,a,s,r):(e.length===0&&n&&(e.push(n),i.shift()),[{content:e.join(""),type:r},{content:i.join(""),type:r}])}function i5(t,e){if(t.some(({content:i})=>i.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return po(t,e)}function po(t,e,i=[],r=[]){if(t.length===0)return r.length>0&&i.push(r),i.length>0?i:[];let n="";t[0].content===" "&&(n=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},a=[...r];if(n!==""&&a.push({content:n,type:"normal"}),a.push(s),e(a))return po(t,e,i,a);if(r.length>0)i.push(r),t.unshift(s);else if(s.content){const[o,l]=e5(e,s);i.push([o]),l.content&&t.unshift(l)}return po(t,e,i)}function r5(t,e){e&&t.attr("style",e)}function n5(t,e,i,r,n=!1){const s=t.append("foreignObject"),a=s.append("xhtml:div"),o=e.label,l=e.isNode?"nodeLabel":"edgeLabel";a.html(`
    <span class="${l} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+o+"</span>"),r5(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("max-width",i+"px"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),n&&a.attr("class","labelBkg");let h=a.node().getBoundingClientRect();return h.width===i&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",i+"px"),h=a.node().getBoundingClientRect()),s.style("width",h.width),s.style("height",h.height),s.node()}function ml(t,e,i){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*i-.1+"em").attr("dy",i+"em")}function s5(t,e,i){const r=t.append("text"),n=ml(r,1,e);xl(n,i);const s=n.node().getComputedTextLength();return r.remove(),s}function a5(t,e,i){var r;const n=t.append("text"),s=ml(n,1,e);xl(s,[{content:i,type:"normal"}]);const a=(r=s.node())==null?void 0:r.getBoundingClientRect();return a&&n.remove(),a}function o5(t,e,i,r=!1){const s=e.append("g"),a=s.insert("rect").attr("class","background"),o=s.append("text").attr("y","-10.1");let l=0;for(const h of i){const u=d=>s5(s,1.1,d)<=t,f=u(h)?[h]:i5(h,u);for(const d of f){const p=ml(o,l,1.1);xl(p,d),l++}}if(r){const h=o.node().getBBox(),u=2;return a.attr("x",-u).attr("y",-u).attr("width",h.width+2*u).attr("height",h.height+2*u),s.node()}else return o.node()}function xl(t,e){t.text(""),e.forEach((i,r)=>{const n=t.append("tspan").attr("font-style",i.type==="emphasis"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",i.type==="strong"?"bold":"normal");r===0?n.text(i.content):n.text(" "+i.content)})}const wa=(t,e="",{style:i="",isTitle:r=!1,classes:n="",useHtmlLabels:s=!0,isNode:a=!0,width:o=200,addSvgBackground:l=!1}={})=>{if(D.info("createText",e,i,r,n,s,a,l),s){const h=Jb(e),u={isNode:a,label:Vn(h).replace(/fa[blrs]?:fa-[\w-]+/g,d=>`<i class='${d.replace(":"," ")}'></i>`),labelStyle:i.replace("fill:","color:")};return n5(t,u,o,n,l)}else{const h=Zb(e);return o5(o,t,h,l)}},l5=(t,e,i,r)=>{e.forEach(n=>{x5[n](t,i,r)})},c5=(t,e,i)=>{D.trace("Making markers for ",i),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},h5=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},u5=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},d5=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",i+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},f5=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",i+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},p5=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},g5=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},y5=(t,e,i)=>{t.append("marker").attr("id",i+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",i+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},m5=(t,e,i)=>{t.append("defs").append("marker").attr("id",i+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},x5={extension:c5,composition:h5,aggregation:u5,dependency:d5,lollipop:f5,point:p5,circle:g5,cross:y5,barb:m5},J1=l5;function b5(t,e){e&&t.attr("style",e)}function k5(t){const e=pt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=e.append("xhtml:div"),r=t.label,n=t.isNode?"nodeLabel":"edgeLabel";return i.html('<span class="'+n+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),b5(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const _5=(t,e,i,r)=>{let n=t||"";if(typeof n=="object"&&(n=n[0]),me(G().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),D.info("vertexText"+n);const s={isNode:r,label:Vn(n).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")};return k5(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let a=[];typeof n=="string"?a=n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?a=n:a=[];for(const o of a){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),i?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=o.trim(),s.appendChild(l)}return s}},Qe=_5,ve=async(t,e,i,r)=>{let n;const s=e.useHtmlLabels||me(G().flowchart.htmlLabels);i?n=i:n="node default";const a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=a.insert("g").attr("class","label").attr("style",e.labelStyle);let l;e.labelText===void 0?l="":l=typeof e.labelText=="string"?e.labelText:e.labelText[0];const h=o.node();let u;e.labelType==="markdown"?u=wa(o,Ce(Vn(l),G()),{useHtmlLabels:s,width:e.width||G().flowchart.wrappingWidth,classes:"markdown-node-label"}):u=h.appendChild(Qe(Ce(Vn(l),G()),e.labelStyle,!1,r));let f=u.getBBox();const d=e.padding/2;if(me(G().flowchart.htmlLabels)){const p=u.children[0],y=pt(u),b=p.getElementsByTagName("img");if(b){const C=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...b].map(E=>new Promise(k=>{function I(){if(E.style.display="flex",E.style.flexDirection="column",C){const R=G().fontSize?G().fontSize:window.getComputedStyle(document.body).fontSize,B=5;E.style.width=parseInt(R,10)*B+"px"}else E.style.width="100%";k(E)}setTimeout(()=>{E.complete&&I()}),E.addEventListener("error",I),E.addEventListener("load",I)})))}f=p.getBoundingClientRect(),y.attr("width",f.width),y.attr("height",f.height)}return s?o.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"):o.attr("transform","translate(0, "+-f.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:a,bbox:f,halfPadding:d,label:o}},ue=(t,e)=>{const i=e.node().getBBox();t.width=i.width,t.height=i.height};function ar(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+i/2+")")}function T5(t,e){return t.intersect(e)}function t0(t,e,i,r){var n=t.x,s=t.y,a=n-r.x,o=s-r.y,l=Math.sqrt(e*e*o*o+i*i*a*a),h=Math.abs(e*i*a/l);r.x<n&&(h=-h);var u=Math.abs(e*i*o/l);return r.y<s&&(u=-u),{x:n+h,y:s+u}}function C5(t,e,i){return t0(t,e,e,i)}function E5(t,e,i,r){var n,s,a,o,l,h,u,f,d,p,y,b,C,E,k;if(n=e.y-t.y,a=t.x-e.x,l=e.x*t.y-t.x*e.y,d=n*i.x+a*i.y+l,p=n*r.x+a*r.y+l,!(d!==0&&p!==0&&jc(d,p))&&(s=r.y-i.y,o=i.x-r.x,h=r.x*i.y-i.x*r.y,u=s*t.x+o*t.y+h,f=s*e.x+o*e.y+h,!(u!==0&&f!==0&&jc(u,f))&&(y=n*o-s*a,y!==0)))return b=Math.abs(y/2),C=a*h-o*l,E=C<0?(C-b)/y:(C+b)/y,C=s*l-n*h,k=C<0?(C-b)/y:(C+b)/y,{x:E,y:k}}function jc(t,e){return t*e>0}function S5(t,e,i){var r=t.x,n=t.y,s=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(y){a=Math.min(a,y.x),o=Math.min(o,y.y)}):(a=Math.min(a,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-a,h=n-t.height/2-o,u=0;u<e.length;u++){var f=e[u],d=e[u<e.length-1?u+1:0],p=E5(t,i,{x:l+f.x,y:h+f.y},{x:l+d.x,y:h+d.y});p&&s.push(p)}return s.length?(s.length>1&&s.sort(function(y,b){var C=y.x-i.x,E=y.y-i.y,k=Math.sqrt(C*C+E*E),I=b.x-i.x,R=b.y-i.y,B=Math.sqrt(I*I+R*R);return k<B?-1:k===B?0:1}),s[0]):t}const w5=(t,e)=>{var i=t.x,r=t.y,n=e.x-i,s=e.y-r,a=t.width/2,o=t.height/2,l,h;return Math.abs(s)*a>Math.abs(n)*o?(s<0&&(o=-o),l=s===0?0:o*n/s,h=o):(n<0&&(a=-a),l=a,h=n===0?0:a*s/n),{x:i+l,y:r+h}},cs=w5,se={node:T5,circle:C5,ellipse:t0,polygon:S5,rect:cs},v5=async(t,e)=>{e.useHtmlLabels||G().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:n,halfPadding:s}=await ve(t,e,"node "+e.classes,!0);D.info("Classes = ",e.classes);const a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-n.width/2-s).attr("y",-n.height/2-s).attr("width",n.width+e.padding).attr("height",n.height+e.padding),ue(e,a),e.intersect=function(o){return se.rect(e,o)},r},A5=v5,Gc=t=>t?" "+t:"",si=(t,e)=>`${e||"node default"}${Gc(t.classes)} ${Gc(t.class)}`,Xc=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=n+s,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];D.info("Question main (Circle)");const l=ar(i,a,a,o);return l.attr("style",e.style),ue(e,l),e.intersect=function(h){return D.warn("Intersect called"),se.polygon(e,o,h)},i},L5=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,n=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return i.insert("polygon",":first-child").attr("points",n.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return se.circle(e,14,a)},i},B5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=4,s=r.height+e.padding,a=s/n,o=r.width+2*a+e.padding,l=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-s/2},{x:o-a,y:-s},{x:a,y:-s},{x:0,y:-s/2}],h=ar(i,o,s,l);return h.attr("style",e.style),ue(e,h),e.intersect=function(u){return se.polygon(e,l,u)},i},F5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:-s/2,y:0},{x:n,y:0},{x:n,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}];return ar(i,n,s,a).attr("style",e.style),e.width=n+s,e.height=s,e.intersect=function(l){return se.polygon(e,a,l)},i},I5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:-2*s/6,y:0},{x:n-s/6,y:0},{x:n+2*s/6,y:-s},{x:s/6,y:-s}],o=ar(i,n,s,a);return o.attr("style",e.style),ue(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},D5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:2*s/6,y:0},{x:n+s/6,y:0},{x:n-2*s/6,y:-s},{x:-s/6,y:-s}],o=ar(i,n,s,a);return o.attr("style",e.style),ue(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},R5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:-2*s/6,y:0},{x:n+2*s/6,y:0},{x:n-s/6,y:-s},{x:s/6,y:-s}],o=ar(i,n,s,a);return o.attr("style",e.style),ue(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},N5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:s/6,y:0},{x:n-s/6,y:0},{x:n+2*s/6,y:-s},{x:-2*s/6,y:-s}],o=ar(i,n,s,a);return o.attr("style",e.style),ue(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},O5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:0,y:0},{x:n+s/2,y:0},{x:n,y:-s/2},{x:n+s/2,y:-s},{x:0,y:-s}],o=ar(i,n,s,a);return o.attr("style",e.style),ue(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},P5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=n/2,a=s/(2.5+n/50),o=r.height+a+e.padding,l="M 0,"+a+" a "+s+","+a+" 0,0,0 "+n+" 0 a "+s+","+a+" 0,0,0 "+-n+" 0 l 0,"+o+" a "+s+","+a+" 0,0,0 "+n+" 0 l 0,"+-o,h=i.attr("label-offset-y",a).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-n/2+","+-(o/2+a)+")");return ue(e,h),e.intersect=function(u){const f=se.rect(e,u),d=f.x-e.x;if(s!=0&&(Math.abs(d)<e.width/2||Math.abs(d)==e.width/2&&Math.abs(f.y-e.y)>e.height/2-a)){let p=a*a*(1-d*d/(s*s));p!=0&&(p=Math.sqrt(p)),p=a-p,u.y-e.y>0&&(p=-p),f.y+=p}return f},i},M5=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:n}=await ve(t,e,"node "+e.classes+" "+e.class,!0),s=i.insert("rect",":first-child"),a=r.width+e.padding,o=r.height+e.padding;if(s.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-n).attr("y",-r.height/2-n).attr("width",a).attr("height",o),e.props){const l=new Set(Object.keys(e.props));e.props.borders&&(e0(s,e.props.borders,a,o),l.delete("borders")),l.forEach(h=>{D.warn(`Unknown node property ${h}`)})}return ue(e,s),e.intersect=function(l){return se.rect(e,l)},i},V5=async(t,e)=>{const{shapeSvg:i}=await ve(t,e,"label",!0);D.trace("Classes = ",e.class);const r=i.insert("rect",":first-child"),n=0,s=0;if(r.attr("width",n).attr("height",s),i.attr("class","label edgeLabel"),e.props){const a=new Set(Object.keys(e.props));e.props.borders&&(e0(r,e.props.borders,n,s),a.delete("borders")),a.forEach(o=>{D.warn(`Unknown node property ${o}`)})}return ue(e,r),e.intersect=function(a){return se.rect(e,a)},i};function e0(t,e,i,r){const n=[],s=o=>{n.push(o,0)},a=o=>{n.push(0,o)};e.includes("t")?(D.debug("add top border"),s(i)):a(i),e.includes("r")?(D.debug("add right border"),s(r)):a(r),e.includes("b")?(D.debug("add bottom border"),s(i)):a(i),e.includes("l")?(D.debug("add left border"),s(r)):a(r),t.attr("stroke-dasharray",n.join(" "))}const z5=(t,e)=>{let i;e.classes?i="node "+e.classes:i="node default";const r=t.insert("g").attr("class",i).attr("id",e.domId||e.id),n=r.insert("rect",":first-child"),s=r.insert("line"),a=r.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let l="";typeof o=="object"?l=o[0]:l=o,D.info("Label text abc79",l,o,typeof o=="object");const h=a.node().appendChild(Qe(l,e.labelStyle,!0,!0));let u={width:0,height:0};if(me(G().flowchart.htmlLabels)){const b=h.children[0],C=pt(h);u=b.getBoundingClientRect(),C.attr("width",u.width),C.attr("height",u.height)}D.info("Text 2",o);const f=o.slice(1,o.length);let d=h.getBBox();const p=a.node().appendChild(Qe(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0));if(me(G().flowchart.htmlLabels)){const b=p.children[0],C=pt(p);u=b.getBoundingClientRect(),C.attr("width",u.width),C.attr("height",u.height)}const y=e.padding/2;return pt(p).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+y+5)+")"),pt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")"),n.attr("class","outer title-state").attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+e.padding).attr("height",u.height+e.padding),s.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+d.height+y).attr("y2",-u.height/2-y+d.height+y),ue(e,n),e.intersect=function(b){return se.rect(e,b)},r},q5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.height+e.padding,s=r.width+n/4+e.padding,a=i.insert("rect",":first-child").attr("style",e.style).attr("rx",n/2).attr("ry",n/2).attr("x",-s/2).attr("y",-n/2).attr("width",s).attr("height",n);return ue(e,a),e.intersect=function(o){return se.rect(e,o)},i},W5=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:n}=await ve(t,e,si(e,void 0),!0),s=i.insert("circle",":first-child");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+n).attr("width",r.width+e.padding).attr("height",r.height+e.padding),D.info("Circle main"),ue(e,s),e.intersect=function(a){return D.info("Circle intersect",e,r.width/2+n,a),se.circle(e,r.width/2+n,a)},i},Y5=async(t,e)=>{const{shapeSvg:i,bbox:r,halfPadding:n}=await ve(t,e,si(e,void 0),!0),s=5,a=i.insert("g",":first-child"),o=a.insert("circle"),l=a.insert("circle");return a.attr("class",e.class),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+n+s).attr("width",r.width+e.padding+s*2).attr("height",r.height+e.padding+s*2),l.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+n).attr("width",r.width+e.padding).attr("height",r.height+e.padding),D.info("DoubleCircle main"),ue(e,o),e.intersect=function(h){return D.info("DoubleCircle intersect",e,r.width/2+n+s,h),se.circle(e,r.width/2+n+s,h)},i},H5=async(t,e)=>{const{shapeSvg:i,bbox:r}=await ve(t,e,si(e,void 0),!0),n=r.width+e.padding,s=r.height+e.padding,a=[{x:0,y:0},{x:n,y:0},{x:n,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],o=ar(i,n,s,a);return o.attr("style",e.style),ue(e,o),e.intersect=function(l){return se.polygon(e,a,l)},i},U5=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),ue(e,r),e.intersect=function(n){return se.circle(e,7,n)},i},$c=(t,e,i)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let n=70,s=10;i==="LR"&&(n=10,s=70);const a=r.append("rect").attr("x",-1*n/2).attr("y",-1*s/2).attr("width",n).attr("height",s).attr("class","fork-join");return ue(e,a),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return se.rect(e,o)},r},j5=(t,e)=>{const i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=i.insert("circle",":first-child"),n=i.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),ue(e,n),e.intersect=function(s){return se.circle(e,7,s)},i},G5=(t,e)=>{const i=e.padding/2,r=4,n=8;let s;e.classes?s="node "+e.classes:s="node default";const a=t.insert("g").attr("class",s).attr("id",e.domId||e.id),o=a.insert("rect",":first-child"),l=a.insert("line"),h=a.insert("line");let u=0,f=r;const d=a.insert("g").attr("class","label");let p=0;const y=e.classData.annotations&&e.classData.annotations[0],b=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",C=d.node().appendChild(Qe(b,e.labelStyle,!0,!0));let E=C.getBBox();if(me(G().flowchart.htmlLabels)){const L=C.children[0],m=pt(C);E=L.getBoundingClientRect(),m.attr("width",E.width),m.attr("height",E.height)}e.classData.annotations[0]&&(f+=E.height+r,u+=E.width);let k=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(G().flowchart.htmlLabels?k+="&lt;"+e.classData.type+"&gt;":k+="<"+e.classData.type+">");const I=d.node().appendChild(Qe(k,e.labelStyle,!0,!0));pt(I).attr("class","classTitle");let R=I.getBBox();if(me(G().flowchart.htmlLabels)){const L=I.children[0],m=pt(I);R=L.getBoundingClientRect(),m.attr("width",R.width),m.attr("height",R.height)}f+=R.height+r,R.width>u&&(u=R.width);const B=[];e.classData.members.forEach(L=>{const m=L.getDisplayDetails();let v=m.displayText;G().flowchart.htmlLabels&&(v=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const g=d.node().appendChild(Qe(v,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let S=g.getBBox();if(me(G().flowchart.htmlLabels)){const x=g.children[0],M=pt(g);S=x.getBoundingClientRect(),M.attr("width",S.width),M.attr("height",S.height)}S.width>u&&(u=S.width),f+=S.height+r,B.push(g)}),f+=n;const _=[];if(e.classData.methods.forEach(L=>{const m=L.getDisplayDetails();let v=m.displayText;G().flowchart.htmlLabels&&(v=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const g=d.node().appendChild(Qe(v,m.cssStyle?m.cssStyle:e.labelStyle,!0,!0));let S=g.getBBox();if(me(G().flowchart.htmlLabels)){const x=g.children[0],M=pt(g);S=x.getBoundingClientRect(),M.attr("width",S.width),M.attr("height",S.height)}S.width>u&&(u=S.width),f+=S.height+r,_.push(g)}),f+=n,y){let L=(u-E.width)/2;pt(C).attr("transform","translate( "+(-1*u/2+L)+", "+-1*f/2+")"),p=E.height+r}let O=(u-R.width)/2;return pt(I).attr("transform","translate( "+(-1*u/2+O)+", "+(-1*f/2+p)+")"),p+=R.height+r,l.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-f/2-i+n+p).attr("y2",-f/2-i+n+p),p+=n,B.forEach(L=>{pt(L).attr("transform","translate( "+-u/2+", "+(-1*f/2+p+n/2)+")");const m=L==null?void 0:L.getBBox();p+=((m==null?void 0:m.height)??0)+r}),p+=n,h.attr("class","divider").attr("x1",-u/2-i).attr("x2",u/2+i).attr("y1",-f/2-i+n+p).attr("y2",-f/2-i+n+p),p+=n,_.forEach(L=>{pt(L).attr("transform","translate( "+-u/2+", "+(-1*f/2+p)+")");const m=L==null?void 0:L.getBBox();p+=((m==null?void 0:m.height)??0)+r}),o.attr("class","outer title-state").attr("x",-u/2-i).attr("y",-(f/2)-i).attr("width",u+e.padding).attr("height",f+e.padding),ue(e,o),e.intersect=function(L){return se.rect(e,L)},a},Qc={rhombus:Xc,question:Xc,rect:M5,labelRect:V5,rectWithTitle:z5,choice:L5,circle:W5,doublecircle:Y5,stadium:q5,hexagon:B5,rect_left_inv_arrow:F5,lean_right:I5,lean_left:D5,trapezoid:R5,inv_trapezoid:N5,rect_right_inv_arrow:O5,cylinder:P5,start:U5,end:j5,note:A5,subroutine:H5,fork:$c,join:$c,class_box:G5};let tn={};const i0=async(t,e,i)=>{let r,n;if(e.link){let s;G().securityLevel==="sandbox"?s="_top":e.linkTarget&&(s=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",s),n=await Qc[e.shape](r,e,i)}else n=await Qc[e.shape](t,e,i),r=n;return e.tooltip&&n.attr("title",e.tooltip),e.class&&n.attr("class","node default "+e.class),tn[e.id]=r,e.haveCallback&&tn[e.id].attr("class",tn[e.id].attr("class")+" clickable"),r},X5=(t,e)=>{tn[e.id]=t},$5=()=>{tn={}},Kc=t=>{const e=tn[t.id];D.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const i=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-i)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},dr={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function ks(t,e){t=Zs(t),e=Zs(e);const[i,r]=[t.x,t.y],[n,s]=[e.x,e.y],a=n-i,o=s-r;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}const Zs=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,r0=t=>({x:function(e,i,r){let n=0;if(i===0&&Object.hasOwn(dr,t.arrowTypeStart)){const{angle:s,deltaX:a}=ks(r[0],r[1]);n=dr[t.arrowTypeStart]*Math.cos(s)*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(dr,t.arrowTypeEnd)){const{angle:s,deltaX:a}=ks(r[r.length-1],r[r.length-2]);n=dr[t.arrowTypeEnd]*Math.cos(s)*(a>=0?1:-1)}return Zs(e).x+n},y:function(e,i,r){let n=0;if(i===0&&Object.hasOwn(dr,t.arrowTypeStart)){const{angle:s,deltaY:a}=ks(r[0],r[1]);n=dr[t.arrowTypeStart]*Math.abs(Math.sin(s))*(a>=0?1:-1)}else if(i===r.length-1&&Object.hasOwn(dr,t.arrowTypeEnd)){const{angle:s,deltaY:a}=ks(r[r.length-1],r[r.length-2]);n=dr[t.arrowTypeEnd]*Math.abs(Math.sin(s))*(a>=0?1:-1)}return Zs(e).y+n}});let Js={},Se={};const Q5=()=>{Js={},Se={}},n0=(t,e)=>{const i=me(G().flowchart.htmlLabels),r=e.labelType==="markdown"?wa(t,e.label,{style:e.labelStyle,useHtmlLabels:i,addSvgBackground:!0}):Qe(e.label,e.labelStyle);D.info("abc82",e,e.labelType);const n=t.insert("g").attr("class","edgeLabel"),s=n.insert("g").attr("class","label");s.node().appendChild(r);let a=r.getBBox();if(i){const l=r.children[0],h=pt(r);a=l.getBoundingClientRect(),h.attr("width",a.width),h.attr("height",a.height)}s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),Js[e.id]=n,e.width=a.width,e.height=a.height;let o;if(e.startLabelLeft){const l=Qe(e.startLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),Se[e.id]||(Se[e.id]={}),Se[e.id].startLeft=h,_s(o,e.startLabelLeft)}if(e.startLabelRight){const l=Qe(e.startLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=h.node().appendChild(l),u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),Se[e.id]||(Se[e.id]={}),Se[e.id].startRight=h,_s(o,e.startLabelRight)}if(e.endLabelLeft){const l=Qe(e.endLabelLeft,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(l),Se[e.id]||(Se[e.id]={}),Se[e.id].endLeft=h,_s(o,e.endLabelLeft)}if(e.endLabelRight){const l=Qe(e.endLabelRight,e.labelStyle),h=t.insert("g").attr("class","edgeTerminals"),u=h.insert("g").attr("class","inner");o=u.node().appendChild(l);const f=l.getBBox();u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),h.node().appendChild(l),Se[e.id]||(Se[e.id]={}),Se[e.id].endRight=h,_s(o,e.endLabelRight)}return r};function _s(t,e){G().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}const K5=(t,e)=>{D.info("Moving label abc78 ",t.id,t.label,Js[t.id]);let i=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const r=Js[t.id];let n=t.x,s=t.y;if(i){const a=Rt.calcLabelPosition(i);D.info("Moving label "+t.label+" from (",n,",",s,") to (",a.x,",",a.y,") abc78"),e.updatedPath&&(n=a.x,s=a.y)}r.attr("transform","translate("+n+", "+s+")")}if(t.startLabelLeft){const r=Se[t.id].startLeft;let n=t.x,s=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",i);n=a.x,s=a.y}r.attr("transform","translate("+n+", "+s+")")}if(t.startLabelRight){const r=Se[t.id].startRight;let n=t.x,s=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",i);n=a.x,s=a.y}r.attr("transform","translate("+n+", "+s+")")}if(t.endLabelLeft){const r=Se[t.id].endLeft;let n=t.x,s=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",i);n=a.x,s=a.y}r.attr("transform","translate("+n+", "+s+")")}if(t.endLabelRight){const r=Se[t.id].endRight;let n=t.x,s=t.y;if(i){const a=Rt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",i);n=a.x,s=a.y}r.attr("transform","translate("+n+", "+s+")")}},Z5=(t,e)=>{const i=t.x,r=t.y,n=Math.abs(e.x-i),s=Math.abs(e.y-r),a=t.width/2,o=t.height/2;return n>=a||s>=o},J5=(t,e,i)=>{D.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,n=t.y,s=Math.abs(r-i.x),a=t.width/2;let o=i.x<e.x?a-s:a+s;const l=t.height/2,h=Math.abs(e.y-i.y),u=Math.abs(e.x-i.x);if(Math.abs(n-e.y)*a>Math.abs(r-e.x)*l){let f=i.y<e.y?e.y-l-n:n-l-e.y;o=u*f/h;const d={x:i.x<e.x?i.x+o:i.x-u+o,y:i.y<e.y?i.y+h-f:i.y-h+f};return o===0&&(d.x=e.x,d.y=e.y),u===0&&(d.x=e.x),h===0&&(d.y=e.y),D.warn(`abc89 topp/bott calc, Q ${h}, q ${f}, R ${u}, r ${o}`,d),d}else{i.x<e.x?o=e.x-a-r:o=r-a-e.x;let f=h*o/u,d=i.x<e.x?i.x+u-o:i.x-u+o,p=i.y<e.y?i.y+f:i.y-f;return D.warn(`sides calc abc89, Q ${h}, q ${f}, R ${u}, r ${o}`,{_x:d,_y:p}),o===0&&(d=e.x,p=e.y),u===0&&(d=e.x),h===0&&(p=e.y),{x:d,y:p}}},Zc=(t,e)=>{D.warn("abc88 cutPathAtIntersect",t,e);let i=[],r=t[0],n=!1;return t.forEach(s=>{if(D.info("abc88 checking point",s,e),!Z5(e,s)&&!n){const a=J5(e,r,s);D.warn("abc88 inside",s,r,a),D.warn("abc88 intersection",a);let o=!1;i.forEach(l=>{o=o||l.x===a.x&&l.y===a.y}),i.some(l=>l.x===a.x&&l.y===a.y)?D.warn("abc88 no intersect",a,i):i.push(a),n=!0}else D.warn("abc88 outside",s,r),r=s,n||i.push(s)}),D.warn("abc88 returning points",i),i},tk=function(t,e,i,r,n,s,a){let o=i.points,l=!1;const h=s.node(e.v);var u=s.node(e.w);D.info("abc88 InsertEdge: ",i),u.intersect&&h.intersect&&(o=o.slice(1,i.points.length-1),o.unshift(h.intersect(o[0])),D.info("Last point",o[o.length-1],u,u.intersect(o[o.length-1])),o.push(u.intersect(o[o.length-1]))),i.toCluster&&(D.info("to cluster abc88",r[i.toCluster]),o=Zc(i.points,r[i.toCluster].node),l=!0),i.fromCluster&&(D.info("from cluster abc88",r[i.fromCluster]),o=Zc(o.reverse(),r[i.fromCluster].node).reverse(),l=!0);const f=o.filter(R=>!Number.isNaN(R.y));let d=ss;i.curve&&(n==="graph"||n==="flowchart")&&(d=i.curve);const{x:p,y}=r0(i),b=xr().x(p).y(y).curve(d);let C;switch(i.thickness){case"normal":C="edge-thickness-normal";break;case"thick":C="edge-thickness-thick";break;case"invisible":C="edge-thickness-thick";break;default:C=""}switch(i.pattern){case"solid":C+=" edge-pattern-solid";break;case"dotted":C+=" edge-pattern-dotted";break;case"dashed":C+=" edge-pattern-dashed";break}const E=t.append("path").attr("d",b(f)).attr("id",i.id).attr("class"," "+C+(i.classes?" "+i.classes:"")).attr("style",i.style);let k="";switch((G().flowchart.arrowMarkerAbsolute||G().state.arrowMarkerAbsolute)&&(k=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,k=k.replace(/\(/g,"\\("),k=k.replace(/\)/g,"\\)")),D.info("arrowTypeStart",i.arrowTypeStart),D.info("arrowTypeEnd",i.arrowTypeEnd),i.arrowTypeStart){case"arrow_cross":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-crossStart)");break;case"arrow_point":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-pointStart)");break;case"arrow_barb":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-barbStart)");break;case"arrow_circle":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-circleStart)");break;case"aggregation":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-aggregationStart)");break;case"extension":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-extensionStart)");break;case"composition":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-compositionStart)");break;case"dependency":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-dependencyStart)");break;case"lollipop":E.attr("marker-start","url("+k+"#"+a+"_"+n+"-lollipopStart)");break}switch(i.arrowTypeEnd){case"arrow_cross":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-crossEnd)");break;case"arrow_point":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-pointEnd)");break;case"arrow_barb":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-barbEnd)");break;case"arrow_circle":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-circleEnd)");break;case"aggregation":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-aggregationEnd)");break;case"extension":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-extensionEnd)");break;case"composition":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-compositionEnd)");break;case"dependency":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-dependencyEnd)");break;case"lollipop":E.attr("marker-end","url("+k+"#"+a+"_"+n+"-lollipopEnd)");break}let I={};return l&&(I.updatedPath=o),I.originalPath=i.points,I};let Vt={},_i={},s0={};const ek=()=>{_i={},s0={},Vt={}},ta=(t,e)=>(D.trace("In isDecendant",e," ",t," = ",_i[e].includes(t)),!!_i[e].includes(t)),ik=(t,e)=>(D.info("Decendants of ",e," is ",_i[e]),D.info("Edge is ",t),t.v===e||t.w===e?!1:_i[e]?_i[e].includes(t.v)||ta(t.v,e)||ta(t.w,e)||_i[e].includes(t.w):(D.debug("Tilt, ",e,",not in decendants"),!1)),a0=(t,e,i,r)=>{D.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const n=e.children(t)||[];t!==r&&n.push(t),D.warn("Copying (nodes) clusterId",t,"nodes",n),n.forEach(s=>{if(e.children(s).length>0)a0(s,e,i,r);else{const a=e.node(s);D.info("cp ",s," to ",r," with parent ",t),i.setNode(s,a),r!==e.parent(s)&&(D.warn("Setting parent",s,e.parent(s)),i.setParent(s,e.parent(s))),t!==r&&s!==t?(D.debug("Setting parent",s,t),i.setParent(s,t)):(D.info("In copy ",t,"root",r,"data",e.node(t),r),D.debug("Not Setting parent for node=",s,"cluster!==rootId",t!==r,"node!==clusterId",s!==t));const o=e.edges(s);D.debug("Copying Edges",o),o.forEach(l=>{D.info("Edge",l);const h=e.edge(l.v,l.w,l.name);D.info("Edge data",h,r);try{ik(l,r)?(D.info("Copying as ",l.v,l.w,h,l.name),i.setEdge(l.v,l.w,h,l.name),D.info("newGraph edges ",i.edges(),i.edge(i.edges()[0]))):D.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",r," clusterId:",t)}catch(u){D.error(u)}})}D.debug("Removing node",s),e.removeNode(s)})},o0=(t,e)=>{const i=e.children(t);let r=[...i];for(const n of i)s0[n]=t,r=[...r,...o0(n,e)];return r},qn=(t,e)=>{D.trace("Searching",t);const i=e.children(t);if(D.trace("Searching children of id ",t,i),i.length<1)return D.trace("This is a valid node",t),t;for(const r of i){const n=qn(r,e);if(n)return D.trace("Found replacement for",t," => ",n),n}},Ts=t=>!Vt[t]||!Vt[t].externalConnections?t:Vt[t]?Vt[t].id:t,rk=(t,e)=>{if(!t||e>10){D.debug("Opting out, no graph ");return}else D.debug("Opting in, graph ");t.nodes().forEach(function(i){t.children(i).length>0&&(D.warn("Cluster identified",i," Replacement id in edges: ",qn(i,t)),_i[i]=o0(i,t),Vt[i]={id:qn(i,t),clusterData:t.node(i)})}),t.nodes().forEach(function(i){const r=t.children(i),n=t.edges();r.length>0?(D.debug("Cluster identified",i,_i),n.forEach(s=>{if(s.v!==i&&s.w!==i){const a=ta(s.v,i),o=ta(s.w,i);a^o&&(D.warn("Edge: ",s," leaves cluster ",i),D.warn("Decendants of XXX ",i,": ",_i[i]),Vt[i].externalConnections=!0)}})):D.debug("Not a cluster ",i,_i)}),t.edges().forEach(function(i){const r=t.edge(i);D.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(i)),D.warn("Edge "+i.v+" -> "+i.w+": "+JSON.stringify(t.edge(i)));let n=i.v,s=i.w;if(D.warn("Fix XXX",Vt,"ids:",i.v,i.w,"Translating: ",Vt[i.v]," --- ",Vt[i.w]),Vt[i.v]&&Vt[i.w]&&Vt[i.v]===Vt[i.w]){D.warn("Fixing and trixing link to self - removing XXX",i.v,i.w,i.name),D.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),n=Ts(i.v),s=Ts(i.w),t.removeEdge(i.v,i.w,i.name);const a=i.w+"---"+i.v;t.setNode(a,{domId:a,id:a,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});const o=structuredClone(r),l=structuredClone(r);o.label="",o.arrowTypeEnd="none",l.label="",o.fromCluster=i.v,l.toCluster=i.v,t.setEdge(n,a,o,i.name+"-cyclic-special"),t.setEdge(a,s,l,i.name+"-cyclic-special")}else(Vt[i.v]||Vt[i.w])&&(D.warn("Fixing and trixing - removing XXX",i.v,i.w,i.name),n=Ts(i.v),s=Ts(i.w),t.removeEdge(i.v,i.w,i.name),n!==i.v&&(r.fromCluster=i.v),s!==i.w&&(r.toCluster=i.w),D.warn("Fix Replacing with XXX",n,s,i.name),t.setEdge(n,s,r,i.name))}),D.warn("Adjusted Graph",Ki(t)),l0(t,0),D.trace(Vt)},l0=(t,e)=>{if(D.warn("extractor - ",e,Ki(t),t.children("D")),e>10){D.error("Bailing out");return}let i=t.nodes(),r=!1;for(const n of i){const s=t.children(n);r=r||s.length>0}if(!r){D.debug("Done, no node has children",t.nodes());return}D.debug("Nodes = ",i,e);for(const n of i)if(D.debug("Extracting node",n,Vt,Vt[n]&&!Vt[n].externalConnections,!t.parent(n),t.node(n),t.children("D")," Depth ",e),!Vt[n])D.debug("Not a cluster",n,e);else if(!Vt[n].externalConnections&&t.children(n)&&t.children(n).length>0){D.warn("Cluster without external connections, without a parent and with children",n,e);let a=t.graph().rankdir==="TB"?"LR":"TB";Vt[n]&&Vt[n].clusterData&&Vt[n].clusterData.dir&&(a=Vt[n].clusterData.dir,D.warn("Fixing dir",Vt[n].clusterData.dir,a));const o=new nr({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});D.warn("Old graph before copy",Ki(t)),a0(n,t,o,n),t.setNode(n,{clusterNode:!0,id:n,clusterData:Vt[n].clusterData,labelText:Vt[n].labelText,graph:o}),D.warn("New graph after copy node: (",n,")",Ki(o)),D.debug("Old graph after copy",Ki(t))}else D.warn("Cluster ** ",n," **not meeting the criteria !externalConnections:",!Vt[n].externalConnections," no parent: ",!t.parent(n)," children ",t.children(n)&&t.children(n).length>0,t.children("D"),e),D.debug(Vt);i=t.nodes(),D.warn("New list of nodes",i);for(const n of i){const s=t.node(n);D.warn(" Now next level",n,s),s.clusterNode&&l0(s.graph,e+1)}},c0=(t,e)=>{if(e.length===0)return[];let i=Object.assign(e);return e.forEach(r=>{const n=t.children(r),s=c0(t,n);i=[...i,...s]}),i},nk=t=>c0(t,t.children()),sk=(t,e)=>{D.info("Creating subgraph rect for ",e.id,e);const i=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=i.insert("rect",":first-child"),n=me(G().flowchart.htmlLabels),s=i.insert("g").attr("class","cluster-label"),a=e.labelType==="markdown"?wa(s,e.labelText,{style:e.labelStyle,useHtmlLabels:n}):s.node().appendChild(Qe(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();if(me(G().flowchart.htmlLabels)){const d=a.children[0],p=pt(a);o=d.getBoundingClientRect(),p.attr("width",o.width),p.attr("height",o.height)}const l=0*e.padding,h=l/2,u=e.width<=o.width+l?o.width+l:e.width;e.width<=o.width+l?e.diff=(o.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,D.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-u/2).attr("y",e.y-e.height/2-h).attr("width",u).attr("height",e.height+l),n?s.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2)+")"):s.attr("transform","translate("+e.x+", "+(e.y-e.height/2)+")");const f=r.node().getBBox();return e.width=f.width,e.height=f.height,e.intersect=function(d){return cs(e,d)},i},ak=(t,e)=>{const i=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=i.insert("rect",":first-child"),n=0*e.padding,s=n/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.intersect=function(o){return cs(e,o)},i},ok=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),n=i.insert("g").attr("class","cluster-label"),s=i.append("rect"),a=n.node().appendChild(Qe(e.labelText,e.labelStyle,void 0,!0));let o=a.getBBox();if(me(G().flowchart.htmlLabels)){const d=a.children[0],p=pt(a);o=d.getBoundingClientRect(),p.attr("width",o.width),p.attr("height",o.height)}o=a.getBBox();const l=0*e.padding,h=l/2,u=e.width<=o.width+e.padding?o.width+e.padding:e.width;e.width<=o.width+e.padding?e.diff=(o.width+e.padding*0-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-u/2-h).attr("y",e.y-e.height/2-h).attr("width",u+l).attr("height",e.height+l),s.attr("class","inner").attr("x",e.x-u/2-h).attr("y",e.y-e.height/2-h+o.height-1).attr("width",u+l).attr("height",e.height+l-o.height-3),n.attr("transform","translate("+(e.x-o.width/2)+", "+(e.y-e.height/2-e.padding/3+(me(G().flowchart.htmlLabels)?5:3))+")");const f=r.node().getBBox();return e.height=f.height,e.intersect=function(d){return cs(e,d)},i},lk=(t,e)=>{const i=t.insert("g").attr("class",e.classes).attr("id",e.id),r=i.insert("rect",":first-child"),n=0*e.padding,s=n/2;r.attr("class","divider").attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2).attr("width",e.width+n).attr("height",e.height+n);const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.diff=-e.padding/2,e.intersect=function(o){return cs(e,o)},i},ck={rect:sk,roundedWithTitle:ok,noteGroup:ak,divider:lk};let h0={};const hk=(t,e)=>{D.trace("Inserting cluster");const i=e.shape||"rect";h0[e.id]=ck[i](t,e)},uk=()=>{h0={}},u0=async(t,e,i,r,n)=>{D.info("Graph in recursive render: XXX",Ki(e),n);const s=e.graph().rankdir;D.trace("Dir in recursive render - dir:",s);const a=t.insert("g").attr("class","root");e.nodes()?D.info("Recursive render XXX",e.nodes()):D.info("No nodes found for",e),e.edges().length>0&&D.trace("Recursive edges",e.edge(e.edges()[0]));const o=a.insert("g").attr("class","clusters"),l=a.insert("g").attr("class","edgePaths"),h=a.insert("g").attr("class","edgeLabels"),u=a.insert("g").attr("class","nodes");await Promise.all(e.nodes().map(async function(d){const p=e.node(d);if(n!==void 0){const y=JSON.parse(JSON.stringify(n.clusterData));D.info("Setting data for cluster XXX (",d,") ",y,n),e.setNode(n.id,y),e.parent(d)||(D.trace("Setting parent",d,n.id),e.setParent(d,n.id,y))}if(D.info("(Insert) Node XXX"+d+": "+JSON.stringify(e.node(d))),p&&p.clusterNode){D.info("Cluster identified",d,p.width,e.node(d));const y=await u0(u,p.graph,i,r,e.node(d)),b=y.elem;ue(p,b),p.diff=y.diff||0,D.info("Node bounds (abc123)",d,p,p.width,p.x,p.y),X5(b,p),D.warn("Recursive render complete ",b,p)}else e.children(d).length>0?(D.info("Cluster - the non recursive path XXX",d,p.id,p,e),D.info(qn(p.id,e)),Vt[p.id]={id:qn(p.id,e),node:p}):(D.info("Node - the non recursive path",d,p.id,p),await i0(u,e.node(d),s))})),e.edges().forEach(function(d){const p=e.edge(d.v,d.w,d.name);D.info("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(d)),D.info("Edge "+d.v+" -> "+d.w+": ",d," ",JSON.stringify(e.edge(d))),D.info("Fix",Vt,"ids:",d.v,d.w,"Translateing: ",Vt[d.v],Vt[d.w]),n0(h,p)}),e.edges().forEach(function(d){D.info("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(d))}),D.info("#############################################"),D.info("###                Layout                 ###"),D.info("#############################################"),D.info(e),ns(e),D.info("Graph after layout:",Ki(e));let f=0;return nk(e).forEach(function(d){const p=e.node(d);D.info("Position "+d+": "+JSON.stringify(e.node(d))),D.info("Position "+d+": ("+p.x,","+p.y,") width: ",p.width," height: ",p.height),p&&p.clusterNode?Kc(p):e.children(d).length>0?(hk(o,p),Vt[p.id].node=p):Kc(p)}),e.edges().forEach(function(d){const p=e.edge(d);D.info("Edge "+d.v+" -> "+d.w+": "+JSON.stringify(p),p);const y=tk(l,d,p,Vt,i,e,r);K5(p,y)}),e.nodes().forEach(function(d){const p=e.node(d);D.info(d,p.type,p.diff),p.type==="group"&&(f=p.diff)}),{elem:a,diff:f}},bl=async(t,e,i,r,n)=>{J1(t,i,r,n),$5(),Q5(),uk(),ek(),D.warn("Graph at first:",JSON.stringify(Ki(e))),rk(e),D.warn("Graph after:",JSON.stringify(Ki(e))),await u0(t,e,r,n)},d0={},dk=function(t){const e=Object.keys(t);for(const i of e)d0[i]=t[i]},f0=function(t,e,i,r,n,s){const a=r.select(`[id="${i}"]`);Object.keys(t).forEach(function(l){const h=t[l];let u="default";h.classes.length>0&&(u=h.classes.join(" ")),u=u+" flowchart-label";const f=Ci(h.styles);let d=h.text!==void 0?h.text:h.id,p;if(D.info("vertex",h,h.labelType),h.labelType==="markdown")D.info("vertex",h,h.labelType);else if(me(G().flowchart.htmlLabels)){const C={label:d.replace(/fa[blrs]?:fa-[\w-]+/g,E=>`<i class='${E.replace(":"," ")}'></i>`)};p=Ph(a,C).node(),p.parentNode.removeChild(p)}else{const C=n.createElementNS("http://www.w3.org/2000/svg","text");C.setAttribute("style",f.labelStyle.replace("color:","fill:"));const E=d.split(yt.lineBreakRegex);for(const k of E){const I=n.createElementNS("http://www.w3.org/2000/svg","tspan");I.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),I.setAttribute("dy","1em"),I.setAttribute("x","1"),I.textContent=k,C.appendChild(I)}p=C}let y=0,b="";switch(h.type){case"round":y=5,b="rect";break;case"square":b="rect";break;case"diamond":b="question";break;case"hexagon":b="hexagon";break;case"odd":b="rect_left_inv_arrow";break;case"lean_right":b="lean_right";break;case"lean_left":b="lean_left";break;case"trapezoid":b="trapezoid";break;case"inv_trapezoid":b="inv_trapezoid";break;case"odd_right":b="rect_left_inv_arrow";break;case"circle":b="circle";break;case"ellipse":b="ellipse";break;case"stadium":b="stadium";break;case"subroutine":b="subroutine";break;case"cylinder":b="cylinder";break;case"group":b="rect";break;case"doublecircle":b="doublecircle";break;default:b="rect"}e.setNode(h.id,{labelStyle:f.labelStyle,shape:b,labelText:d,labelType:h.labelType,rx:y,ry:y,class:u,style:f.style,id:h.id,link:h.link,linkTarget:h.linkTarget,tooltip:s.db.getTooltip(h.id)||"",domId:s.db.lookUpDomId(h.id),haveCallback:h.haveCallback,width:h.type==="group"?500:void 0,dir:h.dir,type:h.type,props:h.props,padding:G().flowchart.padding}),D.info("setNode",{labelStyle:f.labelStyle,labelType:h.labelType,shape:b,labelText:d,rx:y,ry:y,class:u,style:f.style,id:h.id,domId:s.db.lookUpDomId(h.id),width:h.type==="group"?500:void 0,type:h.type,dir:h.dir,props:h.props,padding:G().flowchart.padding})})},p0=function(t,e,i){D.info("abc78 edges = ",t);let r=0,n={},s,a;if(t.defaultStyle!==void 0){const o=Ci(t.defaultStyle);s=o.style,a=o.labelStyle}t.forEach(function(o){r++;const l="L-"+o.start+"-"+o.end;n[l]===void 0?(n[l]=0,D.info("abc78 new entry",l,n[l])):(n[l]++,D.info("abc78 new entry",l,n[l]));let h=l+"-"+n[l];D.info("abc78 new link id to be used is",l,h,n[l]);const u="LS-"+o.start,f="LE-"+o.end,d={style:"",labelStyle:""};switch(d.minlen=o.length||1,o.type==="arrow_open"?d.arrowhead="none":d.arrowhead="normal",d.arrowTypeStart="arrow_open",d.arrowTypeEnd="arrow_open",o.type){case"double_arrow_cross":d.arrowTypeStart="arrow_cross";case"arrow_cross":d.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":d.arrowTypeStart="arrow_point";case"arrow_point":d.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":d.arrowTypeStart="arrow_circle";case"arrow_circle":d.arrowTypeEnd="arrow_circle";break}let p="",y="";switch(o.stroke){case"normal":p="fill:none;",s!==void 0&&(p=s),a!==void 0&&(y=a),d.thickness="normal",d.pattern="solid";break;case"dotted":d.thickness="normal",d.pattern="dotted",d.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":d.thickness="thick",d.pattern="solid",d.style="stroke-width: 3.5px;fill:none;";break;case"invisible":d.thickness="invisible",d.pattern="solid",d.style="stroke-width: 0;fill:none;";break}if(o.style!==void 0){const b=Ci(o.style);p=b.style,y=b.labelStyle}d.style=d.style+=p,d.labelStyle=d.labelStyle+=y,o.interpolate!==void 0?d.curve=pi(o.interpolate,ri):t.defaultInterpolate!==void 0?d.curve=pi(t.defaultInterpolate,ri):d.curve=pi(d0.curve,ri),o.text===void 0?o.style!==void 0&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c"),d.labelType=o.labelType,d.label=o.text.replace(yt.lineBreakRegex,`
`),o.style===void 0&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),d.labelStyle=d.labelStyle.replace("color:","fill:"),d.id=h,d.classes="flowchart-link "+u+" "+f,e.setEdge(o.start,o.end,d,r)})},fk=function(t,e){return e.db.getClasses()},pk=async function(t,e,i,r){D.info("Drawing flowchart");let n=r.db.getDirection();n===void 0&&(n="TD");const{securityLevel:s,flowchart:a}=G(),o=a.nodeSpacing||50,l=a.rankSpacing||50;let h;s==="sandbox"&&(h=pt("#i"+e));const u=s==="sandbox"?pt(h.nodes()[0].contentDocument.body):pt("body"),f=s==="sandbox"?h.nodes()[0].contentDocument:document,d=new nr({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:o,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let p;const y=r.db.getSubGraphs();D.info("Subgraphs - ",y);for(let B=y.length-1;B>=0;B--)p=y[B],D.info("Subgraph - ",p),r.db.addVertex(p.id,{text:p.title,type:p.labelType},"group",void 0,p.classes,p.dir);const b=r.db.getVertices(),C=r.db.getEdges();D.info("Edges",C);let E=0;for(E=y.length-1;E>=0;E--){p=y[E],Oh("cluster").append("text");for(let B=0;B<p.nodes.length;B++)D.info("Setting up subgraphs",p.nodes[B],p.id),d.setParent(p.nodes[B],p.id)}f0(b,d,e,u,f,r),p0(C,d);const k=u.select(`[id="${e}"]`),I=u.select("#"+e+" g");if(await bl(I,d,["point","circle","cross"],"flowchart",e),Rt.insertTitle(k,"flowchartTitleText",a.titleTopMargin,r.db.getDiagramTitle()),qr(d,k,a.diagramPadding,a.useMaxWidth),r.db.indexNodes("subGraph"+E),!a.htmlLabels){const B=f.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const _ of B){const O=_.getBBox(),L=f.createElementNS("http://www.w3.org/2000/svg","rect");L.setAttribute("rx",0),L.setAttribute("ry",0),L.setAttribute("width",O.width),L.setAttribute("height",O.height),_.insertBefore(L,_.firstChild)}}Object.keys(b).forEach(function(B){const _=b[B];if(_.link){const O=pt("#"+e+' [id="'+B+'"]');if(O){const L=f.createElementNS("http://www.w3.org/2000/svg","a");L.setAttributeNS("http://www.w3.org/2000/svg","class",_.classes.join(" ")),L.setAttributeNS("http://www.w3.org/2000/svg","href",_.link),L.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),s==="sandbox"?L.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):_.linkTarget&&L.setAttributeNS("http://www.w3.org/2000/svg","target",_.linkTarget);const m=O.insert(function(){return L},":first-child"),v=O.select(".label-container");v&&m.append(function(){return v.node()});const g=O.select(".label");g&&m.append(function(){return g.node()})}}})},go={setConf:dk,addVertices:f0,addEdges:p0,getClasses:fk,draw:pk},gk=(t,e)=>{const i=Zf,r=i(t,"r"),n=i(t,"g"),s=i(t,"b");return An(r,n,s,e)},yk=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }

  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${gk(t.edgeLabelBackground,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,g0=yk;function y0(t,e,i){const r=e.width,n=e.height,s=(r+n)*.9,a=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}],o=or(t,s,s,a);return i.intersect=function(l){return sr(i,a,l)},o}function m0(t,e,i){const n=e.height,s=n/4,a=e.width+2*s,o=[{x:s,y:0},{x:a-s,y:0},{x:a,y:-n/2},{x:a-s,y:-n},{x:s,y:-n},{x:0,y:-n/2}],l=or(t,a,n,o);return i.intersect=function(h){return sr(i,o,h)},l}function x0(t,e,i){const r=e.width,n=e.height,s=[{x:-n/2,y:0},{x:r,y:0},{x:r,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function b0(t,e,i){const r=e.width,n=e.height,s=[{x:-2*n/6,y:0},{x:r-n/6,y:0},{x:r+2*n/6,y:-n},{x:n/6,y:-n}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function k0(t,e,i){const r=e.width,n=e.height,s=[{x:2*n/6,y:0},{x:r+n/6,y:0},{x:r-2*n/6,y:-n},{x:-n/6,y:-n}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function _0(t,e,i){const r=e.width,n=e.height,s=[{x:-2*n/6,y:0},{x:r+2*n/6,y:0},{x:r-n/6,y:-n},{x:n/6,y:-n}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function T0(t,e,i){const r=e.width,n=e.height,s=[{x:n/6,y:0},{x:r-n/6,y:0},{x:r+2*n/6,y:-n},{x:-2*n/6,y:-n}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function C0(t,e,i){const r=e.width,n=e.height,s=[{x:0,y:0},{x:r+n/2,y:0},{x:r,y:-n/2},{x:r+n/2,y:-n},{x:0,y:-n}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function E0(t,e,i){const r=e.height,n=e.width+r/4,s=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-n/2).attr("y",-r/2).attr("width",n).attr("height",r);return i.intersect=function(a){return Mh(i,a)},s}function S0(t,e,i){const r=e.width,n=e.height,s=[{x:0,y:0},{x:r,y:0},{x:r,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],a=or(t,r,n,s);return i.intersect=function(o){return sr(i,s,o)},a}function w0(t,e,i){const r=e.width,n=r/2,s=n/(2.5+r/50),a=e.height+s,o="M 0,"+s+" a "+n+","+s+" 0,0,0 "+r+" 0 a "+n+","+s+" 0,0,0 "+-r+" 0 l 0,"+a+" a "+n+","+s+" 0,0,0 "+r+" 0 l 0,"+-a,l=t.attr("label-offset-y",s).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(a/2+s)+")");return i.intersect=function(h){const u=Mh(i,h),f=u.x-i.x;if(n!=0&&(Math.abs(f)<i.width/2||Math.abs(f)==i.width/2&&Math.abs(u.y-i.y)>i.height/2-s)){let d=s*s*(1-f*f/(n*n));d!=0&&(d=Math.sqrt(d)),d=s-d,h.y-i.y>0&&(d=-d),u.y+=d}return u},l}function mk(t){t.shapes().question=y0,t.shapes().hexagon=m0,t.shapes().stadium=E0,t.shapes().subroutine=S0,t.shapes().cylinder=w0,t.shapes().rect_left_inv_arrow=x0,t.shapes().lean_right=b0,t.shapes().lean_left=k0,t.shapes().trapezoid=_0,t.shapes().inv_trapezoid=T0,t.shapes().rect_right_inv_arrow=C0}function xk(t){t({question:y0}),t({hexagon:m0}),t({stadium:E0}),t({subroutine:S0}),t({cylinder:w0}),t({rect_left_inv_arrow:x0}),t({lean_right:b0}),t({lean_left:k0}),t({trapezoid:_0}),t({inv_trapezoid:T0}),t({rect_right_inv_arrow:C0})}function or(t,e,i,r){return t.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("transform","translate("+-e/2+","+i/2+")")}const bk={addToRender:mk,addToRenderV2:xk},v0={},kk=function(t){const e=Object.keys(t);for(const i of e)v0[i]=t[i]},A0=function(t,e,i,r,n,s){const a=r?r.select(`[id="${i}"]`):pt(`[id="${i}"]`),o=n||document;Object.keys(t).forEach(function(h){const u=t[h];let f="default";u.classes.length>0&&(f=u.classes.join(" "));const d=Ci(u.styles);let p=u.text!==void 0?u.text:u.id,y;if(me(G().flowchart.htmlLabels)){const E={label:p.replace(/fa[blrs]?:fa-[\w-]+/g,k=>`<i class='${k.replace(":"," ")}'></i>`)};y=Ph(a,E).node(),y.parentNode.removeChild(y)}else{const E=o.createElementNS("http://www.w3.org/2000/svg","text");E.setAttribute("style",d.labelStyle.replace("color:","fill:"));const k=p.split(yt.lineBreakRegex);for(const I of k){const R=o.createElementNS("http://www.w3.org/2000/svg","tspan");R.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),R.setAttribute("dy","1em"),R.setAttribute("x","1"),R.textContent=I,E.appendChild(R)}y=E}let b=0,C="";switch(u.type){case"round":b=5,C="rect";break;case"square":C="rect";break;case"diamond":C="question";break;case"hexagon":C="hexagon";break;case"odd":C="rect_left_inv_arrow";break;case"lean_right":C="lean_right";break;case"lean_left":C="lean_left";break;case"trapezoid":C="trapezoid";break;case"inv_trapezoid":C="inv_trapezoid";break;case"odd_right":C="rect_left_inv_arrow";break;case"circle":C="circle";break;case"ellipse":C="ellipse";break;case"stadium":C="stadium";break;case"subroutine":C="subroutine";break;case"cylinder":C="cylinder";break;case"group":C="rect";break;default:C="rect"}D.warn("Adding node",u.id,u.domId),e.setNode(s.db.lookUpDomId(u.id),{labelType:"svg",labelStyle:d.labelStyle,shape:C,label:y,rx:b,ry:b,class:f,style:d.style,id:s.db.lookUpDomId(u.id)})})},L0=function(t,e,i){let r=0,n,s;if(t.defaultStyle!==void 0){const a=Ci(t.defaultStyle);n=a.style,s=a.labelStyle}t.forEach(function(a){r++;const o="L-"+a.start+"-"+a.end,l="LS-"+a.start,h="LE-"+a.end,u={};a.type==="arrow_open"?u.arrowhead="none":u.arrowhead="normal";let f="",d="";if(a.style!==void 0){const p=Ci(a.style);f=p.style,d=p.labelStyle}else switch(a.stroke){case"normal":f="fill:none",n!==void 0&&(f=n),s!==void 0&&(d=s);break;case"dotted":f="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f=" stroke-width: 3.5px;fill:none";break}u.style=f,u.labelStyle=d,a.interpolate!==void 0?u.curve=pi(a.interpolate,ri):t.defaultInterpolate!==void 0?u.curve=pi(t.defaultInterpolate,ri):u.curve=pi(v0.curve,ri),a.text===void 0?a.style!==void 0&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",me(G().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${o}" class="edgeLabel L-${l}' L-${h}" style="${u.labelStyle}">${a.text.replace(/fa[blrs]?:fa-[\w-]+/g,p=>`<i class='${p.replace(":"," ")}'></i>`)}</span>`):(u.labelType="text",u.label=a.text.replace(yt.lineBreakRegex,`
`),a.style===void 0&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=o,u.class=l+" "+h,u.minlen=a.length||1,e.setEdge(i.db.lookUpDomId(a.start),i.db.lookUpDomId(a.end),u,r)})},_k=function(t,e){return D.info("Extracting classes"),e.db.getClasses()},Tk=function(t,e,i,r){D.info("Drawing flowchart");const{securityLevel:n,flowchart:s}=G();let a;n==="sandbox"&&(a=pt("#i"+e));const o=n==="sandbox"?pt(a.nodes()[0].contentDocument.body):pt("body"),l=n==="sandbox"?a.nodes()[0].contentDocument:document;let h=r.db.getDirection();h===void 0&&(h="TD");const u=s.nodeSpacing||50,f=s.rankSpacing||50,d=new nr({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:u,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let p;const y=r.db.getSubGraphs();for(let _=y.length-1;_>=0;_--)p=y[_],r.db.addVertex(p.id,p.title,"group",void 0,p.classes);const b=r.db.getVertices();D.warn("Get vertices",b);const C=r.db.getEdges();let E=0;for(E=y.length-1;E>=0;E--){p=y[E],Oh("cluster").append("text");for(let _=0;_<p.nodes.length;_++)D.warn("Setting subgraph",p.nodes[_],r.db.lookUpDomId(p.nodes[_]),r.db.lookUpDomId(p.id)),d.setParent(r.db.lookUpDomId(p.nodes[_]),r.db.lookUpDomId(p.id))}A0(b,d,e,o,l,r),L0(C,d,r);const k=new Ff;bk.addToRender(k),k.arrows().none=function(O,L,m,v){const S=O.append("marker").attr("id",L).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");If(S,m[v+"Style"])},k.arrows().normal=function(O,L){O.append("marker").attr("id",L).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const I=o.select(`[id="${e}"]`),R=o.select("#"+e+" g");for(k(R,d),R.selectAll("g.node").attr("title",function(){return r.db.getTooltip(this.id)}),r.db.indexNodes("subGraph"+E),E=0;E<y.length;E++)if(p=y[E],p.title!=="undefined"){const _=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"] rect'),O=l.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(p.id)+'"]'),L=_[0].x.baseVal.value,m=_[0].y.baseVal.value,v=_[0].width.baseVal.value,S=pt(O[0]).select(".label");S.attr("transform",`translate(${L+v/2}, ${m+14})`),S.attr("id",e+"Text");for(let x=0;x<p.classes.length;x++)O[0].classList.add(p.classes[x])}if(!s.htmlLabels){const _=l.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const O of _){const L=O.getBBox(),m=l.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("rx",0),m.setAttribute("ry",0),m.setAttribute("width",L.width),m.setAttribute("height",L.height),O.insertBefore(m,O.firstChild)}}qr(d,I,s.diagramPadding,s.useMaxWidth),Object.keys(b).forEach(function(_){const O=b[_];if(O.link){const L=o.select("#"+e+' [id="'+r.db.lookUpDomId(_)+'"]');if(L){const m=l.createElementNS("http://www.w3.org/2000/svg","a");m.setAttributeNS("http://www.w3.org/2000/svg","class",O.classes.join(" ")),m.setAttributeNS("http://www.w3.org/2000/svg","href",O.link),m.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),n==="sandbox"?m.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):O.linkTarget&&m.setAttributeNS("http://www.w3.org/2000/svg","target",O.linkTarget);const v=L.insert(function(){return m},":first-child"),g=L.select(".label-container");g&&v.append(function(){return g.node()});const S=L.select(".label");S&&v.append(function(){return S.node()})}}})},Ck={setConf:kk,addVertices:A0,addEdges:L0,getClasses:_k,draw:Tk},Ek={parser:fl,db:Ir,renderer:go,styles:g0,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ck.setConf(t.flowchart),Ir.clear(),Ir.setGen("gen-1")}},Sk=Object.freeze(Object.defineProperty({__proto__:null,diagram:Ek},Symbol.toStringTag,{value:"Module"})),wk={parser:fl,db:Ir,renderer:go,styles:g0,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,zg({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),go.setConf(t.flowchart),Ir.clear(),Ir.setGen("gen-2")}},vk=Object.freeze(Object.defineProperty({__proto__:null,diagram:wk},Symbol.toStringTag,{value:"Module"}));var yo=function(){var t=function(L,m,v,g){for(v=v||{},g=L.length;g--;v[L[g]]=m);return v},e=[6,8,10,20,22,24,26,27,28],i=[1,10],r=[1,11],n=[1,12],s=[1,13],a=[1,14],o=[1,15],l=[1,21],h=[1,22],u=[1,23],f=[1,24],d=[1,25],p=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],y=[1,34],b=[27,28,46,47],C=[41,42,43,44,45],E=[17,34],k=[1,54],I=[1,53],R=[17,34,36,38],B={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:function(m,v,g,S,x,M,H){var P=M.length-1;switch(x){case 1:break;case 2:this.$=[];break;case 3:M[P-1].push(M[P]),this.$=M[P-1];break;case 4:case 5:this.$=M[P];break;case 6:case 7:this.$=[];break;case 8:S.addEntity(M[P-4]),S.addEntity(M[P-2]),S.addRelationship(M[P-4],M[P],M[P-2],M[P-3]);break;case 9:S.addEntity(M[P-3]),S.addAttributes(M[P-3],M[P-1]);break;case 10:S.addEntity(M[P-2]);break;case 11:S.addEntity(M[P]);break;case 12:S.addEntity(M[P-6],M[P-4]),S.addAttributes(M[P-6],M[P-1]);break;case 13:S.addEntity(M[P-5],M[P-3]);break;case 14:S.addEntity(M[P-3],M[P-1]);break;case 15:case 16:this.$=M[P].trim(),S.setAccTitle(this.$);break;case 17:case 18:this.$=M[P].trim(),S.setAccDescription(this.$);break;case 19:case 43:this.$=M[P];break;case 20:case 41:case 42:this.$=M[P].replace(/"/g,"");break;case 21:case 29:this.$=[M[P]];break;case 22:M[P].push(M[P-1]),this.$=M[P];break;case 23:this.$={attributeType:M[P-1],attributeName:M[P]};break;case 24:this.$={attributeType:M[P-2],attributeName:M[P-1],attributeKeyTypeList:M[P]};break;case 25:this.$={attributeType:M[P-2],attributeName:M[P-1],attributeComment:M[P]};break;case 26:this.$={attributeType:M[P-3],attributeName:M[P-2],attributeKeyTypeList:M[P-1],attributeComment:M[P]};break;case 27:case 28:case 31:this.$=M[P];break;case 30:M[P-2].push(M[P]),this.$=M[P-2];break;case 32:this.$=M[P].replace(/"/g,"");break;case 33:this.$={cardA:M[P],relType:M[P-1],cardB:M[P-2]};break;case 34:this.$=S.Cardinality.ZERO_OR_ONE;break;case 35:this.$=S.Cardinality.ZERO_OR_MORE;break;case 36:this.$=S.Cardinality.ONE_OR_MORE;break;case 37:this.$=S.Cardinality.ONLY_ONE;break;case 38:this.$=S.Cardinality.MD_PARENT;break;case 39:this.$=S.Identification.NON_IDENTIFYING;break;case 40:this.$=S.Identification.IDENTIFYING;break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:i,22:r,24:n,26:s,27:a,28:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:16,11:9,20:i,22:r,24:n,26:s,27:a,28:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:l,42:h,43:u,44:f,45:d}),{21:[1,26]},{23:[1,27]},{25:[1,28]},t(e,[2,18]),t(p,[2,19]),t(p,[2,20]),t(e,[2,4]),{11:29,27:a,28:o},{16:30,17:[1,31],29:32,30:33,34:y},{11:35,27:a,28:o},{40:36,46:[1,37],47:[1,38]},t(b,[2,34]),t(b,[2,35]),t(b,[2,36]),t(b,[2,37]),t(b,[2,38]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),{13:[1,39]},{17:[1,40]},t(e,[2,10]),{16:41,17:[2,21],29:32,30:33,34:y},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:l,42:h,43:u,44:f,45:d},t(C,[2,39]),t(C,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},t(e,[2,9]),{17:[2,22]},t(E,[2,23],{32:50,33:51,35:52,37:k,38:I}),t([17,34,37,38],[2,28]),t(e,[2,14],{15:[1,55]}),t([27,28],[2,33]),t(e,[2,8]),t(e,[2,41]),t(e,[2,42]),t(e,[2,43]),t(E,[2,24],{33:56,36:[1,57],38:I}),t(E,[2,25]),t(R,[2,29]),t(E,[2,32]),t(R,[2,31]),{16:58,17:[1,59],29:32,30:33,34:y},t(E,[2,26]),{35:60,37:k},{17:[1,61]},t(e,[2,13]),t(R,[2,30]),t(e,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:function(m,v){if(v.recoverable)this.trace(m);else{var g=new Error(m);throw g.hash=v,g}},parse:function(m){var v=this,g=[0],S=[],x=[null],M=[],H=this.table,P="",A=0,V=0,F=2,T=1,W=M.slice.call(arguments,1),lt=Object.create(this.lexer),w={yy:{}};for(var ht in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ht)&&(w.yy[ht]=this.yy[ht]);lt.setInput(m,w.yy),w.yy.lexer=lt,w.yy.parser=this,typeof lt.yylloc>"u"&&(lt.yylloc={});var J=lt.yylloc;M.push(J);var j=lt.options&&lt.options.ranges;typeof w.yy.parseError=="function"?this.parseError=w.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function at(){var nt;return nt=S.pop()||lt.lex()||T,typeof nt!="number"&&(nt instanceof Array&&(S=nt,nt=S.pop()),nt=v.symbols_[nt]||nt),nt}for(var ct,it,rt,N,Z={},q,tt,z,Q;;){if(it=g[g.length-1],this.defaultActions[it]?rt=this.defaultActions[it]:((ct===null||typeof ct>"u")&&(ct=at()),rt=H[it]&&H[it][ct]),typeof rt>"u"||!rt.length||!rt[0]){var $="";Q=[];for(q in H[it])this.terminals_[q]&&q>F&&Q.push("'"+this.terminals_[q]+"'");lt.showPosition?$="Parse error on line "+(A+1)+`:
`+lt.showPosition()+`
Expecting `+Q.join(", ")+", got '"+(this.terminals_[ct]||ct)+"'":$="Parse error on line "+(A+1)+": Unexpected "+(ct==T?"end of input":"'"+(this.terminals_[ct]||ct)+"'"),this.parseError($,{text:lt.match,token:this.terminals_[ct]||ct,line:lt.yylineno,loc:J,expected:Q})}if(rt[0]instanceof Array&&rt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+ct);switch(rt[0]){case 1:g.push(ct),x.push(lt.yytext),M.push(lt.yylloc),g.push(rt[1]),ct=null,V=lt.yyleng,P=lt.yytext,A=lt.yylineno,J=lt.yylloc;break;case 2:if(tt=this.productions_[rt[1]][1],Z.$=x[x.length-tt],Z._$={first_line:M[M.length-(tt||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(tt||1)].first_column,last_column:M[M.length-1].last_column},j&&(Z._$.range=[M[M.length-(tt||1)].range[0],M[M.length-1].range[1]]),N=this.performAction.apply(Z,[P,V,A,w.yy,rt[1],x,M].concat(W)),typeof N<"u")return N;tt&&(g=g.slice(0,-1*tt*2),x=x.slice(0,-1*tt),M=M.slice(0,-1*tt)),g.push(this.productions_[rt[1]][0]),x.push(Z.$),M.push(Z._$),z=H[g[g.length-2]][g[g.length-1]],g.push(z);break;case 3:return!0}}return!0}},_=function(){var L={EOF:1,parseError:function(v,g){if(this.yy.parser)this.yy.parser.parseError(v,g);else throw new Error(v)},setInput:function(m,v){return this.yy=v||this.yy||{},this._input=m,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var m=this._input[0];this.yytext+=m,this.yyleng++,this.offset++,this.match+=m,this.matched+=m;var v=m.match(/(?:\r\n?|\n).*/g);return v?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),m},unput:function(m){var v=m.length,g=m.split(/(?:\r\n?|\n)/g);this._input=m+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-v),this.offset-=v;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),g.length-1&&(this.yylineno-=g.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:g?(g.length===S.length?this.yylloc.first_column:0)+S[S.length-g.length].length-g[0].length:this.yylloc.first_column-v},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-v]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(m){this.unput(this.match.slice(m))},pastInput:function(){var m=this.matched.substr(0,this.matched.length-this.match.length);return(m.length>20?"...":"")+m.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var m=this.match;return m.length<20&&(m+=this._input.substr(0,20-m.length)),(m.substr(0,20)+(m.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var m=this.pastInput(),v=new Array(m.length+1).join("-");return m+this.upcomingInput()+`
`+v+"^"},test_match:function(m,v){var g,S,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),S=m[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+m[0].length},this.yytext+=m[0],this.match+=m[0],this.matches=m,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(m[0].length),this.matched+=m[0],g=this.performAction.call(this,this.yy,this,v,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),g)return g;if(this._backtrack){for(var M in x)this[M]=x[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var m,v,g,S;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),M=0;M<x.length;M++)if(g=this._input.match(this.rules[x[M]]),g&&(!v||g[0].length>v[0].length)){if(v=g,S=M,this.options.backtrack_lexer){if(m=this.test_match(g,x[M]),m!==!1)return m;if(this._backtrack){v=!1;continue}else return!1}else if(!this.options.flex)break}return v?(m=this.test_match(v,x[S]),m!==!1?m:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var v=this.next();return v||this.lex()},begin:function(v){this.conditionStack.push(v)},popState:function(){var v=this.conditionStack.length-1;return v>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(v){return v=this.conditionStack.length-1-Math.abs(v||0),v>=0?this.conditionStack[v]:"INITIAL"},pushState:function(v){this.begin(v)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(v,g,S,x){switch(S){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return g.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return g.yytext[0];case 55:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return L}();B.lexer=_;function O(){this.yy={}}return O.prototype=B,B.Parser=O,new O}();yo.parser=yo;const Ak=yo;let fr={},kl=[];const Lk={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},Bk={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},B0=function(t,e=void 0){return fr[t]===void 0?(fr[t]={attributes:[],alias:e},D.info("Added new entity :",t)):fr[t]&&!fr[t].alias&&e&&(fr[t].alias=e,D.info(`Add alias '${e}' to entity '${t}'`)),fr[t]},Fk=()=>fr,Ik=function(t,e){let i=B0(t),r;for(r=e.length-1;r>=0;r--)i.attributes.push(e[r]),D.debug("Added attribute ",e[r].attributeName)},Dk=function(t,e,i,r){let n={entityA:t,roleA:e,entityB:i,relSpec:r};kl.push(n),D.debug("Added new relationship :",n)},Rk=()=>kl,Nk=function(){fr={},kl=[],We()},Ok={Cardinality:Lk,Identification:Bk,getConfig:()=>G().er,addEntity:B0,addAttributes:Ik,getEntities:Fk,addRelationship:Dk,getRelationships:Rk,clear:Nk,setAccTitle:Oe,getAccTitle:Ye,setAccDescription:He,getAccDescription:Ue,setDiagramTitle:ni,getDiagramTitle:je},yi={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},Pk=function(t,e){let i;t.append("defs").append("marker").attr("id",yi.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",yi.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",yi.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",yi.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",yi.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",yi.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),i=t.append("defs").append("marker").attr("id",yi.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),i.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},mi={ERMarkers:yi,insertMarkers:Pk},Mk=/[^\dA-Za-z](\W)*/g;let ge={},Wn=new Map;const Vk=function(t){const e=Object.keys(t);for(const i of e)ge[i]=t[i]},zk=(t,e,i)=>{const r=ge.entityPadding/3,n=ge.entityPadding/3,s=ge.fontSize*.85,a=e.node().getBBox(),o=[];let l=!1,h=!1,u=0,f=0,d=0,p=0,y=a.height+r*2,b=1;i.forEach(I=>{I.attributeKeyTypeList!==void 0&&I.attributeKeyTypeList.length>0&&(l=!0),I.attributeComment!==void 0&&(h=!0)}),i.forEach(I=>{const R=`${e.node().id}-attr-${b}`;let B=0;const _=Ln(I.attributeType),O=t.append("text").classed("er entityLabel",!0).attr("id",`${R}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",G().fontFamily).style("font-size",s+"px").text(_),L=t.append("text").classed("er entityLabel",!0).attr("id",`${R}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",G().fontFamily).style("font-size",s+"px").text(I.attributeName),m={};m.tn=O,m.nn=L;const v=O.node().getBBox(),g=L.node().getBBox();if(u=Math.max(u,v.width),f=Math.max(f,g.width),B=Math.max(v.height,g.height),l){const S=I.attributeKeyTypeList!==void 0?I.attributeKeyTypeList.join(","):"",x=t.append("text").classed("er entityLabel",!0).attr("id",`${R}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",G().fontFamily).style("font-size",s+"px").text(S);m.kn=x;const M=x.node().getBBox();d=Math.max(d,M.width),B=Math.max(B,M.height)}if(h){const S=t.append("text").classed("er entityLabel",!0).attr("id",`${R}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",G().fontFamily).style("font-size",s+"px").text(I.attributeComment||"");m.cn=S;const x=S.node().getBBox();p=Math.max(p,x.width),B=Math.max(B,x.height)}m.height=B,o.push(m),y+=B+r*2,b+=1});let C=4;l&&(C+=2),h&&(C+=2);const E=u+f+d+p,k={width:Math.max(ge.minEntityWidth,Math.max(a.width+ge.entityPadding*2,E+n*C)),height:i.length>0?y:Math.max(ge.minEntityHeight,a.height+ge.entityPadding*2)};if(i.length>0){const I=Math.max(0,(k.width-E-n*C)/(C/2));e.attr("transform","translate("+k.width/2+","+(r+a.height/2)+")");let R=a.height+r*2,B="attributeBoxOdd";o.forEach(_=>{const O=R+r+_.height/2;_.tn.attr("transform","translate("+n+","+O+")");const L=t.insert("rect","#"+_.tn.node().id).classed(`er ${B}`,!0).attr("x",0).attr("y",R).attr("width",u+n*2+I).attr("height",_.height+r*2),m=parseFloat(L.attr("x"))+parseFloat(L.attr("width"));_.nn.attr("transform","translate("+(m+n)+","+O+")");const v=t.insert("rect","#"+_.nn.node().id).classed(`er ${B}`,!0).attr("x",m).attr("y",R).attr("width",f+n*2+I).attr("height",_.height+r*2);let g=parseFloat(v.attr("x"))+parseFloat(v.attr("width"));if(l){_.kn.attr("transform","translate("+(g+n)+","+O+")");const S=t.insert("rect","#"+_.kn.node().id).classed(`er ${B}`,!0).attr("x",g).attr("y",R).attr("width",d+n*2+I).attr("height",_.height+r*2);g=parseFloat(S.attr("x"))+parseFloat(S.attr("width"))}h&&(_.cn.attr("transform","translate("+(g+n)+","+O+")"),t.insert("rect","#"+_.cn.node().id).classed(`er ${B}`,"true").attr("x",g).attr("y",R).attr("width",p+n*2+I).attr("height",_.height+r*2)),R+=_.height+r*2,B=B==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else k.height=Math.max(ge.minEntityHeight,y),e.attr("transform","translate("+k.width/2+","+k.height/2+")");return k},qk=function(t,e,i){const r=Object.keys(e);let n;return r.forEach(function(s){const a=Gk(s,"entity");Wn.set(s,a);const o=t.append("g").attr("id",a);n=n===void 0?a:n;const l="text-"+a,h=o.append("text").classed("er entityLabel",!0).attr("id",l).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",G().fontFamily).style("font-size",ge.fontSize+"px").text(e[s].alias??s),{width:u,height:f}=zk(o,h,e[s].attributes),p=o.insert("rect","#"+l).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",u).attr("height",f).node().getBBox();i.setNode(a,{width:p.width,height:p.height,shape:"rect",id:a})}),n},Wk=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )")})},F0=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},Yk=function(t,e){return t.forEach(function(i){e.setEdge(Wn.get(i.entityA),Wn.get(i.entityB),{relationship:i},F0(i))}),t};let Jc=0;const Hk=function(t,e,i,r,n){Jc++;const s=i.edge(Wn.get(e.entityA),Wn.get(e.entityB),F0(e)),a=xr().x(function(y){return y.x}).y(function(y){return y.y}).curve(ss),o=t.insert("path","#"+r).classed("er relationshipLine",!0).attr("d",a(s.points)).style("stroke",ge.stroke).style("fill","none");e.relSpec.relType===n.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let l="";switch(ge.arrowMarkerAbsolute&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replace(/\(/g,"\\("),l=l.replace(/\)/g,"\\)")),e.relSpec.cardA){case n.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ZERO_OR_ONE_END+")");break;case n.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ZERO_OR_MORE_END+")");break;case n.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ONE_OR_MORE_END+")");break;case n.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.ONLY_ONE_END+")");break;case n.db.Cardinality.MD_PARENT:o.attr("marker-end","url("+l+"#"+mi.ERMarkers.MD_PARENT_END+")");break}switch(e.relSpec.cardB){case n.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ZERO_OR_ONE_START+")");break;case n.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ZERO_OR_MORE_START+")");break;case n.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ONE_OR_MORE_START+")");break;case n.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.ONLY_ONE_START+")");break;case n.db.Cardinality.MD_PARENT:o.attr("marker-start","url("+l+"#"+mi.ERMarkers.MD_PARENT_START+")");break}const h=o.node().getTotalLength(),u=o.node().getPointAtLength(h*.5),f="rel"+Jc,p=t.append("text").classed("er relationshipLabel",!0).attr("id",f).attr("x",u.x).attr("y",u.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",G().fontFamily).style("font-size",ge.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+f).classed("er relationshipLabelBox",!0).attr("x",u.x-p.width/2).attr("y",u.y-p.height/2).attr("width",p.width).attr("height",p.height)},Uk=function(t,e,i,r){ge=G().er,D.info("Drawing ER diagram");const n=G().securityLevel;let s;n==="sandbox"&&(s=pt("#i"+e));const o=(n==="sandbox"?pt(s.nodes()[0].contentDocument.body):pt("body")).select(`[id='${e}']`);mi.insertMarkers(o,ge);let l;l=new nr({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:ge.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const h=qk(o,r.db.getEntities(),l),u=Yk(r.db.getRelationships(),l);ns(l),Wk(o,l),u.forEach(function(b){Hk(o,b,l,h,r)});const f=ge.diagramPadding;Rt.insertTitle(o,"entityTitleText",ge.titleTopMargin,r.db.getDiagramTitle());const d=o.node().getBBox(),p=d.width+f*2,y=d.height+f*2;Ne(o,y,p,ge.useMaxWidth),o.attr("viewBox",`${d.x-f} ${d.y-f} ${p} ${y}`)},jk="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function Gk(t="",e=""){const i=t.replace(Mk,"");return`${th(e)}${th(i)}${Jf(t,jk)}`}function th(t=""){return t.length>0?`${t}-`:""}const Xk={setConf:Vk,draw:Uk},$k=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  
`,Qk=$k,Kk={parser:Ak,db:Ok,renderer:Xk,styles:Qk},Zk=Object.freeze(Object.defineProperty({__proto__:null,diagram:Kk},Symbol.toStringTag,{value:"Module"}));var mo=function(){var t=function(B,_,O,L){for(O=O||{},L=B.length;L--;O[B[L]]=_);return O},e=[1,3],i=[1,6],r=[1,4],n=[1,5],s=[2,5],a=[1,12],o=[5,7,13,19,21,23,24,26,28,31,36,39,46],l=[7,13,19,21,23,24,26,28,31,36,39],h=[7,12,13,19,21,23,24,26,28,31,36,39],u=[7,13,46],f=[1,42],d=[1,41],p=[7,13,29,32,34,37,46],y=[1,55],b=[1,56],C=[1,57],E=[7,13,32,34,41,46],k={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,GG:5,document:6,EOF:7,":":8,DIR:9,options:10,body:11,OPT:12,NL:13,line:14,statement:15,commitStatement:16,mergeStatement:17,cherryPickStatement:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,section:24,branchStatement:25,CHECKOUT:26,ref:27,BRANCH:28,ORDER:29,NUM:30,CHERRY_PICK:31,COMMIT_ID:32,STR:33,COMMIT_TAG:34,EMPTYSTR:35,MERGE:36,COMMIT_TYPE:37,commitType:38,COMMIT:39,commit_arg:40,COMMIT_MSG:41,NORMAL:42,REVERSE:43,HIGHLIGHT:44,ID:45,";":46,$accept:0,$end:1},terminals_:{2:"error",5:"GG",7:"EOF",8:":",9:"DIR",12:"OPT",13:"NL",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"section",26:"CHECKOUT",28:"BRANCH",29:"ORDER",30:"NUM",31:"CHERRY_PICK",32:"COMMIT_ID",33:"STR",34:"COMMIT_TAG",35:"EMPTYSTR",36:"MERGE",37:"COMMIT_TYPE",39:"COMMIT",41:"COMMIT_MSG",42:"NORMAL",43:"REVERSE",44:"HIGHLIGHT",45:"ID",46:";"},productions_:[0,[3,2],[3,3],[3,4],[3,5],[6,0],[6,2],[10,2],[10,1],[11,0],[11,2],[14,2],[14,1],[15,1],[15,1],[15,1],[15,2],[15,2],[15,1],[15,1],[15,1],[15,2],[25,2],[25,4],[18,3],[18,5],[18,5],[18,5],[18,5],[17,2],[17,4],[17,4],[17,4],[17,6],[17,6],[17,6],[17,6],[17,6],[17,6],[17,8],[17,8],[17,8],[17,8],[17,8],[17,8],[16,2],[16,3],[16,3],[16,5],[16,5],[16,3],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,3],[16,5],[16,5],[16,5],[16,5],[16,5],[16,5],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,7],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[16,9],[40,0],[40,1],[38,1],[38,1],[38,1],[27,1],[27,1],[4,1],[4,1],[4,1]],performAction:function(_,O,L,m,v,g,S){var x=g.length-1;switch(v){case 2:return g[x];case 3:return g[x-1];case 4:return m.setDirection(g[x-3]),g[x-1];case 6:m.setOptions(g[x-1]),this.$=g[x];break;case 7:g[x-1]+=g[x],this.$=g[x-1];break;case 9:this.$=[];break;case 10:g[x-1].push(g[x]),this.$=g[x-1];break;case 11:this.$=g[x-1];break;case 16:this.$=g[x].trim(),m.setAccTitle(this.$);break;case 17:case 18:this.$=g[x].trim(),m.setAccDescription(this.$);break;case 19:m.addSection(g[x].substr(8)),this.$=g[x].substr(8);break;case 21:m.checkout(g[x]);break;case 22:m.branch(g[x]);break;case 23:m.branch(g[x-2],g[x]);break;case 24:m.cherryPick(g[x],"",void 0);break;case 25:m.cherryPick(g[x-2],"",g[x]);break;case 26:case 28:m.cherryPick(g[x-2],"","");break;case 27:m.cherryPick(g[x],"",g[x-2]);break;case 29:m.merge(g[x],"","","");break;case 30:m.merge(g[x-2],g[x],"","");break;case 31:m.merge(g[x-2],"",g[x],"");break;case 32:m.merge(g[x-2],"","",g[x]);break;case 33:m.merge(g[x-4],g[x],"",g[x-2]);break;case 34:m.merge(g[x-4],"",g[x],g[x-2]);break;case 35:m.merge(g[x-4],"",g[x-2],g[x]);break;case 36:m.merge(g[x-4],g[x-2],g[x],"");break;case 37:m.merge(g[x-4],g[x-2],"",g[x]);break;case 38:m.merge(g[x-4],g[x],g[x-2],"");break;case 39:m.merge(g[x-6],g[x-4],g[x-2],g[x]);break;case 40:m.merge(g[x-6],g[x],g[x-4],g[x-2]);break;case 41:m.merge(g[x-6],g[x-4],g[x],g[x-2]);break;case 42:m.merge(g[x-6],g[x-2],g[x-4],g[x]);break;case 43:m.merge(g[x-6],g[x],g[x-2],g[x-4]);break;case 44:m.merge(g[x-6],g[x-2],g[x],g[x-4]);break;case 45:m.commit(g[x]);break;case 46:m.commit("","",m.commitType.NORMAL,g[x]);break;case 47:m.commit("","",g[x],"");break;case 48:m.commit("","",g[x],g[x-2]);break;case 49:m.commit("","",g[x-2],g[x]);break;case 50:m.commit("",g[x],m.commitType.NORMAL,"");break;case 51:m.commit("",g[x-2],m.commitType.NORMAL,g[x]);break;case 52:m.commit("",g[x],m.commitType.NORMAL,g[x-2]);break;case 53:m.commit("",g[x-2],g[x],"");break;case 54:m.commit("",g[x],g[x-2],"");break;case 55:m.commit("",g[x-4],g[x-2],g[x]);break;case 56:m.commit("",g[x-4],g[x],g[x-2]);break;case 57:m.commit("",g[x-2],g[x-4],g[x]);break;case 58:m.commit("",g[x],g[x-4],g[x-2]);break;case 59:m.commit("",g[x],g[x-2],g[x-4]);break;case 60:m.commit("",g[x-2],g[x],g[x-4]);break;case 61:m.commit(g[x],"",m.commitType.NORMAL,"");break;case 62:m.commit(g[x],"",m.commitType.NORMAL,g[x-2]);break;case 63:m.commit(g[x-2],"",m.commitType.NORMAL,g[x]);break;case 64:m.commit(g[x-2],"",g[x],"");break;case 65:m.commit(g[x],"",g[x-2],"");break;case 66:m.commit(g[x],g[x-2],m.commitType.NORMAL,"");break;case 67:m.commit(g[x-2],g[x],m.commitType.NORMAL,"");break;case 68:m.commit(g[x-4],"",g[x-2],g[x]);break;case 69:m.commit(g[x-4],"",g[x],g[x-2]);break;case 70:m.commit(g[x-2],"",g[x-4],g[x]);break;case 71:m.commit(g[x],"",g[x-4],g[x-2]);break;case 72:m.commit(g[x],"",g[x-2],g[x-4]);break;case 73:m.commit(g[x-2],"",g[x],g[x-4]);break;case 74:m.commit(g[x-4],g[x],g[x-2],"");break;case 75:m.commit(g[x-4],g[x-2],g[x],"");break;case 76:m.commit(g[x-2],g[x],g[x-4],"");break;case 77:m.commit(g[x],g[x-2],g[x-4],"");break;case 78:m.commit(g[x],g[x-4],g[x-2],"");break;case 79:m.commit(g[x-2],g[x-4],g[x],"");break;case 80:m.commit(g[x-4],g[x],m.commitType.NORMAL,g[x-2]);break;case 81:m.commit(g[x-4],g[x-2],m.commitType.NORMAL,g[x]);break;case 82:m.commit(g[x-2],g[x],m.commitType.NORMAL,g[x-4]);break;case 83:m.commit(g[x],g[x-2],m.commitType.NORMAL,g[x-4]);break;case 84:m.commit(g[x],g[x-4],m.commitType.NORMAL,g[x-2]);break;case 85:m.commit(g[x-2],g[x-4],m.commitType.NORMAL,g[x]);break;case 86:m.commit(g[x-6],g[x-4],g[x-2],g[x]);break;case 87:m.commit(g[x-6],g[x-4],g[x],g[x-2]);break;case 88:m.commit(g[x-6],g[x-2],g[x-4],g[x]);break;case 89:m.commit(g[x-6],g[x],g[x-4],g[x-2]);break;case 90:m.commit(g[x-6],g[x-2],g[x],g[x-4]);break;case 91:m.commit(g[x-6],g[x],g[x-2],g[x-4]);break;case 92:m.commit(g[x-4],g[x-6],g[x-2],g[x]);break;case 93:m.commit(g[x-4],g[x-6],g[x],g[x-2]);break;case 94:m.commit(g[x-2],g[x-6],g[x-4],g[x]);break;case 95:m.commit(g[x],g[x-6],g[x-4],g[x-2]);break;case 96:m.commit(g[x-2],g[x-6],g[x],g[x-4]);break;case 97:m.commit(g[x],g[x-6],g[x-2],g[x-4]);break;case 98:m.commit(g[x],g[x-4],g[x-2],g[x-6]);break;case 99:m.commit(g[x-2],g[x-4],g[x],g[x-6]);break;case 100:m.commit(g[x],g[x-2],g[x-4],g[x-6]);break;case 101:m.commit(g[x-2],g[x],g[x-4],g[x-6]);break;case 102:m.commit(g[x-4],g[x-2],g[x],g[x-6]);break;case 103:m.commit(g[x-4],g[x],g[x-2],g[x-6]);break;case 104:m.commit(g[x-2],g[x-4],g[x-6],g[x]);break;case 105:m.commit(g[x],g[x-4],g[x-6],g[x-2]);break;case 106:m.commit(g[x-2],g[x],g[x-6],g[x-4]);break;case 107:m.commit(g[x],g[x-2],g[x-6],g[x-4]);break;case 108:m.commit(g[x-4],g[x-2],g[x-6],g[x]);break;case 109:m.commit(g[x-4],g[x],g[x-6],g[x-2]);break;case 110:this.$="";break;case 111:this.$=g[x];break;case 112:this.$=m.commitType.NORMAL;break;case 113:this.$=m.commitType.REVERSE;break;case 114:this.$=m.commitType.HIGHLIGHT;break}},table:[{3:1,4:2,5:e,7:i,13:r,46:n},{1:[3]},{3:7,4:2,5:e,7:i,13:r,46:n},{6:8,7:s,8:[1,9],9:[1,10],10:11,13:a},t(o,[2,117]),t(o,[2,118]),t(o,[2,119]),{1:[2,1]},{7:[1,13]},{6:14,7:s,10:11,13:a},{8:[1,15]},t(l,[2,9],{11:16,12:[1,17]}),t(h,[2,8]),{1:[2,2]},{7:[1,18]},{6:19,7:s,10:11,13:a},{7:[2,6],13:[1,22],14:20,15:21,16:23,17:24,18:25,19:[1,26],21:[1,27],23:[1,28],24:[1,29],25:30,26:[1,31],28:[1,35],31:[1,34],36:[1,33],39:[1,32]},t(h,[2,7]),{1:[2,3]},{7:[1,36]},t(l,[2,10]),{4:37,7:i,13:r,46:n},t(l,[2,12]),t(u,[2,13]),t(u,[2,14]),t(u,[2,15]),{20:[1,38]},{22:[1,39]},t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),{27:40,33:f,45:d},t(u,[2,110],{40:43,32:[1,46],33:[1,48],34:[1,44],37:[1,45],41:[1,47]}),{27:49,33:f,45:d},{32:[1,50],34:[1,51]},{27:52,33:f,45:d},{1:[2,4]},t(l,[2,11]),t(u,[2,16]),t(u,[2,17]),t(u,[2,21]),t(p,[2,115]),t(p,[2,116]),t(u,[2,45]),{33:[1,53]},{38:54,42:y,43:b,44:C},{33:[1,58]},{33:[1,59]},t(u,[2,111]),t(u,[2,29],{32:[1,60],34:[1,62],37:[1,61]}),{33:[1,63]},{33:[1,64],35:[1,65]},t(u,[2,22],{29:[1,66]}),t(u,[2,46],{32:[1,68],37:[1,67],41:[1,69]}),t(u,[2,47],{32:[1,71],34:[1,70],41:[1,72]}),t(E,[2,112]),t(E,[2,113]),t(E,[2,114]),t(u,[2,50],{34:[1,73],37:[1,74],41:[1,75]}),t(u,[2,61],{32:[1,78],34:[1,76],37:[1,77]}),{33:[1,79]},{38:80,42:y,43:b,44:C},{33:[1,81]},t(u,[2,24],{34:[1,82]}),{32:[1,83]},{32:[1,84]},{30:[1,85]},{38:86,42:y,43:b,44:C},{33:[1,87]},{33:[1,88]},{33:[1,89]},{33:[1,90]},{33:[1,91]},{33:[1,92]},{38:93,42:y,43:b,44:C},{33:[1,94]},{33:[1,95]},{38:96,42:y,43:b,44:C},{33:[1,97]},t(u,[2,30],{34:[1,99],37:[1,98]}),t(u,[2,31],{32:[1,101],34:[1,100]}),t(u,[2,32],{32:[1,102],37:[1,103]}),{33:[1,104],35:[1,105]},{33:[1,106]},{33:[1,107]},t(u,[2,23]),t(u,[2,48],{32:[1,108],41:[1,109]}),t(u,[2,52],{37:[1,110],41:[1,111]}),t(u,[2,62],{32:[1,113],37:[1,112]}),t(u,[2,49],{32:[1,114],41:[1,115]}),t(u,[2,54],{34:[1,116],41:[1,117]}),t(u,[2,65],{32:[1,119],34:[1,118]}),t(u,[2,51],{37:[1,120],41:[1,121]}),t(u,[2,53],{34:[1,122],41:[1,123]}),t(u,[2,66],{34:[1,125],37:[1,124]}),t(u,[2,63],{32:[1,127],37:[1,126]}),t(u,[2,64],{32:[1,129],34:[1,128]}),t(u,[2,67],{34:[1,131],37:[1,130]}),{38:132,42:y,43:b,44:C},{33:[1,133]},{33:[1,134]},{33:[1,135]},{33:[1,136]},{38:137,42:y,43:b,44:C},t(u,[2,25]),t(u,[2,26]),t(u,[2,27]),t(u,[2,28]),{33:[1,138]},{33:[1,139]},{38:140,42:y,43:b,44:C},{33:[1,141]},{38:142,42:y,43:b,44:C},{33:[1,143]},{33:[1,144]},{33:[1,145]},{33:[1,146]},{33:[1,147]},{33:[1,148]},{33:[1,149]},{38:150,42:y,43:b,44:C},{33:[1,151]},{33:[1,152]},{33:[1,153]},{38:154,42:y,43:b,44:C},{33:[1,155]},{38:156,42:y,43:b,44:C},{33:[1,157]},{33:[1,158]},{33:[1,159]},{38:160,42:y,43:b,44:C},{33:[1,161]},t(u,[2,36],{34:[1,162]}),t(u,[2,37],{37:[1,163]}),t(u,[2,35],{32:[1,164]}),t(u,[2,38],{34:[1,165]}),t(u,[2,33],{37:[1,166]}),t(u,[2,34],{32:[1,167]}),t(u,[2,59],{41:[1,168]}),t(u,[2,72],{32:[1,169]}),t(u,[2,60],{41:[1,170]}),t(u,[2,83],{37:[1,171]}),t(u,[2,73],{32:[1,172]}),t(u,[2,82],{37:[1,173]}),t(u,[2,58],{41:[1,174]}),t(u,[2,71],{32:[1,175]}),t(u,[2,57],{41:[1,176]}),t(u,[2,77],{34:[1,177]}),t(u,[2,70],{32:[1,178]}),t(u,[2,76],{34:[1,179]}),t(u,[2,56],{41:[1,180]}),t(u,[2,84],{37:[1,181]}),t(u,[2,55],{41:[1,182]}),t(u,[2,78],{34:[1,183]}),t(u,[2,79],{34:[1,184]}),t(u,[2,85],{37:[1,185]}),t(u,[2,69],{32:[1,186]}),t(u,[2,80],{37:[1,187]}),t(u,[2,68],{32:[1,188]}),t(u,[2,74],{34:[1,189]}),t(u,[2,75],{34:[1,190]}),t(u,[2,81],{37:[1,191]}),{33:[1,192]},{38:193,42:y,43:b,44:C},{33:[1,194]},{33:[1,195]},{38:196,42:y,43:b,44:C},{33:[1,197]},{33:[1,198]},{33:[1,199]},{33:[1,200]},{38:201,42:y,43:b,44:C},{33:[1,202]},{38:203,42:y,43:b,44:C},{33:[1,204]},{33:[1,205]},{33:[1,206]},{33:[1,207]},{33:[1,208]},{33:[1,209]},{33:[1,210]},{38:211,42:y,43:b,44:C},{33:[1,212]},{33:[1,213]},{33:[1,214]},{38:215,42:y,43:b,44:C},{33:[1,216]},{38:217,42:y,43:b,44:C},{33:[1,218]},{33:[1,219]},{33:[1,220]},{38:221,42:y,43:b,44:C},t(u,[2,39]),t(u,[2,41]),t(u,[2,40]),t(u,[2,42]),t(u,[2,44]),t(u,[2,43]),t(u,[2,100]),t(u,[2,101]),t(u,[2,98]),t(u,[2,99]),t(u,[2,103]),t(u,[2,102]),t(u,[2,107]),t(u,[2,106]),t(u,[2,105]),t(u,[2,104]),t(u,[2,109]),t(u,[2,108]),t(u,[2,97]),t(u,[2,96]),t(u,[2,95]),t(u,[2,94]),t(u,[2,92]),t(u,[2,93]),t(u,[2,91]),t(u,[2,90]),t(u,[2,89]),t(u,[2,88]),t(u,[2,86]),t(u,[2,87])],defaultActions:{7:[2,1],13:[2,2],18:[2,3],36:[2,4]},parseError:function(_,O){if(O.recoverable)this.trace(_);else{var L=new Error(_);throw L.hash=O,L}},parse:function(_){var O=this,L=[0],m=[],v=[null],g=[],S=this.table,x="",M=0,H=0,P=2,A=1,V=g.slice.call(arguments,1),F=Object.create(this.lexer),T={yy:{}};for(var W in this.yy)Object.prototype.hasOwnProperty.call(this.yy,W)&&(T.yy[W]=this.yy[W]);F.setInput(_,T.yy),T.yy.lexer=F,T.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var lt=F.yylloc;g.push(lt);var w=F.options&&F.options.ranges;typeof T.yy.parseError=="function"?this.parseError=T.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ht(){var z;return z=m.pop()||F.lex()||A,typeof z!="number"&&(z instanceof Array&&(m=z,z=m.pop()),z=O.symbols_[z]||z),z}for(var J,j,at,ct,it={},rt,N,Z,q;;){if(j=L[L.length-1],this.defaultActions[j]?at=this.defaultActions[j]:((J===null||typeof J>"u")&&(J=ht()),at=S[j]&&S[j][J]),typeof at>"u"||!at.length||!at[0]){var tt="";q=[];for(rt in S[j])this.terminals_[rt]&&rt>P&&q.push("'"+this.terminals_[rt]+"'");F.showPosition?tt="Parse error on line "+(M+1)+`:
`+F.showPosition()+`
Expecting `+q.join(", ")+", got '"+(this.terminals_[J]||J)+"'":tt="Parse error on line "+(M+1)+": Unexpected "+(J==A?"end of input":"'"+(this.terminals_[J]||J)+"'"),this.parseError(tt,{text:F.match,token:this.terminals_[J]||J,line:F.yylineno,loc:lt,expected:q})}if(at[0]instanceof Array&&at.length>1)throw new Error("Parse Error: multiple actions possible at state: "+j+", token: "+J);switch(at[0]){case 1:L.push(J),v.push(F.yytext),g.push(F.yylloc),L.push(at[1]),J=null,H=F.yyleng,x=F.yytext,M=F.yylineno,lt=F.yylloc;break;case 2:if(N=this.productions_[at[1]][1],it.$=v[v.length-N],it._$={first_line:g[g.length-(N||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(N||1)].first_column,last_column:g[g.length-1].last_column},w&&(it._$.range=[g[g.length-(N||1)].range[0],g[g.length-1].range[1]]),ct=this.performAction.apply(it,[x,H,M,T.yy,at[1],v,g].concat(V)),typeof ct<"u")return ct;N&&(L=L.slice(0,-1*N*2),v=v.slice(0,-1*N),g=g.slice(0,-1*N)),L.push(this.productions_[at[1]][0]),v.push(it.$),g.push(it._$),Z=S[L[L.length-2]][L[L.length-1]],L.push(Z);break;case 3:return!0}}return!0}},I=function(){var B={EOF:1,parseError:function(O,L){if(this.yy.parser)this.yy.parser.parseError(O,L);else throw new Error(O)},setInput:function(_,O){return this.yy=O||this.yy||{},this._input=_,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var _=this._input[0];this.yytext+=_,this.yyleng++,this.offset++,this.match+=_,this.matched+=_;var O=_.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_},unput:function(_){var O=_.length,L=_.split(/(?:\r\n?|\n)/g);this._input=_+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),L.length-1&&(this.yylineno-=L.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:L?(L.length===m.length?this.yylloc.first_column:0)+m[m.length-L.length].length-L[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(_){this.unput(this.match.slice(_))},pastInput:function(){var _=this.matched.substr(0,this.matched.length-this.match.length);return(_.length>20?"...":"")+_.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var _=this.match;return _.length<20&&(_+=this._input.substr(0,20-_.length)),(_.substr(0,20)+(_.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var _=this.pastInput(),O=new Array(_.length+1).join("-");return _+this.upcomingInput()+`
`+O+"^"},test_match:function(_,O){var L,m,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),m=_[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_[0].length},this.yytext+=_[0],this.match+=_[0],this.matches=_,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_[0].length),this.matched+=_[0],L=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),L)return L;if(this._backtrack){for(var g in v)this[g]=v[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var _,O,L,m;this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),g=0;g<v.length;g++)if(L=this._input.match(this.rules[v[g]]),L&&(!O||L[0].length>O[0].length)){if(O=L,m=g,this.options.backtrack_lexer){if(_=this.test_match(L,v[g]),_!==!1)return _;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(_=this.test_match(O,v[m]),_!==!1?_:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var O=this.next();return O||this.lex()},begin:function(O){this.conditionStack.push(O)},popState:function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},pushState:function(O){this.begin(O)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(O,L,m,v){switch(m){case 0:return this.begin("acc_title"),19;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),21;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 13;case 8:break;case 9:break;case 10:return 5;case 11:return 39;case 12:return 32;case 13:return 37;case 14:return 41;case 15:return 42;case 16:return 43;case 17:return 44;case 18:return 34;case 19:return 28;case 20:return 29;case 21:return 36;case 22:return 31;case 23:return 26;case 24:return 9;case 25:return 9;case 26:return 8;case 27:return"CARET";case 28:this.begin("options");break;case 29:this.popState();break;case 30:return 12;case 31:return 35;case 32:this.begin("string");break;case 33:this.popState();break;case 34:return 33;case 35:return 30;case 36:return 45;case 37:return 7}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:TB\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},options:{rules:[29,30],inclusive:!1},string:{rules:[33,34],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,31,32,35,36,37,38],inclusive:!0}}};return B}();k.lexer=I;function R(){this.yy={}}return R.prototype=k,k.Parser=R,new R}();mo.parser=mo;const Jk=mo;let ea=G().gitGraph.mainBranchName,t6=G().gitGraph.mainBranchOrder,ye={},qe=null,Yn={};Yn[ea]={name:ea,order:t6};let de={};de[ea]=qe;let _e=ea,I0="LR",Rr=0;function _l(){return iu({length:7})}function e6(t,e){const i=Object.create(null);return t.reduce((r,n)=>{const s=e(n);return i[s]||(i[s]=!0,r.push(n)),r},[])}const i6=function(t){I0=t};let D0={};const r6=function(t){D.debug("options str",t),t=t&&t.trim(),t=t||"{}";try{D0=JSON.parse(t)}catch(e){D.error("error while parsing gitGraph options",e.message)}},n6=function(){return D0},s6=function(t,e,i,r){D.debug("Entering commit:",t,e,i,r),e=yt.sanitizeText(e,G()),t=yt.sanitizeText(t,G()),r=yt.sanitizeText(r,G());const n={id:e||Rr+"-"+_l(),message:t,seq:Rr++,type:i||Hn.NORMAL,tag:r||"",parents:qe==null?[]:[qe.id],branch:_e};qe=n,ye[n.id]=n,de[_e]=n.id,D.debug("in pushCommit "+n.id)},a6=function(t,e){if(t=yt.sanitizeText(t,G()),de[t]===void 0)de[t]=qe!=null?qe.id:null,Yn[t]={name:t,order:e?parseInt(e,10):null},R0(t),D.debug("in createBranch");else{let i=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw i.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},i}},o6=function(t,e,i,r){t=yt.sanitizeText(t,G()),e=yt.sanitizeText(e,G());const n=ye[de[_e]],s=ye[de[t]];if(_e===t){let o=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(n===void 0||!n){let o=new Error('Incorrect usage of "merge". Current branch ('+_e+")has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},o}else if(de[t]===void 0){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},o}else if(s===void 0||!s){let o=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},o}else if(n===s){let o=new Error('Incorrect usage of "merge". Both branches have same head');throw o.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},o}else if(e&&ye[e]!==void 0){let o=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw o.hash={text:"merge "+t+e+i+r,token:"merge "+t+e+i+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+i+" "+r]},o}const a={id:e||Rr+"-"+_l(),message:"merged branch "+t+" into "+_e,seq:Rr++,parents:[qe==null?null:qe.id,de[t]],branch:_e,type:Hn.MERGE,customType:i,customId:!!e,tag:r||""};qe=a,ye[a.id]=a,de[_e]=a.id,D.debug(de),D.debug("in mergeBranch")},l6=function(t,e,i){if(D.debug("Entering cherryPick:",t,e,i),t=yt.sanitizeText(t,G()),e=yt.sanitizeText(e,G()),i=yt.sanitizeText(i,G()),!t||ye[t]===void 0){let s=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw s.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s}let r=ye[t],n=r.branch;if(r.type===Hn.MERGE){let s=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw s.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},s}if(!e||ye[e]===void 0){if(n===_e){let o=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw o.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},o}const s=ye[de[_e]];if(s===void 0||!s){let o=new Error('Incorrect usage of "cherry-pick". Current branch ('+_e+")has no commits");throw o.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},o}const a={id:Rr+"-"+_l(),message:"cherry-picked "+r+" into "+_e,seq:Rr++,parents:[qe==null?null:qe.id,r.id],branch:_e,type:Hn.CHERRY_PICK,tag:i??"cherry-pick:"+r.id};qe=a,ye[a.id]=a,de[_e]=a.id,D.debug(de),D.debug("in cherryPick")}},R0=function(t){if(t=yt.sanitizeText(t,G()),de[t]===void 0){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}else{_e=t;const e=de[_e];qe=ye[e]}};function eh(t,e,i){const r=t.indexOf(e);r===-1?t.push(i):t.splice(r,1,i)}function N0(t){const e=t.reduce((n,s)=>n.seq>s.seq?n:s,t[0]);let i="";t.forEach(function(n){n===e?i+="	*":i+="	|"});const r=[i,e.id,e.seq];for(let n in de)de[n]===e.id&&r.push(n);if(D.debug(r.join(" ")),e.parents&&e.parents.length==2){const n=ye[e.parents[0]];eh(t,e,n),t.push(ye[e.parents[1]])}else{if(e.parents.length==0)return;{const n=ye[e.parents];eh(t,e,n)}}t=e6(t,n=>n.id),N0(t)}const c6=function(){D.debug(ye);const t=O0()[0];N0([t])},h6=function(){ye={},qe=null;let t=G().gitGraph.mainBranchName,e=G().gitGraph.mainBranchOrder;de={},de[t]=null,Yn={},Yn[t]={name:t,order:e},_e=t,Rr=0,We()},u6=function(){return Object.values(Yn).map((e,i)=>e.order!==null?e:{...e,order:parseFloat(`0.${i}`,10)}).sort((e,i)=>e.order-i.order).map(({name:e})=>({name:e}))},d6=function(){return de},f6=function(){return ye},O0=function(){const t=Object.keys(ye).map(function(e){return ye[e]});return t.forEach(function(e){D.debug(e.id)}),t.sort((e,i)=>e.seq-i.seq),t},p6=function(){return _e},g6=function(){return I0},y6=function(){return qe},Hn={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},m6={getConfig:()=>G().gitGraph,setDirection:i6,setOptions:r6,getOptions:n6,commit:s6,branch:a6,merge:o6,cherryPick:l6,checkout:R0,prettyPrint:c6,clear:h6,getBranchesAsObjArray:u6,getBranches:d6,getCommits:f6,getCommitsArray:O0,getCurrentBranch:p6,getDirection:g6,getHead:y6,setAccTitle:Oe,getAccTitle:Ye,getAccDescription:Ue,setAccDescription:He,setDiagramTitle:ni,getDiagramTitle:je,commitType:Hn};let Sn={};const ti={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},vr=8;let ke={},Un={},ia=[],jn=0,Fe="LR";const x6=()=>{ke={},Un={},Sn={},jn=0,ia=[],Fe="LR"},P0=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let i=[];typeof t=="string"?i=t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?i=t:i=[];for(const r of i){const n=document.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","0"),n.setAttribute("class","row"),n.textContent=r.trim(),e.appendChild(n)}return e},ih=(t,e,i)=>{const r=G().gitGraph,n=t.append("g").attr("class","commit-bullets"),s=t.append("g").attr("class","commit-labels");let a=0;Fe==="TB"&&(a=30),Object.keys(e).sort((h,u)=>e[h].seq-e[u].seq).forEach(h=>{const u=e[h],f=Fe==="TB"?a+10:ke[u.branch].pos,d=Fe==="TB"?ke[u.branch].pos:a+10;if(i){let p,y=u.customType!==void 0&&u.customType!==""?u.customType:u.type;switch(y){case ti.NORMAL:p="commit-normal";break;case ti.REVERSE:p="commit-reverse";break;case ti.HIGHLIGHT:p="commit-highlight";break;case ti.MERGE:p="commit-merge";break;case ti.CHERRY_PICK:p="commit-cherry-pick";break;default:p="commit-normal"}if(y===ti.HIGHLIGHT){const b=n.append("rect");b.attr("x",d-10),b.attr("y",f-10),b.attr("height",20),b.attr("width",20),b.attr("class",`commit ${u.id} commit-highlight${ke[u.branch].index%vr} ${p}-outer`),n.append("rect").attr("x",d-6).attr("y",f-6).attr("height",12).attr("width",12).attr("class",`commit ${u.id} commit${ke[u.branch].index%vr} ${p}-inner`)}else if(y===ti.CHERRY_PICK)n.append("circle").attr("cx",d).attr("cy",f).attr("r",10).attr("class",`commit ${u.id} ${p}`),n.append("circle").attr("cx",d-3).attr("cy",f+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${u.id} ${p}`),n.append("circle").attr("cx",d+3).attr("cy",f+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${u.id} ${p}`),n.append("line").attr("x1",d+3).attr("y1",f+1).attr("x2",d).attr("y2",f-5).attr("stroke","#fff").attr("class",`commit ${u.id} ${p}`),n.append("line").attr("x1",d-3).attr("y1",f+1).attr("x2",d).attr("y2",f-5).attr("stroke","#fff").attr("class",`commit ${u.id} ${p}`);else{const b=n.append("circle");if(b.attr("cx",d),b.attr("cy",f),b.attr("r",u.type===ti.MERGE?9:10),b.attr("class",`commit ${u.id} commit${ke[u.branch].index%vr}`),y===ti.MERGE){const C=n.append("circle");C.attr("cx",d),C.attr("cy",f),C.attr("r",6),C.attr("class",`commit ${p} ${u.id} commit${ke[u.branch].index%vr}`)}y===ti.REVERSE&&n.append("path").attr("d",`M ${d-5},${f-5}L${d+5},${f+5}M${d-5},${f+5}L${d+5},${f-5}`).attr("class",`commit ${p} ${u.id} commit${ke[u.branch].index%vr}`)}}if(Fe==="TB"?Un[u.id]={x:d,y:a+10}:Un[u.id]={x:a+10,y:f},i){if(u.type!==ti.CHERRY_PICK&&(u.customId&&u.type===ti.MERGE||u.type!==ti.MERGE)&&r.showCommitLabel){const b=s.append("g"),C=b.insert("rect").attr("class","commit-label-bkg"),E=b.append("text").attr("x",a).attr("y",f+25).attr("class","commit-label").text(u.id);let k=E.node().getBBox();if(C.attr("x",a+10-k.width/2-2).attr("y",f+13.5).attr("width",k.width+2*2).attr("height",k.height+2*2),Fe==="TB"&&(C.attr("x",d-(k.width+4*4+5)).attr("y",f-12),E.attr("x",d-(k.width+4*4)).attr("y",f+k.height-12)),Fe!=="TB"&&E.attr("x",a+10-k.width/2),r.rotateCommitLabel)if(Fe==="TB")E.attr("transform","rotate(-45, "+d+", "+f+")"),C.attr("transform","rotate(-45, "+d+", "+f+")");else{let I=-7.5-(k.width+10)/25*9.5,R=10+k.width/25*8.5;b.attr("transform","translate("+I+", "+R+") rotate(-45, "+a+", "+f+")")}}if(u.tag){const b=s.insert("polygon"),C=s.append("circle"),E=s.append("text").attr("y",f-16).attr("class","tag-label").text(u.tag);let k=E.node().getBBox();E.attr("x",a+10-k.width/2);const I=k.height/2,R=f-19.2;b.attr("class","tag-label-bkg").attr("points",`
          ${a-k.width/2-4/2},${R+2}
          ${a-k.width/2-4/2},${R-2}
          ${a+10-k.width/2-4},${R-I-2}
          ${a+10+k.width/2+4},${R-I-2}
          ${a+10+k.width/2+4},${R+I+2}
          ${a+10-k.width/2-4},${R+I+2}`),C.attr("cx",a-k.width/2+4/2).attr("cy",R).attr("r",1.5).attr("class","tag-hole"),Fe==="TB"&&(b.attr("class","tag-label-bkg").attr("points",`
            ${d},${a+2}
            ${d},${a-2}
            ${d+10},${a-I-2}
            ${d+10+k.width+4},${a-I-2}
            ${d+10+k.width+4},${a+I+2}
            ${d+10},${a+I+2}`).attr("transform","translate(12,12) rotate(45, "+d+","+a+")"),C.attr("cx",d+4/2).attr("cy",a).attr("transform","translate(12,12) rotate(45, "+d+","+a+")"),E.attr("x",d+5).attr("y",a+3).attr("transform","translate(14,14) rotate(45, "+d+","+a+")"))}}a+=50,a>jn&&(jn=a)})},b6=(t,e,i)=>Object.keys(i).filter(s=>i[s].branch===e.branch&&i[s].seq>t.seq&&i[s].seq<e.seq).length>0,wn=(t,e,i=0)=>{const r=t+Math.abs(t-e)/2;if(i>5)return r;if(ia.every(a=>Math.abs(a-r)>=10))return ia.push(r),r;const s=Math.abs(t-e);return wn(t,e-s/5,i+1)},k6=(t,e,i,r)=>{const n=Un[e.id],s=Un[i.id],a=b6(e,i,r);let o="",l="",h=0,u=0,f=ke[i.branch].index,d;if(a){o="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",h=10,u=10,f=ke[i.branch].index;const p=n.y<s.y?wn(n.y,s.y):wn(s.y,n.y),y=n.x<s.x?wn(n.x,s.x):wn(s.x,n.x);Fe==="TB"?n.x<s.x?d=`M ${n.x} ${n.y} L ${y-h} ${n.y} ${l} ${y} ${n.y+u} L ${y} ${s.y-h} ${o} ${y+u} ${s.y} L ${s.x} ${s.y}`:d=`M ${n.x} ${n.y} L ${y+h} ${n.y} ${o} ${y} ${n.y+u} L ${y} ${s.y-h} ${l} ${y-u} ${s.y} L ${s.x} ${s.y}`:n.y<s.y?d=`M ${n.x} ${n.y} L ${n.x} ${p-h} ${o} ${n.x+u} ${p} L ${s.x-h} ${p} ${l} ${s.x} ${p+u} L ${s.x} ${s.y}`:d=`M ${n.x} ${n.y} L ${n.x} ${p+h} ${l} ${n.x+u} ${p} L ${s.x-h} ${p} ${o} ${s.x} ${p-u} L ${s.x} ${s.y}`}else Fe==="TB"?(n.x<s.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,f=ke[i.branch].index,d=`M ${n.x} ${n.y} L ${s.x-h} ${n.y} ${l} ${s.x} ${n.y+u} L ${s.x} ${s.y}`),n.x>s.x&&(o="A 20 20, 0, 0, 0,",l="A 20 20, 0, 0, 1,",h=20,u=20,f=ke[e.branch].index,d=`M ${n.x} ${n.y} L ${n.x} ${s.y-h} ${l} ${n.x-u} ${s.y} L ${s.x} ${s.y}`),n.x===s.x&&(f=ke[e.branch].index,d=`M ${n.x} ${n.y} L ${n.x+h} ${n.y} ${o} ${n.x+u} ${s.y+h} L ${s.x} ${s.y}`)):(n.y<s.y&&(o="A 20 20, 0, 0, 0,",h=20,u=20,f=ke[i.branch].index,d=`M ${n.x} ${n.y} L ${n.x} ${s.y-h} ${o} ${n.x+u} ${s.y} L ${s.x} ${s.y}`),n.y>s.y&&(o="A 20 20, 0, 0, 0,",h=20,u=20,f=ke[e.branch].index,d=`M ${n.x} ${n.y} L ${s.x-h} ${n.y} ${o} ${s.x} ${n.y-u} L ${s.x} ${s.y}`),n.y===s.y&&(f=ke[e.branch].index,d=`M ${n.x} ${n.y} L ${n.x} ${s.y-h} ${o} ${n.x+u} ${s.y} L ${s.x} ${s.y}`));t.append("path").attr("d",d).attr("class","arrow arrow"+f%vr)},_6=(t,e)=>{const i=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach(r=>{const n=e[r];n.parents&&n.parents.length>0&&n.parents.forEach(s=>{k6(i,e[s],n,e)})})},T6=(t,e)=>{const i=G().gitGraph,r=t.append("g");e.forEach((n,s)=>{const a=s%vr,o=ke[n.name].pos,l=r.append("line");l.attr("x1",0),l.attr("y1",o),l.attr("x2",jn),l.attr("y2",o),l.attr("class","branch branch"+a),Fe==="TB"&&(l.attr("y1",30),l.attr("x1",o),l.attr("y2",jn),l.attr("x2",o)),ia.push(o);let h=n.name;const u=P0(h),f=r.insert("rect"),p=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);p.node().appendChild(u);let y=u.getBBox();f.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-y.width-4-(i.rotateCommitLabel===!0?30:0)).attr("y",-y.height/2+8).attr("width",y.width+18).attr("height",y.height+4),p.attr("transform","translate("+(-y.width-14-(i.rotateCommitLabel===!0?30:0))+", "+(o-y.height/2-1)+")"),Fe==="TB"&&(f.attr("x",o-y.width/2-10).attr("y",0),p.attr("transform","translate("+(o-y.width/2-5)+", 0)")),Fe!=="TB"&&f.attr("transform","translate(-19, "+(o-y.height/2)+")")})},C6=function(t,e,i,r){x6();const n=G(),s=n.gitGraph;D.debug("in gitgraph renderer",t+`
`,"id:",e,i),Sn=r.db.getCommits();const a=r.db.getBranchesAsObjArray();Fe=r.db.getDirection();const o=pt(`[id="${e}"]`);let l=0;a.forEach((h,u)=>{const f=P0(h.name),d=o.append("g"),p=d.insert("g").attr("class","branchLabel"),y=p.insert("g").attr("class","label branch-label");y.node().appendChild(f);let b=f.getBBox();ke[h.name]={pos:l,index:u},l+=50+(s.rotateCommitLabel?40:0)+(Fe==="TB"?b.width/2:0),y.remove(),p.remove(),d.remove()}),ih(o,Sn,!1),s.showBranches&&T6(o,a),_6(o,Sn),ih(o,Sn,!0),Rt.insertTitle(o,"gitTitleText",s.titleTopMargin,r.db.getDiagramTitle()),Lu(void 0,o,s.diagramPadding,s.useMaxWidth??n.useMaxWidth)},E6={draw:C6},S6=t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,w6=S6,v6={parser:Jk,db:m6,renderer:E6,styles:w6},A6=Object.freeze(Object.defineProperty({__proto__:null,diagram:v6},Symbol.toStringTag,{value:"Module"}));var xo=function(){var t=function(g,S,x,M){for(x=x||{},M=g.length;M--;x[g[M]]=S);return x},e=[6,8,10,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,30,32,33,35,37],i=[1,25],r=[1,26],n=[1,27],s=[1,28],a=[1,29],o=[1,30],l=[1,31],h=[1,9],u=[1,10],f=[1,11],d=[1,12],p=[1,13],y=[1,14],b=[1,15],C=[1,16],E=[1,18],k=[1,19],I=[1,20],R=[1,21],B=[1,22],_=[1,24],O=[1,32],L={trace:function(){},yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,dateFormat:19,inclusiveEndDates:20,topAxis:21,axisFormat:22,tickInterval:23,excludes:24,includes:25,todayMarker:26,title:27,acc_title:28,acc_title_value:29,acc_descr:30,acc_descr_value:31,acc_descr_multiline_value:32,section:33,clickStatement:34,taskTxt:35,taskData:36,click:37,callbackname:38,callbackargs:39,href:40,clickStatementDebug:41,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",19:"dateFormat",20:"inclusiveEndDates",21:"topAxis",22:"axisFormat",23:"tickInterval",24:"excludes",25:"includes",26:"todayMarker",27:"title",28:"acc_title",29:"acc_title_value",30:"acc_descr",31:"acc_descr_value",32:"acc_descr_multiline_value",33:"section",35:"taskTxt",36:"taskData",37:"click",38:"callbackname",39:"callbackargs",40:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[34,2],[34,3],[34,3],[34,4],[34,3],[34,4],[34,2],[41,2],[41,3],[41,3],[41,4],[41,3],[41,4],[41,2]],performAction:function(S,x,M,H,P,A,V){var F=A.length-1;switch(P){case 1:return A[F-1];case 2:this.$=[];break;case 3:A[F-1].push(A[F]),this.$=A[F-1];break;case 4:case 5:this.$=A[F];break;case 6:case 7:this.$=[];break;case 8:H.setWeekday("monday");break;case 9:H.setWeekday("tuesday");break;case 10:H.setWeekday("wednesday");break;case 11:H.setWeekday("thursday");break;case 12:H.setWeekday("friday");break;case 13:H.setWeekday("saturday");break;case 14:H.setWeekday("sunday");break;case 15:H.setDateFormat(A[F].substr(11)),this.$=A[F].substr(11);break;case 16:H.enableInclusiveEndDates(),this.$=A[F].substr(18);break;case 17:H.TopAxis(),this.$=A[F].substr(8);break;case 18:H.setAxisFormat(A[F].substr(11)),this.$=A[F].substr(11);break;case 19:H.setTickInterval(A[F].substr(13)),this.$=A[F].substr(13);break;case 20:H.setExcludes(A[F].substr(9)),this.$=A[F].substr(9);break;case 21:H.setIncludes(A[F].substr(9)),this.$=A[F].substr(9);break;case 22:H.setTodayMarker(A[F].substr(12)),this.$=A[F].substr(12);break;case 24:H.setDiagramTitle(A[F].substr(6)),this.$=A[F].substr(6);break;case 25:this.$=A[F].trim(),H.setAccTitle(this.$);break;case 26:case 27:this.$=A[F].trim(),H.setAccDescription(this.$);break;case 28:H.addSection(A[F].substr(8)),this.$=A[F].substr(8);break;case 30:H.addTask(A[F-1],A[F]),this.$="task";break;case 31:this.$=A[F-1],H.setClickEvent(A[F-1],A[F],null);break;case 32:this.$=A[F-2],H.setClickEvent(A[F-2],A[F-1],A[F]);break;case 33:this.$=A[F-2],H.setClickEvent(A[F-2],A[F-1],null),H.setLink(A[F-2],A[F]);break;case 34:this.$=A[F-3],H.setClickEvent(A[F-3],A[F-2],A[F-1]),H.setLink(A[F-3],A[F]);break;case 35:this.$=A[F-2],H.setClickEvent(A[F-2],A[F],null),H.setLink(A[F-2],A[F-1]);break;case 36:this.$=A[F-3],H.setClickEvent(A[F-3],A[F-1],A[F]),H.setLink(A[F-3],A[F-2]);break;case 37:this.$=A[F-1],H.setLink(A[F-1],A[F]);break;case 38:case 44:this.$=A[F-1]+" "+A[F];break;case 39:case 40:case 42:this.$=A[F-2]+" "+A[F-1]+" "+A[F];break;case 41:case 43:this.$=A[F-3]+" "+A[F-2]+" "+A[F-1]+" "+A[F];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:i,13:r,14:n,15:s,16:a,17:o,18:l,19:h,20:u,21:f,22:d,23:p,24:y,25:b,26:C,27:E,28:k,30:I,32:R,33:B,34:23,35:_,37:O},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:33,11:17,12:i,13:r,14:n,15:s,16:a,17:o,18:l,19:h,20:u,21:f,22:d,23:p,24:y,25:b,26:C,27:E,28:k,30:I,32:R,33:B,34:23,35:_,37:O},t(e,[2,5]),t(e,[2,6]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),{29:[1,34]},{31:[1,35]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),{36:[1,36]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),{38:[1,37],40:[1,38]},t(e,[2,4]),t(e,[2,25]),t(e,[2,26]),t(e,[2,30]),t(e,[2,31],{39:[1,39],40:[1,40]}),t(e,[2,37],{38:[1,41]}),t(e,[2,32],{40:[1,42]}),t(e,[2,33]),t(e,[2,35],{39:[1,43]}),t(e,[2,34]),t(e,[2,36])],defaultActions:{},parseError:function(S,x){if(x.recoverable)this.trace(S);else{var M=new Error(S);throw M.hash=x,M}},parse:function(S){var x=this,M=[0],H=[],P=[null],A=[],V=this.table,F="",T=0,W=0,lt=2,w=1,ht=A.slice.call(arguments,1),J=Object.create(this.lexer),j={yy:{}};for(var at in this.yy)Object.prototype.hasOwnProperty.call(this.yy,at)&&(j.yy[at]=this.yy[at]);J.setInput(S,j.yy),j.yy.lexer=J,j.yy.parser=this,typeof J.yylloc>"u"&&(J.yylloc={});var ct=J.yylloc;A.push(ct);var it=J.options&&J.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function rt(){var Bt;return Bt=H.pop()||J.lex()||w,typeof Bt!="number"&&(Bt instanceof Array&&(H=Bt,Bt=H.pop()),Bt=x.symbols_[Bt]||Bt),Bt}for(var N,Z,q,tt,z={},Q,$,nt,mt;;){if(Z=M[M.length-1],this.defaultActions[Z]?q=this.defaultActions[Z]:((N===null||typeof N>"u")&&(N=rt()),q=V[Z]&&V[Z][N]),typeof q>"u"||!q.length||!q[0]){var Nt="";mt=[];for(Q in V[Z])this.terminals_[Q]&&Q>lt&&mt.push("'"+this.terminals_[Q]+"'");J.showPosition?Nt="Parse error on line "+(T+1)+`:
`+J.showPosition()+`
Expecting `+mt.join(", ")+", got '"+(this.terminals_[N]||N)+"'":Nt="Parse error on line "+(T+1)+": Unexpected "+(N==w?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(Nt,{text:J.match,token:this.terminals_[N]||N,line:J.yylineno,loc:ct,expected:mt})}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Z+", token: "+N);switch(q[0]){case 1:M.push(N),P.push(J.yytext),A.push(J.yylloc),M.push(q[1]),N=null,W=J.yyleng,F=J.yytext,T=J.yylineno,ct=J.yylloc;break;case 2:if($=this.productions_[q[1]][1],z.$=P[P.length-$],z._$={first_line:A[A.length-($||1)].first_line,last_line:A[A.length-1].last_line,first_column:A[A.length-($||1)].first_column,last_column:A[A.length-1].last_column},it&&(z._$.range=[A[A.length-($||1)].range[0],A[A.length-1].range[1]]),tt=this.performAction.apply(z,[F,W,T,j.yy,q[1],P,A].concat(ht)),typeof tt<"u")return tt;$&&(M=M.slice(0,-1*$*2),P=P.slice(0,-1*$),A=A.slice(0,-1*$)),M.push(this.productions_[q[1]][0]),P.push(z.$),A.push(z._$),nt=V[M[M.length-2]][M[M.length-1]],M.push(nt);break;case 3:return!0}}return!0}},m=function(){var g={EOF:1,parseError:function(x,M){if(this.yy.parser)this.yy.parser.parseError(x,M);else throw new Error(x)},setInput:function(S,x){return this.yy=x||this.yy||{},this._input=S,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var S=this._input[0];this.yytext+=S,this.yyleng++,this.offset++,this.match+=S,this.matched+=S;var x=S.match(/(?:\r\n?|\n).*/g);return x?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),S},unput:function(S){var x=S.length,M=S.split(/(?:\r\n?|\n)/g);this._input=S+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-x),this.offset-=x;var H=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var P=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===H.length?this.yylloc.first_column:0)+H[H.length-M.length].length-M[0].length:this.yylloc.first_column-x},this.options.ranges&&(this.yylloc.range=[P[0],P[0]+this.yyleng-x]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(S){this.unput(this.match.slice(S))},pastInput:function(){var S=this.matched.substr(0,this.matched.length-this.match.length);return(S.length>20?"...":"")+S.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var S=this.match;return S.length<20&&(S+=this._input.substr(0,20-S.length)),(S.substr(0,20)+(S.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var S=this.pastInput(),x=new Array(S.length+1).join("-");return S+this.upcomingInput()+`
`+x+"^"},test_match:function(S,x){var M,H,P;if(this.options.backtrack_lexer&&(P={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(P.yylloc.range=this.yylloc.range.slice(0))),H=S[0].match(/(?:\r\n?|\n).*/g),H&&(this.yylineno+=H.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:H?H[H.length-1].length-H[H.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+S[0].length},this.yytext+=S[0],this.match+=S[0],this.matches=S,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(S[0].length),this.matched+=S[0],M=this.performAction.call(this,this.yy,this,x,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var A in P)this[A]=P[A];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var S,x,M,H;this._more||(this.yytext="",this.match="");for(var P=this._currentRules(),A=0;A<P.length;A++)if(M=this._input.match(this.rules[P[A]]),M&&(!x||M[0].length>x[0].length)){if(x=M,H=A,this.options.backtrack_lexer){if(S=this.test_match(M,P[A]),S!==!1)return S;if(this._backtrack){x=!1;continue}else return!1}else if(!this.options.flex)break}return x?(S=this.test_match(x,P[H]),S!==!1?S:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var x=this.next();return x||this.lex()},begin:function(x){this.conditionStack.push(x)},popState:function(){var x=this.conditionStack.length-1;return x>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(x){return x=this.conditionStack.length-1-Math.abs(x||0),x>=0?this.conditionStack[x]:"INITIAL"},pushState:function(x){this.begin(x)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(x,M,H,P){switch(H){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),28;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),30;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:break;case 15:this.begin("href");break;case 16:this.popState();break;case 17:return 40;case 18:this.begin("callbackname");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callbackargs");break;case 21:return 38;case 22:this.popState();break;case 23:return 39;case 24:this.begin("click");break;case 25:this.popState();break;case 26:return 37;case 27:return 4;case 28:return 19;case 29:return 20;case 30:return 21;case 31:return 22;case 32:return 23;case 33:return 25;case 34:return 24;case 35:return 26;case 36:return 12;case 37:return 13;case 38:return 14;case 39:return 15;case 40:return 16;case 41:return 17;case 42:return 18;case 43:return"date";case 44:return 27;case 45:return"accDescription";case 46:return 33;case 47:return 35;case 48:return 36;case 49:return":";case 50:return 6;case 51:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[22,23],inclusive:!1},callbackname:{rules:[19,20,21],inclusive:!1},href:{rules:[16,17],inclusive:!1},click:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,18,24,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return g}();L.lexer=m;function v(){this.yy={}}return v.prototype=L,L.Parser=v,new v}();xo.parser=xo;const L6=xo;Ie.extend(Af);Ie.extend(Lf);Ie.extend(Bf);let Bi="",Tl="",Cl,El="",hs=[],us=[],Sl={},wl=[],ra=[],ln="",vl="";const M0=["active","done","crit","milestone"];let Al=[],ds=!1,Ll=!1,Bl="sunday",bo=0;const B6=function(){wl=[],ra=[],ln="",Al=[],Bs=0,_o=void 0,Fs=void 0,pe=[],Bi="",Tl="",vl="",Cl=void 0,El="",hs=[],us=[],ds=!1,Ll=!1,bo=0,Sl={},We(),Bl="sunday"},F6=function(t){Tl=t},I6=function(){return Tl},D6=function(t){Cl=t},R6=function(){return Cl},N6=function(t){El=t},O6=function(){return El},P6=function(t){Bi=t},M6=function(){ds=!0},V6=function(){return ds},z6=function(){Ll=!0},q6=function(){return Ll},W6=function(t){vl=t},Y6=function(){return vl},H6=function(){return Bi},U6=function(t){hs=t.toLowerCase().split(/[\s,]+/)},j6=function(){return hs},G6=function(t){us=t.toLowerCase().split(/[\s,]+/)},X6=function(){return us},$6=function(){return Sl},Q6=function(t){ln=t,wl.push(t)},K6=function(){return wl},Z6=function(){let t=rh();const e=10;let i=0;for(;!t&&i<e;)t=rh(),i++;return ra=pe,ra},V0=function(t,e,i,r){return r.includes(t.format(e.trim()))?!1:t.isoWeekday()>=6&&i.includes("weekends")||i.includes(t.format("dddd").toLowerCase())?!0:i.includes(t.format(e.trim()))},J6=function(t){Bl=t},t_=function(){return Bl},z0=function(t,e,i,r){if(!i.length||t.manualEndTime)return;let n;t.startTime instanceof Date?n=Ie(t.startTime):n=Ie(t.startTime,e,!0),n=n.add(1,"d");let s;t.endTime instanceof Date?s=Ie(t.endTime):s=Ie(t.endTime,e,!0);const[a,o]=e_(n,s,e,i,r);t.endTime=a.toDate(),t.renderEndTime=o},e_=function(t,e,i,r,n){let s=!1,a=null;for(;t<=e;)s||(a=e.toDate()),s=V0(t,i,r,n),s&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,a]},ko=function(t,e,i){i=i.trim();const n=/^after\s+([\d\w- ]+)/.exec(i.trim());if(n!==null){let a=null;if(n[1].split(" ").forEach(function(o){let l=xn(o);l!==void 0&&(a?l.endTime>a.endTime&&(a=l):a=l)}),a)return a.endTime;{const o=new Date;return o.setHours(0,0,0,0),o}}let s=Ie(i,e.trim(),!0);if(s.isValid())return s.toDate();{D.debug("Invalid date:"+i),D.debug("With date format:"+e.trim());const a=new Date(i);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+i);return a}},q0=function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},W0=function(t,e,i,r=!1){i=i.trim();let n=Ie(i,e.trim(),!0);if(n.isValid())return r&&(n=n.add(1,"d")),n.toDate();let s=Ie(t);const[a,o]=q0(i);if(!Number.isNaN(a)){const l=s.add(a,o);l.isValid()&&(s=l)}return s.toDate()};let Bs=0;const en=function(t){return t===void 0?(Bs=Bs+1,"task"+Bs):t},i_=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),n={};j0(r,n,M0);for(let a=0;a<r.length;a++)r[a]=r[a].trim();let s="";switch(r.length){case 1:n.id=en(),n.startTime=t.endTime,s=r[0];break;case 2:n.id=en(),n.startTime=ko(void 0,Bi,r[0]),s=r[1];break;case 3:n.id=en(r[0]),n.startTime=ko(void 0,Bi,r[1]),s=r[2];break}return s&&(n.endTime=W0(n.startTime,Bi,s,ds),n.manualEndTime=Ie(s,"YYYY-MM-DD",!0).isValid(),z0(n,Bi,us,hs)),n},r_=function(t,e){let i;e.substr(0,1)===":"?i=e.substr(1,e.length):i=e;const r=i.split(","),n={};j0(r,n,M0);for(let s=0;s<r.length;s++)r[s]=r[s].trim();switch(r.length){case 1:n.id=en(),n.startTime={type:"prevTaskEnd",id:t},n.endTime={data:r[0]};break;case 2:n.id=en(),n.startTime={type:"getStartDate",startData:r[0]},n.endTime={data:r[1]};break;case 3:n.id=en(r[0]),n.startTime={type:"getStartDate",startData:r[1]},n.endTime={data:r[2]};break}return n};let _o,Fs,pe=[];const Y0={},n_=function(t,e){const i={section:ln,type:ln,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=r_(Fs,e);i.raw.startTime=r.startTime,i.raw.endTime=r.endTime,i.id=r.id,i.prevTaskId=Fs,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,i.order=bo,bo++;const n=pe.push(i);Fs=i.id,Y0[i.id]=n-1},xn=function(t){const e=Y0[t];return pe[e]},s_=function(t,e){const i={section:ln,type:ln,description:t,task:t,classes:[]},r=i_(_o,e);i.startTime=r.startTime,i.endTime=r.endTime,i.id=r.id,i.active=r.active,i.done=r.done,i.crit=r.crit,i.milestone=r.milestone,_o=i,ra.push(i)},rh=function(){const t=function(i){const r=pe[i];let n="";switch(pe[i].raw.startTime.type){case"prevTaskEnd":{const s=xn(r.prevTaskId);r.startTime=s.endTime;break}case"getStartDate":n=ko(void 0,Bi,pe[i].raw.startTime.startData),n&&(pe[i].startTime=n);break}return pe[i].startTime&&(pe[i].endTime=W0(pe[i].startTime,Bi,pe[i].raw.endTime.data,ds),pe[i].endTime&&(pe[i].processed=!0,pe[i].manualEndTime=Ie(pe[i].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),z0(pe[i],Bi,us,hs))),pe[i].processed};let e=!0;for(const[i,r]of pe.entries())t(i),e=e&&r.processed;return e},a_=function(t,e){let i=e;G().securityLevel!=="loose"&&(i=Vr.sanitizeUrl(e)),t.split(",").forEach(function(r){xn(r)!==void 0&&(U0(r,()=>{window.open(i,"_self")}),Sl[r]=i)}),H0(t,"clickable")},H0=function(t,e){t.split(",").forEach(function(i){let r=xn(i);r!==void 0&&r.classes.push(e)})},o_=function(t,e,i){if(G().securityLevel!=="loose"||e===void 0)return;let r=[];if(typeof i=="string"){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let s=0;s<r.length;s++){let a=r[s].trim();a.charAt(0)==='"'&&a.charAt(a.length-1)==='"'&&(a=a.substr(1,a.length-2)),r[s]=a}}r.length===0&&r.push(t),xn(t)!==void 0&&U0(t,()=>{Rt.runFunc(e,...r)})},U0=function(t,e){Al.push(function(){const i=document.querySelector(`[id="${t}"]`);i!==null&&i.addEventListener("click",function(){e()})},function(){const i=document.querySelector(`[id="${t}-text"]`);i!==null&&i.addEventListener("click",function(){e()})})},l_=function(t,e,i){t.split(",").forEach(function(r){o_(r,e,i)}),H0(t,"clickable")},c_=function(t){Al.forEach(function(e){e(t)})},h_={getConfig:()=>G().gantt,clear:B6,setDateFormat:P6,getDateFormat:H6,enableInclusiveEndDates:M6,endDatesAreInclusive:V6,enableTopAxis:z6,topAxisEnabled:q6,setAxisFormat:F6,getAxisFormat:I6,setTickInterval:D6,getTickInterval:R6,setTodayMarker:N6,getTodayMarker:O6,setAccTitle:Oe,getAccTitle:Ye,setDiagramTitle:ni,getDiagramTitle:je,setDisplayMode:W6,getDisplayMode:Y6,setAccDescription:He,getAccDescription:Ue,addSection:Q6,getSections:K6,getTasks:Z6,addTask:n_,findTaskById:xn,addTaskOrg:s_,setIncludes:U6,getIncludes:j6,setExcludes:G6,getExcludes:X6,setClickEvent:l_,setLink:a_,getLinks:$6,bindFunctions:c_,parseDuration:q0,isInvalidDate:V0,setWeekday:J6,getWeekday:t_};function j0(t,e,i){let r=!0;for(;r;)r=!1,i.forEach(function(n){const s="^\\s*"+n+"\\s*$",a=new RegExp(s);t[0].match(a)&&(e[n]=!0,t.shift(1),r=!0)})}const u_=function(){D.debug("Something is calling, setConf, remove the call")},nh={monday:ap,tuesday:op,wednesday:lp,thursday:cp,friday:hp,saturday:up,sunday:dp},d_=(t,e)=>{let i=[...t].map(()=>-1/0),r=[...t].sort((s,a)=>s.startTime-a.startTime||s.order-a.order),n=0;for(const s of r)for(let a=0;a<i.length;a++)if(s.startTime>=i[a]){i[a]=s.endTime,s.order=a+e,a>n&&(n=a);break}return n};let Gi;const f_=function(t,e,i,r){const n=G().gantt,s=G().securityLevel;let a;s==="sandbox"&&(a=pt("#i"+e));const o=s==="sandbox"?pt(a.nodes()[0].contentDocument.body):pt("body"),l=s==="sandbox"?a.nodes()[0].contentDocument:document,h=l.getElementById(e);Gi=h.parentElement.offsetWidth,Gi===void 0&&(Gi=1200),n.useWidth!==void 0&&(Gi=n.useWidth);const u=r.db.getTasks();let f=[];for(const L of u)f.push(L.type);f=O(f);const d={};let p=2*n.topPadding;if(r.db.getDisplayMode()==="compact"||n.displayMode==="compact"){const L={};for(const v of u)L[v.section]===void 0?L[v.section]=[v]:L[v.section].push(v);let m=0;for(const v of Object.keys(L)){const g=d_(L[v],m)+1;m+=g,p+=g*(n.barHeight+n.barGap),d[v]=g}}else{p+=u.length*(n.barHeight+n.barGap);for(const L of f)d[L]=u.filter(m=>m.type===L).length}h.setAttribute("viewBox","0 0 "+Gi+" "+p);const y=o.select(`[id="${e}"]`),b=tp().domain([ep(u,function(L){return L.startTime}),ip(u,function(L){return L.endTime})]).rangeRound([0,Gi-n.leftPadding-n.rightPadding]);function C(L,m){const v=L.startTime,g=m.startTime;let S=0;return v>g?S=1:v<g&&(S=-1),S}u.sort(C),E(u,Gi,p),Ne(y,p,Gi,n.useMaxWidth),y.append("text").text(r.db.getDiagramTitle()).attr("x",Gi/2).attr("y",n.titleTopMargin).attr("class","titleText");function E(L,m,v){const g=n.barHeight,S=g+n.barGap,x=n.topPadding,M=n.leftPadding,H=Pn().domain([0,f.length]).range(["#00B9FA","#F95002"]).interpolate(rp);I(S,x,M,m,v,L,r.db.getExcludes(),r.db.getIncludes()),R(M,x,m,v),k(L,S,x,M,g,H,m),B(S,x),_(M,x,m,v)}function k(L,m,v,g,S,x,M){const P=[...new Set(L.map(T=>T.order))].map(T=>L.find(W=>W.order===T));y.append("g").selectAll("rect").data(P).enter().append("rect").attr("x",0).attr("y",function(T,W){return W=T.order,W*m+v-2}).attr("width",function(){return M-n.rightPadding/2}).attr("height",m).attr("class",function(T){for(const[W,lt]of f.entries())if(T.type===lt)return"section section"+W%n.numberSectionStyles;return"section section0"});const A=y.append("g").selectAll("rect").data(L).enter(),V=r.db.getLinks();if(A.append("rect").attr("id",function(T){return T.id}).attr("rx",3).attr("ry",3).attr("x",function(T){return T.milestone?b(T.startTime)+g+.5*(b(T.endTime)-b(T.startTime))-.5*S:b(T.startTime)+g}).attr("y",function(T,W){return W=T.order,W*m+v}).attr("width",function(T){return T.milestone?S:b(T.renderEndTime||T.endTime)-b(T.startTime)}).attr("height",S).attr("transform-origin",function(T,W){return W=T.order,(b(T.startTime)+g+.5*(b(T.endTime)-b(T.startTime))).toString()+"px "+(W*m+v+.5*S).toString()+"px"}).attr("class",function(T){const W="task";let lt="";T.classes.length>0&&(lt=T.classes.join(" "));let w=0;for(const[J,j]of f.entries())T.type===j&&(w=J%n.numberSectionStyles);let ht="";return T.active?T.crit?ht+=" activeCrit":ht=" active":T.done?T.crit?ht=" doneCrit":ht=" done":T.crit&&(ht+=" crit"),ht.length===0&&(ht=" task"),T.milestone&&(ht=" milestone "+ht),ht+=w,ht+=" "+lt,W+ht}),A.append("text").attr("id",function(T){return T.id+"-text"}).text(function(T){return T.task}).attr("font-size",n.fontSize).attr("x",function(T){let W=b(T.startTime),lt=b(T.renderEndTime||T.endTime);T.milestone&&(W+=.5*(b(T.endTime)-b(T.startTime))-.5*S),T.milestone&&(lt=W+S);const w=this.getBBox().width;return w>lt-W?lt+w+1.5*n.leftPadding>M?W+g-5:lt+g+5:(lt-W)/2+W+g}).attr("y",function(T,W){return W=T.order,W*m+n.barHeight/2+(n.fontSize/2-2)+v}).attr("text-height",S).attr("class",function(T){const W=b(T.startTime);let lt=b(T.endTime);T.milestone&&(lt=W+S);const w=this.getBBox().width;let ht="";T.classes.length>0&&(ht=T.classes.join(" "));let J=0;for(const[at,ct]of f.entries())T.type===ct&&(J=at%n.numberSectionStyles);let j="";return T.active&&(T.crit?j="activeCritText"+J:j="activeText"+J),T.done?T.crit?j=j+" doneCritText"+J:j=j+" doneText"+J:T.crit&&(j=j+" critText"+J),T.milestone&&(j+=" milestoneText"),w>lt-W?lt+w+1.5*n.leftPadding>M?ht+" taskTextOutsideLeft taskTextOutside"+J+" "+j:ht+" taskTextOutsideRight taskTextOutside"+J+" "+j+" width-"+w:ht+" taskText taskText"+J+" "+j+" width-"+w}),G().securityLevel==="sandbox"){let T;T=pt("#i"+e);const W=T.nodes()[0].contentDocument;A.filter(function(lt){return V[lt.id]!==void 0}).each(function(lt){var w=W.querySelector("#"+lt.id),ht=W.querySelector("#"+lt.id+"-text");const J=w.parentNode;var j=W.createElement("a");j.setAttribute("xlink:href",V[lt.id]),j.setAttribute("target","_top"),J.appendChild(j),j.appendChild(w),j.appendChild(ht)})}}function I(L,m,v,g,S,x,M,H){if(M.length===0&&H.length===0)return;let P,A;for(const{startTime:w,endTime:ht}of x)(P===void 0||w<P)&&(P=w),(A===void 0||ht>A)&&(A=ht);if(!P||!A)return;if(Ie(A).diff(Ie(P),"year")>5){D.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const V=r.db.getDateFormat(),F=[];let T=null,W=Ie(P);for(;W.valueOf()<=A;)r.db.isInvalidDate(W,V,M,H)?T?T.end=W:T={start:W,end:W}:T&&(F.push(T),T=null),W=W.add(1,"d");y.append("g").selectAll("rect").data(F).enter().append("rect").attr("id",function(w){return"exclude-"+w.start.format("YYYY-MM-DD")}).attr("x",function(w){return b(w.start)+v}).attr("y",n.gridLineStartPadding).attr("width",function(w){const ht=w.end.add(1,"day");return b(ht)-b(w.start)}).attr("height",S-m-n.gridLineStartPadding).attr("transform-origin",function(w,ht){return(b(w.start)+v+.5*(b(w.end)-b(w.start))).toString()+"px "+(ht*L+.5*S).toString()+"px"}).attr("class","exclude-range")}function R(L,m,v,g){let S=np(b).tickSize(-g+m+n.gridLineStartPadding).tickFormat(ac(r.db.getAxisFormat()||n.axisFormat||"%Y-%m-%d"));const M=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||n.tickInterval);if(M!==null){const H=M[1],P=M[2],A=r.db.getWeekday()||n.weekday;switch(P){case"millisecond":S.ticks(dc.every(H));break;case"second":S.ticks(uc.every(H));break;case"minute":S.ticks(hc.every(H));break;case"hour":S.ticks(cc.every(H));break;case"day":S.ticks(lc.every(H));break;case"week":S.ticks(nh[A].every(H));break;case"month":S.ticks(oc.every(H));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+L+", "+(g-50)+")").call(S).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||n.topAxis){let H=sp(b).tickSize(-g+m+n.gridLineStartPadding).tickFormat(ac(r.db.getAxisFormat()||n.axisFormat||"%Y-%m-%d"));if(M!==null){const P=M[1],A=M[2],V=r.db.getWeekday()||n.weekday;switch(A){case"millisecond":H.ticks(dc.every(P));break;case"second":H.ticks(uc.every(P));break;case"minute":H.ticks(hc.every(P));break;case"hour":H.ticks(cc.every(P));break;case"day":H.ticks(lc.every(P));break;case"week":H.ticks(nh[V].every(P));break;case"month":H.ticks(oc.every(P));break}}y.append("g").attr("class","grid").attr("transform","translate("+L+", "+m+")").call(H).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function B(L,m){let v=0;const g=Object.keys(d).map(S=>[S,d[S]]);y.append("g").selectAll("text").data(g).enter().append(function(S){const x=S[0].split(yt.lineBreakRegex),M=-(x.length-1)/2,H=l.createElementNS("http://www.w3.org/2000/svg","text");H.setAttribute("dy",M+"em");for(const[P,A]of x.entries()){const V=l.createElementNS("http://www.w3.org/2000/svg","tspan");V.setAttribute("alignment-baseline","central"),V.setAttribute("x","10"),P>0&&V.setAttribute("dy","1em"),V.textContent=A,H.appendChild(V)}return H}).attr("x",10).attr("y",function(S,x){if(x>0)for(let M=0;M<x;M++)return v+=g[x-1][1],S[1]*L/2+v*L+m;else return S[1]*L/2+m}).attr("font-size",n.sectionFontSize).attr("class",function(S){for(const[x,M]of f.entries())if(S[0]===M)return"sectionTitle sectionTitle"+x%n.numberSectionStyles;return"sectionTitle"})}function _(L,m,v,g){const S=r.db.getTodayMarker();if(S==="off")return;const x=y.append("g").attr("class","today"),M=new Date,H=x.append("line");H.attr("x1",b(M)+L).attr("x2",b(M)+L).attr("y1",n.titleTopMargin).attr("y2",g-n.titleTopMargin).attr("class","today"),S!==""&&H.attr("style",S.replace(/,/g,";"))}function O(L){const m={},v=[];for(let g=0,S=L.length;g<S;++g)Object.prototype.hasOwnProperty.call(m,L[g])||(m[L[g]]=!0,v.push(L[g]));return v}},p_={setConf:u_,draw:f_},g_=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,y_=g_,m_={parser:L6,db:h_,renderer:p_,styles:y_},x_=Object.freeze(Object.defineProperty({__proto__:null,diagram:m_},Symbol.toStringTag,{value:"Module"}));var To=function(){var t=function(s,a,o,l){for(o=o||{},l=s.length;l--;o[s[l]]=a);return o},e=[6,9,10],i={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(a,o,l,h,u,f,d){switch(f.length-1,u){case 1:return h;case 4:break;case 6:h.setInfo(!0);break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(a,o){if(o.recoverable)this.trace(a);else{var l=new Error(a);throw l.hash=o,l}},parse:function(a){var o=this,l=[0],h=[],u=[null],f=[],d=this.table,p="",y=0,b=0,C=2,E=1,k=f.slice.call(arguments,1),I=Object.create(this.lexer),R={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(R.yy[B]=this.yy[B]);I.setInput(a,R.yy),R.yy.lexer=I,R.yy.parser=this,typeof I.yylloc>"u"&&(I.yylloc={});var _=I.yylloc;f.push(_);var O=I.options&&I.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function L(){var F;return F=h.pop()||I.lex()||E,typeof F!="number"&&(F instanceof Array&&(h=F,F=h.pop()),F=o.symbols_[F]||F),F}for(var m,v,g,S,x={},M,H,P,A;;){if(v=l[l.length-1],this.defaultActions[v]?g=this.defaultActions[v]:((m===null||typeof m>"u")&&(m=L()),g=d[v]&&d[v][m]),typeof g>"u"||!g.length||!g[0]){var V="";A=[];for(M in d[v])this.terminals_[M]&&M>C&&A.push("'"+this.terminals_[M]+"'");I.showPosition?V="Parse error on line "+(y+1)+`:
`+I.showPosition()+`
Expecting `+A.join(", ")+", got '"+(this.terminals_[m]||m)+"'":V="Parse error on line "+(y+1)+": Unexpected "+(m==E?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(V,{text:I.match,token:this.terminals_[m]||m,line:I.yylineno,loc:_,expected:A})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(g[0]){case 1:l.push(m),u.push(I.yytext),f.push(I.yylloc),l.push(g[1]),m=null,b=I.yyleng,p=I.yytext,y=I.yylineno,_=I.yylloc;break;case 2:if(H=this.productions_[g[1]][1],x.$=u[u.length-H],x._$={first_line:f[f.length-(H||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(H||1)].first_column,last_column:f[f.length-1].last_column},O&&(x._$.range=[f[f.length-(H||1)].range[0],f[f.length-1].range[1]]),S=this.performAction.apply(x,[p,b,y,R.yy,g[1],u,f].concat(k)),typeof S<"u")return S;H&&(l=l.slice(0,-1*H*2),u=u.slice(0,-1*H),f=f.slice(0,-1*H)),l.push(this.productions_[g[1]][0]),u.push(x.$),f.push(x._$),P=d[l[l.length-2]][l[l.length-1]],l.push(P);break;case 3:return!0}}return!0}},r=function(){var s={EOF:1,parseError:function(o,l){if(this.yy.parser)this.yy.parser.parseError(o,l);else throw new Error(o)},setInput:function(a,o){return this.yy=o||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var o=a.match(/(?:\r\n?|\n).*/g);return o?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var o=a.length,l=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-o),this.offset-=o;var h=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),l.length-1&&(this.yylineno-=l.length-1);var u=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:l?(l.length===h.length?this.yylloc.first_column:0)+h[h.length-l.length].length-l[0].length:this.yylloc.first_column-o},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-o]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),o=new Array(a.length+1).join("-");return a+this.upcomingInput()+`
`+o+"^"},test_match:function(a,o){var l,h,u;if(this.options.backtrack_lexer&&(u={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(u.yylloc.range=this.yylloc.range.slice(0))),h=a[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],l=this.performAction.call(this,this.yy,this,o,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l)return l;if(this._backtrack){for(var f in u)this[f]=u[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,o,l,h;this._more||(this.yytext="",this.match="");for(var u=this._currentRules(),f=0;f<u.length;f++)if(l=this._input.match(this.rules[u[f]]),l&&(!o||l[0].length>o[0].length)){if(o=l,h=f,this.options.backtrack_lexer){if(a=this.test_match(l,u[f]),a!==!1)return a;if(this._backtrack){o=!1;continue}else return!1}else if(!this.options.flex)break}return o?(a=this.test_match(o,u[h]),a!==!1?a:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return o||this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){var o=this.conditionStack.length-1;return o>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(o){return o=this.conditionStack.length-1-Math.abs(o||0),o>=0?this.conditionStack[o]:"INITIAL"},pushState:function(o){this.begin(o)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(o,l,h,u){switch(h){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};return s}();i.lexer=r;function n(){this.yy={}}return n.prototype=i,i.Parser=n,new n}();To.parser=To;const b_=To,G0={info:!1};let Fl=G0.info;const k_=t=>{Fl=t},__=()=>Fl,T_=()=>{Fl=G0.info},C_={clear:T_,setInfo:k_,getInfo:__},E_=(t,e,i)=>{D.debug(`rendering info diagram
`+t);const r=xa(e);Ne(r,100,400,!0),r.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${i}`)},S_={draw:E_},w_={parser:b_,db:C_,renderer:S_},v_=Object.freeze(Object.defineProperty({__proto__:null,diagram:w_},Symbol.toStringTag,{value:"Module"}));var Co=function(){var t=function(I,R,B,_){for(B=B||{},_=I.length;_--;B[I[_]]=R);return B},e=[1,3],i=[1,4],r=[1,5],n=[1,6],s=[1,10,12,14,16,18,19,20,21,22],a=[2,4],o=[1,5,10,12,14,16,18,19,20,21,22],l=[20,21,22],h=[2,7],u=[1,12],f=[1,13],d=[1,14],p=[1,15],y=[1,16],b=[1,17],C={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,PIE:5,document:6,showData:7,line:8,statement:9,txt:10,value:11,title:12,title_value:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,section:19,NEWLINE:20,";":21,EOF:22,$accept:0,$end:1},terminals_:{2:"error",5:"PIE",7:"showData",10:"txt",11:"value",12:"title",13:"title_value",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"section",20:"NEWLINE",21:";",22:"EOF"},productions_:[0,[3,2],[3,2],[3,3],[6,0],[6,2],[8,2],[9,0],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[4,1],[4,1],[4,1]],performAction:function(R,B,_,O,L,m,v){var g=m.length-1;switch(L){case 3:O.setShowData(!0);break;case 6:this.$=m[g-1];break;case 8:O.addSection(m[g-1],O.cleanupValue(m[g]));break;case 9:this.$=m[g].trim(),O.setDiagramTitle(this.$);break;case 10:this.$=m[g].trim(),O.setAccTitle(this.$);break;case 11:case 12:this.$=m[g].trim(),O.setAccDescription(this.$);break;case 13:O.addSection(m[g].substr(8)),this.$=m[g].substr(8);break}},table:[{3:1,4:2,5:e,20:i,21:r,22:n},{1:[3]},{3:7,4:2,5:e,20:i,21:r,22:n},t(s,a,{6:8,7:[1,9]}),t(o,[2,14]),t(o,[2,15]),t(o,[2,16]),{1:[2,1]},t(l,h,{8:10,9:11,1:[2,2],10:u,12:f,14:d,16:p,18:y,19:b}),t(s,a,{6:18}),t(s,[2,5]),{4:19,20:i,21:r,22:n},{11:[1,20]},{13:[1,21]},{15:[1,22]},{17:[1,23]},t(l,[2,12]),t(l,[2,13]),t(l,h,{8:10,9:11,1:[2,3],10:u,12:f,14:d,16:p,18:y,19:b}),t(s,[2,6]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11])],defaultActions:{7:[2,1]},parseError:function(R,B){if(B.recoverable)this.trace(R);else{var _=new Error(R);throw _.hash=B,_}},parse:function(R){var B=this,_=[0],O=[],L=[null],m=[],v=this.table,g="",S=0,x=0,M=2,H=1,P=m.slice.call(arguments,1),A=Object.create(this.lexer),V={yy:{}};for(var F in this.yy)Object.prototype.hasOwnProperty.call(this.yy,F)&&(V.yy[F]=this.yy[F]);A.setInput(R,V.yy),V.yy.lexer=A,V.yy.parser=this,typeof A.yylloc>"u"&&(A.yylloc={});var T=A.yylloc;m.push(T);var W=A.options&&A.options.ranges;typeof V.yy.parseError=="function"?this.parseError=V.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function lt(){var q;return q=O.pop()||A.lex()||H,typeof q!="number"&&(q instanceof Array&&(O=q,q=O.pop()),q=B.symbols_[q]||q),q}for(var w,ht,J,j,at={},ct,it,rt,N;;){if(ht=_[_.length-1],this.defaultActions[ht]?J=this.defaultActions[ht]:((w===null||typeof w>"u")&&(w=lt()),J=v[ht]&&v[ht][w]),typeof J>"u"||!J.length||!J[0]){var Z="";N=[];for(ct in v[ht])this.terminals_[ct]&&ct>M&&N.push("'"+this.terminals_[ct]+"'");A.showPosition?Z="Parse error on line "+(S+1)+`:
`+A.showPosition()+`
Expecting `+N.join(", ")+", got '"+(this.terminals_[w]||w)+"'":Z="Parse error on line "+(S+1)+": Unexpected "+(w==H?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(Z,{text:A.match,token:this.terminals_[w]||w,line:A.yylineno,loc:T,expected:N})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ht+", token: "+w);switch(J[0]){case 1:_.push(w),L.push(A.yytext),m.push(A.yylloc),_.push(J[1]),w=null,x=A.yyleng,g=A.yytext,S=A.yylineno,T=A.yylloc;break;case 2:if(it=this.productions_[J[1]][1],at.$=L[L.length-it],at._$={first_line:m[m.length-(it||1)].first_line,last_line:m[m.length-1].last_line,first_column:m[m.length-(it||1)].first_column,last_column:m[m.length-1].last_column},W&&(at._$.range=[m[m.length-(it||1)].range[0],m[m.length-1].range[1]]),j=this.performAction.apply(at,[g,x,S,V.yy,J[1],L,m].concat(P)),typeof j<"u")return j;it&&(_=_.slice(0,-1*it*2),L=L.slice(0,-1*it),m=m.slice(0,-1*it)),_.push(this.productions_[J[1]][0]),L.push(at.$),m.push(at._$),rt=v[_[_.length-2]][_[_.length-1]],_.push(rt);break;case 3:return!0}}return!0}},E=function(){var I={EOF:1,parseError:function(B,_){if(this.yy.parser)this.yy.parser.parseError(B,_);else throw new Error(B)},setInput:function(R,B){return this.yy=B||this.yy||{},this._input=R,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var R=this._input[0];this.yytext+=R,this.yyleng++,this.offset++,this.match+=R,this.matched+=R;var B=R.match(/(?:\r\n?|\n).*/g);return B?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),R},unput:function(R){var B=R.length,_=R.split(/(?:\r\n?|\n)/g);this._input=R+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-B),this.offset-=B;var O=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),_.length-1&&(this.yylineno-=_.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:_?(_.length===O.length?this.yylloc.first_column:0)+O[O.length-_.length].length-_[0].length:this.yylloc.first_column-B},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-B]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(R){this.unput(this.match.slice(R))},pastInput:function(){var R=this.matched.substr(0,this.matched.length-this.match.length);return(R.length>20?"...":"")+R.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var R=this.match;return R.length<20&&(R+=this._input.substr(0,20-R.length)),(R.substr(0,20)+(R.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var R=this.pastInput(),B=new Array(R.length+1).join("-");return R+this.upcomingInput()+`
`+B+"^"},test_match:function(R,B){var _,O,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),O=R[0].match(/(?:\r\n?|\n).*/g),O&&(this.yylineno+=O.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:O?O[O.length-1].length-O[O.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+R[0].length},this.yytext+=R[0],this.match+=R[0],this.matches=R,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(R[0].length),this.matched+=R[0],_=this.performAction.call(this,this.yy,this,B,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),_)return _;if(this._backtrack){for(var m in L)this[m]=L[m];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var R,B,_,O;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),m=0;m<L.length;m++)if(_=this._input.match(this.rules[L[m]]),_&&(!B||_[0].length>B[0].length)){if(B=_,O=m,this.options.backtrack_lexer){if(R=this.test_match(_,L[m]),R!==!1)return R;if(this._backtrack){B=!1;continue}else return!1}else if(!this.options.flex)break}return B?(R=this.test_match(B,L[O]),R!==!1?R:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var B=this.next();return B||this.lex()},begin:function(B){this.conditionStack.push(B)},popState:function(){var B=this.conditionStack.length-1;return B>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(B){return B=this.conditionStack.length-1-Math.abs(B||0),B>=0?this.conditionStack[B]:"INITIAL"},pushState:function(B){this.begin(B)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(B,_,O,L){switch(O){case 0:break;case 1:break;case 2:return 20;case 3:break;case 4:break;case 5:return this.begin("title"),12;case 6:return this.popState(),"title_value";case 7:return this.begin("acc_title"),14;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),16;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"txt";case 17:return 5;case 18:return 7;case 19:return"value";case 20:return 22}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[6],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,7,9,11,14,17,18,19,20],inclusive:!0}}};return I}();C.lexer=E;function k(){this.yy={}}return k.prototype=C,C.Parser=k,new k}();Co.parser=Co;const A_=Co,X0=le.pie,na={sections:{},showData:!1,config:X0};let sa=na.sections,Il=na.showData;const L_=structuredClone(X0),B_=()=>structuredClone(L_),F_=()=>{sa=structuredClone(na.sections),Il=na.showData,We()},I_=(t,e)=>{t=Ce(t,G()),sa[t]===void 0&&(sa[t]=e,D.debug(`added new section: ${t}, with value: ${e}`))},D_=()=>sa,R_=t=>(t.substring(0,1)===":"&&(t=t.substring(1).trim()),Number(t.trim())),N_=t=>{Il=t},O_=()=>Il,P_={getConfig:B_,clear:F_,setDiagramTitle:ni,getDiagramTitle:je,setAccTitle:Oe,getAccTitle:Ye,setAccDescription:He,getAccDescription:Ue,addSection:I_,getSections:D_,cleanupValue:R_,setShowData:N_,getShowData:O_},M_=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,V_=M_,z_=t=>{const e=Object.entries(t).map(r=>({label:r[0],value:r[1]})).sort((r,n)=>n.value-r.value);return Kf().value(r=>r.value)(e)},q_=(t,e,i,r)=>{var n,s;D.debug(`rendering pie chart
`+t);const a=r.db,o=G(),l=os(a.getConfig(),o.pie),h=450,u=((s=(n=document.getElementById(e))==null?void 0:n.parentElement)==null?void 0:s.offsetWidth)??l.useWidth,f=xa(e);f.attr("viewBox",`0 0 ${u} ${h}`),Ne(f,h,u,l.useMaxWidth);const d=40,p=18,y=4,b=f.append("g");b.attr("transform","translate("+u/2+","+h/2+")");const{themeVariables:C}=o;let[E]=mn(C.pieOuterStrokeWidth);E??(E=2);const k=l.textPosition,I=Math.min(u,h)/2-d,R=rn().innerRadius(0).outerRadius(I),B=rn().innerRadius(I*k).outerRadius(I*k);b.append("circle").attr("cx",0).attr("cy",0).attr("r",I+E/2).attr("class","pieOuterCircle");const _=a.getSections(),O=z_(_),L=[C.pie1,C.pie2,C.pie3,C.pie4,C.pie5,C.pie6,C.pie7,C.pie8,C.pie9,C.pie10,C.pie11,C.pie12],m=Vh(L);b.selectAll("mySlices").data(O).enter().append("path").attr("d",R).attr("fill",S=>m(S.data.label)).attr("class","pieCircle");let v=0;Object.keys(_).forEach(S=>{v+=_[S]}),b.selectAll("mySlices").data(O).enter().append("text").text(S=>(S.data.value/v*100).toFixed(0)+"%").attr("transform",S=>"translate("+B.centroid(S)+")").style("text-anchor","middle").attr("class","slice"),b.append("text").text(a.getDiagramTitle()).attr("x",0).attr("y",-(h-50)/2).attr("class","pieTitleText");const g=b.selectAll(".legend").data(m.domain()).enter().append("g").attr("class","legend").attr("transform",(S,x)=>{const M=p+y,H=M*m.domain().length/2,P=12*p,A=x*M-H;return"translate("+P+","+A+")"});g.append("rect").attr("width",p).attr("height",p).style("fill",m).style("stroke",m),g.data(O).append("text").attr("x",p+y).attr("y",p-y).text(S=>{const{label:x,value:M}=S.data;return a.getShowData()?`${x} [${M}]`:x})},W_={draw:q_},Y_={parser:A_,db:P_,renderer:W_,styles:V_},H_=Object.freeze(Object.defineProperty({__proto__:null,diagram:Y_},Symbol.toStringTag,{value:"Module"}));var Eo=function(){var t=function(J,j,at,ct){for(at=at||{},ct=J.length;ct--;at[J[ct]]=j);return at},e=[1,3],i=[1,4],r=[1,5],n=[1,6],s=[1,7],a=[1,5,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],o=[1,5,6,13,15,17,19,20,25,27,28,29,30,31,32,33,34,37,38,40,41,42,43,44,45,46,47,48,49,50],l=[32,33,34],h=[2,7],u=[1,13],f=[1,17],d=[1,18],p=[1,19],y=[1,20],b=[1,21],C=[1,22],E=[1,23],k=[1,24],I=[1,25],R=[1,26],B=[1,27],_=[1,30],O=[1,31],L=[1,32],m=[1,33],v=[1,34],g=[1,35],S=[1,36],x=[1,37],M=[1,38],H=[1,39],P=[1,40],A=[1,41],V=[1,42],F=[1,57],T=[1,58],W=[5,22,26,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51],lt={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,SPACE:5,QUADRANT:6,document:7,line:8,statement:9,axisDetails:10,quadrantDetails:11,points:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,text:21,point_start:22,point_x:23,point_y:24,"X-AXIS":25,"AXIS-TEXT-DELIMITER":26,"Y-AXIS":27,QUADRANT_1:28,QUADRANT_2:29,QUADRANT_3:30,QUADRANT_4:31,NEWLINE:32,SEMI:33,EOF:34,alphaNumToken:35,textNoTagsToken:36,STR:37,MD_STR:38,alphaNum:39,PUNCTUATION:40,AMP:41,NUM:42,ALPHA:43,COMMA:44,PLUS:45,EQUALS:46,MULT:47,DOT:48,BRKT:49,UNDERSCORE:50,MINUS:51,$accept:0,$end:1},terminals_:{2:"error",5:"SPACE",6:"QUADRANT",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",22:"point_start",23:"point_x",24:"point_y",25:"X-AXIS",26:"AXIS-TEXT-DELIMITER",27:"Y-AXIS",28:"QUADRANT_1",29:"QUADRANT_2",30:"QUADRANT_3",31:"QUADRANT_4",32:"NEWLINE",33:"SEMI",34:"EOF",37:"STR",38:"MD_STR",40:"PUNCTUATION",41:"AMP",42:"NUM",43:"ALPHA",44:"COMMA",45:"PLUS",46:"EQUALS",47:"MULT",48:"DOT",49:"BRKT",50:"UNDERSCORE",51:"MINUS"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[9,0],[9,2],[9,1],[9,1],[9,1],[9,2],[9,2],[9,2],[9,1],[9,1],[12,4],[10,4],[10,3],[10,2],[10,4],[10,3],[10,2],[11,2],[11,2],[11,2],[11,2],[4,1],[4,1],[4,1],[21,1],[21,2],[21,1],[21,1],[39,1],[39,2],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[36,1],[36,1]],performAction:function(j,at,ct,it,rt,N,Z){var q=N.length-1;switch(rt){case 12:this.$=N[q].trim(),it.setDiagramTitle(this.$);break;case 13:this.$=N[q].trim(),it.setAccTitle(this.$);break;case 14:case 15:this.$=N[q].trim(),it.setAccDescription(this.$);break;case 16:it.addSection(N[q].substr(8)),this.$=N[q].substr(8);break;case 17:it.addPoint(N[q-3],N[q-1],N[q]);break;case 18:it.setXAxisLeftText(N[q-2]),it.setXAxisRightText(N[q]);break;case 19:N[q-1].text+=" ⟶ ",it.setXAxisLeftText(N[q-1]);break;case 20:it.setXAxisLeftText(N[q]);break;case 21:it.setYAxisBottomText(N[q-2]),it.setYAxisTopText(N[q]);break;case 22:N[q-1].text+=" ⟶ ",it.setYAxisBottomText(N[q-1]);break;case 23:it.setYAxisBottomText(N[q]);break;case 24:it.setQuadrant1Text(N[q]);break;case 25:it.setQuadrant2Text(N[q]);break;case 26:it.setQuadrant3Text(N[q]);break;case 27:it.setQuadrant4Text(N[q]);break;case 31:this.$={text:N[q],type:"text"};break;case 32:this.$={text:N[q-1].text+""+N[q],type:N[q-1].type};break;case 33:this.$={text:N[q],type:"text"};break;case 34:this.$={text:N[q],type:"markdown"};break;case 35:this.$=N[q];break;case 36:this.$=N[q-1]+""+N[q];break}},table:[{3:1,4:2,5:e,6:i,32:r,33:n,34:s},{1:[3]},{3:8,4:2,5:e,6:i,32:r,33:n,34:s},{3:9,4:2,5:e,6:i,32:r,33:n,34:s},t(a,[2,4],{7:10}),t(o,[2,28]),t(o,[2,29]),t(o,[2,30]),{1:[2,1]},{1:[2,2]},t(l,h,{8:11,9:12,10:14,11:15,12:16,21:28,35:29,1:[2,3],5:u,13:f,15:d,17:p,19:y,20:b,25:C,27:E,28:k,29:I,30:R,31:B,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V}),t(a,[2,5]),{4:43,32:r,33:n,34:s},t(l,h,{10:14,11:15,12:16,21:28,35:29,9:44,5:u,13:f,15:d,17:p,19:y,20:b,25:C,27:E,28:k,29:I,30:R,31:B,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V}),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),{14:[1,45]},{16:[1,46]},{18:[1,47]},t(l,[2,15]),t(l,[2,16]),{21:48,35:29,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V},{21:49,35:29,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V},{21:50,35:29,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V},{21:51,35:29,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V},{21:52,35:29,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V},{21:53,35:29,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V},{5:F,22:[1,54],35:56,36:55,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T},t(W,[2,31]),t(W,[2,33]),t(W,[2,34]),t(W,[2,37]),t(W,[2,38]),t(W,[2,39]),t(W,[2,40]),t(W,[2,41]),t(W,[2,42]),t(W,[2,43]),t(W,[2,44]),t(W,[2,45]),t(W,[2,46]),t(W,[2,47]),t(a,[2,6]),t(l,[2,8]),t(l,[2,12]),t(l,[2,13]),t(l,[2,14]),t(l,[2,20],{36:55,35:56,5:F,26:[1,59],40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,23],{36:55,35:56,5:F,26:[1,60],40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,24],{36:55,35:56,5:F,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,25],{36:55,35:56,5:F,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,26],{36:55,35:56,5:F,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,27],{36:55,35:56,5:F,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),{23:[1,61]},t(W,[2,32]),t(W,[2,48]),t(W,[2,49]),t(W,[2,50]),t(l,[2,19],{35:29,21:62,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V}),t(l,[2,22],{35:29,21:63,37:_,38:O,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V}),{24:[1,64]},t(l,[2,18],{36:55,35:56,5:F,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,21],{36:55,35:56,5:F,40:L,41:m,42:v,43:g,44:S,45:x,46:M,47:H,48:P,49:A,50:V,51:T}),t(l,[2,17])],defaultActions:{8:[2,1],9:[2,2]},parseError:function(j,at){if(at.recoverable)this.trace(j);else{var ct=new Error(j);throw ct.hash=at,ct}},parse:function(j){var at=this,ct=[0],it=[],rt=[null],N=[],Z=this.table,q="",tt=0,z=0,Q=2,$=1,nt=N.slice.call(arguments,1),mt=Object.create(this.lexer),Nt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Nt.yy[Bt]=this.yy[Bt]);mt.setInput(j,Nt.yy),Nt.yy.lexer=mt,Nt.yy.parser=this,typeof mt.yylloc>"u"&&(mt.yylloc={});var Gt=mt.yylloc;N.push(Gt);var vt=mt.options&&mt.options.ranges;typeof Nt.yy.parseError=="function"?this.parseError=Nt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function gt(){var It;return It=it.pop()||mt.lex()||$,typeof It!="number"&&(It instanceof Array&&(it=It,It=it.pop()),It=at.symbols_[It]||It),It}for(var dt,kt,U,ut,K={},_t,ot,Dt,Wt;;){if(kt=ct[ct.length-1],this.defaultActions[kt]?U=this.defaultActions[kt]:((dt===null||typeof dt>"u")&&(dt=gt()),U=Z[kt]&&Z[kt][dt]),typeof U>"u"||!U.length||!U[0]){var Ht="";Wt=[];for(_t in Z[kt])this.terminals_[_t]&&_t>Q&&Wt.push("'"+this.terminals_[_t]+"'");mt.showPosition?Ht="Parse error on line "+(tt+1)+`:
`+mt.showPosition()+`
Expecting `+Wt.join(", ")+", got '"+(this.terminals_[dt]||dt)+"'":Ht="Parse error on line "+(tt+1)+": Unexpected "+(dt==$?"end of input":"'"+(this.terminals_[dt]||dt)+"'"),this.parseError(Ht,{text:mt.match,token:this.terminals_[dt]||dt,line:mt.yylineno,loc:Gt,expected:Wt})}if(U[0]instanceof Array&&U.length>1)throw new Error("Parse Error: multiple actions possible at state: "+kt+", token: "+dt);switch(U[0]){case 1:ct.push(dt),rt.push(mt.yytext),N.push(mt.yylloc),ct.push(U[1]),dt=null,z=mt.yyleng,q=mt.yytext,tt=mt.yylineno,Gt=mt.yylloc;break;case 2:if(ot=this.productions_[U[1]][1],K.$=rt[rt.length-ot],K._$={first_line:N[N.length-(ot||1)].first_line,last_line:N[N.length-1].last_line,first_column:N[N.length-(ot||1)].first_column,last_column:N[N.length-1].last_column},vt&&(K._$.range=[N[N.length-(ot||1)].range[0],N[N.length-1].range[1]]),ut=this.performAction.apply(K,[q,z,tt,Nt.yy,U[1],rt,N].concat(nt)),typeof ut<"u")return ut;ot&&(ct=ct.slice(0,-1*ot*2),rt=rt.slice(0,-1*ot),N=N.slice(0,-1*ot)),ct.push(this.productions_[U[1]][0]),rt.push(K.$),N.push(K._$),Dt=Z[ct[ct.length-2]][ct[ct.length-1]],ct.push(Dt);break;case 3:return!0}}return!0}},w=function(){var J={EOF:1,parseError:function(at,ct){if(this.yy.parser)this.yy.parser.parseError(at,ct);else throw new Error(at)},setInput:function(j,at){return this.yy=at||this.yy||{},this._input=j,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var j=this._input[0];this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j;var at=j.match(/(?:\r\n?|\n).*/g);return at?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),j},unput:function(j){var at=j.length,ct=j.split(/(?:\r\n?|\n)/g);this._input=j+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-at),this.offset-=at;var it=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ct.length-1&&(this.yylineno-=ct.length-1);var rt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ct?(ct.length===it.length?this.yylloc.first_column:0)+it[it.length-ct.length].length-ct[0].length:this.yylloc.first_column-at},this.options.ranges&&(this.yylloc.range=[rt[0],rt[0]+this.yyleng-at]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(j){this.unput(this.match.slice(j))},pastInput:function(){var j=this.matched.substr(0,this.matched.length-this.match.length);return(j.length>20?"...":"")+j.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var j=this.match;return j.length<20&&(j+=this._input.substr(0,20-j.length)),(j.substr(0,20)+(j.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var j=this.pastInput(),at=new Array(j.length+1).join("-");return j+this.upcomingInput()+`
`+at+"^"},test_match:function(j,at){var ct,it,rt;if(this.options.backtrack_lexer&&(rt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(rt.yylloc.range=this.yylloc.range.slice(0))),it=j[0].match(/(?:\r\n?|\n).*/g),it&&(this.yylineno+=it.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:it?it[it.length-1].length-it[it.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+j[0].length},this.yytext+=j[0],this.match+=j[0],this.matches=j,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(j[0].length),this.matched+=j[0],ct=this.performAction.call(this,this.yy,this,at,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ct)return ct;if(this._backtrack){for(var N in rt)this[N]=rt[N];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var j,at,ct,it;this._more||(this.yytext="",this.match="");for(var rt=this._currentRules(),N=0;N<rt.length;N++)if(ct=this._input.match(this.rules[rt[N]]),ct&&(!at||ct[0].length>at[0].length)){if(at=ct,it=N,this.options.backtrack_lexer){if(j=this.test_match(ct,rt[N]),j!==!1)return j;if(this._backtrack){at=!1;continue}else return!1}else if(!this.options.flex)break}return at?(j=this.test_match(at,rt[it]),j!==!1?j:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var at=this.next();return at||this.lex()},begin:function(at){this.conditionStack.push(at)},popState:function(){var at=this.conditionStack.length-1;return at>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(at){return at=this.conditionStack.length-1-Math.abs(at||0),at>=0?this.conditionStack[at]:"INITIAL"},pushState:function(at){this.begin(at)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(at,ct,it,rt){switch(it){case 0:break;case 1:break;case 2:return 32;case 3:break;case 4:return this.begin("title"),13;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),15;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),17;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 25;case 14:return 27;case 15:return 26;case 16:return 28;case 17:return 29;case 18:return 30;case 19:return 31;case 20:this.begin("md_string");break;case 21:return"MD_STR";case 22:this.popState();break;case 23:this.begin("string");break;case 24:this.popState();break;case 25:return"STR";case 26:return this.begin("point_start"),22;case 27:return this.begin("point_x"),23;case 28:this.popState();break;case 29:this.popState(),this.begin("point_y");break;case 30:return this.popState(),24;case 31:return 6;case 32:return 43;case 33:return"COLON";case 34:return 45;case 35:return 44;case 36:return 46;case 37:return 46;case 38:return 47;case 39:return 49;case 40:return 50;case 41:return 48;case 42:return 41;case 43:return 51;case 44:return 42;case 45:return 5;case 46:return 33;case 47:return 40;case 48:return 34}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{point_y:{rules:[30],inclusive:!1},point_x:{rules:[29],inclusive:!1},point_start:{rules:[27,28],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[21,22],inclusive:!1},string:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,23,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};return J}();lt.lexer=w;function ht(){this.yy={}}return ht.prototype=lt,lt.Parser=ht,new ht}();Eo.parser=Eo;const U_=Eo,Pe=Qo();class j_{constructor(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var e,i,r,n,s,a,o,l,h,u,f,d,p,y,b,C,E,k;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((e=le.quadrantChart)==null?void 0:e.chartWidth)||500,chartWidth:((i=le.quadrantChart)==null?void 0:i.chartHeight)||500,titlePadding:((r=le.quadrantChart)==null?void 0:r.titlePadding)||10,titleFontSize:((n=le.quadrantChart)==null?void 0:n.titleFontSize)||20,quadrantPadding:((s=le.quadrantChart)==null?void 0:s.quadrantPadding)||5,xAxisLabelPadding:((a=le.quadrantChart)==null?void 0:a.xAxisLabelPadding)||5,yAxisLabelPadding:((o=le.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((l=le.quadrantChart)==null?void 0:l.xAxisLabelFontSize)||16,yAxisLabelFontSize:((h=le.quadrantChart)==null?void 0:h.yAxisLabelFontSize)||16,quadrantLabelFontSize:((u=le.quadrantChart)==null?void 0:u.quadrantLabelFontSize)||16,quadrantTextTopPadding:((f=le.quadrantChart)==null?void 0:f.quadrantTextTopPadding)||5,pointTextPadding:((d=le.quadrantChart)==null?void 0:d.pointTextPadding)||5,pointLabelFontSize:((p=le.quadrantChart)==null?void 0:p.pointLabelFontSize)||12,pointRadius:((y=le.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((b=le.quadrantChart)==null?void 0:b.xAxisPosition)||"top",yAxisPosition:((C=le.quadrantChart)==null?void 0:C.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((E=le.quadrantChart)==null?void 0:E.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((k=le.quadrantChart)==null?void 0:k.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:Pe.quadrant1Fill,quadrant2Fill:Pe.quadrant2Fill,quadrant3Fill:Pe.quadrant3Fill,quadrant4Fill:Pe.quadrant4Fill,quadrant1TextFill:Pe.quadrant1TextFill,quadrant2TextFill:Pe.quadrant2TextFill,quadrant3TextFill:Pe.quadrant3TextFill,quadrant4TextFill:Pe.quadrant4TextFill,quadrantPointFill:Pe.quadrantPointFill,quadrantPointTextFill:Pe.quadrantPointTextFill,quadrantXAxisTextFill:Pe.quadrantXAxisTextFill,quadrantYAxisTextFill:Pe.quadrantYAxisTextFill,quadrantTitleFill:Pe.quadrantTitleFill,quadrantInternalBorderStrokeFill:Pe.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Pe.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),D.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}setConfig(e){D.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){D.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,i,r,n){const s=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:e==="top"&&i?s:0,bottom:e==="bottom"&&i?s:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,l={left:this.config.yAxisPosition==="left"&&r?o:0,right:this.config.yAxisPosition==="right"&&r?o:0},h=this.config.titleFontSize+this.config.titlePadding*2,u={top:n?h:0},f=this.config.quadrantPadding+l.left,d=this.config.quadrantPadding+a.top+u.top,p=this.config.chartWidth-this.config.quadrantPadding*2-l.left-l.right,y=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-u.top,b=p/2,C=y/2;return{xAxisSpace:a,yAxisSpace:l,titleSpace:u,quadrantSpace:{quadrantLeft:f,quadrantTop:d,quadrantWidth:p,quadrantHalfWidth:b,quadrantHeight:y,quadrantHalfHeight:C}}}getAxisLabels(e,i,r,n){const{quadrantSpace:s,titleSpace:a}=n,{quadrantHalfHeight:o,quadrantHeight:l,quadrantLeft:h,quadrantHalfWidth:u,quadrantTop:f,quadrantWidth:d}=s,p=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,b=[];return this.data.xAxisLeftText&&i&&b.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(p?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+f+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&i&&b.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+u+(p?u/2:0),y:e==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+f+l+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&b.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:f+l-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&b.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+d+this.config.quadrantPadding,y:f+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),b}getQuadrants(e){const{quadrantSpace:i}=e,{quadrantHalfHeight:r,quadrantLeft:n,quadrantHalfWidth:s,quadrantTop:a}=i,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:n+s,y:a,width:s,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:n,y:a,width:s,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:n,y:a+r,width:s,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:n+s,y:a+r,width:s,height:r,fill:this.themeConfig.quadrant4Fill}];for(const l of o)l.text.x=l.x+l.width/2,this.data.points.length===0?(l.text.y=l.y+l.height/2,l.text.horizontalPos="middle"):(l.text.y=l.y+this.config.quadrantTextTopPadding,l.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:i}=e,{quadrantHeight:r,quadrantLeft:n,quadrantTop:s,quadrantWidth:a}=i,o=Pn().domain([0,1]).range([n,a+n]),l=Pn().domain([0,1]).range([r+s,s]);return this.data.points.map(u=>({x:o(u.x),y:l(u.y),fill:this.themeConfig.quadrantPointFill,radius:this.config.pointRadius,text:{text:u.text,fill:this.themeConfig.quadrantPointTextFill,x:o(u.x),y:l(u.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0}}))}getBorders(e){const i=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=e,{quadrantHalfHeight:n,quadrantHeight:s,quadrantLeft:a,quadrantHalfWidth:o,quadrantTop:l,quadrantWidth:h}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l,x2:a+h+i,y2:l},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+h,y1:l+i,x2:a+h,y2:l+s-i},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-i,y1:l+s,x2:a+h+i,y2:l+s},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:l+i,x2:a,y2:l+s-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+o,y1:l+i,x2:a+o,y2:l+s-i},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+i,y1:l+n,x2:a+h-i,y2:l+n}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),i=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,n=this.data.points.length>0?"bottom":this.config.xAxisPosition,s=this.calculateSpace(n,e,i,r);return{points:this.getQuadrantPoints(s),quadrants:this.getQuadrants(s),axisLabels:this.getAxisLabels(n,e,i,s),borderLines:this.getBorders(s),title:this.getTitle(r)}}}const G_=G();function lr(t){return Ce(t.trim(),G_)}const De=new j_;function X_(t){De.setData({quadrant1Text:lr(t.text)})}function $_(t){De.setData({quadrant2Text:lr(t.text)})}function Q_(t){De.setData({quadrant3Text:lr(t.text)})}function K_(t){De.setData({quadrant4Text:lr(t.text)})}function Z_(t){De.setData({xAxisLeftText:lr(t.text)})}function J_(t){De.setData({xAxisRightText:lr(t.text)})}function t7(t){De.setData({yAxisTopText:lr(t.text)})}function e7(t){De.setData({yAxisBottomText:lr(t.text)})}function i7(t,e,i){De.addPoints([{x:e,y:i,text:lr(t.text)}])}function r7(t){De.setConfig({chartWidth:t})}function n7(t){De.setConfig({chartHeight:t})}function s7(){const t=G(),{themeVariables:e,quadrantChart:i}=t;return i&&De.setConfig(i),De.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),De.setData({titleText:je()}),De.build()}const a7=function(){De.clear(),We()},o7={setWidth:r7,setHeight:n7,setQuadrant1Text:X_,setQuadrant2Text:$_,setQuadrant3Text:Q_,setQuadrant4Text:K_,setXAxisLeftText:Z_,setXAxisRightText:J_,setYAxisTopText:t7,setYAxisBottomText:e7,addPoint:i7,getQuadrantData:s7,clear:a7,setAccTitle:Oe,getAccTitle:Ye,setDiagramTitle:ni,getDiagramTitle:je,getAccDescription:Ue,setAccDescription:He},l7=(t,e,i,r)=>{var n,s,a;function o(g){return g==="top"?"hanging":"middle"}function l(g){return g==="left"?"start":"middle"}function h(g){return`translate(${g.x}, ${g.y}) rotate(${g.rotation||0})`}const u=G();D.debug(`Rendering quadrant chart
`+t);const f=u.securityLevel;let d;f==="sandbox"&&(d=pt("#i"+e));const y=(f==="sandbox"?pt(d.nodes()[0].contentDocument.body):pt("body")).select(`[id="${e}"]`),b=y.append("g").attr("class","main"),C=((n=u.quadrantChart)==null?void 0:n.chartWidth)||500,E=((s=u.quadrantChart)==null?void 0:s.chartHeight)||500;Ne(y,E,C,((a=u.quadrantChart)==null?void 0:a.useMaxWidth)||!0),y.attr("viewBox","0 0 "+C+" "+E),r.db.setHeight(E),r.db.setWidth(C);const k=r.db.getQuadrantData(),I=b.append("g").attr("class","quadrants"),R=b.append("g").attr("class","border"),B=b.append("g").attr("class","data-points"),_=b.append("g").attr("class","labels"),O=b.append("g").attr("class","title");k.title&&O.append("text").attr("x",0).attr("y",0).attr("fill",k.title.fill).attr("font-size",k.title.fontSize).attr("dominant-baseline",o(k.title.horizontalPos)).attr("text-anchor",l(k.title.verticalPos)).attr("transform",h(k.title)).text(k.title.text),k.borderLines&&R.selectAll("line").data(k.borderLines).enter().append("line").attr("x1",g=>g.x1).attr("y1",g=>g.y1).attr("x2",g=>g.x2).attr("y2",g=>g.y2).style("stroke",g=>g.strokeFill).style("stroke-width",g=>g.strokeWidth);const L=I.selectAll("g.quadrant").data(k.quadrants).enter().append("g").attr("class","quadrant");L.append("rect").attr("x",g=>g.x).attr("y",g=>g.y).attr("width",g=>g.width).attr("height",g=>g.height).attr("fill",g=>g.fill),L.append("text").attr("x",0).attr("y",0).attr("fill",g=>g.text.fill).attr("font-size",g=>g.text.fontSize).attr("dominant-baseline",g=>o(g.text.horizontalPos)).attr("text-anchor",g=>l(g.text.verticalPos)).attr("transform",g=>h(g.text)).text(g=>g.text.text),_.selectAll("g.label").data(k.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(g=>g.text).attr("fill",g=>g.fill).attr("font-size",g=>g.fontSize).attr("dominant-baseline",g=>o(g.horizontalPos)).attr("text-anchor",g=>l(g.verticalPos)).attr("transform",g=>h(g));const v=B.selectAll("g.data-point").data(k.points).enter().append("g").attr("class","data-point");v.append("circle").attr("cx",g=>g.x).attr("cy",g=>g.y).attr("r",g=>g.radius).attr("fill",g=>g.fill),v.append("text").attr("x",0).attr("y",0).text(g=>g.text.text).attr("fill",g=>g.text.fill).attr("font-size",g=>g.text.fontSize).attr("dominant-baseline",g=>o(g.text.horizontalPos)).attr("text-anchor",g=>l(g.text.verticalPos)).attr("transform",g=>h(g.text))},c7={draw:l7},h7={parser:U_,db:o7,renderer:c7,styles:()=>""},u7=Object.freeze(Object.defineProperty({__proto__:null,diagram:h7},Symbol.toStringTag,{value:"Module"}));var So=function(){var t=function(H,P,A,V){for(A=A||{},V=H.length;V--;A[H[V]]=P);return A},e=[1,10,12,14,16,18,19,21,23],i=[2,6],r=[1,3],n=[1,5],s=[1,6],a=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],h=[1,26],u=[1,28],f=[1,29],d=[1,30],p=[1,31],y=[1,32],b=[1,33],C=[1,34],E=[1,35],k=[1,36],I=[1,37],R=[1,43],B=[1,42],_=[1,47],O=[1,50],L=[1,10,12,14,16,18,19,21,23,34,35,36],m=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],v=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],g=[1,64],S={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:function(P,A,V,F,T,W,lt){var w=W.length-1;switch(T){case 5:F.setOrientation(W[w]);break;case 9:F.setDiagramTitle(W[w].text.trim());break;case 12:F.setLineData({text:"",type:"text"},W[w]);break;case 13:F.setLineData(W[w-1],W[w]);break;case 14:F.setBarData({text:"",type:"text"},W[w]);break;case 15:F.setBarData(W[w-1],W[w]);break;case 16:this.$=W[w].trim(),F.setAccTitle(this.$);break;case 17:case 18:this.$=W[w].trim(),F.setAccDescription(this.$);break;case 19:this.$=W[w-1];break;case 20:this.$=[Number(W[w-2]),...W[w]];break;case 21:this.$=[Number(W[w])];break;case 22:F.setXAxisTitle(W[w]);break;case 23:F.setXAxisTitle(W[w-1]);break;case 24:F.setXAxisTitle({type:"text",text:""});break;case 25:F.setXAxisBand(W[w]);break;case 26:F.setXAxisRangeData(Number(W[w-2]),Number(W[w]));break;case 27:this.$=W[w-1];break;case 28:this.$=[W[w-2],...W[w]];break;case 29:this.$=[W[w]];break;case 30:F.setYAxisTitle(W[w]);break;case 31:F.setYAxisTitle(W[w-1]);break;case 32:F.setYAxisTitle({type:"text",text:""});break;case 33:F.setYAxisRangeData(Number(W[w-2]),Number(W[w]));break;case 37:this.$={text:W[w],type:"text"};break;case 38:this.$={text:W[w],type:"text"};break;case 39:this.$={text:W[w],type:"markdown"};break;case 40:this.$=W[w];break;case 41:this.$=W[w-1]+""+W[w];break}},table:[t(e,i,{3:1,4:2,7:4,5:r,34:n,35:s,36:a}),{1:[3]},t(e,i,{4:2,7:4,3:8,5:r,34:n,35:s,36:a}),t(e,i,{4:2,7:4,6:9,3:10,5:r,8:[1,11],34:n,35:s,36:a}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,i,{4:2,7:4,3:21,5:r,34:n,35:s,36:a}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:n,35:s,36:a}),{11:23,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},{11:39,13:38,24:R,27:B,29:40,30:41,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},{11:45,15:44,27:_,33:46,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},{11:49,17:48,24:O,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},{11:52,17:51,24:O,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},{20:[1,53]},{22:[1,54]},t(L,[2,18]),{1:[2,2]},t(L,[2,8]),t(L,[2,9]),t(m,[2,37],{40:55,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I}),t(m,[2,38]),t(m,[2,39]),t(v,[2,40]),t(v,[2,42]),t(v,[2,43]),t(v,[2,44]),t(v,[2,45]),t(v,[2,46]),t(v,[2,47]),t(v,[2,48]),t(v,[2,49]),t(v,[2,50]),t(v,[2,51]),t(L,[2,10]),t(L,[2,22],{30:41,29:56,24:R,27:B}),t(L,[2,24]),t(L,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},t(L,[2,11]),t(L,[2,30],{33:60,27:_}),t(L,[2,32]),{31:[1,61]},t(L,[2,12]),{17:62,24:O},{25:63,27:g},t(L,[2,14]),{17:65,24:O},t(L,[2,16]),t(L,[2,17]),t(v,[2,41]),t(L,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(L,[2,31]),{27:[1,69]},t(L,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(L,[2,15]),t(L,[2,26]),t(L,[2,27]),{11:59,32:72,37:24,38:l,39:h,40:27,41:u,42:f,43:d,44:p,45:y,46:b,47:C,48:E,49:k,50:I},t(L,[2,33]),t(L,[2,19]),{25:73,27:g},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:function(P,A){if(A.recoverable)this.trace(P);else{var V=new Error(P);throw V.hash=A,V}},parse:function(P){var A=this,V=[0],F=[],T=[null],W=[],lt=this.table,w="",ht=0,J=0,j=2,at=1,ct=W.slice.call(arguments,1),it=Object.create(this.lexer),rt={yy:{}};for(var N in this.yy)Object.prototype.hasOwnProperty.call(this.yy,N)&&(rt.yy[N]=this.yy[N]);it.setInput(P,rt.yy),rt.yy.lexer=it,rt.yy.parser=this,typeof it.yylloc>"u"&&(it.yylloc={});var Z=it.yylloc;W.push(Z);var q=it.options&&it.options.ranges;typeof rt.yy.parseError=="function"?this.parseError=rt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function tt(){var dt;return dt=F.pop()||it.lex()||at,typeof dt!="number"&&(dt instanceof Array&&(F=dt,dt=F.pop()),dt=A.symbols_[dt]||dt),dt}for(var z,Q,$,nt,mt={},Nt,Bt,Gt,vt;;){if(Q=V[V.length-1],this.defaultActions[Q]?$=this.defaultActions[Q]:((z===null||typeof z>"u")&&(z=tt()),$=lt[Q]&&lt[Q][z]),typeof $>"u"||!$.length||!$[0]){var gt="";vt=[];for(Nt in lt[Q])this.terminals_[Nt]&&Nt>j&&vt.push("'"+this.terminals_[Nt]+"'");it.showPosition?gt="Parse error on line "+(ht+1)+`:
`+it.showPosition()+`
Expecting `+vt.join(", ")+", got '"+(this.terminals_[z]||z)+"'":gt="Parse error on line "+(ht+1)+": Unexpected "+(z==at?"end of input":"'"+(this.terminals_[z]||z)+"'"),this.parseError(gt,{text:it.match,token:this.terminals_[z]||z,line:it.yylineno,loc:Z,expected:vt})}if($[0]instanceof Array&&$.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+z);switch($[0]){case 1:V.push(z),T.push(it.yytext),W.push(it.yylloc),V.push($[1]),z=null,J=it.yyleng,w=it.yytext,ht=it.yylineno,Z=it.yylloc;break;case 2:if(Bt=this.productions_[$[1]][1],mt.$=T[T.length-Bt],mt._$={first_line:W[W.length-(Bt||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(Bt||1)].first_column,last_column:W[W.length-1].last_column},q&&(mt._$.range=[W[W.length-(Bt||1)].range[0],W[W.length-1].range[1]]),nt=this.performAction.apply(mt,[w,J,ht,rt.yy,$[1],T,W].concat(ct)),typeof nt<"u")return nt;Bt&&(V=V.slice(0,-1*Bt*2),T=T.slice(0,-1*Bt),W=W.slice(0,-1*Bt)),V.push(this.productions_[$[1]][0]),T.push(mt.$),W.push(mt._$),Gt=lt[V[V.length-2]][V[V.length-1]],V.push(Gt);break;case 3:return!0}}return!0}},x=function(){var H={EOF:1,parseError:function(A,V){if(this.yy.parser)this.yy.parser.parseError(A,V);else throw new Error(A)},setInput:function(P,A){return this.yy=A||this.yy||{},this._input=P,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var P=this._input[0];this.yytext+=P,this.yyleng++,this.offset++,this.match+=P,this.matched+=P;var A=P.match(/(?:\r\n?|\n).*/g);return A?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),P},unput:function(P){var A=P.length,V=P.split(/(?:\r\n?|\n)/g);this._input=P+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var F=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),V.length-1&&(this.yylineno-=V.length-1);var T=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:V?(V.length===F.length?this.yylloc.first_column:0)+F[F.length-V.length].length-V[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[T[0],T[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(P){this.unput(this.match.slice(P))},pastInput:function(){var P=this.matched.substr(0,this.matched.length-this.match.length);return(P.length>20?"...":"")+P.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var P=this.match;return P.length<20&&(P+=this._input.substr(0,20-P.length)),(P.substr(0,20)+(P.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var P=this.pastInput(),A=new Array(P.length+1).join("-");return P+this.upcomingInput()+`
`+A+"^"},test_match:function(P,A){var V,F,T;if(this.options.backtrack_lexer&&(T={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(T.yylloc.range=this.yylloc.range.slice(0))),F=P[0].match(/(?:\r\n?|\n).*/g),F&&(this.yylineno+=F.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:F?F[F.length-1].length-F[F.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+P[0].length},this.yytext+=P[0],this.match+=P[0],this.matches=P,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(P[0].length),this.matched+=P[0],V=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),V)return V;if(this._backtrack){for(var W in T)this[W]=T[W];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var P,A,V,F;this._more||(this.yytext="",this.match="");for(var T=this._currentRules(),W=0;W<T.length;W++)if(V=this._input.match(this.rules[T[W]]),V&&(!A||V[0].length>A[0].length)){if(A=V,F=W,this.options.backtrack_lexer){if(P=this.test_match(V,T[W]),P!==!1)return P;if(this._backtrack){A=!1;continue}else return!1}else if(!this.options.flex)break}return A?(P=this.test_match(A,T[F]),P!==!1?P:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var A=this.next();return A||this.lex()},begin:function(A){this.conditionStack.push(A)},popState:function(){var A=this.conditionStack.length-1;return A>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(A){return A=this.conditionStack.length-1-Math.abs(A||0),A>=0?this.conditionStack[A]:"INITIAL"},pushState:function(A){this.begin(A)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(A,V,F,T){switch(F){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return H}();S.lexer=x;function M(){this.yy={}}return M.prototype=S,S.Parser=M,new M}();So.parser=So;const d7=So;function sh(t){return t.type==="bar"}function $0(t){return t.type==="band"}function Dn(t){return t.type==="linear"}class Q0{constructor(e){this.parentGroup=e}getMaxDimension(e,i){if(!this.parentGroup)return{width:e.reduce((s,a)=>Math.max(a.length,s),0)*i,height:i};const r={width:0,height:0},n=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",i);for(const s of e){const a=a5(n,1,s),o=a?a.width:s.length*i,l=a?a.height:i;r.width=Math.max(r.width,o),r.height=Math.max(r.height,l)}return n.remove(),r}}const ah=.7,oh=.2;class K0{constructor(e,i,r,n){this.axisConfig=e,this.title=i,this.textDimensionCalculator=r,this.axisThemeConfig=n,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){ah*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(ah*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let i=e.height;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),n=oh*e.width;this.outerPadding=Math.min(r.width/2,n);const s=r.height+this.axisConfig.labelPadding*2;this.labelTextHeight=r.height,s<=i&&(i-=s,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),n=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,n<=i&&(i-=n,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-i}calculateSpaceIfDrawnVertical(e){let i=e.width;if(this.axisConfig.showAxisLine&&i>this.axisConfig.axisLineWidth&&(i-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const r=this.getLabelDimension(),n=oh*e.height;this.outerPadding=Math.min(r.height/2,n);const s=r.width+this.axisConfig.labelPadding*2;s<=i&&(i-=s,this.showLabel=!0)}if(this.axisConfig.showTick&&i>=this.axisConfig.tickLength&&(this.showTick=!0,i-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const r=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),n=r.height+this.axisConfig.titlePadding*2;this.titleTextHeight=r.height,n<=i&&(i-=n,this.showTitle=!0)}this.boundingRect.width=e.width-i,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${i},${this.boundingRect.y} L ${i},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(i),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const i=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${i},${this.getScaleValue(r)} L ${i-this.axisConfig.tickLength},${this.getScaleValue(r)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i} L ${this.getScaleValue(r)},${i+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const i=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${i} L ${this.boundingRect.x+this.boundingRect.width},${i}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(i=>({text:i.toString(),x:this.getScaleValue(i),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const i=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(r=>({path:`M ${this.getScaleValue(r)},${i+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(r)},${i+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}}class f7 extends K0{constructor(e,i,r,n,s){super(e,n,s,i),this.categories=r,this.scale=sc().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=sc().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),D.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)||this.getRange()[0]}}class p7 extends K0{constructor(e,i,r,n,s){super(e,n,s,i),this.domain=r,this.scale=Pn().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=Pn().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}}function lh(t,e,i,r){const n=new Q0(r);return $0(t)?new f7(e,i,t.categories,t.title,n):new p7(e,i,[t.min,t.max],t.title,n)}class g7{constructor(e,i,r,n){this.textDimensionCalculator=e,this.chartConfig=i,this.chartData=r,this.chartThemeConfig=n,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const i=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(i.width,e.width),n=i.height+2*this.chartConfig.titlePadding;return i.width<=r&&i.height<=n&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=n,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}}function y7(t,e,i,r){const n=new Q0(r);return new g7(n,t,e,i)}class m7{constructor(e,i,r,n,s){this.plotData=e,this.xAxis=i,this.yAxis=r,this.orientation=n,this.plotIndex=s}getDrawableElement(){const e=this.plotData.data.map(r=>[this.xAxis.getScaleValue(r[0]),this.yAxis.getScaleValue(r[1])]);let i;return this.orientation==="horizontal"?i=xr().y(r=>r[0]).x(r=>r[1])(e):i=xr().x(r=>r[0]).y(r=>r[1])(e),i?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:i,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}class x7{constructor(e,i,r,n,s,a){this.barData=e,this.boundingRect=i,this.xAxis=r,this.yAxis=n,this.orientation=s,this.plotIndex=a}getDrawableElement(){const e=this.barData.data.map(s=>[this.xAxis.getScaleValue(s[0]),this.yAxis.getScaleValue(s[1])]),i=.05,r=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-i),n=r/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(s=>({x:this.boundingRect.x,y:s[0]-n,height:r,width:s[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(s=>({x:s[0]-n,y:s[1],width:r,height:this.boundingRect.y+this.boundingRect.height-s[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}}class b7{constructor(e,i,r){this.chartConfig=e,this.chartData=i,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,i){this.xAxis=e,this.yAxis=i}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const e=[];for(const[i,r]of this.chartData.plots.entries())switch(r.type){case"line":{const n=new m7(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...n.getDrawableElement())}break;case"bar":{const n=new x7(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,i);e.push(...n.getDrawableElement())}break}return e}}function k7(t,e,i){return new b7(t,e,i)}class _7{constructor(e,i,r,n){this.chartConfig=e,this.chartData=i,this.componentStore={title:y7(e,i,r,n),plot:k7(e,i,r),xAxis:lh(i.xAxis,e.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},n),yAxis:lh(i.yAxis,e.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},n)}}calculateVerticalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,n=0,s=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:s,height:a});e-=o.width,i-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),n=o.height,i-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:i}),i-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:i}),r=o.width,e-=o.width,e>0&&(s+=e,e=0),i>0&&(a+=i,i=0),this.componentStore.plot.calculateSpace({width:s,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:n}),this.componentStore.xAxis.setRange([r,r+s]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:n+a}),this.componentStore.yAxis.setRange([n,n+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(l=>sh(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizonatalSpace(){let e=this.chartConfig.width,i=this.chartConfig.height,r=0,n=0,s=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(i*this.chartConfig.plotReservedSpacePercent/100),l=this.componentStore.plot.calculateSpace({width:a,height:o});e-=l.width,i-=l.height,l=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:i}),r=l.height,i-=l.height,this.componentStore.xAxis.setAxisPosition("left"),l=this.componentStore.xAxis.calculateSpace({width:e,height:i}),e-=l.width,n=l.width,this.componentStore.yAxis.setAxisPosition("top"),l=this.componentStore.yAxis.calculateSpace({width:e,height:i}),i-=l.height,s=r+l.height,e>0&&(a+=e,e=0),i>0&&(o+=i,i=0),this.componentStore.plot.calculateSpace({width:a,height:o}),this.componentStore.plot.setBoundingBoxXY({x:n,y:s}),this.componentStore.yAxis.setRange([n,n+a]),this.componentStore.yAxis.setBoundingBoxXY({x:n,y:r}),this.componentStore.xAxis.setRange([s,s+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(h=>sh(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizonatalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const i of Object.values(this.componentStore))e.push(...i.getDrawableElements());return e}}class T7{static build(e,i,r,n){return new _7(e,i,r,n).getDrawableElement()}}let Gn=0,Z0,Xn=td(),$n=J0(),Xt=ed(),wo=$n.plotColorPalette.split(",").map(t=>t.trim()),va=!1,Dl=!1;function J0(){const t=Qo(),e=we();return os(t.xyChart,e.themeVariables.xyChart)}function td(){const t=we();return os(le.xyChart,t.xyChart)}function ed(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function Rl(t){const e=we();return Ce(t.trim(),e)}function C7(t){Z0=t}function E7(t){t==="horizontal"?Xn.chartOrientation="horizontal":Xn.chartOrientation="vertical"}function S7(t){Xt.xAxis.title=Rl(t.text)}function id(t,e){Xt.xAxis={type:"linear",title:Xt.xAxis.title,min:t,max:e},va=!0}function w7(t){Xt.xAxis={type:"band",title:Xt.xAxis.title,categories:t.map(e=>Rl(e.text))},va=!0}function v7(t){Xt.yAxis.title=Rl(t.text)}function A7(t,e){Xt.yAxis={type:"linear",title:Xt.yAxis.title,min:t,max:e},Dl=!0}function L7(t){const e=Math.min(...t),i=Math.max(...t),r=Dn(Xt.yAxis)?Xt.yAxis.min:1/0,n=Dn(Xt.yAxis)?Xt.yAxis.max:-1/0;Xt.yAxis={type:"linear",title:Xt.yAxis.title,min:Math.min(r,e),max:Math.max(n,i)}}function rd(t){let e=[];if(t.length===0)return e;if(!va){const i=Dn(Xt.xAxis)?Xt.xAxis.min:1/0,r=Dn(Xt.xAxis)?Xt.xAxis.max:-1/0;id(Math.min(i,1),Math.max(r,t.length))}if(Dl||L7(t),$0(Xt.xAxis)&&(e=Xt.xAxis.categories.map((i,r)=>[i,t[r]])),Dn(Xt.xAxis)){const i=Xt.xAxis.min,r=Xt.xAxis.max,n=(r-i+1)/t.length,s=[];for(let a=i;a<=r;a+=n)s.push(`${a}`);e=s.map((a,o)=>[a,t[o]])}return e}function nd(t){return wo[t===0?0:t%wo.length]}function B7(t,e){const i=rd(e);Xt.plots.push({type:"line",strokeFill:nd(Gn),strokeWidth:2,data:i}),Gn++}function F7(t,e){const i=rd(e);Xt.plots.push({type:"bar",fill:nd(Gn),data:i}),Gn++}function I7(){if(Xt.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Xt.title=je(),T7.build(Xn,Xt,$n,Z0)}function D7(){return $n}function R7(){return Xn}const N7=function(){We(),Gn=0,Xn=td(),Xt=ed(),$n=J0(),wo=$n.plotColorPalette.split(",").map(t=>t.trim()),va=!1,Dl=!1},O7={getDrawableElem:I7,clear:N7,setAccTitle:Oe,getAccTitle:Ye,setDiagramTitle:ni,getDiagramTitle:je,getAccDescription:Ue,setAccDescription:He,setOrientation:E7,setXAxisTitle:S7,setXAxisRangeData:id,setXAxisBand:w7,setYAxisTitle:v7,setYAxisRangeData:A7,setLineData:B7,setBarData:F7,setTmpSVGG:C7,getChartThemeConfig:D7,getChartConfig:R7},P7=(t,e,i,r)=>{const n=r.db,s=n.getChartThemeConfig(),a=n.getChartConfig();function o(C){return C==="top"?"text-before-edge":"middle"}function l(C){return C==="left"?"start":C==="right"?"end":"middle"}function h(C){return`translate(${C.x}, ${C.y}) rotate(${C.rotation||0})`}D.debug(`Rendering xychart chart
`+t);const u=xa(e),f=u.append("g").attr("class","main"),d=f.append("rect").attr("width",a.width).attr("height",a.height).attr("class","background");Ne(u,a.height,a.width,!0),u.attr("viewBox",`0 0 ${a.width} ${a.height}`),d.attr("fill",s.backgroundColor),n.setTmpSVGG(u.append("g").attr("class","mermaid-tmp-group"));const p=n.getDrawableElem(),y={};function b(C){let E=f,k="";for(const[I]of C.entries()){let R=f;I>0&&y[k]&&(R=y[k]),k+=C[I],E=y[k],E||(E=y[k]=R.append("g").attr("class",C[I]))}return E}for(const C of p){if(C.data.length===0)continue;const E=b(C.groupTexts);switch(C.type){case"rect":E.selectAll("rect").data(C.data).enter().append("rect").attr("x",k=>k.x).attr("y",k=>k.y).attr("width",k=>k.width).attr("height",k=>k.height).attr("fill",k=>k.fill).attr("stroke",k=>k.strokeFill).attr("stroke-width",k=>k.strokeWidth);break;case"text":E.selectAll("text").data(C.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",k=>k.fill).attr("font-size",k=>k.fontSize).attr("dominant-baseline",k=>o(k.verticalPos)).attr("text-anchor",k=>l(k.horizontalPos)).attr("transform",k=>h(k)).text(k=>k.text);break;case"path":E.selectAll("path").data(C.data).enter().append("path").attr("d",k=>k.path).attr("fill",k=>k.fill?k.fill:"none").attr("stroke",k=>k.strokeFill).attr("stroke-width",k=>k.strokeWidth);break}}},M7={draw:P7},V7={parser:d7,db:O7,renderer:M7},z7=Object.freeze(Object.defineProperty({__proto__:null,diagram:V7},Symbol.toStringTag,{value:"Module"}));var vo=function(){var t=function(J,j,at,ct){for(at=at||{},ct=J.length;ct--;at[J[ct]]=j);return at},e=[1,3],i=[1,4],r=[1,5],n=[1,6],s=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],a=[1,18],o=[2,7],l=[1,22],h=[1,23],u=[1,24],f=[1,25],d=[1,26],p=[1,27],y=[1,20],b=[1,28],C=[1,29],E=[62,63],k=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],I=[1,47],R=[1,48],B=[1,49],_=[1,50],O=[1,51],L=[1,52],m=[1,53],v=[53,54],g=[1,64],S=[1,60],x=[1,61],M=[1,62],H=[1,63],P=[1,65],A=[1,69],V=[1,70],F=[1,67],T=[1,68],W=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],lt={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:function(j,at,ct,it,rt,N,Z){var q=N.length-1;switch(rt){case 4:this.$=N[q].trim(),it.setAccTitle(this.$);break;case 5:case 6:this.$=N[q].trim(),it.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:it.addRequirement(N[q-3],N[q-4]);break;case 14:it.setNewReqId(N[q-2]);break;case 15:it.setNewReqText(N[q-2]);break;case 16:it.setNewReqRisk(N[q-2]);break;case 17:it.setNewReqVerifyMethod(N[q-2]);break;case 20:this.$=it.RequirementType.REQUIREMENT;break;case 21:this.$=it.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=it.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=it.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=it.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=it.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=it.RiskLevel.LOW_RISK;break;case 27:this.$=it.RiskLevel.MED_RISK;break;case 28:this.$=it.RiskLevel.HIGH_RISK;break;case 29:this.$=it.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=it.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=it.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=it.VerifyType.VERIFY_TEST;break;case 33:it.addElement(N[q-3]);break;case 34:it.setNewElementType(N[q-2]);break;case 35:it.setNewElementDocRef(N[q-2]);break;case 38:it.addRelationship(N[q-2],N[q],N[q-4]);break;case 39:it.addRelationship(N[q-2],N[q-4],N[q]);break;case 40:this.$=it.Relationships.CONTAINS;break;case 41:this.$=it.Relationships.COPIES;break;case 42:this.$=it.Relationships.DERIVES;break;case 43:this.$=it.Relationships.SATISFIES;break;case 44:this.$=it.Relationships.VERIFIES;break;case 45:this.$=it.Relationships.REFINES;break;case 46:this.$=it.Relationships.TRACES;break}},table:[{3:1,4:2,6:e,9:i,11:r,13:n},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:i,11:r,13:n},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(s,[2,6]),{3:12,4:2,6:e,9:i,11:r,13:n},{1:[2,2]},{4:17,5:a,7:13,8:o,9:i,11:r,13:n,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:b,63:C},t(s,[2,4]),t(s,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:a,7:31,8:o,9:i,11:r,13:n,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:b,63:C},{4:17,5:a,7:32,8:o,9:i,11:r,13:n,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:b,63:C},{4:17,5:a,7:33,8:o,9:i,11:r,13:n,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:b,63:C},{4:17,5:a,7:34,8:o,9:i,11:r,13:n,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:b,63:C},{4:17,5:a,7:35,8:o,9:i,11:r,13:n,14:14,15:15,16:16,17:19,23:21,31:l,32:h,33:u,34:f,35:d,36:p,44:y,62:b,63:C},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},t(E,[2,20]),t(E,[2,21]),t(E,[2,22]),t(E,[2,23]),t(E,[2,24]),t(E,[2,25]),t(k,[2,49]),t(k,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:I,56:R,57:B,58:_,59:O,60:L,61:m},{52:54,55:I,56:R,57:B,58:_,59:O,60:L,61:m},{5:[1,55]},{5:[1,56]},{53:[1,57]},t(v,[2,40]),t(v,[2,41]),t(v,[2,42]),t(v,[2,43]),t(v,[2,44]),t(v,[2,45]),t(v,[2,46]),{54:[1,58]},{5:g,20:59,21:S,24:x,26:M,28:H,30:P},{5:A,30:V,46:66,47:F,49:T},{23:71,62:b,63:C},{23:72,62:b,63:C},t(W,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:g,20:77,21:S,24:x,26:M,28:H,30:P},t(W,[2,19]),t(W,[2,33]),{22:[1,78]},{22:[1,79]},{5:A,30:V,46:80,47:F,49:T},t(W,[2,37]),t(W,[2,38]),t(W,[2,39]),{23:81,62:b,63:C},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},t(W,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},t(W,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:g,20:106,21:S,24:x,26:M,28:H,30:P},{5:g,20:107,21:S,24:x,26:M,28:H,30:P},{5:g,20:108,21:S,24:x,26:M,28:H,30:P},{5:g,20:109,21:S,24:x,26:M,28:H,30:P},{5:A,30:V,46:110,47:F,49:T},{5:A,30:V,46:111,47:F,49:T},t(W,[2,14]),t(W,[2,15]),t(W,[2,16]),t(W,[2,17]),t(W,[2,34]),t(W,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:function(j,at){if(at.recoverable)this.trace(j);else{var ct=new Error(j);throw ct.hash=at,ct}},parse:function(j){var at=this,ct=[0],it=[],rt=[null],N=[],Z=this.table,q="",tt=0,z=0,Q=2,$=1,nt=N.slice.call(arguments,1),mt=Object.create(this.lexer),Nt={yy:{}};for(var Bt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Bt)&&(Nt.yy[Bt]=this.yy[Bt]);mt.setInput(j,Nt.yy),Nt.yy.lexer=mt,Nt.yy.parser=this,typeof mt.yylloc>"u"&&(mt.yylloc={});var Gt=mt.yylloc;N.push(Gt);var vt=mt.options&&mt.options.ranges;typeof Nt.yy.parseError=="function"?this.parseError=Nt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function gt(){var It;return It=it.pop()||mt.lex()||$,typeof It!="number"&&(It instanceof Array&&(it=It,It=it.pop()),It=at.symbols_[It]||It),It}for(var dt,kt,U,ut,K={},_t,ot,Dt,Wt;;){if(kt=ct[ct.length-1],this.defaultActions[kt]?U=this.defaultActions[kt]:((dt===null||typeof dt>"u")&&(dt=gt()),U=Z[kt]&&Z[kt][dt]),typeof U>"u"||!U.length||!U[0]){var Ht="";Wt=[];for(_t in Z[kt])this.terminals_[_t]&&_t>Q&&Wt.push("'"+this.terminals_[_t]+"'");mt.showPosition?Ht="Parse error on line "+(tt+1)+`:
`+mt.showPosition()+`
Expecting `+Wt.join(", ")+", got '"+(this.terminals_[dt]||dt)+"'":Ht="Parse error on line "+(tt+1)+": Unexpected "+(dt==$?"end of input":"'"+(this.terminals_[dt]||dt)+"'"),this.parseError(Ht,{text:mt.match,token:this.terminals_[dt]||dt,line:mt.yylineno,loc:Gt,expected:Wt})}if(U[0]instanceof Array&&U.length>1)throw new Error("Parse Error: multiple actions possible at state: "+kt+", token: "+dt);switch(U[0]){case 1:ct.push(dt),rt.push(mt.yytext),N.push(mt.yylloc),ct.push(U[1]),dt=null,z=mt.yyleng,q=mt.yytext,tt=mt.yylineno,Gt=mt.yylloc;break;case 2:if(ot=this.productions_[U[1]][1],K.$=rt[rt.length-ot],K._$={first_line:N[N.length-(ot||1)].first_line,last_line:N[N.length-1].last_line,first_column:N[N.length-(ot||1)].first_column,last_column:N[N.length-1].last_column},vt&&(K._$.range=[N[N.length-(ot||1)].range[0],N[N.length-1].range[1]]),ut=this.performAction.apply(K,[q,z,tt,Nt.yy,U[1],rt,N].concat(nt)),typeof ut<"u")return ut;ot&&(ct=ct.slice(0,-1*ot*2),rt=rt.slice(0,-1*ot),N=N.slice(0,-1*ot)),ct.push(this.productions_[U[1]][0]),rt.push(K.$),N.push(K._$),Dt=Z[ct[ct.length-2]][ct[ct.length-1]],ct.push(Dt);break;case 3:return!0}}return!0}},w=function(){var J={EOF:1,parseError:function(at,ct){if(this.yy.parser)this.yy.parser.parseError(at,ct);else throw new Error(at)},setInput:function(j,at){return this.yy=at||this.yy||{},this._input=j,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var j=this._input[0];this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j;var at=j.match(/(?:\r\n?|\n).*/g);return at?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),j},unput:function(j){var at=j.length,ct=j.split(/(?:\r\n?|\n)/g);this._input=j+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-at),this.offset-=at;var it=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ct.length-1&&(this.yylineno-=ct.length-1);var rt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ct?(ct.length===it.length?this.yylloc.first_column:0)+it[it.length-ct.length].length-ct[0].length:this.yylloc.first_column-at},this.options.ranges&&(this.yylloc.range=[rt[0],rt[0]+this.yyleng-at]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(j){this.unput(this.match.slice(j))},pastInput:function(){var j=this.matched.substr(0,this.matched.length-this.match.length);return(j.length>20?"...":"")+j.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var j=this.match;return j.length<20&&(j+=this._input.substr(0,20-j.length)),(j.substr(0,20)+(j.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var j=this.pastInput(),at=new Array(j.length+1).join("-");return j+this.upcomingInput()+`
`+at+"^"},test_match:function(j,at){var ct,it,rt;if(this.options.backtrack_lexer&&(rt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(rt.yylloc.range=this.yylloc.range.slice(0))),it=j[0].match(/(?:\r\n?|\n).*/g),it&&(this.yylineno+=it.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:it?it[it.length-1].length-it[it.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+j[0].length},this.yytext+=j[0],this.match+=j[0],this.matches=j,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(j[0].length),this.matched+=j[0],ct=this.performAction.call(this,this.yy,this,at,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ct)return ct;if(this._backtrack){for(var N in rt)this[N]=rt[N];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var j,at,ct,it;this._more||(this.yytext="",this.match="");for(var rt=this._currentRules(),N=0;N<rt.length;N++)if(ct=this._input.match(this.rules[rt[N]]),ct&&(!at||ct[0].length>at[0].length)){if(at=ct,it=N,this.options.backtrack_lexer){if(j=this.test_match(ct,rt[N]),j!==!1)return j;if(this._backtrack){at=!1;continue}else return!1}else if(!this.options.flex)break}return at?(j=this.test_match(at,rt[it]),j!==!1?j:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var at=this.next();return at||this.lex()},begin:function(at){this.conditionStack.push(at)},popState:function(){var at=this.conditionStack.length-1;return at>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(at){return at=this.conditionStack.length-1-Math.abs(at||0),at>=0?this.conditionStack[at]:"INITIAL"},pushState:function(at){this.begin(at)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(at,ct,it,rt){switch(it){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return ct.yytext=ct.yytext.trim(),62}},rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return J}();lt.lexer=w;function ht(){this.yy={}}return ht.prototype=lt,lt.Parser=ht,new ht}();vo.parser=vo;const q7=vo;let Nl=[],Ke={},Rn={},mr={},Nn={};const W7={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},Y7={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},H7={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},U7={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},j7=(t,e)=>(Rn[t]===void 0&&(Rn[t]={name:t,type:e,id:Ke.id,text:Ke.text,risk:Ke.risk,verifyMethod:Ke.verifyMethod}),Ke={},Rn[t]),G7=()=>Rn,X7=t=>{Ke!==void 0&&(Ke.id=t)},$7=t=>{Ke!==void 0&&(Ke.text=t)},Q7=t=>{Ke!==void 0&&(Ke.risk=t)},K7=t=>{Ke!==void 0&&(Ke.verifyMethod=t)},Z7=t=>(Nn[t]===void 0&&(Nn[t]={name:t,type:mr.type,docRef:mr.docRef},D.info("Added new requirement: ",t)),mr={},Nn[t]),J7=()=>Nn,t8=t=>{mr!==void 0&&(mr.type=t)},e8=t=>{mr!==void 0&&(mr.docRef=t)},i8=(t,e,i)=>{Nl.push({type:t,src:e,dst:i})},r8=()=>Nl,n8=()=>{Nl=[],Ke={},Rn={},mr={},Nn={},We()},s8={RequirementType:W7,RiskLevel:Y7,VerifyType:H7,Relationships:U7,getConfig:()=>G().req,addRequirement:j7,getRequirements:G7,setNewReqId:X7,setNewReqText:$7,setNewReqRisk:Q7,setNewReqVerifyMethod:K7,setAccTitle:Oe,getAccTitle:Ye,setAccDescription:He,getAccDescription:Ue,addElement:Z7,getElements:J7,setNewElementType:t8,setNewElementDocRef:e8,addRelationship:i8,getRelationships:r8,clear:n8},a8=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,o8=a8,Ao={CONTAINS:"contains",ARROW:"arrow"},l8=(t,e)=>{let i=t.append("defs").append("marker").attr("id",Ao.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");i.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),i.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),i.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",Ao.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},sd={ReqMarkers:Ao,insertLineEndings:l8};let ne={},ch=0;const ad=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",ne.rect_min_width+"px").attr("height",ne.rect_min_height+"px"),od=(t,e,i)=>{let r=ne.rect_min_width/2,n=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",ne.rect_padding).attr("dominant-baseline","hanging"),s=0;i.forEach(h=>{s==0?n.append("tspan").attr("text-anchor","middle").attr("x",ne.rect_min_width/2).attr("dy",0).text(h):n.append("tspan").attr("text-anchor","middle").attr("x",ne.rect_min_width/2).attr("dy",ne.line_height*.75).text(h),s++});let a=1.5*ne.rect_padding,o=s*ne.line_height*.75,l=a+o;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",ne.rect_min_width).attr("y1",l).attr("y2",l),{titleNode:n,y:l}},ld=(t,e,i,r)=>{let n=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",ne.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),s=0;const a=30;let o=[];return i.forEach(l=>{let h=l.length;for(;h>a&&s<3;){let u=l.substring(0,a);l=l.substring(a,l.length),h=l.length,o[o.length]=u,s++}if(s==3){let u=o[o.length-1];o[o.length-1]=u.substring(0,u.length-4)+"..."}else o[o.length]=l;s=0}),o.forEach(l=>{n.append("tspan").attr("x",ne.rect_padding).attr("dy",ne.line_height).text(l)}),n},c8=(t,e,i,r)=>{const n=e.node().getTotalLength(),s=e.node().getPointAtLength(n*.5),a="rel"+ch;ch++;const l=t.append("text").attr("class","req relationshipLabel").attr("id",a).attr("x",s.x).attr("y",s.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+a).attr("class","req reqLabelBox").attr("x",s.x-l.width/2).attr("y",s.y-l.height/2).attr("width",l.width).attr("height",l.height).attr("fill","white").attr("fill-opacity","85%")},h8=function(t,e,i,r,n){const s=i.edge(cn(e.src),cn(e.dst)),a=xr().x(function(l){return l.x}).y(function(l){return l.y}),o=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",a(s.points)).attr("fill","none");e.type==n.db.Relationships.CONTAINS?o.attr("marker-start","url("+yt.getUrl(ne.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+yt.getUrl(ne.arrowMarkerAbsolute)+"#"+sd.ReqMarkers.ARROW+"_line_ending)")),c8(t,o,ne,`<<${e.type}>>`)},u8=(t,e,i)=>{Object.keys(t).forEach(r=>{let n=t[r];r=cn(r),D.info("Added new requirement: ",r);const s=i.append("g").attr("id",r),a="req-"+r,o=ad(s,a);let l=od(s,r+"_title",[`<<${n.type}>>`,`${n.name}`]);ld(s,r+"_body",[`Id: ${n.id}`,`Text: ${n.text}`,`Risk: ${n.risk}`,`Verification: ${n.verifyMethod}`],l.y);const h=o.node().getBBox();e.setNode(r,{width:h.width,height:h.height,shape:"rect",id:r})})},d8=(t,e,i)=>{Object.keys(t).forEach(r=>{let n=t[r];const s=cn(r),a=i.append("g").attr("id",s),o="element-"+s,l=ad(a,o);let h=od(a,o+"_title",["<<Element>>",`${r}`]);ld(a,o+"_body",[`Type: ${n.type||"Not Specified"}`,`Doc Ref: ${n.docRef||"None"}`],h.y);const u=l.node().getBBox();e.setNode(s,{width:u.width,height:u.height,shape:"rect",id:s})})},f8=(t,e)=>(t.forEach(function(i){let r=cn(i.src),n=cn(i.dst);e.setEdge(r,n,{relationship:i})}),t),p8=function(t,e){e.nodes().forEach(function(i){i!==void 0&&e.node(i)!==void 0&&(t.select("#"+i),t.select("#"+i).attr("transform","translate("+(e.node(i).x-e.node(i).width/2)+","+(e.node(i).y-e.node(i).height/2)+" )"))})},cn=t=>t.replace(/\s/g,"").replace(/\./g,"_"),g8=(t,e,i,r)=>{ne=G().requirement;const n=ne.securityLevel;let s;n==="sandbox"&&(s=pt("#i"+e));const o=(n==="sandbox"?pt(s.nodes()[0].contentDocument.body):pt("body")).select(`[id='${e}']`);sd.insertLineEndings(o,ne);const l=new nr({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:ne.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let h=r.db.getRequirements(),u=r.db.getElements(),f=r.db.getRelationships();u8(h,l,o),d8(u,l,o),f8(f,l),ns(l),p8(o,l),f.forEach(function(C){h8(o,C,l,e,r)});const d=ne.rect_padding,p=o.node().getBBox(),y=p.width+d*2,b=p.height+d*2;Ne(o,b,y,ne.useMaxWidth),o.attr("viewBox",`${p.x-d} ${p.y-d} ${y} ${b}`)},y8={draw:g8},m8={parser:q7,db:s8,renderer:y8,styles:o8},x8=Object.freeze(Object.defineProperty({__proto__:null,diagram:m8},Symbol.toStringTag,{value:"Module"}));var Lo=function(){var t=function(it,rt,N,Z){for(N=N||{},Z=it.length;Z--;N[it[Z]]=rt);return N},e=[1,2],i=[1,3],r=[1,4],n=[2,4],s=[1,9],a=[1,11],o=[1,13],l=[1,14],h=[1,16],u=[1,17],f=[1,18],d=[1,24],p=[1,25],y=[1,26],b=[1,27],C=[1,28],E=[1,29],k=[1,30],I=[1,31],R=[1,32],B=[1,33],_=[1,34],O=[1,35],L=[1,36],m=[1,37],v=[1,38],g=[1,39],S=[1,41],x=[1,42],M=[1,43],H=[1,44],P=[1,45],A=[1,46],V=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],F=[4,5,16,50,52,53],T=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],W=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],lt=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],w=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],ht=[68,69,70],J=[1,120],j={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,DOTTED_ARROW:74,SOLID_CROSS:75,DOTTED_CROSS:76,SOLID_POINT:77,DOTTED_POINT:78,TXT:79,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"DOTTED_ARROW",75:"SOLID_CROSS",76:"DOTTED_CROSS",77:"SOLID_POINT",78:"DOTTED_POINT",79:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:function(rt,N,Z,q,tt,z,Q){var $=z.length-1;switch(tt){case 3:return q.apply(z[$]),z[$];case 4:case 9:this.$=[];break;case 5:case 10:z[$-1].push(z[$]),this.$=z[$-1];break;case 6:case 7:case 11:case 12:this.$=z[$];break;case 8:case 13:this.$=[];break;case 15:z[$].type="createParticipant",this.$=z[$];break;case 16:z[$-1].unshift({type:"boxStart",boxData:q.parseBoxData(z[$-2])}),z[$-1].push({type:"boxEnd",boxText:z[$-2]}),this.$=z[$-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(z[$-2]),sequenceIndexStep:Number(z[$-1]),sequenceVisible:!0,signalType:q.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(z[$-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:q.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:q.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:q.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:q.LINETYPE.ACTIVE_START,actor:z[$-1]};break;case 23:this.$={type:"activeEnd",signalType:q.LINETYPE.ACTIVE_END,actor:z[$-1]};break;case 29:q.setDiagramTitle(z[$].substring(6)),this.$=z[$].substring(6);break;case 30:q.setDiagramTitle(z[$].substring(7)),this.$=z[$].substring(7);break;case 31:this.$=z[$].trim(),q.setAccTitle(this.$);break;case 32:case 33:this.$=z[$].trim(),q.setAccDescription(this.$);break;case 34:z[$-1].unshift({type:"loopStart",loopText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.LOOP_START}),z[$-1].push({type:"loopEnd",loopText:z[$-2],signalType:q.LINETYPE.LOOP_END}),this.$=z[$-1];break;case 35:z[$-1].unshift({type:"rectStart",color:q.parseMessage(z[$-2]),signalType:q.LINETYPE.RECT_START}),z[$-1].push({type:"rectEnd",color:q.parseMessage(z[$-2]),signalType:q.LINETYPE.RECT_END}),this.$=z[$-1];break;case 36:z[$-1].unshift({type:"optStart",optText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.OPT_START}),z[$-1].push({type:"optEnd",optText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.OPT_END}),this.$=z[$-1];break;case 37:z[$-1].unshift({type:"altStart",altText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.ALT_START}),z[$-1].push({type:"altEnd",signalType:q.LINETYPE.ALT_END}),this.$=z[$-1];break;case 38:z[$-1].unshift({type:"parStart",parText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.PAR_START}),z[$-1].push({type:"parEnd",signalType:q.LINETYPE.PAR_END}),this.$=z[$-1];break;case 39:z[$-1].unshift({type:"parStart",parText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.PAR_OVER_START}),z[$-1].push({type:"parEnd",signalType:q.LINETYPE.PAR_END}),this.$=z[$-1];break;case 40:z[$-1].unshift({type:"criticalStart",criticalText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.CRITICAL_START}),z[$-1].push({type:"criticalEnd",signalType:q.LINETYPE.CRITICAL_END}),this.$=z[$-1];break;case 41:z[$-1].unshift({type:"breakStart",breakText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.BREAK_START}),z[$-1].push({type:"breakEnd",optText:q.parseMessage(z[$-2]),signalType:q.LINETYPE.BREAK_END}),this.$=z[$-1];break;case 43:this.$=z[$-3].concat([{type:"option",optionText:q.parseMessage(z[$-1]),signalType:q.LINETYPE.CRITICAL_OPTION},z[$]]);break;case 45:this.$=z[$-3].concat([{type:"and",parText:q.parseMessage(z[$-1]),signalType:q.LINETYPE.PAR_AND},z[$]]);break;case 47:this.$=z[$-3].concat([{type:"else",altText:q.parseMessage(z[$-1]),signalType:q.LINETYPE.ALT_ELSE},z[$]]);break;case 48:z[$-3].draw="participant",z[$-3].type="addParticipant",z[$-3].description=q.parseMessage(z[$-1]),this.$=z[$-3];break;case 49:z[$-1].draw="participant",z[$-1].type="addParticipant",this.$=z[$-1];break;case 50:z[$-3].draw="actor",z[$-3].type="addParticipant",z[$-3].description=q.parseMessage(z[$-1]),this.$=z[$-3];break;case 51:z[$-1].draw="actor",z[$-1].type="addParticipant",this.$=z[$-1];break;case 52:z[$-1].type="destroyParticipant",this.$=z[$-1];break;case 53:this.$=[z[$-1],{type:"addNote",placement:z[$-2],actor:z[$-1].actor,text:z[$]}];break;case 54:z[$-2]=[].concat(z[$-1],z[$-1]).slice(0,2),z[$-2][0]=z[$-2][0].actor,z[$-2][1]=z[$-2][1].actor,this.$=[z[$-1],{type:"addNote",placement:q.PLACEMENT.OVER,actor:z[$-2].slice(0,2),text:z[$]}];break;case 55:this.$=[z[$-1],{type:"addLinks",actor:z[$-1].actor,text:z[$]}];break;case 56:this.$=[z[$-1],{type:"addALink",actor:z[$-1].actor,text:z[$]}];break;case 57:this.$=[z[$-1],{type:"addProperties",actor:z[$-1].actor,text:z[$]}];break;case 58:this.$=[z[$-1],{type:"addDetails",actor:z[$-1].actor,text:z[$]}];break;case 61:this.$=[z[$-2],z[$]];break;case 62:this.$=z[$];break;case 63:this.$=q.PLACEMENT.LEFTOF;break;case 64:this.$=q.PLACEMENT.RIGHTOF;break;case 65:this.$=[z[$-4],z[$-1],{type:"addMessage",from:z[$-4].actor,to:z[$-1].actor,signalType:z[$-3],msg:z[$],activate:!0},{type:"activeStart",signalType:q.LINETYPE.ACTIVE_START,actor:z[$-1]}];break;case 66:this.$=[z[$-4],z[$-1],{type:"addMessage",from:z[$-4].actor,to:z[$-1].actor,signalType:z[$-3],msg:z[$]},{type:"activeEnd",signalType:q.LINETYPE.ACTIVE_END,actor:z[$-4]}];break;case 67:this.$=[z[$-3],z[$-1],{type:"addMessage",from:z[$-3].actor,to:z[$-1].actor,signalType:z[$-2],msg:z[$]}];break;case 68:this.$={type:"addParticipant",actor:z[$]};break;case 69:this.$=q.LINETYPE.SOLID_OPEN;break;case 70:this.$=q.LINETYPE.DOTTED_OPEN;break;case 71:this.$=q.LINETYPE.SOLID;break;case 72:this.$=q.LINETYPE.DOTTED;break;case 73:this.$=q.LINETYPE.SOLID_CROSS;break;case 74:this.$=q.LINETYPE.DOTTED_CROSS;break;case 75:this.$=q.LINETYPE.SOLID_POINT;break;case 76:this.$=q.LINETYPE.DOTTED_POINT;break;case 77:this.$=q.parseMessage(z[$].trim().substring(1));break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],n,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:s,5:a,8:8,9:10,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},t(V,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},t(V,[2,7]),t(V,[2,8]),t(V,[2,14]),{12:48,50:m,52:v,53:g},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:A},{22:55,70:A},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(V,[2,29]),t(V,[2,30]),{32:[1,61]},{34:[1,62]},t(V,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:A},{22:72,70:A},{22:73,70:A},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82]},{55:83,57:[1,84],65:[1,85],66:[1,86]},{22:87,70:A},{22:88,70:A},{22:89,70:A},{22:90,70:A},t([5,51,64,71,72,73,74,75,76,77,78,79],[2,68]),t(V,[2,6]),t(V,[2,15]),t(F,[2,9],{10:91}),t(V,[2,17]),{5:[1,93],19:[1,92]},{5:[1,94]},t(V,[2,21]),{5:[1,95]},{5:[1,96]},t(V,[2,24]),t(V,[2,25]),t(V,[2,26]),t(V,[2,27]),t(V,[2,28]),t(V,[2,31]),t(V,[2,32]),t(T,n,{7:97}),t(T,n,{7:98}),t(T,n,{7:99}),t(W,n,{40:100,7:101}),t(lt,n,{42:102,7:103}),t(lt,n,{7:103,42:104}),t(w,n,{45:105,7:106}),t(T,n,{7:107}),{5:[1,109],51:[1,108]},{5:[1,111],51:[1,110]},{5:[1,112]},{22:115,68:[1,113],69:[1,114],70:A},t(ht,[2,69]),t(ht,[2,70]),t(ht,[2,71]),t(ht,[2,72]),t(ht,[2,73]),t(ht,[2,74]),t(ht,[2,75]),t(ht,[2,76]),{22:116,70:A},{22:118,58:117,70:A},{70:[2,63]},{70:[2,64]},{56:119,79:J},{56:121,79:J},{56:122,79:J},{56:123,79:J},{4:[1,126],5:[1,128],11:125,12:127,16:[1,124],50:m,52:v,53:g},{5:[1,129]},t(V,[2,19]),t(V,[2,20]),t(V,[2,22]),t(V,[2,23]),{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,130],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,131],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,132],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{16:[1,133]},{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,49:[1,134],50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{16:[1,135]},{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,48:[1,136],50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{16:[1,137]},{16:[1,138]},{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,47:[1,139],50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{4:s,5:a,8:8,9:10,12:12,13:o,14:l,16:[1,140],17:15,18:h,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:y,33:b,35:C,36:E,37:k,38:I,39:R,41:B,43:_,44:O,46:L,50:m,52:v,53:g,54:S,59:x,60:M,61:H,62:P,70:A},{15:[1,141]},t(V,[2,49]),{15:[1,142]},t(V,[2,51]),t(V,[2,52]),{22:143,70:A},{22:144,70:A},{56:145,79:J},{56:146,79:J},{56:147,79:J},{64:[1,148],79:[2,62]},{5:[2,55]},{5:[2,77]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(V,[2,16]),t(F,[2,10]),{12:149,50:m,52:v,53:g},t(F,[2,12]),t(F,[2,13]),t(V,[2,18]),t(V,[2,34]),t(V,[2,35]),t(V,[2,36]),t(V,[2,37]),{15:[1,150]},t(V,[2,38]),{15:[1,151]},t(V,[2,39]),t(V,[2,40]),{15:[1,152]},t(V,[2,41]),{5:[1,153]},{5:[1,154]},{56:155,79:J},{56:156,79:J},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:157,70:A},t(F,[2,11]),t(W,n,{7:101,40:158}),t(lt,n,{7:103,42:159}),t(w,n,{7:106,45:160}),t(V,[2,48]),t(V,[2,50]),{5:[2,65]},{5:[2,66]},{79:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],85:[2,63],86:[2,64],119:[2,55],120:[2,77],121:[2,56],122:[2,57],123:[2,58],145:[2,67],146:[2,53],147:[2,54],155:[2,65],156:[2,66],157:[2,61],158:[2,47],159:[2,45],160:[2,43]},parseError:function(rt,N){if(N.recoverable)this.trace(rt);else{var Z=new Error(rt);throw Z.hash=N,Z}},parse:function(rt){var N=this,Z=[0],q=[],tt=[null],z=[],Q=this.table,$="",nt=0,mt=0,Nt=2,Bt=1,Gt=z.slice.call(arguments,1),vt=Object.create(this.lexer),gt={yy:{}};for(var dt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,dt)&&(gt.yy[dt]=this.yy[dt]);vt.setInput(rt,gt.yy),gt.yy.lexer=vt,gt.yy.parser=this,typeof vt.yylloc>"u"&&(vt.yylloc={});var kt=vt.yylloc;z.push(kt);var U=vt.options&&vt.options.ranges;typeof gt.yy.parseError=="function"?this.parseError=gt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(){var jt;return jt=q.pop()||vt.lex()||Bt,typeof jt!="number"&&(jt instanceof Array&&(q=jt,jt=q.pop()),jt=N.symbols_[jt]||jt),jt}for(var K,_t,ot,Dt,Wt={},Ht,It,te,At;;){if(_t=Z[Z.length-1],this.defaultActions[_t]?ot=this.defaultActions[_t]:((K===null||typeof K>"u")&&(K=ut()),ot=Q[_t]&&Q[_t][K]),typeof ot>"u"||!ot.length||!ot[0]){var ee="";At=[];for(Ht in Q[_t])this.terminals_[Ht]&&Ht>Nt&&At.push("'"+this.terminals_[Ht]+"'");vt.showPosition?ee="Parse error on line "+(nt+1)+`:
`+vt.showPosition()+`
Expecting `+At.join(", ")+", got '"+(this.terminals_[K]||K)+"'":ee="Parse error on line "+(nt+1)+": Unexpected "+(K==Bt?"end of input":"'"+(this.terminals_[K]||K)+"'"),this.parseError(ee,{text:vt.match,token:this.terminals_[K]||K,line:vt.yylineno,loc:kt,expected:At})}if(ot[0]instanceof Array&&ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_t+", token: "+K);switch(ot[0]){case 1:Z.push(K),tt.push(vt.yytext),z.push(vt.yylloc),Z.push(ot[1]),K=null,mt=vt.yyleng,$=vt.yytext,nt=vt.yylineno,kt=vt.yylloc;break;case 2:if(It=this.productions_[ot[1]][1],Wt.$=tt[tt.length-It],Wt._$={first_line:z[z.length-(It||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-(It||1)].first_column,last_column:z[z.length-1].last_column},U&&(Wt._$.range=[z[z.length-(It||1)].range[0],z[z.length-1].range[1]]),Dt=this.performAction.apply(Wt,[$,mt,nt,gt.yy,ot[1],tt,z].concat(Gt)),typeof Dt<"u")return Dt;It&&(Z=Z.slice(0,-1*It*2),tt=tt.slice(0,-1*It),z=z.slice(0,-1*It)),Z.push(this.productions_[ot[1]][0]),tt.push(Wt.$),z.push(Wt._$),te=Q[Z[Z.length-2]][Z[Z.length-1]],Z.push(te);break;case 3:return!0}}return!0}},at=function(){var it={EOF:1,parseError:function(N,Z){if(this.yy.parser)this.yy.parser.parseError(N,Z);else throw new Error(N)},setInput:function(rt,N){return this.yy=N||this.yy||{},this._input=rt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var rt=this._input[0];this.yytext+=rt,this.yyleng++,this.offset++,this.match+=rt,this.matched+=rt;var N=rt.match(/(?:\r\n?|\n).*/g);return N?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),rt},unput:function(rt){var N=rt.length,Z=rt.split(/(?:\r\n?|\n)/g);this._input=rt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-N),this.offset-=N;var q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Z.length-1&&(this.yylineno-=Z.length-1);var tt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Z?(Z.length===q.length?this.yylloc.first_column:0)+q[q.length-Z.length].length-Z[0].length:this.yylloc.first_column-N},this.options.ranges&&(this.yylloc.range=[tt[0],tt[0]+this.yyleng-N]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(rt){this.unput(this.match.slice(rt))},pastInput:function(){var rt=this.matched.substr(0,this.matched.length-this.match.length);return(rt.length>20?"...":"")+rt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var rt=this.match;return rt.length<20&&(rt+=this._input.substr(0,20-rt.length)),(rt.substr(0,20)+(rt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var rt=this.pastInput(),N=new Array(rt.length+1).join("-");return rt+this.upcomingInput()+`
`+N+"^"},test_match:function(rt,N){var Z,q,tt;if(this.options.backtrack_lexer&&(tt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(tt.yylloc.range=this.yylloc.range.slice(0))),q=rt[0].match(/(?:\r\n?|\n).*/g),q&&(this.yylineno+=q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:q?q[q.length-1].length-q[q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+rt[0].length},this.yytext+=rt[0],this.match+=rt[0],this.matches=rt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(rt[0].length),this.matched+=rt[0],Z=this.performAction.call(this,this.yy,this,N,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Z)return Z;if(this._backtrack){for(var z in tt)this[z]=tt[z];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var rt,N,Z,q;this._more||(this.yytext="",this.match="");for(var tt=this._currentRules(),z=0;z<tt.length;z++)if(Z=this._input.match(this.rules[tt[z]]),Z&&(!N||Z[0].length>N[0].length)){if(N=Z,q=z,this.options.backtrack_lexer){if(rt=this.test_match(Z,tt[z]),rt!==!1)return rt;if(this._backtrack){N=!1;continue}else return!1}else if(!this.options.flex)break}return N?(rt=this.test_match(N,tt[q]),rt!==!1?rt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var N=this.next();return N||this.lex()},begin:function(N){this.conditionStack.push(N)},popState:function(){var N=this.conditionStack.length-1;return N>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(N){return N=this.conditionStack.length-1-Math.abs(N||0),N>=0?this.conditionStack[N]:"INITIAL"},pushState:function(N){this.begin(N)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(N,Z,q,tt){switch(q){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return Z.yytext=Z.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return Z.yytext=Z.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 71;case 56:return 72;case 57:return 75;case 58:return 76;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 68;case 63:return 69;case 64:return 5;case 65:return"INVALID"}},rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65],inclusive:!0}}};return it}();j.lexer=at;function ct(){this.yy={}}return ct.prototype=j,j.Parser=ct,new ct}();Lo.parser=Lo;const b8=Lo;let _n,Ji={},Ol={},Pl={},hn=[],ii=[],Aa=!1,Bo,Xi,Tn,Gr;const k8=function(t){hn.push({name:t.text,wrap:t.wrap===void 0&&Nr()||!!t.wrap,fill:t.color,actorKeys:[]}),Xi=hn.slice(-1)[0]},Fo=function(t,e,i,r){let n=Xi;const s=Ji[t];if(s){if(Xi&&s.box&&Xi!==s.box)throw new Error("A same participant should only be defined in one Box: "+s.name+" can't be in '"+s.box.name+"' and in '"+Xi.name+"' at the same time.");if(n=s.box?s.box:Xi,s.box=n,s&&e===s.name&&i==null)return}(i==null||i.text==null)&&(i={text:e,wrap:null,type:r}),(r==null||i.text==null)&&(i={text:e,wrap:null,type:r}),Ji[t]={box:n,name:e,description:i.text,wrap:i.wrap===void 0&&Nr()||!!i.wrap,prevActor:_n,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},_n&&Ji[_n]&&(Ji[_n].nextActor=t),Xi&&Xi.actorKeys.push(t),_n=t},_8=t=>{let e,i=0;for(e=0;e<ii.length;e++)ii[e].type===Qn.ACTIVE_START&&ii[e].from.actor===t&&i++,ii[e].type===Qn.ACTIVE_END&&ii[e].from.actor===t&&i--;return i},T8=function(t,e,i,r){ii.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Nr()||!!i.wrap,answer:r})},oe=function(t,e,i={text:void 0,wrap:void 0},r,n=!1){if(r===Qn.ACTIVE_END&&_8(t.actor)<1){let a=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw a.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},a}return ii.push({from:t,to:e,message:i.text,wrap:i.wrap===void 0&&Nr()||!!i.wrap,type:r,activate:n}),!0},C8=function(){return hn.length>0},E8=function(){return hn.some(t=>t.name)},S8=function(){return ii},w8=function(){return hn},v8=function(){return Ji},A8=function(){return Ol},L8=function(){return Pl},fs=function(t){return Ji[t]},B8=function(){return Object.keys(Ji)},F8=function(){Aa=!0},I8=function(){Aa=!1},D8=()=>Aa,R8=function(t){Bo=t},Nr=()=>Bo!==void 0?Bo:G().sequence.wrap,N8=function(){Ji={},Ol={},Pl={},hn=[],ii=[],Aa=!1,We()},O8=function(t){const e=t.trim(),i={text:e.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:e.match(/^:?wrap:/)!==null?!0:e.match(/^:?nowrap:/)!==null?!1:void 0};return D.debug("parseMessage:",i),i},P8=function(t){const e=t.match(/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/);let i=e!=null&&e[1]?e[1].trim():"transparent",r=e!=null&&e[2]?e[2].trim():void 0;if(window&&window.CSS)window.CSS.supports("color",i)||(i="transparent",r=t.trim());else{const s=new Option().style;s.color=i,s.color!==i&&(i="transparent",r=t.trim())}return{color:i,text:r!==void 0?Ce(r.replace(/^:?(?:no)?wrap:/,""),G()):void 0,wrap:r!==void 0?r.match(/^:?wrap:/)!==null?!0:r.match(/^:?nowrap:/)!==null?!1:void 0:void 0}},Qn={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32},M8={FILLED:0,OPEN:1},V8={LEFTOF:0,RIGHTOF:1,OVER:2},cd=function(t,e,i){i.text,i.wrap===void 0&&Nr()||i.wrap;const r=[].concat(t,t);ii.push({from:r[0],to:r[1],message:i.text,wrap:i.wrap===void 0&&Nr()||!!i.wrap,type:Qn.NOTE,placement:e})},hd=function(t,e){const i=fs(t);try{let r=Ce(e.text,G());r=r.replace(/&amp;/g,"&"),r=r.replace(/&equals;/g,"=");const n=JSON.parse(r);Ml(i,n)}catch(r){D.error("error while parsing actor link text",r)}},z8=function(t,e){const i=fs(t);try{const a={};let o=Ce(e.text,G());var r=o.indexOf("@");o=o.replace(/&amp;/g,"&"),o=o.replace(/&equals;/g,"=");var n=o.slice(0,r-1).trim(),s=o.slice(r+1).trim();a[n]=s,Ml(i,a)}catch(a){D.error("error while parsing actor link text",a)}};function Ml(t,e){if(t.links==null)t.links=e;else for(let i in e)t.links[i]=e[i]}const ud=function(t,e){const i=fs(t);try{let r=Ce(e.text,G());const n=JSON.parse(r);dd(i,n)}catch(r){D.error("error while parsing actor properties text",r)}};function dd(t,e){if(t.properties==null)t.properties=e;else for(let i in e)t.properties[i]=e[i]}function q8(){Xi=void 0}const fd=function(t,e){const i=fs(t),r=document.getElementById(e.text);try{const n=r.innerHTML,s=JSON.parse(n);s.properties&&dd(i,s.properties),s.links&&Ml(i,s.links)}catch(n){D.error("error while parsing actor details text",n)}},W8=function(t,e){if(t!==void 0&&t.properties!==void 0)return t.properties[e]},pd=function(t){if(Array.isArray(t))t.forEach(function(e){pd(e)});else switch(t.type){case"sequenceIndex":ii.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":Fo(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(Ji[t.actor])throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");Tn=t.actor,Fo(t.actor,t.actor,t.description,t.draw),Ol[t.actor]=ii.length;break;case"destroyParticipant":Gr=t.actor,Pl[t.actor]=ii.length;break;case"activeStart":oe(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":oe(t.actor,void 0,void 0,t.signalType);break;case"addNote":cd(t.actor,t.placement,t.text);break;case"addLinks":hd(t.actor,t.text);break;case"addALink":z8(t.actor,t.text);break;case"addProperties":ud(t.actor,t.text);break;case"addDetails":fd(t.actor,t.text);break;case"addMessage":if(Tn){if(t.to!==Tn)throw new Error("The created participant "+Tn+" does not have an associated creating message after its declaration. Please check the sequence diagram.");Tn=void 0}else if(Gr){if(t.to!==Gr&&t.from!==Gr)throw new Error("The destroyed participant "+Gr+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");Gr=void 0}oe(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":k8(t.boxData);break;case"boxEnd":q8();break;case"loopStart":oe(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":oe(void 0,void 0,void 0,t.signalType);break;case"rectStart":oe(void 0,void 0,t.color,t.signalType);break;case"rectEnd":oe(void 0,void 0,void 0,t.signalType);break;case"optStart":oe(void 0,void 0,t.optText,t.signalType);break;case"optEnd":oe(void 0,void 0,void 0,t.signalType);break;case"altStart":oe(void 0,void 0,t.altText,t.signalType);break;case"else":oe(void 0,void 0,t.altText,t.signalType);break;case"altEnd":oe(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Oe(t.text);break;case"parStart":oe(void 0,void 0,t.parText,t.signalType);break;case"and":oe(void 0,void 0,t.parText,t.signalType);break;case"parEnd":oe(void 0,void 0,void 0,t.signalType);break;case"criticalStart":oe(void 0,void 0,t.criticalText,t.signalType);break;case"option":oe(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":oe(void 0,void 0,void 0,t.signalType);break;case"breakStart":oe(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":oe(void 0,void 0,void 0,t.signalType);break}},hh={addActor:Fo,addMessage:T8,addSignal:oe,addLinks:hd,addDetails:fd,addProperties:ud,autoWrap:Nr,setWrap:R8,enableSequenceNumbers:F8,disableSequenceNumbers:I8,showSequenceNumbers:D8,getMessages:S8,getActors:v8,getCreatedActors:A8,getDestroyedActors:L8,getActor:fs,getActorKeys:B8,getActorProperty:W8,getAccTitle:Ye,getBoxes:w8,getDiagramTitle:je,setDiagramTitle:ni,getConfig:()=>G().sequence,clear:N8,parseMessage:O8,parseBoxData:P8,LINETYPE:Qn,ARROWTYPE:M8,PLACEMENT:V8,addNote:cd,setAccTitle:Oe,apply:pd,setAccDescription:He,getAccDescription:Ue,hasAtLeastOneBox:C8,hasAtLeastOneBoxWithTitle:E8},Y8=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,H8=Y8,Br=18*2,Vl=function(t,e){return ka(t,e)},gd=(t,e)=>{hy(()=>{const i=document.querySelectorAll(t);i.length!==0&&(i[0].addEventListener("mouseover",function(){X8("actor"+e+"_popup")}),i[0].addEventListener("mouseout",function(){$8("actor"+e+"_popup")}))})},U8=function(t,e,i,r,n){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const s=e.links,a=e.actorCnt,o=e.rectData;var l="none";n&&(l="block !important");const h=t.append("g");h.attr("id","actor"+a+"_popup"),h.attr("class","actorPopupMenu"),h.attr("display",l),gd("#actor"+a+"_popup",a);var u="";o.class!==void 0&&(u=" "+o.class);let f=o.width>i?o.width:i;const d=h.append("rect");if(d.attr("class","actorPopupMenuPanel"+u),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",f),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),s!=null){var p=20;for(let C in s){var y=h.append("a"),b=Vr.sanitizeUrl(s[C]);y.attr("xlink:href",b),y.attr("target","_blank"),uT(r)(C,y,o.x+10,o.height+p,f,20,{class:"actor"},r),p+=30}}return d.attr("height",p),{height:o.height+p,width:f}},j8=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},G8=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},X8=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="block")},$8=function(t){var e=document.getElementById(t);e!=null&&(e.style.display="none")},un=function(t,e){let i=0,r=0;const n=e.text.split(yt.lineBreakRegex),[s,a]=mn(e.fontSize);let o=[],l=0,h=()=>e.y;if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":h=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":h=()=>Math.round(e.y+(i+r+e.textMargin)/2);break;case"bottom":case"end":h=()=>Math.round(e.y+(i+r+2*e.textMargin)-e.textMargin);break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[u,f]of n.entries()){e.textMargin!==void 0&&e.textMargin===0&&s!==void 0&&(l=u*s);const d=t.append("text");d.attr("x",e.x),d.attr("y",h()),e.anchor!==void 0&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&d.style("font-family",e.fontFamily),a!==void 0&&d.style("font-size",a),e.fontWeight!==void 0&&d.style("font-weight",e.fontWeight),e.fill!==void 0&&d.attr("fill",e.fill),e.class!==void 0&&d.attr("class",e.class),e.dy!==void 0?d.attr("dy",e.dy):l!==0&&d.attr("dy",l);const p=f||Zh;if(e.tspan){const y=d.append("tspan");y.attr("x",e.x),e.fill!==void 0&&y.attr("fill",e.fill),y.text(p)}else d.text(p);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,i=r),o.push(d)}return o},yd=function(t,e){function i(n,s,a,o,l){return n+","+s+" "+(n+a)+","+s+" "+(n+a)+","+(s+o-l)+" "+(n+a-l*1.2)+","+(s+o)+" "+n+","+(s+o)}const r=t.append("polygon");return r.attr("points",i(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,un(t,e),r};let xi=-1;const md=(t,e,i,r)=>{t.select&&i.forEach(n=>{const s=e[n],a=t.select("#actor"+s.actorCnt);!r.mirrorActors&&s.stopy?a.attr("y2",s.stopy+s.height/2):r.mirrorActors&&a.attr("y2",s.stopy)})},Q8=function(t,e,i,r){const n=r?e.stopy:e.starty,s=e.x+e.width/2,a=n+5,o=t.append("g").lower();var l=o;r||(xi++,l.append("line").attr("id","actor"+xi).attr("x1",s).attr("y1",a).attr("x2",s).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),l=o.append("g"),e.actorCnt=xi,e.links!=null&&(l.attr("id","root-"+xi),gd("#root-"+xi,xi)));const h=Wr();var u="actor";e.properties!=null&&e.properties.class?u=e.properties.class:h.fill="#eaeaea",h.x=e.x,h.y=n,h.width=e.width,h.height=e.height,h.class=u,h.rx=3,h.ry=3;const f=Vl(l,h);if(e.rectData=h,e.properties!=null&&e.properties.icon){const p=e.properties.icon.trim();p.charAt(0)==="@"?H3(l,h.x+h.width-20,h.y+10,p.substr(1)):Y3(l,h.x+h.width-20,h.y+10,p)}zl(i)(e.description,l,h.x,h.y,h.width,h.height,{class:"actor"},i);let d=e.height;if(f.node){const p=f.node().getBBox();e.height=p.height,d=p.height}return d},K8=function(t,e,i,r){const n=r?e.stopy:e.starty,s=e.x+e.width/2,a=n+80;t.lower(),r||(xi++,t.append("line").attr("id","actor"+xi).attr("x1",s).attr("y1",a).attr("x2",s).attr("y2",2e3).attr("class","actor-line").attr("class","200").attr("stroke-width","0.5px").attr("stroke","#999"),e.actorCnt=xi);const o=t.append("g");o.attr("class","actor-man");const l=Wr();l.x=e.x,l.y=n,l.fill="#eaeaea",l.width=e.width,l.height=e.height,l.class="actor",l.rx=3,l.ry=3,o.append("line").attr("id","actor-man-torso"+xi).attr("x1",s).attr("y1",n+25).attr("x2",s).attr("y2",n+45),o.append("line").attr("id","actor-man-arms"+xi).attr("x1",s-Br/2).attr("y1",n+33).attr("x2",s+Br/2).attr("y2",n+33),o.append("line").attr("x1",s-Br/2).attr("y1",n+60).attr("x2",s).attr("y2",n+45),o.append("line").attr("x1",s).attr("y1",n+45).attr("x2",s+Br/2-2).attr("y2",n+60);const h=o.append("circle");h.attr("cx",e.x+e.width/2),h.attr("cy",n+10),h.attr("r",15),h.attr("width",e.width),h.attr("height",e.height);const u=o.node().getBBox();return e.height=u.height,zl(i)(e.description,o,l.x,l.y+35,l.width,l.height,{class:"actor"},i),e.height},Z8=function(t,e,i,r){switch(e.type){case"actor":return K8(t,e,i,r);case"participant":return Q8(t,e,i,r)}},J8=function(t,e,i){const n=t.append("g");xd(n,e),e.name&&zl(i)(e.name,n,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},i),n.lower()},tT=function(t){return t.append("g")},eT=function(t,e,i,r,n){const s=Wr(),a=e.anchored;s.x=e.startx,s.y=e.starty,s.class="activation"+n%3,s.width=e.stopx-e.startx,s.height=i-e.starty,Vl(a,s)},iT=function(t,e,i,r){const{boxMargin:n,boxTextMargin:s,labelBoxHeight:a,labelBoxWidth:o,messageFontFamily:l,messageFontSize:h,messageFontWeight:u}=r,f=t.append("g"),d=function(b,C,E,k){return f.append("line").attr("x1",b).attr("y1",C).attr("x2",E).attr("y2",k).attr("class","loopLine")};d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach(function(b){d(e.startx,b.y,e.stopx,b.y).style("stroke-dasharray","3, 3")});let p=cl();p.text=i,p.x=e.startx,p.y=e.starty,p.fontFamily=l,p.fontSize=h,p.fontWeight=u,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=o||50,p.height=a||20,p.textMargin=s,p.class="labelText",yd(f,p),p=bd(),p.text=e.title,p.x=e.startx+o/2+(e.stopx-e.startx)/2,p.y=e.starty+n+s,p.anchor="middle",p.valign="middle",p.textMargin=s,p.class="loopText",p.fontFamily=l,p.fontSize=h,p.fontWeight=u,p.wrap=!0;let y=un(f,p);return e.sectionTitles!==void 0&&e.sectionTitles.forEach(function(b,C){if(b.message){p.text=b.message,p.x=e.startx+(e.stopx-e.startx)/2,p.y=e.sections[C].y+n+s,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=l,p.fontSize=h,p.fontWeight=u,p.wrap=e.wrap,y=un(f,p);let E=Math.round(y.map(k=>(k._groups||k)[0][0].getBBox().height).reduce((k,I)=>k+I));e.sections[C].height+=E-(n+s)}}),e.height=Math.round(e.stopy-e.starty),f},xd=function(t,e){e1(t,e)},rT=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},nT=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},sT=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},aT=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},oT=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lT=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},cT=function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},bd=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},hT=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},zl=function(){function t(n,s,a,o,l,h,u){const f=s.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("text-anchor","middle").text(n);r(f,u)}function e(n,s,a,o,l,h,u,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:y}=f,[b,C]=mn(d),E=n.split(yt.lineBreakRegex);for(let k=0;k<E.length;k++){const I=k*b-b*(E.length-1)/2,R=s.append("text").attr("x",a+l/2).attr("y",o).style("text-anchor","middle").style("font-size",C).style("font-weight",y).style("font-family",p);R.append("tspan").attr("x",a+l/2).attr("dy",I).text(E[k]),R.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(R,u)}}function i(n,s,a,o,l,h,u,f){const d=s.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,d,a,o,l,h,u,f),r(y,u)}function r(n,s){for(const a in s)s.hasOwnProperty(a)&&n.attr(a,s[a])}return function(n){return n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}}(),uT=function(){function t(n,s,a,o,l,h,u){const f=s.append("text").attr("x",a).attr("y",o).style("text-anchor","start").text(n);r(f,u)}function e(n,s,a,o,l,h,u,f){const{actorFontSize:d,actorFontFamily:p,actorFontWeight:y}=f,b=n.split(yt.lineBreakRegex);for(let C=0;C<b.length;C++){const E=C*d-d*(b.length-1)/2,k=s.append("text").attr("x",a).attr("y",o).style("text-anchor","start").style("font-size",d).style("font-weight",y).style("font-family",p);k.append("tspan").attr("x",a).attr("dy",E).text(b[C]),k.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,u)}}function i(n,s,a,o,l,h,u,f){const d=s.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,d,a,o,l,h,u,f),r(y,u)}function r(n,s){for(const a in s)s.hasOwnProperty(a)&&n.attr(a,s[a])}return function(n){return n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}}(),ce={drawRect:Vl,drawText:un,drawLabel:yd,drawActor:Z8,drawBox:J8,drawPopup:U8,anchorElement:tT,drawActivation:eT,drawLoop:iT,drawBackgroundRect:xd,insertArrowHead:aT,insertArrowFilledHead:oT,insertSequenceNumber:lT,insertArrowCrossHead:cT,insertDatabaseIcon:rT,insertComputerIcon:nT,insertClockIcon:sT,getTextObj:bd,getNoteRect:hT,popupMenu:j8,popdownMenu:G8,fixLifeLineHeights:md,sanitizeUrl:Vr.sanitizeUrl};let et={};const ft={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},addBox:function(t){this.boxes.push(t)},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],boxes:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,_d(G())},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const n=this;let s=0;function a(o){return function(h){s++;const u=n.sequenceItems.length-s+1;n.updateVal(h,"starty",e-u*et.boxMargin,Math.min),n.updateVal(h,"stopy",r+u*et.boxMargin,Math.max),n.updateVal(ft.data,"startx",t-u*et.boxMargin,Math.min),n.updateVal(ft.data,"stopx",i+u*et.boxMargin,Math.max),o!=="activation"&&(n.updateVal(h,"startx",t-u*et.boxMargin,Math.min),n.updateVal(h,"stopx",i+u*et.boxMargin,Math.max),n.updateVal(ft.data,"starty",e-u*et.boxMargin,Math.min),n.updateVal(ft.data,"stopy",r+u*et.boxMargin,Math.max))}}this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},insert:function(t,e,i,r){const n=yt.getMin(t,i),s=yt.getMax(t,i),a=yt.getMin(e,r),o=yt.getMax(e,r);this.updateVal(ft.data,"startx",n,Math.min),this.updateVal(ft.data,"starty",a,Math.min),this.updateVal(ft.data,"stopx",s,Math.max),this.updateVal(ft.data,"stopy",o,Math.max),this.updateBounds(n,a,s,o)},newActivation:function(t,e,i){const r=i[t.from.actor],n=La(t.from.actor).length||0,s=r.x+r.width/2+(n-1)*et.activationWidth/2;this.activations.push({startx:s,starty:this.verticalPos+2,stopx:s+et.activationWidth,stopy:void 0,actor:t.from.actor,anchored:ce.anchorElement(e)})},endActivation:function(t){const e=this.activations.map(function(i){return i.actor}).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},isLoopOverlap:function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:ft.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},saveVerticalPos:function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},resetVerticalPos:function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=yt.getMax(this.data.stopy,this.verticalPos)},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},dT=function(t,e){ft.bumpVerticalPos(et.boxMargin),e.height=et.boxMargin,e.starty=ft.getVerticalPos();const i=Wr();i.x=e.startx,i.y=e.starty,i.width=e.width||et.width,i.class="note";const r=t.append("g"),n=ce.drawRect(r,i),s=cl();s.x=e.startx,s.y=e.starty,s.width=i.width,s.dy="1em",s.text=e.message,s.class="noteText",s.fontFamily=et.noteFontFamily,s.fontSize=et.noteFontSize,s.fontWeight=et.noteFontWeight,s.anchor=et.noteAlign,s.textMargin=et.noteMargin,s.valign="center";const a=un(r,s),o=Math.round(a.map(l=>(l._groups||l)[0][0].getBBox().height).reduce((l,h)=>l+h));n.attr("height",o+2*et.noteMargin),e.height+=o+2*et.noteMargin,ft.bumpVerticalPos(o+2*et.noteMargin),e.stopy=e.starty+o+2*et.noteMargin,e.stopx=e.startx+i.width,ft.insert(e.startx,e.starty,e.stopx,e.stopy),ft.models.addNote(e)},Or=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),Xr=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),Io=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});function fT(t,e){ft.bumpVerticalPos(10);const{startx:i,stopx:r,message:n}=e,s=yt.splitBreaks(n).length,a=Rt.calculateTextDimensions(n,Or(et)),o=a.height/s;e.height+=o,ft.bumpVerticalPos(o);let l,h=a.height-10;const u=a.width;if(i===r){l=ft.getVerticalPos()+h,et.rightAngles||(h+=et.boxMargin,l=ft.getVerticalPos()+h),h+=30;const f=yt.getMax(u/2,et.width/2);ft.insert(i-f,ft.getVerticalPos()-10+h,r+f,ft.getVerticalPos()+30+h)}else h+=et.boxMargin,l=ft.getVerticalPos()+h,ft.insert(i,l-10,r,l);return ft.bumpVerticalPos(h),e.height+=h,e.stopy=e.starty+e.height,ft.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}const pT=function(t,e,i,r){const{startx:n,stopx:s,starty:a,message:o,type:l,sequenceIndex:h,sequenceVisible:u}=e,f=Rt.calculateTextDimensions(o,Or(et)),d=cl();d.x=n,d.y=a+10,d.width=s-n,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=et.messageFontFamily,d.fontSize=et.messageFontSize,d.fontWeight=et.messageFontWeight,d.anchor=et.messageAlign,d.valign="center",d.textMargin=et.wrapPadding,d.tspan=!1,un(t,d);const p=f.width;let y;n===s?et.rightAngles?y=t.append("path").attr("d",`M  ${n},${i} H ${n+yt.getMax(et.width/2,p/2)} V ${i+25} H ${n}`):y=t.append("path").attr("d","M "+n+","+i+" C "+(n+60)+","+(i-10)+" "+(n+60)+","+(i+30)+" "+n+","+(i+20)):(y=t.append("line"),y.attr("x1",n),y.attr("y1",i),y.attr("x2",s),y.attr("y2",i)),l===r.db.LINETYPE.DOTTED||l===r.db.LINETYPE.DOTTED_CROSS||l===r.db.LINETYPE.DOTTED_POINT||l===r.db.LINETYPE.DOTTED_OPEN?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let b="";et.arrowMarkerAbsolute&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(l===r.db.LINETYPE.SOLID||l===r.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+b+"#arrowhead)"),(l===r.db.LINETYPE.SOLID_POINT||l===r.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+b+"#filled-head)"),(l===r.db.LINETYPE.SOLID_CROSS||l===r.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+b+"#crosshead)"),(u||et.showSequenceNumbers)&&(y.attr("marker-start","url("+b+"#sequencenumber)"),t.append("text").attr("x",n).attr("y",i+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))},gT=function(t,e,i,r,n,s,a){let o=0,l=0,h,u=0;for(const f of r){const d=e[f],p=d.box;h&&h!=p&&(a||ft.models.addBox(h),l+=et.boxMargin+h.margin),p&&p!=h&&(a||(p.x=o+l,p.y=n),l+=p.margin),d.width=d.width||et.width,d.height=yt.getMax(d.height||et.height,et.height),d.margin=d.margin||et.actorMargin,u=yt.getMax(u,d.height),i[d.name]&&(l+=d.width/2),d.x=o+l,d.starty=ft.getVerticalPos(),ft.insert(d.x,n,d.x+d.width,d.height),o+=d.width+l,d.box&&(d.box.width=o+p.margin-d.box.x),l=d.margin,h=d.box,ft.models.addActor(d)}h&&!a&&ft.models.addBox(h),ft.bumpVerticalPos(u)},Do=function(t,e,i,r){if(r){let n=0;ft.bumpVerticalPos(et.boxMargin*2);for(const s of i){const a=e[s];a.stopy||(a.stopy=ft.getVerticalPos());const o=ce.drawActor(t,a,et,!0);n=yt.getMax(n,o)}ft.bumpVerticalPos(n+et.boxMargin)}else for(const n of i){const s=e[n];ce.drawActor(t,s,et,!1)}},kd=function(t,e,i,r){let n=0,s=0;for(const a of i){const o=e[a],l=bT(o),h=ce.drawPopup(t,o,l,et,et.forceMenus,r);h.height>n&&(n=h.height),h.width+o.x>s&&(s=h.width+o.x)}return{maxHeight:n,maxWidth:s}},_d=function(t){Te(et,t),t.fontFamily&&(et.actorFontFamily=et.noteFontFamily=et.messageFontFamily=t.fontFamily),t.fontSize&&(et.actorFontSize=et.noteFontSize=et.messageFontSize=t.fontSize),t.fontWeight&&(et.actorFontWeight=et.noteFontWeight=et.messageFontWeight=t.fontWeight)},La=function(t){return ft.activations.filter(function(e){return e.actor===t})},uh=function(t,e){const i=e[t],r=La(t),n=r.reduce(function(a,o){return yt.getMin(a,o.startx)},i.x+i.width/2-1),s=r.reduce(function(a,o){return yt.getMax(a,o.stopx)},i.x+i.width/2+1);return[n,s]};function vi(t,e,i,r,n){ft.bumpVerticalPos(i);let s=r;if(e.id&&e.message&&t[e.id]){const a=t[e.id].width,o=Or(et);e.message=Rt.wrapLabel(`[${e.message}]`,a-2*et.wrapPadding,o),e.width=a,e.wrap=!0;const l=Rt.calculateTextDimensions(e.message,o),h=yt.getMax(l.height,et.labelBoxHeight);s=r+h,D.debug(`${h} - ${e.message}`)}n(e),ft.bumpVerticalPos(s)}function yT(t,e,i,r,n,s,a){function o(h,u){h.x<n[t.from].x?(ft.insert(e.stopx-u,e.starty,e.startx,e.stopy+h.height/2+et.noteMargin),e.stopx=e.stopx+u):(ft.insert(e.startx,e.starty,e.stopx+u,e.stopy+h.height/2+et.noteMargin),e.stopx=e.stopx-u)}function l(h,u){h.x<n[t.to].x?(ft.insert(e.startx-u,e.starty,e.stopx,e.stopy+h.height/2+et.noteMargin),e.startx=e.startx+u):(ft.insert(e.stopx,e.starty,e.startx+u,e.stopy+h.height/2+et.noteMargin),e.startx=e.startx-u)}if(s[t.to]==r){const h=n[t.to],u=h.type=="actor"?Br/2+3:h.width/2+3;o(h,u),h.starty=i-h.height/2,ft.bumpVerticalPos(h.height/2)}else if(a[t.from]==r){const h=n[t.from];if(et.mirrorActors){const u=h.type=="actor"?Br/2:h.width/2;l(h,u)}h.stopy=i-h.height/2,ft.bumpVerticalPos(h.height/2)}else if(a[t.to]==r){const h=n[t.to];if(et.mirrorActors){const u=h.type=="actor"?Br/2+3:h.width/2+3;o(h,u)}h.stopy=i-h.height/2,ft.bumpVerticalPos(h.height/2)}}const mT=function(t,e,i,r){const{securityLevel:n,sequence:s}=G();et=s;let a;n==="sandbox"&&(a=pt("#i"+e));const o=n==="sandbox"?pt(a.nodes()[0].contentDocument.body):pt("body"),l=n==="sandbox"?a.nodes()[0].contentDocument:document;ft.init(),D.debug(r.db);const h=n==="sandbox"?o.select(`[id="${e}"]`):pt(`[id="${e}"]`),u=r.db.getActors(),f=r.db.getCreatedActors(),d=r.db.getDestroyedActors(),p=r.db.getBoxes();let y=r.db.getActorKeys();const b=r.db.getMessages(),C=r.db.getDiagramTitle(),E=r.db.hasAtLeastOneBox(),k=r.db.hasAtLeastOneBoxWithTitle(),I=xT(u,b,r);if(et.height=kT(u,I,p),ce.insertComputerIcon(h),ce.insertDatabaseIcon(h),ce.insertClockIcon(h),E&&(ft.bumpVerticalPos(et.boxMargin),k&&ft.bumpVerticalPos(p[0].textMaxHeight)),et.hideUnusedParticipants===!0){const A=new Set;b.forEach(V=>{A.add(V.from),A.add(V.to)}),y=y.filter(V=>A.has(V))}gT(h,u,f,y,0,b,!1);const R=CT(b,u,I,r);ce.insertArrowHead(h),ce.insertArrowCrossHead(h),ce.insertArrowFilledHead(h),ce.insertSequenceNumber(h);function B(A,V){const F=ft.endActivation(A);F.starty+18>V&&(F.starty=V-6,V+=12),ce.drawActivation(h,F,V,et,La(A.from.actor).length),ft.insert(F.startx,V-10,F.stopx,V)}let _=1,O=1;const L=[],m=[];b.forEach(function(A,V){let F,T,W;switch(A.type){case r.db.LINETYPE.NOTE:ft.resetVerticalPos(),T=A.noteModel,dT(h,T);break;case r.db.LINETYPE.ACTIVE_START:ft.newActivation(A,h,u);break;case r.db.LINETYPE.ACTIVE_END:B(A,ft.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:vi(R,A,et.boxMargin,et.boxMargin+et.boxTextMargin,lt=>ft.newLoop(lt));break;case r.db.LINETYPE.LOOP_END:F=ft.endLoop(),ce.drawLoop(h,F,"loop",et),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos()),ft.models.addLoop(F);break;case r.db.LINETYPE.RECT_START:vi(R,A,et.boxMargin,et.boxMargin,lt=>ft.newLoop(void 0,lt.message));break;case r.db.LINETYPE.RECT_END:F=ft.endLoop(),m.push(F),ft.models.addLoop(F),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos());break;case r.db.LINETYPE.OPT_START:vi(R,A,et.boxMargin,et.boxMargin+et.boxTextMargin,lt=>ft.newLoop(lt));break;case r.db.LINETYPE.OPT_END:F=ft.endLoop(),ce.drawLoop(h,F,"opt",et),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos()),ft.models.addLoop(F);break;case r.db.LINETYPE.ALT_START:vi(R,A,et.boxMargin,et.boxMargin+et.boxTextMargin,lt=>ft.newLoop(lt));break;case r.db.LINETYPE.ALT_ELSE:vi(R,A,et.boxMargin+et.boxTextMargin,et.boxMargin,lt=>ft.addSectionToLoop(lt));break;case r.db.LINETYPE.ALT_END:F=ft.endLoop(),ce.drawLoop(h,F,"alt",et),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos()),ft.models.addLoop(F);break;case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:vi(R,A,et.boxMargin,et.boxMargin+et.boxTextMargin,lt=>ft.newLoop(lt)),ft.saveVerticalPos();break;case r.db.LINETYPE.PAR_AND:vi(R,A,et.boxMargin+et.boxTextMargin,et.boxMargin,lt=>ft.addSectionToLoop(lt));break;case r.db.LINETYPE.PAR_END:F=ft.endLoop(),ce.drawLoop(h,F,"par",et),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos()),ft.models.addLoop(F);break;case r.db.LINETYPE.AUTONUMBER:_=A.message.start||_,O=A.message.step||O,A.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:vi(R,A,et.boxMargin,et.boxMargin+et.boxTextMargin,lt=>ft.newLoop(lt));break;case r.db.LINETYPE.CRITICAL_OPTION:vi(R,A,et.boxMargin+et.boxTextMargin,et.boxMargin,lt=>ft.addSectionToLoop(lt));break;case r.db.LINETYPE.CRITICAL_END:F=ft.endLoop(),ce.drawLoop(h,F,"critical",et),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos()),ft.models.addLoop(F);break;case r.db.LINETYPE.BREAK_START:vi(R,A,et.boxMargin,et.boxMargin+et.boxTextMargin,lt=>ft.newLoop(lt));break;case r.db.LINETYPE.BREAK_END:F=ft.endLoop(),ce.drawLoop(h,F,"break",et),ft.bumpVerticalPos(F.stopy-ft.getVerticalPos()),ft.models.addLoop(F);break;default:try{W=A.msgModel,W.starty=ft.getVerticalPos(),W.sequenceIndex=_,W.sequenceVisible=r.db.showSequenceNumbers();const lt=fT(h,W);yT(A,W,lt,V,u,f,d),L.push({messageModel:W,lineStartY:lt}),ft.models.addMessage(W)}catch(lt){D.error("error while drawing message",lt)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(A.type)&&(_=_+O)}),D.debug("createdActors",f),D.debug("destroyedActors",d),Do(h,u,y,!1),L.forEach(A=>pT(h,A.messageModel,A.lineStartY,r)),et.mirrorActors&&Do(h,u,y,!0),m.forEach(A=>ce.drawBackgroundRect(h,A)),md(h,u,y,et),ft.models.boxes.forEach(function(A){A.height=ft.getVerticalPos()-A.y,ft.insert(A.x,A.y,A.x+A.width,A.height),A.startx=A.x,A.starty=A.y,A.stopx=A.startx+A.width,A.stopy=A.starty+A.height,A.stroke="rgb(0,0,0, 0.5)",ce.drawBox(h,A,et)}),E&&ft.bumpVerticalPos(et.boxMargin);const v=kd(h,u,y,l),{bounds:g}=ft.getBounds();let S=g.stopy-g.starty;S<v.maxHeight&&(S=v.maxHeight);let x=S+2*et.diagramMarginY;et.mirrorActors&&(x=x-et.boxMargin+et.bottomMarginAdj);let M=g.stopx-g.startx;M<v.maxWidth&&(M=v.maxWidth);const H=M+2*et.diagramMarginX;C&&h.append("text").text(C).attr("x",(g.stopx-g.startx)/2-2*et.diagramMarginX).attr("y",-25),Ne(h,x,H,et.useMaxWidth);const P=C?40:0;h.attr("viewBox",g.startx-et.diagramMarginX+" -"+(et.diagramMarginY+P)+" "+H+" "+(x+P)),D.debug("models:",ft.models)};function xT(t,e,i){const r={};return e.forEach(function(n){if(t[n.to]&&t[n.from]){const s=t[n.to];if(n.placement===i.db.PLACEMENT.LEFTOF&&!s.prevActor||n.placement===i.db.PLACEMENT.RIGHTOF&&!s.nextActor)return;const a=n.placement!==void 0,o=!a,l=a?Xr(et):Or(et),h=n.wrap?Rt.wrapLabel(n.message,et.width-2*et.wrapPadding,l):n.message,f=Rt.calculateTextDimensions(h,l).width+2*et.wrapPadding;o&&n.from===s.nextActor?r[n.to]=yt.getMax(r[n.to]||0,f):o&&n.from===s.prevActor?r[n.from]=yt.getMax(r[n.from]||0,f):o&&n.from===n.to?(r[n.from]=yt.getMax(r[n.from]||0,f/2),r[n.to]=yt.getMax(r[n.to]||0,f/2)):n.placement===i.db.PLACEMENT.RIGHTOF?r[n.from]=yt.getMax(r[n.from]||0,f):n.placement===i.db.PLACEMENT.LEFTOF?r[s.prevActor]=yt.getMax(r[s.prevActor]||0,f):n.placement===i.db.PLACEMENT.OVER&&(s.prevActor&&(r[s.prevActor]=yt.getMax(r[s.prevActor]||0,f/2)),s.nextActor&&(r[n.from]=yt.getMax(r[n.from]||0,f/2)))}}),D.debug("maxMessageWidthPerActor:",r),r}const bT=function(t){let e=0;const i=Io(et);for(const r in t.links){const s=Rt.calculateTextDimensions(r,i).width+2*et.wrapPadding+2*et.boxMargin;e<s&&(e=s)}return e};function kT(t,e,i){let r=0;Object.keys(t).forEach(s=>{const a=t[s];a.wrap&&(a.description=Rt.wrapLabel(a.description,et.width-2*et.wrapPadding,Io(et)));const o=Rt.calculateTextDimensions(a.description,Io(et));a.width=a.wrap?et.width:yt.getMax(et.width,o.width+2*et.wrapPadding),a.height=a.wrap?yt.getMax(o.height,et.height):et.height,r=yt.getMax(r,a.height)});for(const s in e){const a=t[s];if(!a)continue;const o=t[a.nextActor];if(!o){const f=e[s]+et.actorMargin-a.width/2;a.margin=yt.getMax(f,et.actorMargin);continue}const h=e[s]+et.actorMargin-a.width/2-o.width/2;a.margin=yt.getMax(h,et.actorMargin)}let n=0;return i.forEach(s=>{const a=Or(et);let o=s.actorKeys.reduce((u,f)=>u+=t[f].width+(t[f].margin||0),0);o-=2*et.boxTextMargin,s.wrap&&(s.name=Rt.wrapLabel(s.name,o-2*et.wrapPadding,a));const l=Rt.calculateTextDimensions(s.name,a);n=yt.getMax(l.height,n);const h=yt.getMax(o,l.width+2*et.wrapPadding);if(s.margin=et.boxTextMargin,o<h){const u=(h-o)/2;s.margin+=u}}),i.forEach(s=>s.textMaxHeight=n),yt.getMax(r,et.height)}const _T=function(t,e,i){const r=e[t.from].x,n=e[t.to].x,s=t.wrap&&t.message;let a=Rt.calculateTextDimensions(s?Rt.wrapLabel(t.message,et.width,Xr(et)):t.message,Xr(et));const o={width:s?et.width:yt.getMax(et.width,a.width+2*et.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===i.db.PLACEMENT.RIGHTOF?(o.width=s?yt.getMax(et.width,a.width):yt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*et.noteMargin),o.startx=r+(e[t.from].width+et.actorMargin)/2):t.placement===i.db.PLACEMENT.LEFTOF?(o.width=s?yt.getMax(et.width,a.width+2*et.noteMargin):yt.getMax(e[t.from].width/2+e[t.to].width/2,a.width+2*et.noteMargin),o.startx=r-o.width+(e[t.from].width-et.actorMargin)/2):t.to===t.from?(a=Rt.calculateTextDimensions(s?Rt.wrapLabel(t.message,yt.getMax(et.width,e[t.from].width),Xr(et)):t.message,Xr(et)),o.width=s?yt.getMax(et.width,e[t.from].width):yt.getMax(e[t.from].width,et.width,a.width+2*et.noteMargin),o.startx=r+(e[t.from].width-o.width)/2):(o.width=Math.abs(r+e[t.from].width/2-(n+e[t.to].width/2))+et.actorMargin,o.startx=r<n?r+e[t.from].width/2-et.actorMargin/2:n+e[t.to].width/2-et.actorMargin/2),s&&(o.message=Rt.wrapLabel(t.message,o.width-2*et.wrapPadding,Xr(et))),D.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},TT=function(t,e,i){if(![i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT].includes(t.type))return{};const[r,n]=uh(t.from,e),[s,a]=uh(t.to,e),o=r<=s,l=o?n:r;let h=o?s:a;const u=Math.abs(s-a)>2,f=b=>o?-b:b;t.from===t.to?h=l:(t.activate&&!u&&(h+=f(et.activationWidth/2-1)),[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(h+=f(3)));const d=[r,n,s,a],p=Math.abs(l-h);t.wrap&&t.message&&(t.message=Rt.wrapLabel(t.message,yt.getMax(p+2*et.wrapPadding,et.width),Or(et)));const y=Rt.calculateTextDimensions(t.message,Or(et));return{width:yt.getMax(t.wrap?0:y.width+2*et.wrapPadding,p+2*et.wrapPadding,et.width),height:0,startx:l,stopx:h,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}},CT=function(t,e,i,r){const n={},s=[];let a,o,l;return t.forEach(function(h){switch(h.id=Rt.random({length:10}),h.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.PAR_OVER_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:s.push({id:h.id,msg:h.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:h.message&&(a=s.pop(),n[a.id]=a,n[h.id]=a,s.push(a));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:a=s.pop(),n[a.id]=a;break;case r.db.LINETYPE.ACTIVE_START:{const f=e[h.from?h.from.actor:h.to.actor],d=La(h.from?h.from.actor:h.to.actor).length,p=f.x+f.width/2+(d-1)*et.activationWidth/2,y={startx:p,stopx:p+et.activationWidth,actor:h.from.actor,enabled:!0};ft.activations.push(y)}break;case r.db.LINETYPE.ACTIVE_END:{const f=ft.activations.map(d=>d.actor).lastIndexOf(h.from.actor);delete ft.activations.splice(f,1)[0]}break}h.placement!==void 0?(o=_T(h,e,r),h.noteModel=o,s.forEach(f=>{a=f,a.from=yt.getMin(a.from,o.startx),a.to=yt.getMax(a.to,o.startx+o.width),a.width=yt.getMax(a.width,Math.abs(a.from-a.to))-et.labelBoxWidth})):(l=TT(h,e,r),h.msgModel=l,l.startx&&l.stopx&&s.length>0&&s.forEach(f=>{if(a=f,l.startx===l.stopx){const d=e[h.from],p=e[h.to];a.from=yt.getMin(d.x-l.width/2,d.x-d.width/2,a.from),a.to=yt.getMax(p.x+l.width/2,p.x+d.width/2,a.to),a.width=yt.getMax(a.width,Math.abs(a.to-a.from))-et.labelBoxWidth}else a.from=yt.getMin(l.startx,a.from),a.to=yt.getMax(l.stopx,a.to),a.width=yt.getMax(a.width,l.width)-et.labelBoxWidth}))}),ft.activations=[],D.debug("Loop type widths:",n),n},ET={bounds:ft,drawActors:Do,drawActorsPopup:kd,setConf:_d,draw:mT},ST={parser:b8,db:hh,renderer:ET,styles:H8,init:({wrap:t})=>{hh.setWrap(t)}},wT=Object.freeze(Object.defineProperty({__proto__:null,diagram:ST},Symbol.toStringTag,{value:"Module"}));var Ro=function(){var t=function(rt,N,Z,q){for(Z=Z||{},q=rt.length;q--;Z[rt[q]]=N);return Z},e=[1,16],i=[1,17],r=[1,18],n=[1,37],s=[1,38],a=[1,24],o=[1,22],l=[1,23],h=[1,29],u=[1,30],f=[1,31],d=[1,32],p=[1,33],y=[1,34],b=[1,25],C=[1,26],E=[1,27],k=[1,28],I=[1,42],R=[1,39],B=[1,40],_=[1,41],O=[1,43],L=[1,9],m=[1,8,9],v=[1,54],g=[1,55],S=[1,56],x=[1,57],M=[1,58],H=[1,59],P=[1,60],A=[1,8,9,38],V=[1,71],F=[1,8,9,12,13,21,36,38,41,58,59,60,61,62,63,64,69,71],T=[1,8,9,12,13,19,21,36,38,41,45,58,59,60,61,62,63,64,69,71,84,86,87,88,89],W=[13,84,86,87,88,89],lt=[13,63,64,84,86,87,88,89],w=[13,58,59,60,61,62,84,86,87,88,89],ht=[1,90],J=[1,8,9,36,38,41],j=[1,8,9,21],at={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,className:17,classLiteralName:18,GENERICTYPE:19,relationStatement:20,LABEL:21,namespaceStatement:22,classStatement:23,memberStatement:24,annotationStatement:25,clickStatement:26,cssClassStatement:27,noteStatement:28,direction:29,acc_title:30,acc_title_value:31,acc_descr:32,acc_descr_value:33,acc_descr_multiline_value:34,namespaceIdentifier:35,STRUCT_START:36,classStatements:37,STRUCT_STOP:38,NAMESPACE:39,classIdentifier:40,STYLE_SEPARATOR:41,members:42,CLASS:43,ANNOTATION_START:44,ANNOTATION_END:45,MEMBER:46,SEPARATOR:47,relation:48,NOTE_FOR:49,noteText:50,NOTE:51,direction_tb:52,direction_bt:53,direction_rl:54,direction_lr:55,relationType:56,lineType:57,AGGREGATION:58,EXTENSION:59,COMPOSITION:60,DEPENDENCY:61,LOLLIPOP:62,LINE:63,DOTTED_LINE:64,CALLBACK:65,LINK:66,LINK_TARGET:67,CLICK:68,CALLBACK_NAME:69,CALLBACK_ARGS:70,HREF:71,CSSCLASS:72,commentToken:73,textToken:74,graphCodeTokens:75,textNoTagsToken:76,TAGSTART:77,TAGEND:78,"==":79,"--":80,PCT:81,DEFAULT:82,SPACE:83,MINUS:84,keywords:85,UNICODE_TEXT:86,NUM:87,ALPHA:88,BQUOTE_STR:89,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",19:"GENERICTYPE",21:"LABEL",30:"acc_title",31:"acc_title_value",32:"acc_descr",33:"acc_descr_value",34:"acc_descr_multiline_value",36:"STRUCT_START",38:"STRUCT_STOP",39:"NAMESPACE",41:"STYLE_SEPARATOR",43:"CLASS",44:"ANNOTATION_START",45:"ANNOTATION_END",46:"MEMBER",47:"SEPARATOR",49:"NOTE_FOR",51:"NOTE",52:"direction_tb",53:"direction_bt",54:"direction_rl",55:"direction_lr",58:"AGGREGATION",59:"EXTENSION",60:"COMPOSITION",61:"DEPENDENCY",62:"LOLLIPOP",63:"LINE",64:"DOTTED_LINE",65:"CALLBACK",66:"LINK",67:"LINK_TARGET",68:"CLICK",69:"CALLBACK_NAME",70:"CALLBACK_ARGS",71:"HREF",72:"CSSCLASS",75:"graphCodeTokens",77:"TAGSTART",78:"TAGEND",79:"==",80:"--",81:"PCT",82:"DEFAULT",83:"SPACE",84:"MINUS",85:"keywords",86:"UNICODE_TEXT",87:"NUM",88:"ALPHA",89:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,2],[17,1],[17,1],[17,2],[17,2],[17,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[22,4],[22,5],[35,2],[37,1],[37,2],[37,3],[23,1],[23,3],[23,4],[23,6],[40,2],[40,3],[25,4],[42,1],[42,2],[24,1],[24,2],[24,1],[24,1],[20,3],[20,4],[20,4],[20,5],[28,3],[28,2],[29,1],[29,1],[29,1],[29,1],[48,3],[48,2],[48,2],[48,1],[56,1],[56,1],[56,1],[56,1],[56,1],[57,1],[57,1],[26,3],[26,4],[26,3],[26,4],[26,4],[26,5],[26,3],[26,4],[26,4],[26,5],[26,4],[26,5],[26,5],[26,6],[27,3],[73,1],[73,1],[74,1],[74,1],[74,1],[74,1],[74,1],[74,1],[74,1],[76,1],[76,1],[76,1],[76,1],[16,1],[16,1],[16,1],[16,1],[18,1],[50,1]],performAction:function(N,Z,q,tt,z,Q,$){var nt=Q.length-1;switch(z){case 8:this.$=Q[nt-1];break;case 9:case 11:case 12:this.$=Q[nt];break;case 10:case 13:this.$=Q[nt-1]+Q[nt];break;case 14:case 15:this.$=Q[nt-1]+"~"+Q[nt]+"~";break;case 16:tt.addRelation(Q[nt]);break;case 17:Q[nt-1].title=tt.cleanupLabel(Q[nt]),tt.addRelation(Q[nt-1]);break;case 26:this.$=Q[nt].trim(),tt.setAccTitle(this.$);break;case 27:case 28:this.$=Q[nt].trim(),tt.setAccDescription(this.$);break;case 29:tt.addClassesToNamespace(Q[nt-3],Q[nt-1]);break;case 30:tt.addClassesToNamespace(Q[nt-4],Q[nt-1]);break;case 31:this.$=Q[nt],tt.addNamespace(Q[nt]);break;case 32:this.$=[Q[nt]];break;case 33:this.$=[Q[nt-1]];break;case 34:Q[nt].unshift(Q[nt-2]),this.$=Q[nt];break;case 36:tt.setCssClass(Q[nt-2],Q[nt]);break;case 37:tt.addMembers(Q[nt-3],Q[nt-1]);break;case 38:tt.setCssClass(Q[nt-5],Q[nt-3]),tt.addMembers(Q[nt-5],Q[nt-1]);break;case 39:this.$=Q[nt],tt.addClass(Q[nt]);break;case 40:this.$=Q[nt-1],tt.addClass(Q[nt-1]),tt.setClassLabel(Q[nt-1],Q[nt]);break;case 41:tt.addAnnotation(Q[nt],Q[nt-2]);break;case 42:this.$=[Q[nt]];break;case 43:Q[nt].push(Q[nt-1]),this.$=Q[nt];break;case 44:break;case 45:tt.addMember(Q[nt-1],tt.cleanupLabel(Q[nt]));break;case 46:break;case 47:break;case 48:this.$={id1:Q[nt-2],id2:Q[nt],relation:Q[nt-1],relationTitle1:"none",relationTitle2:"none"};break;case 49:this.$={id1:Q[nt-3],id2:Q[nt],relation:Q[nt-1],relationTitle1:Q[nt-2],relationTitle2:"none"};break;case 50:this.$={id1:Q[nt-3],id2:Q[nt],relation:Q[nt-2],relationTitle1:"none",relationTitle2:Q[nt-1]};break;case 51:this.$={id1:Q[nt-4],id2:Q[nt],relation:Q[nt-2],relationTitle1:Q[nt-3],relationTitle2:Q[nt-1]};break;case 52:tt.addNote(Q[nt],Q[nt-1]);break;case 53:tt.addNote(Q[nt]);break;case 54:tt.setDirection("TB");break;case 55:tt.setDirection("BT");break;case 56:tt.setDirection("RL");break;case 57:tt.setDirection("LR");break;case 58:this.$={type1:Q[nt-2],type2:Q[nt],lineType:Q[nt-1]};break;case 59:this.$={type1:"none",type2:Q[nt],lineType:Q[nt-1]};break;case 60:this.$={type1:Q[nt-1],type2:"none",lineType:Q[nt]};break;case 61:this.$={type1:"none",type2:"none",lineType:Q[nt]};break;case 62:this.$=tt.relationType.AGGREGATION;break;case 63:this.$=tt.relationType.EXTENSION;break;case 64:this.$=tt.relationType.COMPOSITION;break;case 65:this.$=tt.relationType.DEPENDENCY;break;case 66:this.$=tt.relationType.LOLLIPOP;break;case 67:this.$=tt.lineType.LINE;break;case 68:this.$=tt.lineType.DOTTED_LINE;break;case 69:case 75:this.$=Q[nt-2],tt.setClickEvent(Q[nt-1],Q[nt]);break;case 70:case 76:this.$=Q[nt-3],tt.setClickEvent(Q[nt-2],Q[nt-1]),tt.setTooltip(Q[nt-2],Q[nt]);break;case 71:this.$=Q[nt-2],tt.setLink(Q[nt-1],Q[nt]);break;case 72:this.$=Q[nt-3],tt.setLink(Q[nt-2],Q[nt-1],Q[nt]);break;case 73:this.$=Q[nt-3],tt.setLink(Q[nt-2],Q[nt-1]),tt.setTooltip(Q[nt-2],Q[nt]);break;case 74:this.$=Q[nt-4],tt.setLink(Q[nt-3],Q[nt-2],Q[nt]),tt.setTooltip(Q[nt-3],Q[nt-1]);break;case 77:this.$=Q[nt-3],tt.setClickEvent(Q[nt-2],Q[nt-1],Q[nt]);break;case 78:this.$=Q[nt-4],tt.setClickEvent(Q[nt-3],Q[nt-2],Q[nt-1]),tt.setTooltip(Q[nt-3],Q[nt]);break;case 79:this.$=Q[nt-3],tt.setLink(Q[nt-2],Q[nt]);break;case 80:this.$=Q[nt-4],tt.setLink(Q[nt-3],Q[nt-1],Q[nt]);break;case 81:this.$=Q[nt-4],tt.setLink(Q[nt-3],Q[nt-1]),tt.setTooltip(Q[nt-3],Q[nt]);break;case 82:this.$=Q[nt-5],tt.setLink(Q[nt-4],Q[nt-2],Q[nt]),tt.setTooltip(Q[nt-4],Q[nt-1]);break;case 83:tt.setCssClass(Q[nt-1],Q[nt]);break}},table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:35,17:19,18:36,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:e,32:i,34:r,35:20,39:n,40:21,43:s,44:a,46:o,47:l,49:h,51:u,52:f,53:d,54:p,55:y,65:b,66:C,68:E,72:k,84:I,86:R,87:B,88:_,89:O},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(L,[2,5],{8:[1,44]}),{8:[1,45]},t(m,[2,16],{21:[1,46]}),t(m,[2,18]),t(m,[2,19]),t(m,[2,20]),t(m,[2,21]),t(m,[2,22]),t(m,[2,23]),t(m,[2,24]),t(m,[2,25]),{31:[1,47]},{33:[1,48]},t(m,[2,28]),t(m,[2,44],{48:49,56:52,57:53,13:[1,50],21:[1,51],58:v,59:g,60:S,61:x,62:M,63:H,64:P}),{36:[1,61]},t(A,[2,35],{36:[1,63],41:[1,62]}),t(m,[2,46]),t(m,[2,47]),{16:64,84:I,86:R,87:B,88:_},{16:35,17:65,18:36,84:I,86:R,87:B,88:_,89:O},{16:35,17:66,18:36,84:I,86:R,87:B,88:_,89:O},{16:35,17:67,18:36,84:I,86:R,87:B,88:_,89:O},{13:[1,68]},{16:35,17:69,18:36,84:I,86:R,87:B,88:_,89:O},{13:V,50:70},t(m,[2,54]),t(m,[2,55]),t(m,[2,56]),t(m,[2,57]),t(F,[2,11],{16:35,18:36,17:72,19:[1,73],84:I,86:R,87:B,88:_,89:O}),t(F,[2,12],{19:[1,74]}),{15:75,16:76,84:I,86:R,87:B,88:_},{16:35,17:77,18:36,84:I,86:R,87:B,88:_,89:O},t(T,[2,97]),t(T,[2,98]),t(T,[2,99]),t(T,[2,100]),t([1,8,9,12,13,19,21,36,38,41,58,59,60,61,62,63,64,69,71],[2,101]),t(L,[2,6],{10:5,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,17:19,35:20,40:21,16:35,18:36,5:78,30:e,32:i,34:r,39:n,43:s,44:a,46:o,47:l,49:h,51:u,52:f,53:d,54:p,55:y,65:b,66:C,68:E,72:k,84:I,86:R,87:B,88:_,89:O}),{5:79,10:5,16:35,17:19,18:36,20:7,22:8,23:9,24:10,25:11,26:12,27:13,28:14,29:15,30:e,32:i,34:r,35:20,39:n,40:21,43:s,44:a,46:o,47:l,49:h,51:u,52:f,53:d,54:p,55:y,65:b,66:C,68:E,72:k,84:I,86:R,87:B,88:_,89:O},t(m,[2,17]),t(m,[2,26]),t(m,[2,27]),{13:[1,81],16:35,17:80,18:36,84:I,86:R,87:B,88:_,89:O},{48:82,56:52,57:53,58:v,59:g,60:S,61:x,62:M,63:H,64:P},t(m,[2,45]),{57:83,63:H,64:P},t(W,[2,61],{56:84,58:v,59:g,60:S,61:x,62:M}),t(lt,[2,62]),t(lt,[2,63]),t(lt,[2,64]),t(lt,[2,65]),t(lt,[2,66]),t(w,[2,67]),t(w,[2,68]),{8:[1,86],23:87,37:85,40:21,43:s},{16:88,84:I,86:R,87:B,88:_},{42:89,46:ht},{45:[1,91]},{13:[1,92]},{13:[1,93]},{69:[1,94],71:[1,95]},{16:96,84:I,86:R,87:B,88:_},{13:V,50:97},t(m,[2,53]),t(m,[2,102]),t(F,[2,13]),t(F,[2,14]),t(F,[2,15]),{36:[2,31]},{15:98,16:76,36:[2,9],84:I,86:R,87:B,88:_},t(J,[2,39],{11:99,12:[1,100]}),t(L,[2,7]),{9:[1,101]},t(j,[2,48]),{16:35,17:102,18:36,84:I,86:R,87:B,88:_,89:O},{13:[1,104],16:35,17:103,18:36,84:I,86:R,87:B,88:_,89:O},t(W,[2,60],{56:105,58:v,59:g,60:S,61:x,62:M}),t(W,[2,59]),{38:[1,106]},{23:87,37:107,40:21,43:s},{8:[1,108],38:[2,32]},t(A,[2,36],{36:[1,109]}),{38:[1,110]},{38:[2,42],42:111,46:ht},{16:35,17:112,18:36,84:I,86:R,87:B,88:_,89:O},t(m,[2,69],{13:[1,113]}),t(m,[2,71],{13:[1,115],67:[1,114]}),t(m,[2,75],{13:[1,116],70:[1,117]}),{13:[1,118]},t(m,[2,83]),t(m,[2,52]),{36:[2,10]},t(J,[2,40]),{13:[1,119]},{1:[2,4]},t(j,[2,50]),t(j,[2,49]),{16:35,17:120,18:36,84:I,86:R,87:B,88:_,89:O},t(W,[2,58]),t(m,[2,29]),{38:[1,121]},{23:87,37:122,38:[2,33],40:21,43:s},{42:123,46:ht},t(A,[2,37]),{38:[2,43]},t(m,[2,41]),t(m,[2,70]),t(m,[2,72]),t(m,[2,73],{67:[1,124]}),t(m,[2,76]),t(m,[2,77],{13:[1,125]}),t(m,[2,79],{13:[1,127],67:[1,126]}),{14:[1,128]},t(j,[2,51]),t(m,[2,30]),{38:[2,34]},{38:[1,129]},t(m,[2,74]),t(m,[2,78]),t(m,[2,80]),t(m,[2,81],{67:[1,130]}),t(J,[2,8]),t(A,[2,38]),t(m,[2,82])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],75:[2,31],98:[2,10],101:[2,4],111:[2,43],122:[2,34]},parseError:function(N,Z){if(Z.recoverable)this.trace(N);else{var q=new Error(N);throw q.hash=Z,q}},parse:function(N){var Z=this,q=[0],tt=[],z=[null],Q=[],$=this.table,nt="",mt=0,Nt=0,Bt=2,Gt=1,vt=Q.slice.call(arguments,1),gt=Object.create(this.lexer),dt={yy:{}};for(var kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,kt)&&(dt.yy[kt]=this.yy[kt]);gt.setInput(N,dt.yy),dt.yy.lexer=gt,dt.yy.parser=this,typeof gt.yylloc>"u"&&(gt.yylloc={});var U=gt.yylloc;Q.push(U);var ut=gt.options&&gt.options.ranges;typeof dt.yy.parseError=="function"?this.parseError=dt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function K(){var Ae;return Ae=tt.pop()||gt.lex()||Gt,typeof Ae!="number"&&(Ae instanceof Array&&(tt=Ae,Ae=tt.pop()),Ae=Z.symbols_[Ae]||Ae),Ae}for(var _t,ot,Dt,Wt,Ht={},It,te,At,ee;;){if(ot=q[q.length-1],this.defaultActions[ot]?Dt=this.defaultActions[ot]:((_t===null||typeof _t>"u")&&(_t=K()),Dt=$[ot]&&$[ot][_t]),typeof Dt>"u"||!Dt.length||!Dt[0]){var jt="";ee=[];for(It in $[ot])this.terminals_[It]&&It>Bt&&ee.push("'"+this.terminals_[It]+"'");gt.showPosition?jt="Parse error on line "+(mt+1)+`:
`+gt.showPosition()+`
Expecting `+ee.join(", ")+", got '"+(this.terminals_[_t]||_t)+"'":jt="Parse error on line "+(mt+1)+": Unexpected "+(_t==Gt?"end of input":"'"+(this.terminals_[_t]||_t)+"'"),this.parseError(jt,{text:gt.match,token:this.terminals_[_t]||_t,line:gt.yylineno,loc:U,expected:ee})}if(Dt[0]instanceof Array&&Dt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ot+", token: "+_t);switch(Dt[0]){case 1:q.push(_t),z.push(gt.yytext),Q.push(gt.yylloc),q.push(Dt[1]),_t=null,Nt=gt.yyleng,nt=gt.yytext,mt=gt.yylineno,U=gt.yylloc;break;case 2:if(te=this.productions_[Dt[1]][1],Ht.$=z[z.length-te],Ht._$={first_line:Q[Q.length-(te||1)].first_line,last_line:Q[Q.length-1].last_line,first_column:Q[Q.length-(te||1)].first_column,last_column:Q[Q.length-1].last_column},ut&&(Ht._$.range=[Q[Q.length-(te||1)].range[0],Q[Q.length-1].range[1]]),Wt=this.performAction.apply(Ht,[nt,Nt,mt,dt.yy,Dt[1],z,Q].concat(vt)),typeof Wt<"u")return Wt;te&&(q=q.slice(0,-1*te*2),z=z.slice(0,-1*te),Q=Q.slice(0,-1*te)),q.push(this.productions_[Dt[1]][0]),z.push(Ht.$),Q.push(Ht._$),At=$[q[q.length-2]][q[q.length-1]],q.push(At);break;case 3:return!0}}return!0}},ct=function(){var rt={EOF:1,parseError:function(Z,q){if(this.yy.parser)this.yy.parser.parseError(Z,q);else throw new Error(Z)},setInput:function(N,Z){return this.yy=Z||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var Z=N.match(/(?:\r\n?|\n).*/g);return Z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var Z=N.length,q=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Z),this.offset-=Z;var tt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),q.length-1&&(this.yylineno-=q.length-1);var z=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:q?(q.length===tt.length?this.yylloc.first_column:0)+tt[tt.length-q.length].length-q[0].length:this.yylloc.first_column-Z},this.options.ranges&&(this.yylloc.range=[z[0],z[0]+this.yyleng-Z]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),Z=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+Z+"^"},test_match:function(N,Z){var q,tt,z;if(this.options.backtrack_lexer&&(z={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(z.yylloc.range=this.yylloc.range.slice(0))),tt=N[0].match(/(?:\r\n?|\n).*/g),tt&&(this.yylineno+=tt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:tt?tt[tt.length-1].length-tt[tt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],q=this.performAction.call(this,this.yy,this,Z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),q)return q;if(this._backtrack){for(var Q in z)this[Q]=z[Q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,Z,q,tt;this._more||(this.yytext="",this.match="");for(var z=this._currentRules(),Q=0;Q<z.length;Q++)if(q=this._input.match(this.rules[z[Q]]),q&&(!Z||q[0].length>Z[0].length)){if(Z=q,tt=Q,this.options.backtrack_lexer){if(N=this.test_match(q,z[Q]),N!==!1)return N;if(this._backtrack){Z=!1;continue}else return!1}else if(!this.options.flex)break}return Z?(N=this.test_match(Z,z[tt]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Z=this.next();return Z||this.lex()},begin:function(Z){this.conditionStack.push(Z)},popState:function(){var Z=this.conditionStack.length-1;return Z>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Z){return Z=this.conditionStack.length-1-Math.abs(Z||0),Z>=0?this.conditionStack[Z]:"INITIAL"},pushState:function(Z){this.begin(Z)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Z,q,tt,z){switch(tt){case 0:return 52;case 1:return 53;case 2:return 54;case 3:return 55;case 4:break;case 5:break;case 6:return this.begin("acc_title"),30;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),32;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 69;case 22:this.popState();break;case 23:return 70;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return this.begin("namespace"),39;case 28:return this.popState(),8;case 29:break;case 30:return this.begin("namespace-body"),36;case 31:return this.popState(),38;case 32:return"EOF_IN_STRUCT";case 33:return 8;case 34:break;case 35:return"EDGE_STATE";case 36:return this.begin("class"),43;case 37:return this.popState(),8;case 38:break;case 39:return this.popState(),this.popState(),38;case 40:return this.begin("class-body"),36;case 41:return this.popState(),38;case 42:return"EOF_IN_STRUCT";case 43:return"EDGE_STATE";case 44:return"OPEN_IN_STRUCT";case 45:break;case 46:return"MEMBER";case 47:return 72;case 48:return 65;case 49:return 66;case 50:return 68;case 51:return 49;case 52:return 51;case 53:return 44;case 54:return 45;case 55:return 71;case 56:this.popState();break;case 57:return"GENERICTYPE";case 58:this.begin("generic");break;case 59:this.popState();break;case 60:return"BQUOTE_STR";case 61:this.begin("bqstring");break;case 62:return 67;case 63:return 67;case 64:return 67;case 65:return 67;case 66:return 59;case 67:return 59;case 68:return 61;case 69:return 61;case 70:return 60;case 71:return 58;case 72:return 62;case 73:return 63;case 74:return 64;case 75:return 21;case 76:return 41;case 77:return 84;case 78:return"DOT";case 79:return"PLUS";case 80:return 81;case 81:return"EQUALS";case 82:return"EQUALS";case 83:return 88;case 84:return 12;case 85:return 14;case 86:return"PUNCTUATION";case 87:return 87;case 88:return 86;case 89:return 83;case 90:return 9}},rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,31,32,33,34,35,36,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},namespace:{rules:[26,27,28,29,30,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},"class-body":{rules:[26,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},class:{rules:[26,37,38,39,40,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},acc_descr:{rules:[9,26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},acc_title:{rules:[7,26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},callback_args:{rules:[22,23,26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},callback_name:{rules:[19,20,21,26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},href:{rules:[26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},struct:{rules:[26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},generic:{rules:[26,47,48,49,50,51,52,53,54,55,56,57,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},bqstring:{rules:[26,47,48,49,50,51,52,53,54,55,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},string:{rules:[24,25,26,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,36,47,48,49,50,51,52,53,54,55,58,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],inclusive:!0}}};return rt}();at.lexer=ct;function it(){this.yy={}}return it.prototype=at,at.Parser=it,new it}();Ro.parser=Ro;const Td=Ro,dh=["#","+","~","-",""];class fh{constructor(e,i){this.memberType=i,this.visibility="",this.classifier="";const r=Ce(e,G());this.parseMember(r)}getDisplayDetails(){let e=this.visibility+Ln(this.id);this.memberType==="method"&&(e+=`(${Ln(this.parameters.trim())})`,this.returnType&&(e+=" : "+Ln(this.returnType))),e=e.trim();const i=this.parseClassifier();return{displayText:e,cssStyle:i}}parseMember(e){let i="";if(this.memberType==="method"){const r=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/,n=e.match(r);if(n){const s=n[1]?n[1].trim():"";if(dh.includes(s)&&(this.visibility=s),this.id=n[2].trim(),this.parameters=n[3]?n[3].trim():"",i=n[4]?n[4].trim():"",this.returnType=n[5]?n[5].trim():"",i===""){const a=this.returnType.substring(this.returnType.length-1);a.match(/[$*]/)&&(i=a,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const r=e.length,n=e.substring(0,1),s=e.substring(r-1);dh.includes(n)&&(this.visibility=n),s.match(/[*?]/)&&(i=s),this.id=e.substring(this.visibility===""?0:1,i===""?r:r-1)}this.classifier=i}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}const Ba="classId-";let ql=[],re={},aa=[],ph=0,Tr={},No=0,Kn=[];const Pr=t=>yt.sanitizeText(t,G()),dn=function(t){const e=yt.sanitizeText(t,G());let i="",r=e;if(e.indexOf("~")>0){const n=e.split("~");r=Pr(n[0]),i=Pr(n[1])}return{className:r,type:i}},vT=function(t,e){const i=yt.sanitizeText(t,G());e&&(e=Pr(e));const{className:r}=dn(i);re[r].label=e},oa=function(t){const e=yt.sanitizeText(t,G()),{className:i,type:r}=dn(e);if(Object.hasOwn(re,i))return;const n=yt.sanitizeText(i,G());re[n]={id:n,type:r,label:n,cssClasses:[],methods:[],members:[],annotations:[],domId:Ba+n+"-"+ph},ph++},Cd=function(t){const e=yt.sanitizeText(t,G());if(e in re)return re[e].domId;throw new Error("Class not found: "+e)},AT=function(){ql=[],re={},aa=[],Kn=[],Kn.push(Sd),Tr={},No=0,We()},LT=function(t){return re[t]},BT=function(){return re},FT=function(){return ql},IT=function(){return aa},DT=function(t){D.debug("Adding relation: "+JSON.stringify(t)),oa(t.id1),oa(t.id2),t.id1=dn(t.id1).className,t.id2=dn(t.id2).className,t.relationTitle1=yt.sanitizeText(t.relationTitle1.trim(),G()),t.relationTitle2=yt.sanitizeText(t.relationTitle2.trim(),G()),ql.push(t)},RT=function(t,e){const i=dn(t).className;re[i].annotations.push(e)},Ed=function(t,e){oa(t);const i=dn(t).className,r=re[i];if(typeof e=="string"){const n=e.trim();n.startsWith("<<")&&n.endsWith(">>")?r.annotations.push(Pr(n.substring(2,n.length-2))):n.indexOf(")")>0?r.methods.push(new fh(n,"method")):n&&r.members.push(new fh(n,"attribute"))}},NT=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(i=>Ed(t,i)))},OT=function(t,e){const i={id:`note${aa.length}`,class:e,text:t};aa.push(i)},PT=function(t){return t.startsWith(":")&&(t=t.substring(1)),Pr(t.trim())},Wl=function(t,e){t.split(",").forEach(function(i){let r=i;i[0].match(/\d/)&&(r=Ba+r),re[r]!==void 0&&re[r].cssClasses.push(e)})},MT=function(t,e){t.split(",").forEach(function(i){e!==void 0&&(re[i].tooltip=Pr(e))})},VT=function(t,e){return e?Tr[e].classes[t].tooltip:re[t].tooltip},zT=function(t,e,i){const r=G();t.split(",").forEach(function(n){let s=n;n[0].match(/\d/)&&(s=Ba+s),re[s]!==void 0&&(re[s].link=Rt.formatUrl(e,r),r.securityLevel==="sandbox"?re[s].linkTarget="_top":typeof i=="string"?re[s].linkTarget=Pr(i):re[s].linkTarget="_blank")}),Wl(t,"clickable")},qT=function(t,e,i){t.split(",").forEach(function(r){WT(r,e,i),re[r].haveCallback=!0}),Wl(t,"clickable")},WT=function(t,e,i){const r=yt.sanitizeText(t,G());if(G().securityLevel!=="loose"||e===void 0)return;const s=r;if(re[s]!==void 0){const a=Cd(s);let o=[];if(typeof i=="string"){o=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let l=0;l<o.length;l++){let h=o[l].trim();h.charAt(0)==='"'&&h.charAt(h.length-1)==='"'&&(h=h.substr(1,h.length-2)),o[l]=h}}o.length===0&&o.push(a),Kn.push(function(){const l=document.querySelector(`[id="${a}"]`);l!==null&&l.addEventListener("click",function(){Rt.runFunc(e,...o)},!1)})}},YT=function(t){Kn.forEach(function(e){e(t)})},HT={LINE:0,DOTTED_LINE:1},UT={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},Sd=function(t){let e=pt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=pt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),pt(t).select("svg").selectAll("g.node").on("mouseover",function(){const n=pt(this);if(n.attr("title")===null)return;const a=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(n.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),n.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),pt(this).classed("hover",!1)})};Kn.push(Sd);let wd="TB";const jT=()=>wd,GT=t=>{wd=t},XT=function(t){Tr[t]===void 0&&(Tr[t]={id:t,classes:{},children:{},domId:Ba+t+"-"+No},No++)},$T=function(t){return Tr[t]},QT=function(){return Tr},KT=function(t,e){Tr[t]!==void 0&&e.map(i=>{re[i].parent=t,Tr[t].classes[i]=re[i]})},la={setAccTitle:Oe,getAccTitle:Ye,getAccDescription:Ue,setAccDescription:He,getConfig:()=>G().class,addClass:oa,bindFunctions:YT,clear:AT,getClass:LT,getClasses:BT,getNotes:IT,addAnnotation:RT,addNote:OT,getRelations:FT,addRelation:DT,getDirection:jT,setDirection:GT,addMember:Ed,addMembers:NT,cleanupLabel:PT,lineType:HT,relationType:UT,setClickEvent:qT,setCssClass:Wl,setLink:zT,getTooltip:VT,setTooltip:MT,lookUpDomId:Cd,setDiagramTitle:ni,getDiagramTitle:je,setClassLabel:vT,addNamespace:XT,addClassesToNamespace:KT,getNamespace:$T,getNamespaces:QT},ZT=t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,vd=ZT;let gh=0;const JT=function(t,e,i,r,n){const s=function(k){switch(k){case n.db.relationType.AGGREGATION:return"aggregation";case n.db.relationType.EXTENSION:return"extension";case n.db.relationType.COMPOSITION:return"composition";case n.db.relationType.DEPENDENCY:return"dependency";case n.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter(k=>!Number.isNaN(k.y));const a=e.points,o=xr().x(function(k){return k.x}).y(function(k){return k.y}).curve(ss),l=t.append("path").attr("d",o(a)).attr("id","edge"+gh).attr("class","relation");let h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),i.relation.lineType==1&&l.attr("class","relation dashed-line"),i.relation.lineType==10&&l.attr("class","relation dotted-line"),i.relation.type1!=="none"&&l.attr("marker-start","url("+h+"#"+s(i.relation.type1)+"Start)"),i.relation.type2!=="none"&&l.attr("marker-end","url("+h+"#"+s(i.relation.type2)+"End)");let u,f;const d=e.points.length;let p=Rt.calcLabelPosition(e.points);u=p.x,f=p.y;let y,b,C,E;if(d%2!==0&&d>1){let k=Rt.calcCardinalityPosition(i.relation.type1!=="none",e.points,e.points[0]),I=Rt.calcCardinalityPosition(i.relation.type2!=="none",e.points,e.points[d-1]);D.debug("cardinality_1_point "+JSON.stringify(k)),D.debug("cardinality_2_point "+JSON.stringify(I)),y=k.x,b=k.y,C=I.x,E=I.y}if(i.title!==void 0){const k=t.append("g").attr("class","classLabel"),I=k.append("text").attr("class","label").attr("x",u).attr("y",f).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=I;const R=I.node().getBBox();k.insert("rect",":first-child").attr("class","box").attr("x",R.x-r.padding/2).attr("y",R.y-r.padding/2).attr("width",R.width+r.padding).attr("height",R.height+r.padding)}D.info("Rendering relation "+JSON.stringify(i)),i.relationTitle1!==void 0&&i.relationTitle1!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",y).attr("y",b).attr("fill","black").attr("font-size","6").text(i.relationTitle1),i.relationTitle2!==void 0&&i.relationTitle2!=="none"&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",C).attr("y",E).attr("fill","black").attr("font-size","6").text(i.relationTitle2),gh++},tC=function(t,e,i,r){D.debug("Rendering class ",e,i);const n=e.id,s={id:n,label:e.id,width:0,height:0},a=t.append("g").attr("id",r.db.lookUpDomId(n)).attr("class","classGroup");let o;e.link?o=a.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let l=!0;e.annotations.forEach(function(I){const R=o.append("tspan").text("«"+I+"»");l||R.attr("dy",i.textHeight),l=!1});let h=Ad(e);const u=o.append("tspan").text(h).attr("class","title");l||u.attr("dy",i.textHeight);const f=o.node().getBBox().height;let d,p,y;if(e.members.length>0){d=a.append("line").attr("x1",0).attr("y1",i.padding+f+i.dividerMargin/2).attr("y2",i.padding+f+i.dividerMargin/2);const I=a.append("text").attr("x",i.padding).attr("y",f+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach(function(R){yh(I,R,l,i),l=!1}),p=I.node().getBBox()}if(e.methods.length>0){y=a.append("line").attr("x1",0).attr("y1",i.padding+f+i.dividerMargin+p.height).attr("y2",i.padding+f+i.dividerMargin+p.height);const I=a.append("text").attr("x",i.padding).attr("y",f+2*i.dividerMargin+p.height+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach(function(R){yh(I,R,l,i),l=!1})}const b=a.node().getBBox();var C=" ";e.cssClasses.length>0&&(C=C+e.cssClasses.join(" "));const k=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",b.width+2*i.padding).attr("height",b.height+i.padding+.5*i.dividerMargin).attr("class",C).node().getBBox().width;return o.node().childNodes.forEach(function(I){I.setAttribute("x",(k-I.getBBox().width)/2)}),e.tooltip&&o.insert("title").text(e.tooltip),d&&d.attr("x2",k),y&&y.attr("x2",k),s.width=k,s.height=b.height+i.padding+.5*i.dividerMargin,s},Ad=function(t){let e=t.id;return t.type&&(e+="<"+Ln(t.type)+">"),e},eC=function(t,e,i,r){D.debug("Rendering note ",e,i);const n=e.id,s={id:n,text:e.text,width:0,height:0},a=t.append("g").attr("id",n).attr("class","classGroup");let o=a.append("text").attr("y",i.textHeight+i.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split(`
`);l.forEach(function(d){D.debug(`Adding line: ${d}`),o.append("tspan").text(d).attr("class","title").attr("dy",i.textHeight)});const h=a.node().getBBox(),f=a.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",h.width+2*i.padding).attr("height",h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return o.node().childNodes.forEach(function(d){d.setAttribute("x",(f-d.getBBox().width)/2)}),s.width=f,s.height=h.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin,s},yh=function(t,e,i,r){const{displayText:n,cssStyle:s}=e.getDisplayDetails(),a=t.append("tspan").attr("x",r.padding).text(n);s!==""&&a.attr("style",e.cssStyle),i||a.attr("dy",r.textHeight)},Xa={getClassTitleString:Ad,drawClass:tC,drawEdge:JT,drawNote:eC};let Is={};const Cs=20,Cn=function(t){const e=Object.entries(Is).find(i=>i[1].label===t);if(e)return e[0]},iC=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},rC=function(t,e,i,r){const n=G().class;Is={},D.info("Rendering diagram "+t);const s=G().securityLevel;let a;s==="sandbox"&&(a=pt("#i"+e));const o=s==="sandbox"?pt(a.nodes()[0].contentDocument.body):pt("body"),l=o.select(`[id='${e}']`);iC(l);const h=new nr({multigraph:!0});h.setGraph({isMultiGraph:!0}),h.setDefaultEdgeLabel(function(){return{}});const u=r.db.getClasses(),f=Object.keys(u);for(const k of f){const I=u[k],R=Xa.drawClass(l,I,n,r);Is[R.id]=R,h.setNode(R.id,R),D.info("Org height: "+R.height)}r.db.getRelations().forEach(function(k){D.info("tjoho"+Cn(k.id1)+Cn(k.id2)+JSON.stringify(k)),h.setEdge(Cn(k.id1),Cn(k.id2),{relation:k},k.title||"DEFAULT")}),r.db.getNotes().forEach(function(k){D.debug(`Adding note: ${JSON.stringify(k)}`);const I=Xa.drawNote(l,k,n,r);Is[I.id]=I,h.setNode(I.id,I),k.class&&k.class in u&&h.setEdge(k.id,Cn(k.class),{relation:{id1:k.id,id2:k.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),ns(h),h.nodes().forEach(function(k){k!==void 0&&h.node(k)!==void 0&&(D.debug("Node "+k+": "+JSON.stringify(h.node(k))),o.select("#"+(r.db.lookUpDomId(k)||k)).attr("transform","translate("+(h.node(k).x-h.node(k).width/2)+","+(h.node(k).y-h.node(k).height/2)+" )"))}),h.edges().forEach(function(k){k!==void 0&&h.edge(k)!==void 0&&(D.debug("Edge "+k.v+" -> "+k.w+": "+JSON.stringify(h.edge(k))),Xa.drawEdge(l,h.edge(k),h.edge(k).relation,n,r))});const y=l.node().getBBox(),b=y.width+Cs*2,C=y.height+Cs*2;Ne(l,C,b,n.useMaxWidth);const E=`${y.x-Cs} ${y.y-Cs} ${b} ${C}`;D.debug(`viewBox ${E}`),l.attr("viewBox",E)},nC={draw:rC},sC={parser:Td,db:la,renderer:nC,styles:vd,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,la.clear()}},aC=Object.freeze(Object.defineProperty({__proto__:null,diagram:sC},Symbol.toStringTag,{value:"Module"})),Yl=t=>yt.sanitizeText(t,G());let Oo={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const oC=function(t,e,i,r){const n=Object.keys(t);D.info("keys:",n),D.info(t),n.forEach(function(s){var a,o;const l=t[s],u={shape:"rect",id:l.id,domId:l.domId,labelText:Yl(l.id),labelStyle:"",style:"fill: none; stroke: black",padding:((a=G().flowchart)==null?void 0:a.padding)??((o=G().class)==null?void 0:o.padding)};e.setNode(l.id,u),Ld(l.classes,e,i,r,l.id),D.info("setNode",u)})},Ld=function(t,e,i,r,n){const s=Object.keys(t);D.info("keys:",s),D.info(t),s.filter(a=>t[a].parent==n).forEach(function(a){var o,l;const h=t[a],u=h.cssClasses.join(" "),f={labelStyle:"",style:""},d=h.label??h.id,p=0,y="class_box",b={labelStyle:f.labelStyle,shape:y,labelText:Yl(d),classData:h,rx:p,ry:p,class:u,style:f.style,id:h.id,domId:h.domId,tooltip:r.db.getTooltip(h.id,n)||"",haveCallback:h.haveCallback,link:h.link,width:h.type==="group"?500:void 0,type:h.type,padding:((o=G().flowchart)==null?void 0:o.padding)??((l=G().class)==null?void 0:l.padding)};e.setNode(h.id,b),n&&e.setParent(h.id,n),D.info("setNode",b)})},lC=function(t,e,i,r){D.info(t),t.forEach(function(n,s){var a,o;const l=n,h="",u={labelStyle:"",style:""},f=l.text,d=0,p="note",y={labelStyle:u.labelStyle,shape:p,labelText:Yl(f),noteData:l,rx:d,ry:d,class:h,style:u.style,id:l.id,domId:l.id,tooltip:"",type:"note",padding:((a=G().flowchart)==null?void 0:a.padding)??((o=G().class)==null?void 0:o.padding)};if(e.setNode(l.id,y),D.info("setNode",y),!l.class||!(l.class in r))return;const b=i+s,C={id:`edgeNote${b}`,classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:pi(Oo.curve,ri)};e.setEdge(l.id,l.class,C,b)})},cC=function(t,e){const i=G().flowchart;let r=0;t.forEach(function(n){var s;r++;const a={classes:"relation",pattern:n.relation.lineType==1?"dashed":"solid",id:"id"+r,arrowhead:n.type==="arrow_open"?"none":"normal",startLabelRight:n.relationTitle1==="none"?"":n.relationTitle1,endLabelLeft:n.relationTitle2==="none"?"":n.relationTitle2,arrowTypeStart:mh(n.relation.type1),arrowTypeEnd:mh(n.relation.type2),style:"fill:none",labelStyle:"",curve:pi(i==null?void 0:i.curve,ri)};if(D.info(a,n),n.style!==void 0){const o=Ci(n.style);a.style=o.style,a.labelStyle=o.labelStyle}n.text=n.title,n.text===void 0?n.style!==void 0&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c",((s=G().flowchart)==null?void 0:s.htmlLabels)??G().htmlLabels?(a.labelType="html",a.label='<span class="edgeLabel">'+n.text+"</span>"):(a.labelType="text",a.label=n.text.replace(yt.lineBreakRegex,`
`),n.style===void 0&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none"),a.labelStyle=a.labelStyle.replace("color:","fill:"))),e.setEdge(n.id1,n.id2,a,r)})},hC=function(t){Oo={...Oo,...t}},uC=async function(t,e,i,r){D.info("Drawing class - ",e);const n=G().flowchart??G().class,s=G().securityLevel;D.info("config:",n);const a=(n==null?void 0:n.nodeSpacing)??50,o=(n==null?void 0:n.rankSpacing)??50,l=new nr({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),h=r.db.getNamespaces(),u=r.db.getClasses(),f=r.db.getRelations(),d=r.db.getNotes();D.info(f),oC(h,l,e,r),Ld(u,l,e,r),cC(f,l),lC(d,l,f.length+1,u);let p;s==="sandbox"&&(p=pt("#i"+e));const y=s==="sandbox"?pt(p.nodes()[0].contentDocument.body):pt("body"),b=y.select(`[id="${e}"]`),C=y.select("#"+e+" g");if(await bl(C,l,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),Rt.insertTitle(b,"classTitleText",(n==null?void 0:n.titleTopMargin)??5,r.db.getDiagramTitle()),qr(l,b,n==null?void 0:n.diagramPadding,n==null?void 0:n.useMaxWidth),!(n!=null&&n.htmlLabels)){const E=s==="sandbox"?p.nodes()[0].contentDocument:document,k=E.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const I of k){const R=I.getBBox(),B=E.createElementNS("http://www.w3.org/2000/svg","rect");B.setAttribute("rx",0),B.setAttribute("ry",0),B.setAttribute("width",R.width),B.setAttribute("height",R.height),I.insertBefore(B,I.firstChild)}}};function mh(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const dC={setConf:hC,draw:uC},fC={parser:Td,db:la,renderer:dC,styles:vd,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,la.clear()}},pC=Object.freeze(Object.defineProperty({__proto__:null,diagram:fC},Symbol.toStringTag,{value:"Module"}));var Po=function(){var t=function(A,V,F,T){for(F=F||{},T=A.length;T--;F[A[T]]=V);return F},e=[1,2],i=[1,3],r=[1,4],n=[2,4],s=[1,9],a=[1,11],o=[1,15],l=[1,16],h=[1,17],u=[1,18],f=[1,30],d=[1,19],p=[1,20],y=[1,21],b=[1,22],C=[1,23],E=[1,25],k=[1,26],I=[1,27],R=[1,28],B=[1,29],_=[1,32],O=[1,33],L=[1,34],m=[1,35],v=[1,31],g=[1,4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],S=[1,4,5,13,14,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],x=[4,5,15,16,18,20,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],M={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,cssClassStatement:11,idStatement:12,DESCR:13,"-->":14,HIDE_EMPTY:15,scale:16,WIDTH:17,COMPOSIT_STATE:18,STRUCT_START:19,STRUCT_STOP:20,STATE_DESCR:21,AS:22,ID:23,FORK:24,JOIN:25,CHOICE:26,CONCURRENT:27,note:28,notePosition:29,NOTE_TEXT:30,direction:31,acc_title:32,acc_title_value:33,acc_descr:34,acc_descr_value:35,acc_descr_multiline_value:36,classDef:37,CLASSDEF_ID:38,CLASSDEF_STYLEOPTS:39,DEFAULT:40,class:41,CLASSENTITY_IDS:42,STYLECLASS:43,direction_tb:44,direction_bt:45,direction_rl:46,direction_lr:47,eol:48,";":49,EDGE_STATE:50,STYLE_SEPARATOR:51,left_of:52,right_of:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",13:"DESCR",14:"-->",15:"HIDE_EMPTY",16:"scale",17:"WIDTH",18:"COMPOSIT_STATE",19:"STRUCT_START",20:"STRUCT_STOP",21:"STATE_DESCR",22:"AS",23:"ID",24:"FORK",25:"JOIN",26:"CHOICE",27:"CONCURRENT",28:"note",30:"NOTE_TEXT",32:"acc_title",33:"acc_title_value",34:"acc_descr",35:"acc_descr_value",36:"acc_descr_multiline_value",37:"classDef",38:"CLASSDEF_ID",39:"CLASSDEF_STYLEOPTS",40:"DEFAULT",41:"class",42:"CLASSENTITY_IDS",43:"STYLECLASS",44:"direction_tb",45:"direction_bt",46:"direction_rl",47:"direction_lr",49:";",50:"EDGE_STATE",51:"STYLE_SEPARATOR",52:"left_of",53:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[31,1],[31,1],[31,1],[31,1],[48,1],[48,1],[12,1],[12,1],[12,3],[12,3],[29,1],[29,1]],performAction:function(V,F,T,W,lt,w,ht){var J=w.length-1;switch(lt){case 3:return W.setRootDoc(w[J]),w[J];case 4:this.$=[];break;case 5:w[J]!="nl"&&(w[J-1].push(w[J]),this.$=w[J-1]);break;case 6:case 7:this.$=w[J];break;case 8:this.$="nl";break;case 11:this.$=w[J];break;case 12:const it=w[J-1];it.description=W.trimColon(w[J]),this.$=it;break;case 13:this.$={stmt:"relation",state1:w[J-2],state2:w[J]};break;case 14:const rt=W.trimColon(w[J]);this.$={stmt:"relation",state1:w[J-3],state2:w[J-1],description:rt};break;case 18:this.$={stmt:"state",id:w[J-3],type:"default",description:"",doc:w[J-1]};break;case 19:var j=w[J],at=w[J-2].trim();if(w[J].match(":")){var ct=w[J].split(":");j=ct[0],at=[at,ct[1]]}this.$={stmt:"state",id:j,type:"default",description:at};break;case 20:this.$={stmt:"state",id:w[J-3],type:"default",description:w[J-5],doc:w[J-1]};break;case 21:this.$={stmt:"state",id:w[J],type:"fork"};break;case 22:this.$={stmt:"state",id:w[J],type:"join"};break;case 23:this.$={stmt:"state",id:w[J],type:"choice"};break;case 24:this.$={stmt:"state",id:W.getDividerId(),type:"divider"};break;case 25:this.$={stmt:"state",id:w[J-1].trim(),note:{position:w[J-2].trim(),text:w[J].trim()}};break;case 28:this.$=w[J].trim(),W.setAccTitle(this.$);break;case 29:case 30:this.$=w[J].trim(),W.setAccDescription(this.$);break;case 31:case 32:this.$={stmt:"classDef",id:w[J-1].trim(),classes:w[J].trim()};break;case 33:this.$={stmt:"applyClass",id:w[J-1].trim(),styleClass:w[J].trim()};break;case 34:W.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 35:W.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 36:W.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 37:W.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 40:case 41:this.$={stmt:"state",id:w[J].trim(),type:"default",description:""};break;case 42:this.$={stmt:"state",id:w[J-2].trim(),classes:[w[J].trim()],type:"default",description:""};break;case 43:this.$={stmt:"state",id:w[J-2].trim(),classes:[w[J].trim()],type:"default",description:""};break}},table:[{3:1,4:e,5:i,6:r},{1:[3]},{3:5,4:e,5:i,6:r},{3:6,4:e,5:i,6:r},t([1,4,5,15,16,18,21,23,24,25,26,27,28,32,34,36,37,41,44,45,46,47,50],n,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:s,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:f,24:d,25:p,26:y,27:b,28:C,31:24,32:E,34:k,36:I,37:R,41:B,44:_,45:O,46:L,47:m,50:v},t(g,[2,5]),{9:36,10:12,11:13,12:14,15:o,16:l,18:h,21:u,23:f,24:d,25:p,26:y,27:b,28:C,31:24,32:E,34:k,36:I,37:R,41:B,44:_,45:O,46:L,47:m,50:v},t(g,[2,7]),t(g,[2,8]),t(g,[2,9]),t(g,[2,10]),t(g,[2,11],{13:[1,37],14:[1,38]}),t(g,[2,15]),{17:[1,39]},t(g,[2,17],{19:[1,40]}),{22:[1,41]},t(g,[2,21]),t(g,[2,22]),t(g,[2,23]),t(g,[2,24]),{29:42,30:[1,43],52:[1,44],53:[1,45]},t(g,[2,27]),{33:[1,46]},{35:[1,47]},t(g,[2,30]),{38:[1,48],40:[1,49]},{42:[1,50]},t(S,[2,40],{51:[1,51]}),t(S,[2,41],{51:[1,52]}),t(g,[2,34]),t(g,[2,35]),t(g,[2,36]),t(g,[2,37]),t(g,[2,6]),t(g,[2,12]),{12:53,23:f,50:v},t(g,[2,16]),t(x,n,{7:54}),{23:[1,55]},{23:[1,56]},{22:[1,57]},{23:[2,44]},{23:[2,45]},t(g,[2,28]),t(g,[2,29]),{39:[1,58]},{39:[1,59]},{43:[1,60]},{23:[1,61]},{23:[1,62]},t(g,[2,13],{13:[1,63]}),{4:s,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,64],21:u,23:f,24:d,25:p,26:y,27:b,28:C,31:24,32:E,34:k,36:I,37:R,41:B,44:_,45:O,46:L,47:m,50:v},t(g,[2,19],{19:[1,65]}),{30:[1,66]},{23:[1,67]},t(g,[2,31]),t(g,[2,32]),t(g,[2,33]),t(S,[2,42]),t(S,[2,43]),t(g,[2,14]),t(g,[2,18]),t(x,n,{7:68}),t(g,[2,25]),t(g,[2,26]),{4:s,5:a,8:8,9:10,10:12,11:13,12:14,15:o,16:l,18:h,20:[1,69],21:u,23:f,24:d,25:p,26:y,27:b,28:C,31:24,32:E,34:k,36:I,37:R,41:B,44:_,45:O,46:L,47:m,50:v},t(g,[2,20])],defaultActions:{5:[2,1],6:[2,2],44:[2,44],45:[2,45]},parseError:function(V,F){if(F.recoverable)this.trace(V);else{var T=new Error(V);throw T.hash=F,T}},parse:function(V){var F=this,T=[0],W=[],lt=[null],w=[],ht=this.table,J="",j=0,at=0,ct=2,it=1,rt=w.slice.call(arguments,1),N=Object.create(this.lexer),Z={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(Z.yy[q]=this.yy[q]);N.setInput(V,Z.yy),Z.yy.lexer=N,Z.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var tt=N.yylloc;w.push(tt);var z=N.options&&N.options.ranges;typeof Z.yy.parseError=="function"?this.parseError=Z.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Q(){var U;return U=W.pop()||N.lex()||it,typeof U!="number"&&(U instanceof Array&&(W=U,U=W.pop()),U=F.symbols_[U]||U),U}for(var $,nt,mt,Nt,Bt={},Gt,vt,gt,dt;;){if(nt=T[T.length-1],this.defaultActions[nt]?mt=this.defaultActions[nt]:(($===null||typeof $>"u")&&($=Q()),mt=ht[nt]&&ht[nt][$]),typeof mt>"u"||!mt.length||!mt[0]){var kt="";dt=[];for(Gt in ht[nt])this.terminals_[Gt]&&Gt>ct&&dt.push("'"+this.terminals_[Gt]+"'");N.showPosition?kt="Parse error on line "+(j+1)+`:
`+N.showPosition()+`
Expecting `+dt.join(", ")+", got '"+(this.terminals_[$]||$)+"'":kt="Parse error on line "+(j+1)+": Unexpected "+($==it?"end of input":"'"+(this.terminals_[$]||$)+"'"),this.parseError(kt,{text:N.match,token:this.terminals_[$]||$,line:N.yylineno,loc:tt,expected:dt})}if(mt[0]instanceof Array&&mt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nt+", token: "+$);switch(mt[0]){case 1:T.push($),lt.push(N.yytext),w.push(N.yylloc),T.push(mt[1]),$=null,at=N.yyleng,J=N.yytext,j=N.yylineno,tt=N.yylloc;break;case 2:if(vt=this.productions_[mt[1]][1],Bt.$=lt[lt.length-vt],Bt._$={first_line:w[w.length-(vt||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(vt||1)].first_column,last_column:w[w.length-1].last_column},z&&(Bt._$.range=[w[w.length-(vt||1)].range[0],w[w.length-1].range[1]]),Nt=this.performAction.apply(Bt,[J,at,j,Z.yy,mt[1],lt,w].concat(rt)),typeof Nt<"u")return Nt;vt&&(T=T.slice(0,-1*vt*2),lt=lt.slice(0,-1*vt),w=w.slice(0,-1*vt)),T.push(this.productions_[mt[1]][0]),lt.push(Bt.$),w.push(Bt._$),gt=ht[T[T.length-2]][T[T.length-1]],T.push(gt);break;case 3:return!0}}return!0}},H=function(){var A={EOF:1,parseError:function(F,T){if(this.yy.parser)this.yy.parser.parseError(F,T);else throw new Error(F)},setInput:function(V,F){return this.yy=F||this.yy||{},this._input=V,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var V=this._input[0];this.yytext+=V,this.yyleng++,this.offset++,this.match+=V,this.matched+=V;var F=V.match(/(?:\r\n?|\n).*/g);return F?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),V},unput:function(V){var F=V.length,T=V.split(/(?:\r\n?|\n)/g);this._input=V+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-F),this.offset-=F;var W=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),T.length-1&&(this.yylineno-=T.length-1);var lt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:T?(T.length===W.length?this.yylloc.first_column:0)+W[W.length-T.length].length-T[0].length:this.yylloc.first_column-F},this.options.ranges&&(this.yylloc.range=[lt[0],lt[0]+this.yyleng-F]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(V){this.unput(this.match.slice(V))},pastInput:function(){var V=this.matched.substr(0,this.matched.length-this.match.length);return(V.length>20?"...":"")+V.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var V=this.match;return V.length<20&&(V+=this._input.substr(0,20-V.length)),(V.substr(0,20)+(V.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var V=this.pastInput(),F=new Array(V.length+1).join("-");return V+this.upcomingInput()+`
`+F+"^"},test_match:function(V,F){var T,W,lt;if(this.options.backtrack_lexer&&(lt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(lt.yylloc.range=this.yylloc.range.slice(0))),W=V[0].match(/(?:\r\n?|\n).*/g),W&&(this.yylineno+=W.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-W[W.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+V[0].length},this.yytext+=V[0],this.match+=V[0],this.matches=V,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(V[0].length),this.matched+=V[0],T=this.performAction.call(this,this.yy,this,F,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),T)return T;if(this._backtrack){for(var w in lt)this[w]=lt[w];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var V,F,T,W;this._more||(this.yytext="",this.match="");for(var lt=this._currentRules(),w=0;w<lt.length;w++)if(T=this._input.match(this.rules[lt[w]]),T&&(!F||T[0].length>F[0].length)){if(F=T,W=w,this.options.backtrack_lexer){if(V=this.test_match(T,lt[w]),V!==!1)return V;if(this._backtrack){F=!1;continue}else return!1}else if(!this.options.flex)break}return F?(V=this.test_match(F,lt[W]),V!==!1?V:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var F=this.next();return F||this.lex()},begin:function(F){this.conditionStack.push(F)},popState:function(){var F=this.conditionStack.length-1;return F>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(F){return F=this.conditionStack.length-1-Math.abs(F||0),F>=0?this.conditionStack[F]:"INITIAL"},pushState:function(F){this.begin(F)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(F,T,W,lt){switch(W){case 0:return 40;case 1:return 44;case 2:return 45;case 3:return 46;case 4:return 47;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),16;case 13:return 17;case 14:this.popState();break;case 15:return this.begin("acc_title"),32;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),34;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),37;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),38;case 25:return this.popState(),39;case 26:return this.pushState("CLASS"),41;case 27:return this.popState(),this.pushState("CLASS_STYLE"),42;case 28:return this.popState(),43;case 29:return this.pushState("SCALE"),16;case 30:return 17;case 31:this.popState();break;case 32:this.pushState("STATE");break;case 33:return this.popState(),T.yytext=T.yytext.slice(0,-8).trim(),24;case 34:return this.popState(),T.yytext=T.yytext.slice(0,-8).trim(),25;case 35:return this.popState(),T.yytext=T.yytext.slice(0,-10).trim(),26;case 36:return this.popState(),T.yytext=T.yytext.slice(0,-8).trim(),24;case 37:return this.popState(),T.yytext=T.yytext.slice(0,-8).trim(),25;case 38:return this.popState(),T.yytext=T.yytext.slice(0,-10).trim(),26;case 39:return 44;case 40:return 45;case 41:return 46;case 42:return 47;case 43:this.pushState("STATE_STRING");break;case 44:return this.pushState("STATE_ID"),"AS";case 45:return this.popState(),"ID";case 46:this.popState();break;case 47:return"STATE_DESCR";case 48:return 18;case 49:this.popState();break;case 50:return this.popState(),this.pushState("struct"),19;case 51:break;case 52:return this.popState(),20;case 53:break;case 54:return this.begin("NOTE"),28;case 55:return this.popState(),this.pushState("NOTE_ID"),52;case 56:return this.popState(),this.pushState("NOTE_ID"),53;case 57:this.popState(),this.pushState("FLOATING_NOTE");break;case 58:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 59:break;case 60:return"NOTE_TEXT";case 61:return this.popState(),"ID";case 62:return this.popState(),this.pushState("NOTE_TEXT"),23;case 63:return this.popState(),T.yytext=T.yytext.substr(2).trim(),30;case 64:return this.popState(),T.yytext=T.yytext.slice(0,-8).trim(),30;case 65:return 6;case 66:return 6;case 67:return 15;case 68:return 50;case 69:return 23;case 70:return T.yytext=T.yytext.trim(),13;case 71:return 14;case 72:return 27;case 73:return 51;case 74:return 5;case 75:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,32,39,40,41,42,51,52,53,54,68,69,70,71,72],inclusive:!1},FLOATING_NOTE_ID:{rules:[61],inclusive:!1},FLOATING_NOTE:{rules:[58,59,60],inclusive:!1},NOTE_TEXT:{rules:[63,64],inclusive:!1},NOTE_ID:{rules:[62],inclusive:!1},NOTE:{rules:[55,56,57],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,30,31],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[45],inclusive:!1},STATE_STRING:{rules:[46,47],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,33,34,35,36,37,38,43,44,48,49,50],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,50,54,65,66,67,68,69,70,71,73,74,75],inclusive:!0}}};return A}();M.lexer=H;function P(){this.yy={}}return P.prototype=M,M.Parser=P,new P}();Po.parser=Po;const Bd=Po,gC="LR",yC="TB",ca="state",Hl="relation",mC="classDef",xC="applyClass",ps="default",Fd="divider",Ul="[*]",Id="start",Dd=Ul,Rd="end",xh="color",bh="fill",bC="bgFill",kC=",";function Nd(){return{}}let Od=gC,ha=[],On=Nd();const Pd=()=>({relations:[],states:{},documents:{}});let ua={root:Pd()},Be=ua.root,Zn=0,kh=0;const _C={LINE:0,DOTTED_LINE:1},TC={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Es=t=>JSON.parse(JSON.stringify(t)),CC=t=>{D.info("Setting root doc",t),ha=t},EC=()=>ha,Ds=(t,e,i)=>{if(e.stmt===Hl)Ds(t,e.state1,!0),Ds(t,e.state2,!1);else if(e.stmt===ca&&(e.id==="[*]"?(e.id=i?t.id+"_start":t.id+"_end",e.start=i):e.id=e.id.trim()),e.doc){const r=[];let n=[],s;for(s=0;s<e.doc.length;s++)if(e.doc[s].type===Fd){const a=Es(e.doc[s]);a.doc=Es(n),r.push(a),n=[]}else n.push(e.doc[s]);if(r.length>0&&n.length>0){const a={stmt:ca,id:eu(),type:"divider",doc:Es(n)};r.push(Es(a)),e.doc=r}e.doc.forEach(a=>Ds(e,a,!0))}},SC=()=>(Ds({id:"root"},{id:"root",doc:ha},!0),{id:"root",doc:ha}),wC=t=>{let e;t.doc?e=t.doc:e=t,D.info(e),Md(!0),D.info("Extract",e),e.forEach(i=>{switch(i.stmt){case ca:Mr(i.id.trim(),i.type,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles);break;case Hl:Vd(i.state1,i.state2,i.description);break;case mC:zd(i.id.trim(),i.classes);break;case xC:jl(i.id.trim(),i.styleClass);break}})},Mr=function(t,e=ps,i=null,r=null,n=null,s=null,a=null,o=null){const l=t==null?void 0:t.trim();Be.states[l]===void 0?(D.info("Adding state ",l,r),Be.states[l]={id:l,descriptions:[],type:e,doc:i,note:n,classes:[],styles:[],textStyles:[]}):(Be.states[l].doc||(Be.states[l].doc=i),Be.states[l].type||(Be.states[l].type=e)),r&&(D.info("Setting state description",l,r),typeof r=="string"&&zo(l,r.trim()),typeof r=="object"&&r.forEach(h=>zo(l,h.trim()))),n&&(Be.states[l].note=n,Be.states[l].note.text=yt.sanitizeText(Be.states[l].note.text,G())),s&&(D.info("Setting state classes",l,s),(typeof s=="string"?[s]:s).forEach(u=>jl(l,u.trim()))),a&&(D.info("Setting state styles",l,a),(typeof a=="string"?[a]:a).forEach(u=>OC(l,u.trim()))),o&&(D.info("Setting state styles",l,a),(typeof o=="string"?[o]:o).forEach(u=>PC(l,u.trim())))},Md=function(t){ua={root:Pd()},Be=ua.root,Zn=0,On=Nd(),t||We()},Jn=function(t){return Be.states[t]},vC=function(){return Be.states},AC=function(){D.info("Documents = ",ua)},LC=function(){return Be.relations};function Mo(t=""){let e=t;return t===Ul&&(Zn++,e=`${Id}${Zn}`),e}function Vo(t="",e=ps){return t===Ul?Id:e}function BC(t=""){let e=t;return t===Dd&&(Zn++,e=`${Rd}${Zn}`),e}function FC(t="",e=ps){return t===Dd?Rd:e}function IC(t,e,i){let r=Mo(t.id.trim()),n=Vo(t.id.trim(),t.type),s=Mo(e.id.trim()),a=Vo(e.id.trim(),e.type);Mr(r,n,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),Mr(s,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),Be.relations.push({id1:r,id2:s,relationTitle:yt.sanitizeText(i,G())})}const Vd=function(t,e,i){if(typeof t=="object")IC(t,e,i);else{const r=Mo(t.trim()),n=Vo(t),s=BC(e.trim()),a=FC(e);Mr(r,n),Mr(s,a),Be.relations.push({id1:r,id2:s,title:yt.sanitizeText(i,G())})}},zo=function(t,e){const i=Be.states[t],r=e.startsWith(":")?e.replace(":","").trim():e;i.descriptions.push(yt.sanitizeText(r,G()))},DC=function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},RC=()=>(kh++,"divider-id-"+kh),zd=function(t,e=""){On[t]===void 0&&(On[t]={id:t,styles:[],textStyles:[]});const i=On[t];e!=null&&e.split(kC).forEach(r=>{const n=r.replace(/([^;]*);/,"$1").trim();if(r.match(xh)){const a=n.replace(bh,bC).replace(xh,bh);i.textStyles.push(a)}i.styles.push(n)})},NC=function(){return On},jl=function(t,e){t.split(",").forEach(function(i){let r=Jn(i);if(r===void 0){const n=i.trim();Mr(n),r=Jn(n)}r.classes.push(e)})},OC=function(t,e){const i=Jn(t);i!==void 0&&i.textStyles.push(e)},PC=function(t,e){const i=Jn(t);i!==void 0&&i.textStyles.push(e)},MC=()=>Od,VC=t=>{Od=t},zC=t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),Qi={getConfig:()=>G().state,addState:Mr,clear:Md,getState:Jn,getStates:vC,getRelations:LC,getClasses:NC,getDirection:MC,addRelation:Vd,getDividerId:RC,setDirection:VC,cleanupLabel:DC,lineType:_C,relationType:TC,logDocuments:AC,getRootDoc:EC,setRootDoc:CC,getRootDocV2:SC,extract:wC,trimColon:zC,getAccTitle:Ye,setAccTitle:Oe,getAccDescription:Ue,setAccDescription:He,addStyleClass:zd,setCssClass:jl,addDescription:zo,setDiagramTitle:ni,getDiagramTitle:je},qC=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,qd=qC,WC=t=>t.append("circle").attr("class","start-state").attr("r",G().state.sizeUnit).attr("cx",G().state.padding+G().state.sizeUnit).attr("cy",G().state.padding+G().state.sizeUnit),YC=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",G().state.textHeight).attr("class","divider").attr("x2",G().state.textHeight*2).attr("y1",0).attr("y2",0),HC=(t,e)=>{const i=t.append("text").attr("x",2*G().state.padding).attr("y",G().state.textHeight+2*G().state.padding).attr("font-size",G().state.fontSize).attr("class","state-title").text(e.id),r=i.node().getBBox();return t.insert("rect",":first-child").attr("x",G().state.padding).attr("y",G().state.padding).attr("width",r.width+2*G().state.padding).attr("height",r.height+2*G().state.padding).attr("rx",G().state.radius),i},UC=(t,e)=>{const i=function(d,p,y){const b=d.append("tspan").attr("x",2*G().state.padding).text(p);y||b.attr("dy",G().state.textHeight)},n=t.append("text").attr("x",2*G().state.padding).attr("y",G().state.textHeight+1.3*G().state.padding).attr("font-size",G().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),s=n.height,a=t.append("text").attr("x",G().state.padding).attr("y",s+G().state.padding*.4+G().state.dividerMargin+G().state.textHeight).attr("class","state-description");let o=!0,l=!0;e.descriptions.forEach(function(d){o||(i(a,d,l),l=!1),o=!1});const h=t.append("line").attr("x1",G().state.padding).attr("y1",G().state.padding+s+G().state.dividerMargin/2).attr("y2",G().state.padding+s+G().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),f=Math.max(u.width,n.width);return h.attr("x2",f+3*G().state.padding),t.insert("rect",":first-child").attr("x",G().state.padding).attr("y",G().state.padding).attr("width",f+2*G().state.padding).attr("height",u.height+s+2*G().state.padding).attr("rx",G().state.radius),t},jC=(t,e,i)=>{const r=G().state.padding,n=2*G().state.padding,s=t.node().getBBox(),a=s.width,o=s.x,l=t.append("text").attr("x",0).attr("y",G().state.titleShift).attr("font-size",G().state.fontSize).attr("class","state-title").text(e.id),u=l.node().getBBox().width+n;let f=Math.max(u,a);f===a&&(f=f+n);let d;const p=t.node().getBBox();e.doc,d=o-r,u>a&&(d=(a-f)/2+r),Math.abs(o-p.x)<r&&u>a&&(d=o-(u-a)/2);const y=1-G().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",y).attr("class",i?"alt-composit":"composit").attr("width",f).attr("height",p.height+G().state.textHeight+G().state.titleShift+1).attr("rx","0"),l.attr("x",d+r),u<=a&&l.attr("x",o+(f-n)/2-u/2+r),t.insert("rect",":first-child").attr("x",d).attr("y",G().state.titleShift-G().state.textHeight-G().state.padding).attr("width",f).attr("height",G().state.textHeight*3).attr("rx",G().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",G().state.titleShift-G().state.textHeight-G().state.padding).attr("width",f).attr("height",p.height+3+2*G().state.textHeight).attr("rx",G().state.radius),t},GC=t=>(t.append("circle").attr("class","end-state-outer").attr("r",G().state.sizeUnit+G().state.miniPadding).attr("cx",G().state.padding+G().state.sizeUnit+G().state.miniPadding).attr("cy",G().state.padding+G().state.sizeUnit+G().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",G().state.sizeUnit).attr("cx",G().state.padding+G().state.sizeUnit+2).attr("cy",G().state.padding+G().state.sizeUnit+2)),XC=(t,e)=>{let i=G().state.forkWidth,r=G().state.forkHeight;if(e.parentId){let n=i;i=r,r=n}return t.append("rect").style("stroke","black").style("fill","black").attr("width",i).attr("height",r).attr("x",G().state.padding).attr("y",G().state.padding)},$C=(t,e,i,r)=>{let n=0;const s=r.append("text");s.style("text-anchor","start"),s.attr("class","noteText");let a=t.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");const o=a.split(yt.lineBreakRegex);let l=1.25*G().state.noteMargin;for(const h of o){const u=h.trim();if(u.length>0){const f=s.append("tspan");if(f.text(u),l===0){const d=f.node().getBBox();l+=d.height}n+=l,f.attr("x",e+G().state.noteMargin),f.attr("y",i+n+1.25*G().state.noteMargin)}}return{textWidth:s.node().getBBox().width,textHeight:n}},QC=(t,e)=>{e.attr("class","state-note");const i=e.append("rect").attr("x",0).attr("y",G().state.padding),r=e.append("g"),{textWidth:n,textHeight:s}=$C(t,0,0,r);return i.attr("height",s+2*G().state.noteMargin),i.attr("width",n+G().state.noteMargin*2),i},_h=function(t,e){const i=e.id,r={id:i,label:e.id,width:0,height:0},n=t.append("g").attr("id",i).attr("class","stateGroup");e.type==="start"&&WC(n),e.type==="end"&&GC(n),(e.type==="fork"||e.type==="join")&&XC(n,e),e.type==="note"&&QC(e.note.text,n),e.type==="divider"&&YC(n),e.type==="default"&&e.descriptions.length===0&&HC(n,e),e.type==="default"&&e.descriptions.length>0&&UC(n,e);const s=n.node().getBBox();return r.width=s.width+2*G().state.padding,r.height=s.height+2*G().state.padding,r};let Th=0;const KC=function(t,e,i){const r=function(l){switch(l){case Qi.relationType.AGGREGATION:return"aggregation";case Qi.relationType.EXTENSION:return"extension";case Qi.relationType.COMPOSITION:return"composition";case Qi.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter(l=>!Number.isNaN(l.y));const n=e.points,s=xr().x(function(l){return l.x}).y(function(l){return l.y}).curve(ss),a=t.append("path").attr("d",s(n)).attr("id","edge"+Th).attr("class","transition");let o="";if(G().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),a.attr("marker-end","url("+o+"#"+r(Qi.relationType.DEPENDENCY)+"End)"),i.title!==void 0){const l=t.append("g").attr("class","stateLabel"),{x:h,y:u}=Rt.calcLabelPosition(e.points),f=yt.getRows(i.title);let d=0;const p=[];let y=0,b=0;for(let k=0;k<=f.length;k++){const I=l.append("text").attr("text-anchor","middle").text(f[k]).attr("x",h).attr("y",u+d),R=I.node().getBBox();y=Math.max(y,R.width),b=Math.min(b,R.x),D.info(R.x,h,u+d),d===0&&(d=I.node().getBBox().height,D.info("Title height",d,u)),p.push(I)}let C=d*f.length;if(f.length>1){const k=(f.length-1)*d*.5;p.forEach((I,R)=>I.attr("y",u+R*d-k)),C=d*f.length}const E=l.node().getBBox();l.insert("rect",":first-child").attr("class","box").attr("x",h-y/2-G().state.padding/2).attr("y",u-C/2-G().state.padding/2-3.5).attr("width",y+G().state.padding).attr("height",C+G().state.padding),D.info(E)}Th++};let ei;const $a={},ZC=function(){},JC=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},tE=function(t,e,i,r){ei=G().state;const n=G().securityLevel;let s;n==="sandbox"&&(s=pt("#i"+e));const a=n==="sandbox"?pt(s.nodes()[0].contentDocument.body):pt("body"),o=n==="sandbox"?s.nodes()[0].contentDocument:document;D.debug("Rendering diagram "+t);const l=a.select(`[id='${e}']`);JC(l);const h=r.db.getRootDoc();Wd(h,l,void 0,!1,a,o,r);const u=ei.padding,f=l.node().getBBox(),d=f.width+u*2,p=f.height+u*2,y=d*1.75;Ne(l,p,y,ei.useMaxWidth),l.attr("viewBox",`${f.x-ei.padding}  ${f.y-ei.padding} `+d+" "+p)},eE=t=>t?t.length*ei.fontSizeFactor:1,Wd=(t,e,i,r,n,s,a)=>{const o=new nr({compound:!0,multigraph:!0});let l,h=!0;for(l=0;l<t.length;l++)if(t[l].stmt==="relation"){h=!1;break}i?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:h?1:ei.edgeLengthFactor,nodeSep:h?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:h?1:ei.edgeLengthFactor,nodeSep:h?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),a.db.extract(t);const u=a.db.getStates(),f=a.db.getRelations(),d=Object.keys(u);for(const E of d){const k=u[E];i&&(k.parentId=i);let I;if(k.doc){let R=e.append("g").attr("id",k.id).attr("class","stateGroup");I=Wd(k.doc,R,k.id,!r,n,s,a);{R=jC(R,k,r);let B=R.node().getBBox();I.width=B.width,I.height=B.height+ei.padding/2,$a[k.id]={y:ei.compositTitleSize}}}else I=_h(e,k);if(k.note){const R={descriptions:[],id:k.id+"-note",note:k.note,type:"note"},B=_h(e,R);k.note.position==="left of"?(o.setNode(I.id+"-note",B),o.setNode(I.id,I)):(o.setNode(I.id,I),o.setNode(I.id+"-note",B)),o.setParent(I.id,I.id+"-group"),o.setParent(I.id+"-note",I.id+"-group")}else o.setNode(I.id,I)}D.debug("Count=",o.nodeCount(),o);let p=0;f.forEach(function(E){p++,D.debug("Setting edge",E),o.setEdge(E.id1,E.id2,{relation:E,width:eE(E.title),height:ei.labelHeight*yt.getRows(E.title).length,labelpos:"c"},"id"+p)}),ns(o),D.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(E){E!==void 0&&o.node(E)!==void 0?(D.warn("Node "+E+": "+JSON.stringify(o.node(E))),n.select("#"+y.id+" #"+E).attr("transform","translate("+(o.node(E).x-o.node(E).width/2)+","+(o.node(E).y+($a[E]?$a[E].y:0)-o.node(E).height/2)+" )"),n.select("#"+y.id+" #"+E).attr("data-x-shift",o.node(E).x-o.node(E).width/2),s.querySelectorAll("#"+y.id+" #"+E+" .divider").forEach(I=>{const R=I.parentElement;let B=0,_=0;R&&(R.parentElement&&(B=R.parentElement.getBBox().width),_=parseInt(R.getAttribute("data-x-shift"),10),Number.isNaN(_)&&(_=0)),I.setAttribute("x1",0-_+8),I.setAttribute("x2",B-_-8)})):D.debug("No Node "+E+": "+JSON.stringify(o.node(E)))});let b=y.getBBox();o.edges().forEach(function(E){E!==void 0&&o.edge(E)!==void 0&&(D.debug("Edge "+E.v+" -> "+E.w+": "+JSON.stringify(o.edge(E))),KC(e,o.edge(E),o.edge(E).relation))}),b=y.getBBox();const C={id:i||"root",label:i||"root",width:0,height:0};return C.width=b.width+2*ei.padding,C.height=b.height+2*ei.padding,D.debug("Doc rendered",C,o),C},iE={setConf:ZC,draw:tE},rE={parser:Bd,db:Qi,renderer:iE,styles:qd,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qi.clear()}},nE=Object.freeze(Object.defineProperty({__proto__:null,diagram:rE},Symbol.toStringTag,{value:"Module"})),Rs="rect",Qa="rectWithTitle",sE="start",aE="end",oE="divider",lE="roundedWithTitle",cE="note",hE="noteGroup",fn="statediagram",uE="state",dE=`${fn}-${uE}`,Yd="transition",fE="note",pE="note-edge",gE=`${Yd} ${pE}`,yE=`${fn}-${fE}`,mE="cluster",xE=`${fn}-${mE}`,bE="cluster-alt",kE=`${fn}-${bE}`,Hd="parent",Ud="note",_E="state",Gl="----",TE=`${Gl}${Ud}`,Ch=`${Gl}${Hd}`,jd="fill:none",Gd="fill: #333",Xd="c",$d="text",Qd="normal";let Ns={},pr=0;const CE=function(t){const e=Object.keys(t);for(const i of e)t[i]},EE=function(t,e){return e.db.extract(e.db.getRootDocV2()),e.db.getClasses()};function SE(t){return t==null?"":t.classes?t.classes.join(" "):""}function Ka(t="",e=0,i="",r=Gl){const n=i!==null&&i.length>0?`${r}${i}`:"";return`${_E}-${t}${n}-${e}`}const vn=(t,e,i,r,n,s)=>{const a=i.id,o=SE(r[a]);if(a!=="root"){let l=Rs;i.start===!0&&(l=sE),i.start===!1&&(l=aE),i.type!==ps&&(l=i.type),Ns[a]||(Ns[a]={id:a,shape:l,description:yt.sanitizeText(a,G()),classes:`${o} ${dE}`});const h=Ns[a];i.description&&(Array.isArray(h.description)?(h.shape=Qa,h.description.push(i.description)):h.description.length>0?(h.shape=Qa,h.description===a?h.description=[i.description]:h.description=[h.description,i.description]):(h.shape=Rs,h.description=i.description),h.description=yt.sanitizeTextOrArray(h.description,G())),h.description.length===1&&h.shape===Qa&&(h.shape=Rs),!h.type&&i.doc&&(D.info("Setting cluster for ",a,qo(i)),h.type="group",h.dir=qo(i),h.shape=i.type===Fd?oE:lE,h.classes=h.classes+" "+xE+" "+(s?kE:""));const u={labelStyle:"",shape:h.shape,labelText:h.description,classes:h.classes,style:"",id:a,dir:h.dir,domId:Ka(a,pr),type:h.type,padding:15};if(u.centerLabel=!0,i.note){const f={labelStyle:"",shape:cE,labelText:i.note.text,classes:yE,style:"",id:a+TE+"-"+pr,domId:Ka(a,pr,Ud),type:h.type,padding:15},d={labelStyle:"",shape:hE,labelText:i.note.text,classes:h.classes,style:"",id:a+Ch,domId:Ka(a,pr,Hd),type:"group",padding:0};pr++;const p=a+Ch;t.setNode(p,d),t.setNode(f.id,f),t.setNode(a,u),t.setParent(a,p),t.setParent(f.id,p);let y=a,b=f.id;i.note.position==="left of"&&(y=f.id,b=a),t.setEdge(y,b,{arrowhead:"none",arrowType:"",style:jd,labelStyle:"",classes:gE,arrowheadStyle:Gd,labelpos:Xd,labelType:$d,thickness:Qd})}else t.setNode(a,u)}e&&e.id!=="root"&&(D.trace("Setting node ",a," to be child of its parent ",e.id),t.setParent(a,e.id)),i.doc&&(D.trace("Adding nodes children "),wE(t,i,i.doc,r,n,!s))},wE=(t,e,i,r,n,s)=>{D.trace("items",i),i.forEach(a=>{switch(a.stmt){case ca:vn(t,e,a,r,n,s);break;case ps:vn(t,e,a,r,n,s);break;case Hl:{vn(t,e,a.state1,r,n,s),vn(t,e,a.state2,r,n,s);const o={id:"edge"+pr,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:jd,labelStyle:"",label:yt.sanitizeText(a.description,G()),arrowheadStyle:Gd,labelpos:Xd,labelType:$d,thickness:Qd,classes:Yd};t.setEdge(a.state1.id,a.state2.id,o,pr),pr++}break}})},qo=(t,e=yC)=>{let i=e;if(t.doc)for(let r=0;r<t.doc.length;r++){const n=t.doc[r];n.stmt==="dir"&&(i=n.value)}return i},vE=async function(t,e,i,r){D.info("Drawing state diagram (v2)",e),Ns={},r.db.getDirection();const{securityLevel:n,state:s}=G(),a=s.nodeSpacing||50,o=s.rankSpacing||50;D.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),D.info(r.db.getRootDocV2());const l=r.db.getStates(),h=new nr({multigraph:!0,compound:!0}).setGraph({rankdir:qo(r.db.getRootDocV2()),nodesep:a,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});vn(h,void 0,r.db.getRootDocV2(),l,r.db,!0);let u;n==="sandbox"&&(u=pt("#i"+e));const f=n==="sandbox"?pt(u.nodes()[0].contentDocument.body):pt("body"),d=f.select(`[id="${e}"]`),p=f.select("#"+e+" g");await bl(p,h,["barb"],fn,e);const y=8;Rt.insertTitle(d,"statediagramTitleText",s.titleTopMargin,r.db.getDiagramTitle());const b=d.node().getBBox(),C=b.width+y*2,E=b.height+y*2;d.attr("class",fn);const k=d.node().getBBox();Ne(d,E,C,s.useMaxWidth);const I=`${k.x-y} ${k.y-y} ${C} ${E}`;D.debug(`viewBox ${I}`),d.attr("viewBox",I);const R=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const B of R){const _=B.getBBox(),O=document.createElementNS("http://www.w3.org/2000/svg",Rs);O.setAttribute("rx",0),O.setAttribute("ry",0),O.setAttribute("width",_.width),O.setAttribute("height",_.height),B.insertBefore(O,B.firstChild)}},AE={setConf:CE,getClasses:EE,draw:vE},LE={parser:Bd,db:Qi,renderer:AE,styles:qd,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Qi.clear()}},BE=Object.freeze(Object.defineProperty({__proto__:null,diagram:LE},Symbol.toStringTag,{value:"Module"}));var Wo=function(){var t=function(f,d,p,y){for(p=p||{},y=f.length;y--;p[f[y]]=d);return p},e=[6,8,10,11,12,14,16,17,18],i=[1,9],r=[1,10],n=[1,11],s=[1,12],a=[1,13],o=[1,14],l={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:function(d,p,y,b,C,E,k){var I=E.length-1;switch(C){case 1:return E[I-1];case 2:this.$=[];break;case 3:E[I-1].push(E[I]),this.$=E[I-1];break;case 4:case 5:this.$=E[I];break;case 6:case 7:this.$=[];break;case 8:b.setDiagramTitle(E[I].substr(6)),this.$=E[I].substr(6);break;case 9:this.$=E[I].trim(),b.setAccTitle(this.$);break;case 10:case 11:this.$=E[I].trim(),b.setAccDescription(this.$);break;case 12:b.addSection(E[I].substr(8)),this.$=E[I].substr(8);break;case 13:b.addTask(E[I-1],E[I]),this.$="task";break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:n,16:s,17:a,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:i,12:r,14:n,16:s,17:a,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:function(d,p){if(p.recoverable)this.trace(d);else{var y=new Error(d);throw y.hash=p,y}},parse:function(d){var p=this,y=[0],b=[],C=[null],E=[],k=this.table,I="",R=0,B=0,_=2,O=1,L=E.slice.call(arguments,1),m=Object.create(this.lexer),v={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(v.yy[g]=this.yy[g]);m.setInput(d,v.yy),v.yy.lexer=m,v.yy.parser=this,typeof m.yylloc>"u"&&(m.yylloc={});var S=m.yylloc;E.push(S);var x=m.options&&m.options.ranges;typeof v.yy.parseError=="function"?this.parseError=v.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function M(){var J;return J=b.pop()||m.lex()||O,typeof J!="number"&&(J instanceof Array&&(b=J,J=b.pop()),J=p.symbols_[J]||J),J}for(var H,P,A,V,F={},T,W,lt,w;;){if(P=y[y.length-1],this.defaultActions[P]?A=this.defaultActions[P]:((H===null||typeof H>"u")&&(H=M()),A=k[P]&&k[P][H]),typeof A>"u"||!A.length||!A[0]){var ht="";w=[];for(T in k[P])this.terminals_[T]&&T>_&&w.push("'"+this.terminals_[T]+"'");m.showPosition?ht="Parse error on line "+(R+1)+`:
`+m.showPosition()+`
Expecting `+w.join(", ")+", got '"+(this.terminals_[H]||H)+"'":ht="Parse error on line "+(R+1)+": Unexpected "+(H==O?"end of input":"'"+(this.terminals_[H]||H)+"'"),this.parseError(ht,{text:m.match,token:this.terminals_[H]||H,line:m.yylineno,loc:S,expected:w})}if(A[0]instanceof Array&&A.length>1)throw new Error("Parse Error: multiple actions possible at state: "+P+", token: "+H);switch(A[0]){case 1:y.push(H),C.push(m.yytext),E.push(m.yylloc),y.push(A[1]),H=null,B=m.yyleng,I=m.yytext,R=m.yylineno,S=m.yylloc;break;case 2:if(W=this.productions_[A[1]][1],F.$=C[C.length-W],F._$={first_line:E[E.length-(W||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-(W||1)].first_column,last_column:E[E.length-1].last_column},x&&(F._$.range=[E[E.length-(W||1)].range[0],E[E.length-1].range[1]]),V=this.performAction.apply(F,[I,B,R,v.yy,A[1],C,E].concat(L)),typeof V<"u")return V;W&&(y=y.slice(0,-1*W*2),C=C.slice(0,-1*W),E=E.slice(0,-1*W)),y.push(this.productions_[A[1]][0]),C.push(F.$),E.push(F._$),lt=k[y[y.length-2]][y[y.length-1]],y.push(lt);break;case 3:return!0}}return!0}},h=function(){var f={EOF:1,parseError:function(p,y){if(this.yy.parser)this.yy.parser.parseError(p,y);else throw new Error(p)},setInput:function(d,p){return this.yy=p||this.yy||{},this._input=d,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var d=this._input[0];this.yytext+=d,this.yyleng++,this.offset++,this.match+=d,this.matched+=d;var p=d.match(/(?:\r\n?|\n).*/g);return p?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),d},unput:function(d){var p=d.length,y=d.split(/(?:\r\n?|\n)/g);this._input=d+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-p),this.offset-=p;var b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===b.length?this.yylloc.first_column:0)+b[b.length-y.length].length-y[0].length:this.yylloc.first_column-p},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-p]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(d){this.unput(this.match.slice(d))},pastInput:function(){var d=this.matched.substr(0,this.matched.length-this.match.length);return(d.length>20?"...":"")+d.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var d=this.match;return d.length<20&&(d+=this._input.substr(0,20-d.length)),(d.substr(0,20)+(d.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var d=this.pastInput(),p=new Array(d.length+1).join("-");return d+this.upcomingInput()+`
`+p+"^"},test_match:function(d,p){var y,b,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),b=d[0].match(/(?:\r\n?|\n).*/g),b&&(this.yylineno+=b.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],y=this.performAction.call(this,this.yy,this,p,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var E in C)this[E]=C[E];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var d,p,y,b;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),E=0;E<C.length;E++)if(y=this._input.match(this.rules[C[E]]),y&&(!p||y[0].length>p[0].length)){if(p=y,b=E,this.options.backtrack_lexer){if(d=this.test_match(y,C[E]),d!==!1)return d;if(this._backtrack){p=!1;continue}else return!1}else if(!this.options.flex)break}return p?(d=this.test_match(p,C[b]),d!==!1?d:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var p=this.next();return p||this.lex()},begin:function(p){this.conditionStack.push(p)},popState:function(){var p=this.conditionStack.length-1;return p>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(p){return p=this.conditionStack.length-1-Math.abs(p||0),p>=0?this.conditionStack[p]:"INITIAL"},pushState:function(p){this.begin(p)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(p,y,b,C){switch(b){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return f}();l.lexer=h;function u(){this.yy={}}return u.prototype=l,l.Parser=u,new u}();Wo.parser=Wo;const FE=Wo;let pn="";const Xl=[],ts=[],es=[],IE=function(){Xl.length=0,ts.length=0,pn="",es.length=0,We()},DE=function(t){pn=t,Xl.push(t)},RE=function(){return Xl},NE=function(){let t=Eh();const e=100;let i=0;for(;!t&&i<e;)t=Eh(),i++;return ts.push(...es),ts},OE=function(){const t=[];return ts.forEach(i=>{i.people&&t.push(...i.people)}),[...new Set(t)].sort()},PE=function(t,e){const i=e.substr(1).split(":");let r=0,n=[];i.length===1?(r=Number(i[0]),n=[]):(r=Number(i[0]),n=i[1].split(","));const s=n.map(o=>o.trim()),a={section:pn,type:pn,people:s,task:t,score:r};es.push(a)},ME=function(t){const e={section:pn,type:pn,description:t,task:t,classes:[]};ts.push(e)},Eh=function(){const t=function(i){return es[i].processed};let e=!0;for(const[i,r]of es.entries())t(i),e=e&&r.processed;return e},VE=function(){return OE()},Sh={getConfig:()=>G().journey,clear:IE,setDiagramTitle:ni,getDiagramTitle:je,setAccTitle:Oe,getAccTitle:Ye,setAccDescription:He,getAccDescription:Ue,addSection:DE,getSections:RE,getTasks:NE,addTask:PE,addTaskOrg:ME,getActors:VE},zE=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,qE=zE,$l=function(t,e){return ka(t,e)},WE=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),n=t.append("g");n.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),n.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function s(l){const h=rn().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=rn().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?s(n):e.score<3?a(n):o(n),r},Kd=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},Zd=function(t,e){return W3(t,e)},YE=function(t,e){function i(n,s,a,o,l){return n+","+s+" "+(n+a)+","+s+" "+(n+a)+","+(s+o-l)+" "+(n+a-l*1.2)+","+(s+o)+" "+n+","+(s+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Zd(t,e)},HE=function(t,e,i){const r=t.append("g"),n=Wr();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=i.width*e.taskCount+i.diagramMarginX*(e.taskCount-1),n.height=i.height,n.class="journey-section section-type-"+e.num,n.rx=3,n.ry=3,$l(r,n),Jd(i)(e.text,r,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let wh=-1;const UE=function(t,e,i){const r=e.x+i.width/2,n=t.append("g");wh++;const s=300+5*30;n.append("line").attr("id","task"+wh).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",s).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),WE(n,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Wr();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,$l(n,a);let o=e.x+14;e.people.forEach(l=>{const h=e.actors[l].color,u={cx:o,cy:e.y,r:7,fill:h,stroke:"#000",title:l,pos:e.actors[l].position};Kd(n,u),o+=10}),Jd(i)(e.task,n,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},jE=function(t,e){e1(t,e)},Jd=function(){function t(n,s,a,o,l,h,u,f){const d=s.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",f).style("text-anchor","middle").text(n);r(d,u)}function e(n,s,a,o,l,h,u,f,d){const{taskFontSize:p,taskFontFamily:y}=f,b=n.split(/<br\s*\/?>/gi);for(let C=0;C<b.length;C++){const E=C*p-p*(b.length-1)/2,k=s.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",p).style("font-family",y);k.append("tspan").attr("x",a+l/2).attr("dy",E).text(b[C]),k.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,u)}}function i(n,s,a,o,l,h,u,f){const d=s.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,d,a,o,l,h,u,f),r(y,u)}function r(n,s){for(const a in s)a in s&&n.attr(a,s[a])}return function(n){return n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}}(),GE=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},is={drawRect:$l,drawCircle:Kd,drawSection:HE,drawText:Zd,drawLabel:YE,drawTask:UE,drawBackgroundRect:jE,initGraphics:GE},XE=function(t){Object.keys(t).forEach(function(i){Fa[i]=t[i]})},tr={};function $E(t){const e=G().journey;let i=60;Object.keys(tr).forEach(r=>{const n=tr[r].color,s={cx:20,cy:i,r:7,fill:n,stroke:"#000",pos:tr[r].position};is.drawCircle(t,s);const a={x:40,y:i+7,fill:"#666",text:r,textMargin:e.boxTextMargin|5};is.drawText(t,a),i+=20})}const Fa=G().journey,Ar=Fa.leftMargin,QE=function(t,e,i,r){const n=G().journey,s=G().securityLevel;let a;s==="sandbox"&&(a=pt("#i"+e));const o=s==="sandbox"?pt(a.nodes()[0].contentDocument.body):pt("body");di.init();const l=o.select("#"+e);is.initGraphics(l);const h=r.db.getTasks(),u=r.db.getDiagramTitle(),f=r.db.getActors();for(const E in tr)delete tr[E];let d=0;f.forEach(E=>{tr[E]={color:n.actorColours[d%n.actorColours.length],position:d},d++}),$E(l),di.insert(0,0,Ar,Object.keys(tr).length*50),KE(l,h,0);const p=di.getBounds();u&&l.append("text").text(u).attr("x",Ar).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=p.stopy-p.starty+2*n.diagramMarginY,b=Ar+p.stopx+2*n.diagramMarginX;Ne(l,y,b,n.useMaxWidth),l.append("line").attr("x1",Ar).attr("y1",n.height*4).attr("x2",b-Ar-4).attr("y2",n.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const C=u?70:0;l.attr("viewBox",`${p.startx} -25 ${b} ${y+C}`),l.attr("preserveAspectRatio","xMinYMin meet"),l.attr("height",y+C+25)},di={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,i,r){t[e]===void 0?t[e]=i:t[e]=r(i,t[e])},updateBounds:function(t,e,i,r){const n=G().journey,s=this;let a=0;function o(l){return function(u){a++;const f=s.sequenceItems.length-a+1;s.updateVal(u,"starty",e-f*n.boxMargin,Math.min),s.updateVal(u,"stopy",r+f*n.boxMargin,Math.max),s.updateVal(di.data,"startx",t-f*n.boxMargin,Math.min),s.updateVal(di.data,"stopx",i+f*n.boxMargin,Math.max),l!=="activation"&&(s.updateVal(u,"startx",t-f*n.boxMargin,Math.min),s.updateVal(u,"stopx",i+f*n.boxMargin,Math.max),s.updateVal(di.data,"starty",e-f*n.boxMargin,Math.min),s.updateVal(di.data,"stopy",r+f*n.boxMargin,Math.max))}}this.sequenceItems.forEach(o())},insert:function(t,e,i,r){const n=Math.min(t,i),s=Math.max(t,i),a=Math.min(e,r),o=Math.max(e,r);this.updateVal(di.data,"startx",n,Math.min),this.updateVal(di.data,"starty",a,Math.min),this.updateVal(di.data,"stopx",s,Math.max),this.updateVal(di.data,"stopy",o,Math.max),this.updateBounds(n,a,s,o)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},Za=Fa.sectionFills,vh=Fa.sectionColours,KE=function(t,e,i){const r=G().journey;let n="";const s=r.height*2+r.diagramMarginY,a=i+s;let o=0,l="#CCC",h="black",u=0;for(const[f,d]of e.entries()){if(n!==d.section){l=Za[o%Za.length],u=o%Za.length,h=vh[o%vh.length];let y=0;const b=d.section;for(let E=f;E<e.length&&e[E].section==b;E++)y=y+1;const C={x:f*r.taskMargin+f*r.width+Ar,y:50,text:d.section,fill:l,num:u,colour:h,taskCount:y};is.drawSection(t,C,r),n=d.section,o++}const p=d.people.reduce((y,b)=>(tr[b]&&(y[b]=tr[b]),y),{});d.x=f*r.taskMargin+f*r.width+Ar,d.y=a,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=h,d.fill=l,d.num=u,d.actors=p,is.drawTask(t,d,r),di.insert(d.x,d.y,d.x+d.width+r.taskMargin,300+5*30)}},Ah={setConf:XE,draw:QE},ZE={parser:FE,db:Sh,renderer:Ah,styles:qE,init:t=>{Ah.setConf(t.journey),Sh.clear()}},JE=Object.freeze(Object.defineProperty({__proto__:null,diagram:ZE},Symbol.toStringTag,{value:"Module"})),tS=(t,e,i)=>{const{parentById:r}=i,n=new Set;let s=t;for(;s;){if(n.add(s),s===e)return s;s=r[s]}for(s=e;s;){if(n.has(s))return s;s=r[s]}return"root"},Lh=new fp;let ui={};const eS={};let ir={};const iS=async function(t,e,i,r,n,s,a){const l=i.select(`[id="${e}"]`).insert("g").attr("class","nodes"),h=Object.keys(t);return await Promise.all(h.map(async function(u){const f=t[u];let d="default";f.classes.length>0&&(d=f.classes.join(" ")),d=d+" flowchart-label";const p=Ci(f.styles);let y=f.text!==void 0?f.text:f.id;const b={width:0,height:0},C=[{id:f.id+"-west",layoutOptions:{"port.side":"WEST"}},{id:f.id+"-east",layoutOptions:{"port.side":"EAST"}},{id:f.id+"-south",layoutOptions:{"port.side":"SOUTH"}},{id:f.id+"-north",layoutOptions:{"port.side":"NORTH"}}];let E=0,k="",I={};switch(f.type){case"round":E=5,k="rect";break;case"square":k="rect";break;case"diamond":k="question",I={portConstraints:"FIXED_SIDE"};break;case"hexagon":k="hexagon";break;case"odd":k="rect_left_inv_arrow";break;case"lean_right":k="lean_right";break;case"lean_left":k="lean_left";break;case"trapezoid":k="trapezoid";break;case"inv_trapezoid":k="inv_trapezoid";break;case"odd_right":k="rect_left_inv_arrow";break;case"circle":k="circle";break;case"ellipse":k="ellipse";break;case"stadium":k="stadium";break;case"subroutine":k="subroutine";break;case"cylinder":k="cylinder";break;case"group":k="rect";break;case"doublecircle":k="doublecircle";break;default:k="rect"}const R={labelStyle:p.labelStyle,shape:k,labelText:y,labelType:f.labelType,rx:E,ry:E,class:d,style:p.style,id:f.id,link:f.link,linkTarget:f.linkTarget,tooltip:n.db.getTooltip(f.id)||"",domId:n.db.lookUpDomId(f.id),haveCallback:f.haveCallback,width:f.type==="group"?500:void 0,dir:f.dir,type:f.type,props:f.props,padding:we().flowchart.padding};let B,_;if(R.type!=="group")_=await i0(l,R,f.dir),B=_.node().getBBox();else{r.createElementNS("http://www.w3.org/2000/svg","text");const{shapeSvg:L,bbox:m}=await ve(l,R,void 0,!0);b.width=m.width,b.wrappingWidth=we().flowchart.wrappingWidth,b.height=m.height,b.labelNode=L.node(),R.labelData=b}const O={id:f.id,ports:f.type==="diamond"?C:[],layoutOptions:I,labelText:y,labelData:b,domId:n.db.lookUpDomId(f.id),width:B==null?void 0:B.width,height:B==null?void 0:B.height,type:f.type,el:_,parent:s.parentById[f.id]};ir[R.id]=O})),a},Bh=(t,e,i)=>{const r={TB:{in:{north:"north"},out:{south:"west",west:"east",east:"south"}},LR:{in:{west:"west"},out:{east:"south",south:"north",north:"east"}},RL:{in:{east:"east"},out:{west:"north",north:"south",south:"west"}},BT:{in:{south:"south"},out:{north:"east",east:"west",west:"north"}}};return r.TD=r.TB,D.info("abc88",i,e,t),r[i][e][t]},Fh=(t,e,i)=>{if(D.info("getNextPort abc88",{node:t,edgeDirection:e,graphDirection:i}),!ui[t])switch(i){case"TB":case"TD":ui[t]={inPosition:"north",outPosition:"south"};break;case"BT":ui[t]={inPosition:"south",outPosition:"north"};break;case"RL":ui[t]={inPosition:"east",outPosition:"west"};break;case"LR":ui[t]={inPosition:"west",outPosition:"east"};break}const r=e==="in"?ui[t].inPosition:ui[t].outPosition;return e==="in"?ui[t].inPosition=Bh(ui[t].inPosition,e,i):ui[t].outPosition=Bh(ui[t].outPosition,e,i),r},rS=(t,e)=>{let i=t.start,r=t.end;const n=i,s=r,a=ir[i],o=ir[r];return!a||!o?{source:i,target:r}:(a.type==="diamond"&&(i=`${i}-${Fh(i,"out",e)}`),o.type==="diamond"&&(r=`${r}-${Fh(r,"in",e)}`),{source:i,target:r,sourceId:n,targetId:s})},nS=function(t,e,i,r){D.info("abc78 edges = ",t);const n=r.insert("g").attr("class","edgeLabels");let s={},a=e.db.getDirection(),o,l;if(t.defaultStyle!==void 0){const h=Ci(t.defaultStyle);o=h.style,l=h.labelStyle}return t.forEach(function(h){const u="L-"+h.start+"-"+h.end;s[u]===void 0?(s[u]=0,D.info("abc78 new entry",u,s[u])):(s[u]++,D.info("abc78 new entry",u,s[u]));let f=u+"-"+s[u];D.info("abc78 new link id to be used is",u,f,s[u]);const d="LS-"+h.start,p="LE-"+h.end,y={style:"",labelStyle:""};switch(y.minlen=h.length||1,h.type==="arrow_open"?y.arrowhead="none":y.arrowhead="normal",y.arrowTypeStart="arrow_open",y.arrowTypeEnd="arrow_open",h.type){case"double_arrow_cross":y.arrowTypeStart="arrow_cross";case"arrow_cross":y.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":y.arrowTypeStart="arrow_point";case"arrow_point":y.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":y.arrowTypeStart="arrow_circle";case"arrow_circle":y.arrowTypeEnd="arrow_circle";break}let b="",C="";switch(h.stroke){case"normal":b="fill:none;",o!==void 0&&(b=o),l!==void 0&&(C=l),y.thickness="normal",y.pattern="solid";break;case"dotted":y.thickness="normal",y.pattern="dotted",y.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":y.thickness="thick",y.pattern="solid",y.style="stroke-width: 3.5px;fill:none;";break}if(h.style!==void 0){const _=Ci(h.style);b=_.style,C=_.labelStyle}y.style=y.style+=b,y.labelStyle=y.labelStyle+=C,h.interpolate!==void 0?y.curve=pi(h.interpolate,ri):t.defaultInterpolate!==void 0?y.curve=pi(t.defaultInterpolate,ri):y.curve=pi(eS.curve,ri),h.text===void 0?h.style!==void 0&&(y.arrowheadStyle="fill: #333"):(y.arrowheadStyle="fill: #333",y.labelpos="c"),y.labelType=h.labelType,y.label=h.text.replace(yt.lineBreakRegex,`
`),h.style===void 0&&(y.style=y.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),y.labelStyle=y.labelStyle.replace("color:","fill:"),y.id=f,y.classes="flowchart-link "+d+" "+p;const E=n0(n,y),{source:k,target:I,sourceId:R,targetId:B}=rS(h,a);D.debug("abc78 source and target",k,I),i.edges.push({id:"e"+h.start+h.end,sources:[k],targets:[I],sourceId:R,targetId:B,labelEl:E,labels:[{width:y.width,height:y.height,orgWidth:y.width,orgHeight:y.height,text:y.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:y})}),i},sS=function(t,e,i,r,n){let s="";switch(r&&(s=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,s=s.replace(/\(/g,"\\("),s=s.replace(/\)/g,"\\)")),e.arrowTypeStart){case"arrow_cross":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-crossStart)");break;case"arrow_point":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-pointStart)");break;case"arrow_barb":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-barbStart)");break;case"arrow_circle":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-circleStart)");break;case"aggregation":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-aggregationStart)");break;case"extension":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-extensionStart)");break;case"composition":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-compositionStart)");break;case"dependency":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-dependencyStart)");break;case"lollipop":t.attr("marker-start","url("+s+"#"+n+"_"+i+"-lollipopStart)");break}switch(e.arrowTypeEnd){case"arrow_cross":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-crossEnd)");break;case"arrow_point":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-pointEnd)");break;case"arrow_barb":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-barbEnd)");break;case"arrow_circle":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-circleEnd)");break;case"aggregation":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-aggregationEnd)");break;case"extension":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-extensionEnd)");break;case"composition":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-compositionEnd)");break;case"dependency":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-dependencyEnd)");break;case"lollipop":t.attr("marker-end","url("+s+"#"+n+"_"+i+"-lollipopEnd)");break}},aS=function(t,e){return D.info("Extracting classes"),e.db.getClasses()},oS=function(t){const e={parentById:{},childrenById:{}},i=t.getSubGraphs();return D.info("Subgraphs - ",i),i.forEach(function(r){r.nodes.forEach(function(n){e.parentById[n]=r.id,e.childrenById[r.id]===void 0&&(e.childrenById[r.id]=[]),e.childrenById[r.id].push(n)})}),i.forEach(function(r){r.id,e.parentById[r.id]!==void 0&&e.parentById[r.id]}),e},lS=function(t,e,i){const r=tS(t,e,i);if(r===void 0||r==="root")return{x:0,y:0};const n=ir[r].offset;return{x:n.posX,y:n.posY}},cS=function(t,e,i,r,n,s){const a=lS(e.sourceId,e.targetId,n),o=e.sections[0].startPoint,l=e.sections[0].endPoint,u=(e.sections[0].bendPoints?e.sections[0].bendPoints:[]).map(I=>[I.x+a.x,I.y+a.y]),f=[[o.x+a.x,o.y+a.y],...u,[l.x+a.x,l.y+a.y]],{x:d,y:p}=r0(e.edgeData),y=xr().x(d).y(p).curve(ri),b=t.insert("path").attr("d",y(f)).attr("class","path "+i.classes).attr("fill","none"),C=t.insert("g").attr("class","edgeLabel"),E=pt(C.node().appendChild(e.labelEl)),k=E.node().firstChild.getBoundingClientRect();E.attr("width",k.width),E.attr("height",k.height),C.attr("transform",`translate(${e.labels[0].x+a.x}, ${e.labels[0].y+a.y})`),sS(b,i,r.type,r.arrowMarkerAbsolute,s)},tf=(t,e)=>{t.forEach(i=>{i.children||(i.children=[]);const r=e.childrenById[i.id];r&&r.forEach(n=>{i.children.push(ir[n])}),tf(i.children,e)})},hS=async function(t,e,i,r){var n;r.db.clear(),ir={},ui={},r.db.setGen("gen-2"),r.parser.parse(t);const s=pt("body").append("div").attr("style","height:400px").attr("id","cy");let a={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","org.eclipse.elk.padding":"[top=100, left=100, bottom=110, right=110]","elk.layered.spacing.edgeNodeBetweenLayers":"30","elk.direction":"DOWN"},children:[],edges:[]};switch(D.info("Drawing flowchart using v3 renderer",Lh),r.db.getDirection()){case"BT":a.layoutOptions["elk.direction"]="UP";break;case"TB":a.layoutOptions["elk.direction"]="DOWN";break;case"LR":a.layoutOptions["elk.direction"]="RIGHT";break;case"RL":a.layoutOptions["elk.direction"]="LEFT";break}const{securityLevel:l,flowchart:h}=we();let u;l==="sandbox"&&(u=pt("#i"+e));const f=l==="sandbox"?pt(u.nodes()[0].contentDocument.body):pt("body"),d=l==="sandbox"?u.nodes()[0].contentDocument:document,p=f.select(`[id="${e}"]`);J1(p,["point","circle","cross"],r.type,e);const b=r.db.getVertices();let C;const E=r.db.getSubGraphs();D.info("Subgraphs - ",E);for(let L=E.length-1;L>=0;L--)C=E[L],r.db.addVertex(C.id,{text:C.title,type:C.labelType},"group",void 0,C.classes,C.dir);const k=p.insert("g").attr("class","subgraphs"),I=oS(r.db);a=await iS(b,e,f,d,r,I,a);const R=p.insert("g").attr("class","edges edgePath"),B=r.db.getEdges();a=nS(B,r,a,p),Object.keys(ir).forEach(L=>{const m=ir[L];m.parent||a.children.push(m),I.childrenById[L]!==void 0&&(m.labels=[{text:m.labelText,layoutOptions:{"nodeLabels.placement":"[H_CENTER, V_TOP, INSIDE]"},width:m.labelData.width,height:m.labelData.height}],delete m.x,delete m.y,delete m.width,delete m.height)}),tf(a.children,I),D.info("after layout",JSON.stringify(a,null,2));const O=await Lh.layout(a);ef(0,0,O.children,p,k,r,0),D.info("after layout",O),(n=O.edges)==null||n.map(L=>{cS(R,L,L.edgeData,r,I,e)}),qr({},p,h.diagramPadding,h.useMaxWidth),s.remove()},ef=(t,e,i,r,n,s,a)=>{i.forEach(function(o){if(o)if(ir[o.id].offset={posX:o.x+t,posY:o.y+e,x:t,y:e,depth:a,width:o.width,height:o.height},o.type==="group"){const l=n.insert("g").attr("class","subgraph");l.insert("rect").attr("class","subgraph subgraph-lvl-"+a%5+" node").attr("x",o.x+t).attr("y",o.y+e).attr("width",o.width).attr("height",o.height);const h=l.insert("g").attr("class","label"),u=we().flowchart.htmlLabels?o.labelData.width/2:0;h.attr("transform",`translate(${o.labels[0].x+t+o.x+u}, ${o.labels[0].y+e+o.y+3})`),h.node().appendChild(o.labelData.labelNode),D.info("Id (UGH)= ",o.type,o.labels)}else D.info("Id (UGH)= ",o.id),o.el.attr("transform",`translate(${o.x+t+o.width/2}, ${o.y+e+o.height/2})`)}),i.forEach(function(o){o&&o.type==="group"&&ef(t+o.x,e+o.y,o.children,r,n,s,a+1)})},uS={getClasses:aS,draw:hS},dS=t=>{let e="";for(let i=0;i<5;i++)e+=`
      .subgraph-lvl-${i} {
        fill: ${t[`surface${i}`]};
        stroke: ${t[`surfacePeer${i}`]};
      }
    `;return e},fS=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.85;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
  .subgraph {
    stroke-width:2;
    rx:3;
  }
  // .subgraph-lvl-1 {
  //   fill:#ccc;
  //   // stroke:black;
  // }

  .flowchart-label text {
    text-anchor: middle;
  }

  ${dS(t)}
`,pS=fS,gS={db:Gx,renderer:uS,parser:fl,styles:pS},yS=Object.freeze(Object.defineProperty({__proto__:null,diagram:gS},Symbol.toStringTag,{value:"Module"}));var Yo=function(){var t=function(d,p,y,b){for(y=y||{},b=d.length;b--;y[d[b]]=p);return y},e=[6,8,10,11,12,14,16,17,20,21],i=[1,9],r=[1,10],n=[1,11],s=[1,12],a=[1,13],o=[1,16],l=[1,17],h={trace:function(){},yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:function(p,y,b,C,E,k,I){var R=k.length-1;switch(E){case 1:return k[R-1];case 2:this.$=[];break;case 3:k[R-1].push(k[R]),this.$=k[R-1];break;case 4:case 5:this.$=k[R];break;case 6:case 7:this.$=[];break;case 8:C.getCommonDb().setDiagramTitle(k[R].substr(6)),this.$=k[R].substr(6);break;case 9:this.$=k[R].trim(),C.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=k[R].trim(),C.getCommonDb().setAccDescription(this.$);break;case 12:C.addSection(k[R].substr(8)),this.$=k[R].substr(8);break;case 15:C.addTask(k[R],0,""),this.$=k[R];break;case 16:C.addEvent(k[R].substr(2)),this.$=k[R];break}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:i,12:r,14:n,16:s,17:a,18:14,19:15,20:o,21:l},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:i,12:r,14:n,16:s,17:a,18:14,19:15,20:o,21:l},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:function(p,y){if(y.recoverable)this.trace(p);else{var b=new Error(p);throw b.hash=y,b}},parse:function(p){var y=this,b=[0],C=[],E=[null],k=[],I=this.table,R="",B=0,_=0,O=2,L=1,m=k.slice.call(arguments,1),v=Object.create(this.lexer),g={yy:{}};for(var S in this.yy)Object.prototype.hasOwnProperty.call(this.yy,S)&&(g.yy[S]=this.yy[S]);v.setInput(p,g.yy),g.yy.lexer=v,g.yy.parser=this,typeof v.yylloc>"u"&&(v.yylloc={});var x=v.yylloc;k.push(x);var M=v.options&&v.options.ranges;typeof g.yy.parseError=="function"?this.parseError=g.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function H(){var j;return j=C.pop()||v.lex()||L,typeof j!="number"&&(j instanceof Array&&(C=j,j=C.pop()),j=y.symbols_[j]||j),j}for(var P,A,V,F,T={},W,lt,w,ht;;){if(A=b[b.length-1],this.defaultActions[A]?V=this.defaultActions[A]:((P===null||typeof P>"u")&&(P=H()),V=I[A]&&I[A][P]),typeof V>"u"||!V.length||!V[0]){var J="";ht=[];for(W in I[A])this.terminals_[W]&&W>O&&ht.push("'"+this.terminals_[W]+"'");v.showPosition?J="Parse error on line "+(B+1)+`:
`+v.showPosition()+`
Expecting `+ht.join(", ")+", got '"+(this.terminals_[P]||P)+"'":J="Parse error on line "+(B+1)+": Unexpected "+(P==L?"end of input":"'"+(this.terminals_[P]||P)+"'"),this.parseError(J,{text:v.match,token:this.terminals_[P]||P,line:v.yylineno,loc:x,expected:ht})}if(V[0]instanceof Array&&V.length>1)throw new Error("Parse Error: multiple actions possible at state: "+A+", token: "+P);switch(V[0]){case 1:b.push(P),E.push(v.yytext),k.push(v.yylloc),b.push(V[1]),P=null,_=v.yyleng,R=v.yytext,B=v.yylineno,x=v.yylloc;break;case 2:if(lt=this.productions_[V[1]][1],T.$=E[E.length-lt],T._$={first_line:k[k.length-(lt||1)].first_line,last_line:k[k.length-1].last_line,first_column:k[k.length-(lt||1)].first_column,last_column:k[k.length-1].last_column},M&&(T._$.range=[k[k.length-(lt||1)].range[0],k[k.length-1].range[1]]),F=this.performAction.apply(T,[R,_,B,g.yy,V[1],E,k].concat(m)),typeof F<"u")return F;lt&&(b=b.slice(0,-1*lt*2),E=E.slice(0,-1*lt),k=k.slice(0,-1*lt)),b.push(this.productions_[V[1]][0]),E.push(T.$),k.push(T._$),w=I[b[b.length-2]][b[b.length-1]],b.push(w);break;case 3:return!0}}return!0}},u=function(){var d={EOF:1,parseError:function(y,b){if(this.yy.parser)this.yy.parser.parseError(y,b);else throw new Error(y)},setInput:function(p,y){return this.yy=y||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var y=p.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},unput:function(p){var y=p.length,b=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var C=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),b.length-1&&(this.yylineno-=b.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===C.length?this.yylloc.first_column:0)+C[C.length-b.length].length-b[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(p){this.unput(this.match.slice(p))},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput(),y=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+y+"^"},test_match:function(p,y){var b,C,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),C=p[0].match(/(?:\r\n?|\n).*/g),C&&(this.yylineno+=C.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:C?C[C.length-1].length-C[C.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],b=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),b)return b;if(this._backtrack){for(var k in E)this[k]=E[k];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,y,b,C;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),k=0;k<E.length;k++)if(b=this._input.match(this.rules[E[k]]),b&&(!y||b[0].length>y[0].length)){if(y=b,C=k,this.options.backtrack_lexer){if(p=this.test_match(b,E[k]),p!==!1)return p;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(p=this.test_match(y,E[C]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(y,b,C,E){switch(C){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?::\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return d}();h.lexer=u;function f(){this.yy={}}return f.prototype=h,h.Parser=f,new f}();Yo.parser=Yo;const mS=Yo;let gn="",rf=0;const Ql=[],da=[],yn=[],nf=()=>vu,sf=function(){Ql.length=0,da.length=0,gn="",yn.length=0,We()},af=function(t){gn=t,Ql.push(t)},of=function(){return Ql},lf=function(){let t=Ih();const e=100;let i=0;for(;!t&&i<e;)t=Ih(),i++;return da.push(...yn),da},cf=function(t,e,i){const r={id:rf++,section:gn,type:gn,task:t,score:e||0,events:i?[i]:[]};yn.push(r)},hf=function(t){yn.find(i=>i.id===rf-1).events.push(t)},uf=function(t){const e={section:gn,type:gn,description:t,task:t,classes:[]};da.push(e)},Ih=function(){const t=function(i){return yn[i].processed};let e=!0;for(const[i,r]of yn.entries())t(i),e=e&&r.processed;return e},xS={clear:sf,getCommonDb:nf,addSection:af,getSections:of,getTasks:lf,addTask:cf,addTaskOrg:uf,addEvent:hf},bS=Object.freeze(Object.defineProperty({__proto__:null,addEvent:hf,addSection:af,addTask:cf,addTaskOrg:uf,clear:sf,default:xS,getCommonDb:nf,getSections:of,getTasks:lf},Symbol.toStringTag,{value:"Module"})),kS=12,Ia=function(t,e){const i=t.append("rect");return i.attr("x",e.x),i.attr("y",e.y),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("width",e.width),i.attr("height",e.height),i.attr("rx",e.rx),i.attr("ry",e.ry),e.class!==void 0&&i.attr("class",e.class),i},_S=function(t,e){const r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),n=t.append("g");n.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),n.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function s(l){const h=rn().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(l){const h=rn().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);l.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(l){l.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return e.score>3?s(n):e.score<3?a(n):o(n),r},TS=function(t,e){const i=t.append("circle");return i.attr("cx",e.cx),i.attr("cy",e.cy),i.attr("class","actor-"+e.pos),i.attr("fill",e.fill),i.attr("stroke",e.stroke),i.attr("r",e.r),i.class!==void 0&&i.attr("class",i.class),e.title!==void 0&&i.append("title").text(e.title),i},df=function(t,e){const i=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),e.class!==void 0&&r.attr("class",e.class);const n=r.append("tspan");return n.attr("x",e.x+e.textMargin*2),n.text(i),r},CS=function(t,e){function i(n,s,a,o,l){return n+","+s+" "+(n+a)+","+s+" "+(n+a)+","+(s+o-l)+" "+(n+a-l*1.2)+","+(s+o)+" "+n+","+(s+o)}const r=t.append("polygon");r.attr("points",i(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,df(t,e)},ES=function(t,e,i){const r=t.append("g"),n=Kl();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=i.width,n.height=i.height,n.class="journey-section section-type-"+e.num,n.rx=3,n.ry=3,Ia(r,n),ff(i)(e.text,r,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+e.num},i,e.colour)};let Dh=-1;const SS=function(t,e,i){const r=e.x+i.width/2,n=t.append("g");Dh++;const s=300+5*30;n.append("line").attr("id","task"+Dh).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",s).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),_S(n,{cx:r,cy:300+(5-e.score)*30,score:e.score});const a=Kl();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=i.width,a.height=i.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,Ia(n,a),e.x+14,ff(i)(e.task,n,a.x,a.y,a.width,a.height,{class:"task"},i,e.colour)},wS=function(t,e){Ia(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},vS=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},Kl=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},ff=function(){function t(n,s,a,o,l,h,u,f){const d=s.append("text").attr("x",a+l/2).attr("y",o+h/2+5).style("font-color",f).style("text-anchor","middle").text(n);r(d,u)}function e(n,s,a,o,l,h,u,f,d){const{taskFontSize:p,taskFontFamily:y}=f,b=n.split(/<br\s*\/?>/gi);for(let C=0;C<b.length;C++){const E=C*p-p*(b.length-1)/2,k=s.append("text").attr("x",a+l/2).attr("y",o).attr("fill",d).style("text-anchor","middle").style("font-size",p).style("font-family",y);k.append("tspan").attr("x",a+l/2).attr("dy",E).text(b[C]),k.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(k,u)}}function i(n,s,a,o,l,h,u,f){const d=s.append("switch"),y=d.append("foreignObject").attr("x",a).attr("y",o).attr("width",l).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),e(n,d,a,o,l,h,u,f),r(y,u)}function r(n,s){for(const a in s)a in s&&n.attr(a,s[a])}return function(n){return n.textPlacement==="fo"?i:n.textPlacement==="old"?t:e}}(),AS=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")};function pf(t,e){t.each(function(){var i=pt(this),r=i.text().split(/(\s+|<br>)/).reverse(),n,s=[],a=1.1,o=i.attr("y"),l=parseFloat(i.attr("dy")),h=i.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",l+"em");for(let u=0;u<r.length;u++)n=r[r.length-1-u],s.push(n),h.text(s.join(" ").trim()),(h.node().getComputedTextLength()>e||n==="<br>")&&(s.pop(),h.text(s.join(" ").trim()),n==="<br>"?s=[""]:s=[n],h=i.append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em").text(n))})}const LS=function(t,e,i,r){const n=i%kS-1,s=t.append("g");e.section=n,s.attr("class",(e.class?e.class+" ":"")+"timeline-node "+("section-"+n));const a=s.append("g"),o=s.append("g"),h=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(pf,e.width).node().getBBox(),u=r.fontSize&&r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;return e.height=h.height+u*1.1*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),FS(a,e,n),e},BS=function(t,e,i){const r=t.append("g"),s=r.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(pf,e.width).node().getBBox(),a=i.fontSize&&i.fontSize.replace?i.fontSize.replace("px",""):i.fontSize;return r.remove(),s.height+a*1.1*.5+e.padding},FS=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},Lr={drawRect:Ia,drawCircle:TS,drawSection:ES,drawText:df,drawLabel:CS,drawTask:SS,drawBackgroundRect:wS,getTextObj:vS,getNoteRect:Kl,initGraphics:AS,drawNode:LS,getVirtualNodeHeight:BS},IS=function(t,e,i,r){var n,s;const a=G(),o=a.leftMargin??50;D.debug("timeline",r.db);const l=a.securityLevel;let h;l==="sandbox"&&(h=pt("#i"+e));const f=(l==="sandbox"?pt(h.nodes()[0].contentDocument.body):pt("body")).select("#"+e);f.append("g");const d=r.db.getTasks(),p=r.db.getCommonDb().getDiagramTitle();D.debug("task",d),Lr.initGraphics(f);const y=r.db.getSections();D.debug("sections",y);let b=0,C=0,E=0,k=0,I=50+o,R=50;k=50;let B=0,_=!0;y.forEach(function(g){const S={number:B,descr:g,section:B,width:150,padding:20,maxHeight:b},x=Lr.getVirtualNodeHeight(f,S,a);D.debug("sectionHeight before draw",x),b=Math.max(b,x+20)});let O=0,L=0;D.debug("tasks.length",d.length);for(const[g,S]of d.entries()){const x={number:g,descr:S,section:S.section,width:150,padding:20,maxHeight:C},M=Lr.getVirtualNodeHeight(f,x,a);D.debug("taskHeight before draw",M),C=Math.max(C,M+20),O=Math.max(O,S.events.length);let H=0;for(let P=0;P<S.events.length;P++){const V={descr:S.events[P],section:S.section,number:S.section,width:150,padding:20,maxHeight:50};H+=Lr.getVirtualNodeHeight(f,V,a)}L=Math.max(L,H)}D.debug("maxSectionHeight before draw",b),D.debug("maxTaskHeight before draw",C),y&&y.length>0?y.forEach(g=>{const S=d.filter(P=>P.section===g),x={number:B,descr:g,section:B,width:200*Math.max(S.length,1)-50,padding:20,maxHeight:b};D.debug("sectionNode",x);const M=f.append("g"),H=Lr.drawNode(M,x,B,a);D.debug("sectionNode output",H),M.attr("transform",`translate(${I}, ${k})`),R+=b+50,S.length>0&&Rh(f,S,B,I,R,C,a,O,L,b,!1),I+=200*Math.max(S.length,1),R=k,B++}):(_=!1,Rh(f,d,B,I,R,C,a,O,L,b,!0));const m=f.node().getBBox();D.debug("bounds",m),p&&f.append("text").text(p).attr("x",m.width/2-o).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),E=_?b+C+150:C+100,f.append("g").attr("class","lineWrapper").append("line").attr("x1",o).attr("y1",E).attr("x2",m.width+3*o).attr("y2",E).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),qr(void 0,f,((n=a.timeline)==null?void 0:n.padding)??50,((s=a.timeline)==null?void 0:s.useMaxWidth)??!1)},Rh=function(t,e,i,r,n,s,a,o,l,h,u){var f;for(const d of e){const p={descr:d.task,section:i,number:i,width:150,padding:20,maxHeight:s};D.debug("taskNode",p);const y=t.append("g").attr("class","taskWrapper"),C=Lr.drawNode(y,p,i,a).height;if(D.debug("taskHeight after draw",C),y.attr("transform",`translate(${r}, ${n})`),s=Math.max(s,C),d.events){const E=t.append("g").attr("class","lineWrapper");let k=s;n+=100,k=k+DS(t,d.events,i,r,n,a),n-=100,E.append("line").attr("x1",r+190/2).attr("y1",n+s).attr("x2",r+190/2).attr("y2",n+s+(u?s:h)+l+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}r=r+200,u&&!((f=a.timeline)!=null&&f.disableMulticolor)&&i++}n=n-10},DS=function(t,e,i,r,n,s){let a=0;const o=n;n=n+100;for(const l of e){const h={descr:l,section:i,number:i,width:150,padding:20,maxHeight:50};D.debug("eventNode",h);const u=t.append("g").attr("class","eventWrapper"),d=Lr.drawNode(u,h,i,s).height;a=a+d,u.attr("transform",`translate(${r}, ${n})`),n=n+10+d}return n=o,a},RS={setConf:()=>{},draw:IS},NS=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],zr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=wt(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+i]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},OS=t=>`
  .edge {
    stroke-width: 3;
  }
  ${NS(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,PS=OS,MS={db:bS,renderer:RS,parser:mS,styles:PS},VS=Object.freeze(Object.defineProperty({__proto__:null,diagram:MS},Symbol.toStringTag,{value:"Module"}));var Ho=function(){var t=function(R,B,_,O){for(_=_||{},O=R.length;O--;_[R[O]]=B);return _},e=[1,4],i=[1,13],r=[1,12],n=[1,15],s=[1,16],a=[1,20],o=[1,19],l=[6,7,8],h=[1,26],u=[1,24],f=[1,25],d=[6,7,11],p=[1,6,13,15,16,19,22],y=[1,33],b=[1,34],C=[1,6,7,11,13,15,16,19,22],E={trace:function(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function(B,_,O,L,m,v,g){var S=v.length-1;switch(m){case 6:case 7:return L;case 8:L.getLogger().trace("Stop NL ");break;case 9:L.getLogger().trace("Stop EOF ");break;case 11:L.getLogger().trace("Stop NL2 ");break;case 12:L.getLogger().trace("Stop EOF2 ");break;case 15:L.getLogger().info("Node: ",v[S].id),L.addNode(v[S-1].length,v[S].id,v[S].descr,v[S].type);break;case 16:L.getLogger().trace("Icon: ",v[S]),L.decorateNode({icon:v[S]});break;case 17:case 21:L.decorateNode({class:v[S]});break;case 18:L.getLogger().trace("SPACELIST");break;case 19:L.getLogger().trace("Node: ",v[S].id),L.addNode(0,v[S].id,v[S].descr,v[S].type);break;case 20:L.decorateNode({icon:v[S]});break;case 25:L.getLogger().trace("node found ..",v[S-2]),this.$={id:v[S-1],descr:v[S-1],type:L.getType(v[S-2],v[S])};break;case 26:this.$={id:v[S],descr:v[S],type:L.nodeType.DEFAULT};break;case 27:L.getLogger().trace("node found ..",v[S-3]),this.$={id:v[S-3],descr:v[S-1],type:L.getType(v[S-2],v[S])};break}},table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:i,7:[1,10],9:9,12:11,13:r,14:14,15:n,16:s,17:17,18:18,19:a,22:o},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:i,12:21,13:r,14:14,15:n,16:s,17:17,18:18,19:a,22:o},{6:i,9:22,12:11,13:r,14:14,15:n,16:s,17:17,18:18,19:a,22:o},{6:h,7:u,10:23,11:f},t(d,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:o}),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,23]),t(d,[2,24]),t(d,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:u,10:32,11:f},{1:[2,7],6:i,12:21,13:r,14:14,15:n,16:s,17:17,18:18,19:a,22:o},t(p,[2,14],{7:y,11:b}),t(C,[2,8]),t(C,[2,9]),t(C,[2,10]),t(d,[2,15]),t(d,[2,16]),t(d,[2,17]),{20:[1,35]},{21:[1,36]},t(p,[2,13],{7:y,11:b}),t(C,[2,11]),t(C,[2,12]),{21:[1,37]},t(d,[2,25]),t(d,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function(B,_){if(_.recoverable)this.trace(B);else{var O=new Error(B);throw O.hash=_,O}},parse:function(B){var _=this,O=[0],L=[],m=[null],v=[],g=this.table,S="",x=0,M=0,H=2,P=1,A=v.slice.call(arguments,1),V=Object.create(this.lexer),F={yy:{}};for(var T in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T)&&(F.yy[T]=this.yy[T]);V.setInput(B,F.yy),F.yy.lexer=V,F.yy.parser=this,typeof V.yylloc>"u"&&(V.yylloc={});var W=V.yylloc;v.push(W);var lt=V.options&&V.options.ranges;typeof F.yy.parseError=="function"?this.parseError=F.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function w(){var tt;return tt=L.pop()||V.lex()||P,typeof tt!="number"&&(tt instanceof Array&&(L=tt,tt=L.pop()),tt=_.symbols_[tt]||tt),tt}for(var ht,J,j,at,ct={},it,rt,N,Z;;){if(J=O[O.length-1],this.defaultActions[J]?j=this.defaultActions[J]:((ht===null||typeof ht>"u")&&(ht=w()),j=g[J]&&g[J][ht]),typeof j>"u"||!j.length||!j[0]){var q="";Z=[];for(it in g[J])this.terminals_[it]&&it>H&&Z.push("'"+this.terminals_[it]+"'");V.showPosition?q="Parse error on line "+(x+1)+`:
`+V.showPosition()+`
Expecting `+Z.join(", ")+", got '"+(this.terminals_[ht]||ht)+"'":q="Parse error on line "+(x+1)+": Unexpected "+(ht==P?"end of input":"'"+(this.terminals_[ht]||ht)+"'"),this.parseError(q,{text:V.match,token:this.terminals_[ht]||ht,line:V.yylineno,loc:W,expected:Z})}if(j[0]instanceof Array&&j.length>1)throw new Error("Parse Error: multiple actions possible at state: "+J+", token: "+ht);switch(j[0]){case 1:O.push(ht),m.push(V.yytext),v.push(V.yylloc),O.push(j[1]),ht=null,M=V.yyleng,S=V.yytext,x=V.yylineno,W=V.yylloc;break;case 2:if(rt=this.productions_[j[1]][1],ct.$=m[m.length-rt],ct._$={first_line:v[v.length-(rt||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(rt||1)].first_column,last_column:v[v.length-1].last_column},lt&&(ct._$.range=[v[v.length-(rt||1)].range[0],v[v.length-1].range[1]]),at=this.performAction.apply(ct,[S,M,x,F.yy,j[1],m,v].concat(A)),typeof at<"u")return at;rt&&(O=O.slice(0,-1*rt*2),m=m.slice(0,-1*rt),v=v.slice(0,-1*rt)),O.push(this.productions_[j[1]][0]),m.push(ct.$),v.push(ct._$),N=g[O[O.length-2]][O[O.length-1]],O.push(N);break;case 3:return!0}}return!0}},k=function(){var R={EOF:1,parseError:function(_,O){if(this.yy.parser)this.yy.parser.parseError(_,O);else throw new Error(_)},setInput:function(B,_){return this.yy=_||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var _=B.match(/(?:\r\n?|\n).*/g);return _?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},unput:function(B){var _=B.length,O=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_),this.offset-=_;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),O.length-1&&(this.yylineno-=O.length-1);var m=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:O?(O.length===L.length?this.yylloc.first_column:0)+L[L.length-O.length].length-O[0].length:this.yylloc.first_column-_},this.options.ranges&&(this.yylloc.range=[m[0],m[0]+this.yyleng-_]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(B){this.unput(this.match.slice(B))},pastInput:function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var B=this.pastInput(),_=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+_+"^"},test_match:function(B,_){var O,L,m;if(this.options.backtrack_lexer&&(m={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(m.yylloc.range=this.yylloc.range.slice(0))),L=B[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],O=this.performAction.call(this,this.yy,this,_,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),O)return O;if(this._backtrack){for(var v in m)this[v]=m[v];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,_,O,L;this._more||(this.yytext="",this.match="");for(var m=this._currentRules(),v=0;v<m.length;v++)if(O=this._input.match(this.rules[m[v]]),O&&(!_||O[0].length>_[0].length)){if(_=O,L=v,this.options.backtrack_lexer){if(B=this.test_match(O,m[v]),B!==!1)return B;if(this._backtrack){_=!1;continue}else return!1}else if(!this.options.flex)break}return _?(B=this.test_match(_,m[L]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var _=this.next();return _||this.lex()},begin:function(_){this.conditionStack.push(_)},popState:function(){var _=this.conditionStack.length-1;return _>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(_){return _=this.conditionStack.length-1-Math.abs(_||0),_>=0?this.conditionStack[_]:"INITIAL"},pushState:function(_){this.begin(_)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(_,O,L,m){switch(L){case 0:return _.getLogger().trace("Found comment",O.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:_.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return _.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:_.getLogger().trace("end icon"),this.popState();break;case 10:return _.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return _.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return _.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return _.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:_.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return _.getLogger().trace("description:",O.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),_.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),_.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),_.getLogger().trace("node end ...",O.yytext),"NODE_DEND";case 30:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 35:return _.getLogger().trace("Long description:",O.yytext),20;case 36:return _.getLogger().trace("Long description:",O.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return R}();E.lexer=k;function I(){this.yy={}}return I.prototype=E,E.Parser=I,new I}();Ho.parser=Ho;const zS=Ho,rs=t=>Ce(t,G());let gi=[],gf=0,Zl={};const qS=()=>{gi=[],gf=0,Zl={}},WS=function(t){for(let e=gi.length-1;e>=0;e--)if(gi[e].level<t)return gi[e];return null},YS=()=>gi.length>0?gi[0]:null,HS=(t,e,i,r)=>{D.info("addNode",t,e,i,r);const n=G(),s={id:gf++,nodeId:rs(e),level:t,descr:rs(i),type:r,children:[],width:G().mindmap.maxNodeWidth};switch(s.type){case $t.ROUNDED_RECT:s.padding=2*n.mindmap.padding;break;case $t.RECT:s.padding=2*n.mindmap.padding;break;case $t.HEXAGON:s.padding=2*n.mindmap.padding;break;default:s.padding=n.mindmap.padding}const a=WS(t);if(a)a.children.push(s),gi.push(s);else if(gi.length===0)gi.push(s);else{let o=new Error('There can be only one root. No parent could be found for ("'+s.descr+'")');throw o.hash={text:"branch "+name,token:"branch "+name,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+name+'"']},o}},$t={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},US=(t,e)=>{switch(D.debug("In get type",t,e),t){case"[":return $t.RECT;case"(":return e===")"?$t.ROUNDED_RECT:$t.CLOUD;case"((":return $t.CIRCLE;case")":return $t.CLOUD;case"))":return $t.BANG;case"{{":return $t.HEXAGON;default:return $t.DEFAULT}},yf=(t,e)=>{Zl[t]=e},jS=t=>{const e=gi[gi.length-1];t&&t.icon&&(e.icon=rs(t.icon)),t&&t.class&&(e.class=rs(t.class))},Yr=t=>{switch(t){case $t.DEFAULT:return"no-border";case $t.RECT:return"rect";case $t.ROUNDED_RECT:return"rounded-rect";case $t.CIRCLE:return"circle";case $t.CLOUD:return"cloud";case $t.BANG:return"bang";case $t.HEXAGON:return"hexgon";default:return"no-border"}};let mf;const GS=t=>{mf=t},XS=()=>D,$S=t=>gi[t],Jl=t=>Zl[t],QS=Object.freeze(Object.defineProperty({__proto__:null,addNode:HS,clear:qS,decorateNode:jS,getElementById:Jl,getLogger:XS,getMindmap:YS,getNodeById:$S,getType:US,nodeType:$t,get parseError(){return mf},sanitizeText:rs,setElementForId:yf,setErrorHandler:GS,type2Str:Yr},Symbol.toStringTag,{value:"Module"})),xf=12,KS=function(t,e,i){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+Yr(e.type)).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},ZS=function(t,e){t.append("rect").attr("id","node-"+e.id).attr("class","node-bkg node-"+Yr(e.type)).attr("height",e.height).attr("width",e.width)},JS=function(t,e){const i=e.width,r=e.height,n=.15*i,s=.25*i,a=.35*i,o=.2*i;t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+Yr(e.type)).attr("d",`M0 0 a${n},${n} 0 0,1 ${i*.25},${-1*i*.1}
      a${a},${a} 1 0,1 ${i*.4},${-1*i*.1}
      a${s},${s} 1 0,1 ${i*.35},${1*i*.2}

      a${n},${n} 1 0,1 ${i*.15},${1*r*.35}
      a${o},${o} 1 0,1 ${-1*i*.15},${1*r*.65}

      a${s},${n} 1 0,1 ${-1*i*.25},${i*.15}
      a${a},${a} 1 0,1 ${-1*i*.5},0
      a${n},${n} 1 0,1 ${-1*i*.25},${-1*i*.15}

      a${n},${n} 1 0,1 ${-1*i*.1},${-1*r*.35}
      a${o},${o} 1 0,1 ${i*.1},${-1*r*.65}

    H0 V0 Z`)},tw=function(t,e){const i=e.width,r=e.height,n=.15*i;t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+Yr(e.type)).attr("d",`M0 0 a${n},${n} 1 0,0 ${i*.25},${-1*r*.1}
      a${n},${n} 1 0,0 ${i*.25},0
      a${n},${n} 1 0,0 ${i*.25},0
      a${n},${n} 1 0,0 ${i*.25},${1*r*.1}

      a${n},${n} 1 0,0 ${i*.15},${1*r*.33}
      a${n*.8},${n*.8} 1 0,0 0,${1*r*.34}
      a${n},${n} 1 0,0 ${-1*i*.15},${1*r*.33}

      a${n},${n} 1 0,0 ${-1*i*.25},${r*.15}
      a${n},${n} 1 0,0 ${-1*i*.25},0
      a${n},${n} 1 0,0 ${-1*i*.25},0
      a${n},${n} 1 0,0 ${-1*i*.25},${-1*r*.15}

      a${n},${n} 1 0,0 ${-1*i*.1},${-1*r*.33}
      a${n*.8},${n*.8} 1 0,0 0,${-1*r*.34}
      a${n},${n} 1 0,0 ${i*.1},${-1*r*.33}

    H0 V0 Z`)},ew=function(t,e){t.append("circle").attr("id","node-"+e.id).attr("class","node-bkg node-"+Yr(e.type)).attr("r",e.width/2)};function iw(t,e,i,r,n){return t.insert("polygon",":first-child").attr("points",r.map(function(s){return s.x+","+s.y}).join(" ")).attr("transform","translate("+(n.width-e)/2+", "+i+")")}const rw=function(t,e){const i=e.height,n=i/4,s=e.width-e.padding+2*n,a=[{x:n,y:0},{x:s-n,y:0},{x:s,y:-i/2},{x:s-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}];iw(t,s,i,a,e)},nw=function(t,e){t.append("rect").attr("id","node-"+e.id).attr("class","node-bkg node-"+Yr(e.type)).attr("height",e.height).attr("rx",e.padding).attr("ry",e.padding).attr("width",e.width)},sw=function(t,e,i,r){const n=r.htmlLabels,s=i%(xf-1),a=t.append("g");e.section=s;let o="section-"+s;s<0&&(o+=" section-root"),a.attr("class",(e.class?e.class+" ":"")+"mindmap-node "+o);const l=a.append("g"),h=a.append("g"),u=e.descr.replace(/(<br\/*>)/g,`
`);wa(h,u,{useHtmlLabels:n,width:e.width,classes:"mindmap-node-label"}),n||h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const f=h.node().getBBox(),d=r.fontSize.replace?r.fontSize.replace("px",""):r.fontSize;if(e.height=f.height+d*1.1*.5+e.padding,e.width=f.width+2*e.padding,e.icon)if(e.type===$t.CIRCLE)e.height+=50,e.width+=50,a.append("foreignObject").attr("height","50px").attr("width",e.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+e.icon),h.attr("transform","translate("+e.width/2+", "+(e.height/2-1.5*e.padding)+")");else{e.width+=50;const p=e.height;e.height=Math.max(p,60);const y=Math.abs(e.height-p);a.append("foreignObject").attr("width","60px").attr("height",e.height).attr("style","text-align: center;margin-top:"+y/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+e.icon),h.attr("transform","translate("+(25+e.width/2)+", "+(y/2+e.padding/2)+")")}else if(n){const p=(e.width-f.width)/2,y=(e.height-f.height)/2;h.attr("transform","translate("+p+", "+y+")")}else{const p=e.width/2,y=e.padding/2;h.attr("transform","translate("+p+", "+y+")")}switch(e.type){case $t.DEFAULT:KS(l,e,s);break;case $t.ROUNDED_RECT:nw(l,e);break;case $t.RECT:ZS(l,e);break;case $t.CIRCLE:l.attr("transform","translate("+e.width/2+", "+ +e.height/2+")"),ew(l,e);break;case $t.CLOUD:JS(l,e);break;case $t.BANG:tw(l,e);break;case $t.HEXAGON:rw(l,e);break}return yf(e.id,a),e.height},aw=function(e,i,r,n,s){const a=s%(xf-1),o=r.x+r.width/2,l=r.y+r.height/2,h=i.x+i.width/2,u=i.y+i.height/2,f=h>o?o+Math.abs(o-h)/2:o-Math.abs(o-h)/2,d=u>l?l+Math.abs(l-u)/2:l-Math.abs(l-u)/2,p=h>o?Math.abs(o-f)/2+o:-Math.abs(o-f)/2+o,y=u>l?Math.abs(l-d)/2+l:-Math.abs(l-d)/2+l;e.append("path").attr("d",r.direction==="TB"||r.direction==="BT"?`M${o},${l} Q${o},${y} ${f},${d} T${h},${u}`:`M${o},${l} Q${p},${l} ${f},${d} T${h},${u}`).attr("class","edge section-edge-"+a+" edge-depth-"+n)},ow=function(t){const e=Jl(t.id),i=t.x||0,r=t.y||0;e.attr("transform","translate("+i+","+r+")")},bf={drawNode:sw,positionNode:ow,drawEdge:aw};Yh.use(pp);function kf(t,e,i,r){bf.drawNode(t,e,i,r),e.children&&e.children.forEach((n,s)=>{kf(t,n,i<0?s:i,r)})}function lw(t,e){e.edges().map((i,r)=>{const n=i.data();if(i[0]._private.bodyBounds){const s=i[0]._private.rscratch;D.trace("Edge: ",r,n),t.insert("path").attr("d",`M ${s.startX},${s.startY} L ${s.midX},${s.midY} L${s.endX},${s.endY} `).attr("class","edge section-edge-"+n.section+" edge-depth-"+n.depth)}})}function _f(t,e,i,r){e.add({group:"nodes",data:{id:t.id,labelText:t.descr,height:t.height,width:t.width,level:r,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(n=>{_f(n,e,i,r+1),e.add({group:"edges",data:{id:`${t.id}_${n.id}`,source:t.id,target:n.id,depth:r,section:n.section}})})}function cw(t,e){return new Promise(i=>{const r=pt("body").append("div").attr("id","cy").attr("style","display:none"),n=Yh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),_f(t,n,e,0),n.nodes().forEach(function(s){s.layoutDimensions=()=>{const a=s.data();return{w:a.width,h:a.height}}}),n.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),n.ready(s=>{D.info("Ready",s),i(n)})})}function hw(t){t.nodes().map((e,i)=>{const r=e.data();r.x=e.position().x,r.y=e.position().y,bf.positionNode(r);const n=Jl(r.nodeId);D.info("Id:",i,"Position: (",e.position().x,", ",e.position().y,")",r),n.attr("transform",`translate(${e.position().x-r.width/2}, ${e.position().y-r.height/2})`),n.attr("attr",`apa-${i})`)})}const uw=async(t,e,i,r)=>{const n=G();n.htmlLabels=!1,D.debug(`Rendering mindmap diagram
`+t,r.parser);const s=G().securityLevel;let a;s==="sandbox"&&(a=pt("#i"+e));const l=(s==="sandbox"?pt(a.nodes()[0].contentDocument.body):pt("body")).select("#"+e);l.append("g");const h=r.db.getMindmap(),u=l.append("g");u.attr("class","mindmap-edges");const f=l.append("g");f.attr("class","mindmap-nodes"),kf(f,h,-1,n);const d=await cw(h,n);lw(u,d),hw(d),qr(void 0,l,n.mindmap.padding,n.mindmap.useMaxWidth)},dw={draw:uw},fw=t=>{let e="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++)t["lineColor"+i]=t["lineColor"+i]||t["cScaleInv"+i],zr(t["lineColor"+i])?t["lineColor"+i]=Ct(t["lineColor"+i],20):t["lineColor"+i]=wt(t["lineColor"+i],20);for(let i=0;i<t.THEME_COLOR_LIMIT;i++){const r=""+(17-3*i);e+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${t["cScale"+i]};
    }
    .section-${i-1} text {
     fill: ${t["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${t["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${r};
    }
    .section-${i-1} line {
      stroke: ${t["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},pw=t=>`
  .edge {
    stroke-width: 3;
  }
  ${fw(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,gw=pw,yw={db:QS,renderer:dw,parser:zS,styles:gw},mw=Object.freeze(Object.defineProperty({__proto__:null,diagram:yw},Symbol.toStringTag,{value:"Module"}));var Uo=function(){var t=function(o,l,h,u){for(h=h||{},u=o.length;u--;h[o[u]]=l);return h},e=[1,9],i=[1,10],r=[1,5,10,12],n={trace:function(){},yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:function(l,h,u,f,d,p,y){var b=p.length-1;switch(d){case 7:const C=f.findOrCreateNode(p[b-4].trim().replaceAll('""','"')),E=f.findOrCreateNode(p[b-2].trim().replaceAll('""','"')),k=parseFloat(p[b].trim());f.addLink(C,E,k);break;case 8:case 9:case 11:this.$=p[b];break;case 10:this.$=p[b-1];break}},table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:i},{1:[2,6],7:11,10:[1,12]},t(i,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(r,[2,8]),t(r,[2,9]),{19:[1,16]},t(r,[2,11]),{1:[2,1]},{1:[2,5]},t(i,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:i},{15:18,16:7,17:8,18:e,20:i},{18:[1,19]},t(i,[2,3]),{12:[1,20]},t(r,[2,10]),{15:21,16:7,17:8,18:e,20:i},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:function(l,h){if(h.recoverable)this.trace(l);else{var u=new Error(l);throw u.hash=h,u}},parse:function(l){var h=this,u=[0],f=[],d=[null],p=[],y=this.table,b="",C=0,E=0,k=2,I=1,R=p.slice.call(arguments,1),B=Object.create(this.lexer),_={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(_.yy[O]=this.yy[O]);B.setInput(l,_.yy),_.yy.lexer=B,_.yy.parser=this,typeof B.yylloc>"u"&&(B.yylloc={});var L=B.yylloc;p.push(L);var m=B.options&&B.options.ranges;typeof _.yy.parseError=="function"?this.parseError=_.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function v(){var W;return W=f.pop()||B.lex()||I,typeof W!="number"&&(W instanceof Array&&(f=W,W=f.pop()),W=h.symbols_[W]||W),W}for(var g,S,x,M,H={},P,A,V,F;;){if(S=u[u.length-1],this.defaultActions[S]?x=this.defaultActions[S]:((g===null||typeof g>"u")&&(g=v()),x=y[S]&&y[S][g]),typeof x>"u"||!x.length||!x[0]){var T="";F=[];for(P in y[S])this.terminals_[P]&&P>k&&F.push("'"+this.terminals_[P]+"'");B.showPosition?T="Parse error on line "+(C+1)+`:
`+B.showPosition()+`
Expecting `+F.join(", ")+", got '"+(this.terminals_[g]||g)+"'":T="Parse error on line "+(C+1)+": Unexpected "+(g==I?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(T,{text:B.match,token:this.terminals_[g]||g,line:B.yylineno,loc:L,expected:F})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+S+", token: "+g);switch(x[0]){case 1:u.push(g),d.push(B.yytext),p.push(B.yylloc),u.push(x[1]),g=null,E=B.yyleng,b=B.yytext,C=B.yylineno,L=B.yylloc;break;case 2:if(A=this.productions_[x[1]][1],H.$=d[d.length-A],H._$={first_line:p[p.length-(A||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(A||1)].first_column,last_column:p[p.length-1].last_column},m&&(H._$.range=[p[p.length-(A||1)].range[0],p[p.length-1].range[1]]),M=this.performAction.apply(H,[b,E,C,_.yy,x[1],d,p].concat(R)),typeof M<"u")return M;A&&(u=u.slice(0,-1*A*2),d=d.slice(0,-1*A),p=p.slice(0,-1*A)),u.push(this.productions_[x[1]][0]),d.push(H.$),p.push(H._$),V=y[u[u.length-2]][u[u.length-1]],u.push(V);break;case 3:return!0}}return!0}},s=function(){var o={EOF:1,parseError:function(h,u){if(this.yy.parser)this.yy.parser.parseError(h,u);else throw new Error(h)},setInput:function(l,h){return this.yy=h||this.yy||{},this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var h=l.match(/(?:\r\n?|\n).*/g);return h?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var h=l.length,u=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h),this.offset-=h;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var d=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===f.length?this.yylloc.first_column:0)+f[f.length-u.length].length-u[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-h]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),h=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+h+"^"},test_match:function(l,h){var u,f,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))),f=l[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],u=this.performAction.call(this,this.yy,this,h,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),u)return u;if(this._backtrack){for(var p in d)this[p]=d[p];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,h,u,f;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),p=0;p<d.length;p++)if(u=this._input.match(this.rules[d[p]]),u&&(!h||u[0].length>h[0].length)){if(h=u,f=p,this.options.backtrack_lexer){if(l=this.test_match(u,d[p]),l!==!1)return l;if(this._backtrack){h=!1;continue}else return!1}else if(!this.options.flex)break}return h?(l=this.test_match(h,d[f]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var h=this.next();return h||this.lex()},begin:function(h){this.conditionStack.push(h)},popState:function(){var h=this.conditionStack.length-1;return h>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(h){return h=this.conditionStack.length-1-Math.abs(h||0),h>=0?this.conditionStack[h]:"INITIAL"},pushState:function(h){this.begin(h)},stateStackSize:function(){return this.conditionStack.length},options:{easy_keword_rules:!0},performAction:function(h,u,f,d){switch(f){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},rules:[/^(?:sankey-beta\b)/,/^(?:$)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:(\u002C))/,/^(?:(\u0022))/,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/,/^(?:(\u0022)(?!(\u0022)))/,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();n.lexer=s;function a(){this.yy={}}return a.prototype=n,n.Parser=a,new a}();Uo.parser=Uo;const fa=Uo;let Da=[],Ra=[],Zr={};const xw=()=>{Da=[],Ra=[],Zr={},We()};class bw{constructor(e,i,r=0){this.source=e,this.target=i,this.value=r}}const kw=(t,e,i)=>{Da.push(new bw(t,e,i))};class _w{constructor(e){this.ID=e}}const Tw=t=>(t=yt.sanitizeText(t,G()),Zr[t]||(Zr[t]=new _w(t),Ra.push(Zr[t])),Zr[t]),Cw=()=>Ra,Ew=()=>Da,Sw=()=>({nodes:Ra.map(t=>({id:t.ID})),links:Da.map(t=>({source:t.source.ID,target:t.target.ID,value:t.value}))}),ww={nodesMap:Zr,getConfig:()=>G().sankey,getNodes:Cw,getLinks:Ew,getGraph:Sw,addLink:kw,findOrCreateNode:Tw,getAccTitle:Ye,setAccTitle:Oe,getAccDescription:Ue,setAccDescription:He,getDiagramTitle:je,setDiagramTitle:ni,clear:xw},Tf=class jo{static next(e){return new jo(e+ ++jo.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}};Tf.count=0;let Nh=Tf;const vw={left:_p,right:Tp,center:Cp,justify:Ep},Aw=function(t,e,i,r){const{securityLevel:n,sankey:s}=G(),a=Au.sankey;let o;n==="sandbox"&&(o=pt("#i"+e));const l=n==="sandbox"?pt(o.nodes()[0].contentDocument.body):pt("body"),h=n==="sandbox"?l.select(`[id="${e}"]`):pt(`[id="${e}"]`),u=(s==null?void 0:s.width)??a.width,f=(s==null?void 0:s.height)??a.width,d=(s==null?void 0:s.useMaxWidth)??a.useMaxWidth,p=(s==null?void 0:s.nodeAlignment)??a.nodeAlignment,y=(s==null?void 0:s.prefix)??a.prefix,b=(s==null?void 0:s.suffix)??a.suffix,C=(s==null?void 0:s.showValues)??a.showValues;Ne(h,f,u,d);const E=r.db.getGraph(),k=vw[p],I=10;bp().nodeId(v=>v.id).nodeWidth(I).nodePadding(10+(C?15:0)).nodeAlign(k).extent([[0,0],[u,f]])(E);const B=Vh(Sp);h.append("g").attr("class","nodes").selectAll(".node").data(E.nodes).join("g").attr("class","node").attr("id",v=>(v.uid=Nh.next("node-")).id).attr("transform",function(v){return"translate("+v.x0+","+v.y0+")"}).attr("x",v=>v.x0).attr("y",v=>v.y0).append("rect").attr("height",v=>v.y1-v.y0).attr("width",v=>v.x1-v.x0).attr("fill",v=>B(v.id));const _=({id:v,value:g})=>C?`${v}
${y}${Math.round(g*100)/100}${b}`:v;h.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(E.nodes).join("text").attr("x",v=>v.x0<u/2?v.x1+6:v.x0-6).attr("y",v=>(v.y1+v.y0)/2).attr("dy",`${C?"0":"0.35"}em`).attr("text-anchor",v=>v.x0<u/2?"start":"end").text(_);const O=h.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(E.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),L=(s==null?void 0:s.linkColor)||"gradient";if(L==="gradient"){const v=O.append("linearGradient").attr("id",g=>(g.uid=Nh.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",g=>g.source.x1).attr("x2",g=>g.target.x0);v.append("stop").attr("offset","0%").attr("stop-color",g=>B(g.source.id)),v.append("stop").attr("offset","100%").attr("stop-color",g=>B(g.target.id))}let m;switch(L){case"gradient":m=v=>v.uid;break;case"source":m=v=>B(v.source.id);break;case"target":m=v=>B(v.target.id);break;default:m=L}O.append("path").attr("d",kp()).attr("stroke",m).attr("stroke-width",v=>Math.max(1,v.width))},Lw={draw:Aw},Bw=t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),Fw=fa.parse.bind(fa);fa.parse=t=>Fw(Bw(t));const Iw={parser:fa,db:ww,renderer:Lw},Dw=Object.freeze(Object.defineProperty({__proto__:null,diagram:Iw},Symbol.toStringTag,{value:"Module"}));export{Di as m};
