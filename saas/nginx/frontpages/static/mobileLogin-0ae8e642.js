import{l as y,r as l,aD as I,c as N,Z as k,ag as d,m as _,p as f,u as g,J as E,R as O,q as e,U as a,O as c,a8 as L,a2 as S,aE as V,aF as C}from"./vue-417f18eb.js";import{f as F,l as R,C as U,_ as z}from"./index-87a8c386.js";import"./element-a21ceda4.js";import"./vxe-84ff863c.js";const K="/static/Frame-b7e5d8e7.png",h=r=>(V("data-v-d454cd41"),r=r(),C(),r),M={class:"mobileLogin"},W={class:"mobileLogin-right"},q=h(()=>e("div",{class:"right-head"},[e("div",{class:"head"},[e("div",{class:"head-logo"}),e("div",{class:"head-fool"},[e("span",null,"欢迎来到灵搭平台")])])],-1)),B={class:"right-form"},D={class:"form-con"},J=h(()=>e("div",{class:"con-head"},[e("div",{class:"head-span"},"账号登录"),e("div",{class:"head-el-tabs__active-bar"})],-1)),A={class:"con-input"},Z={class:"con-button"},$=["onClick"],j=y({__name:"mobileLogin",setup(r){let t=l(!0);const v=I();N(()=>{window.innerWidth<=1e3?t.value=!1:window.innerWidth>1e3&&(t.value=!0),window.addEventListener("resize",()=>{window.innerWidth<=1e3?t.value=!1:window.innerWidth>1e3&&(t.value=!0)})});const w=l(null);l(!1);const s=k({userNameOrExternalId:"",password:""}),b={userNameOrExternalId:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"用户名不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},m=async()=>{const n=F.hashSync(s.password);let{data:o}=await R({userNameOrExternalId:s.userNameOrExternalId,password:n});o.token&&(localStorage.setItem("autoagents-token",o.token),localStorage.setItem(U.USER_INFO,JSON.stringify(o)),v.push("/"))};return(n,o)=>{const u=d("el-input"),p=d("el-form-item"),x=d("el-form");return _(),f("div",M,[g(t)===!0?(_(),f("div",{key:0,class:"mobileLogin-left",style:E({backgroundImage:`url(' ${g(K)} ')`})},null,4)):O("",!0),e("div",W,[q,e("div",B,[e("div",D,[J,e("div",A,[a(x,{ref_key:"loginFormRef",ref:w,model:s,rules:b,onKeyup:L(m,["enter"])},{default:c(()=>[a(p,{prop:"userNameOrExternalId"},{default:c(()=>[a(u,{modelValue:s.userNameOrExternalId,"onUpdate:modelValue":o[0]||(o[0]=i=>s.userNameOrExternalId=i),modelModifiers:{trim:!0},placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":n.User,size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),a(p,{prop:"password"},{default:c(()=>[a(u,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=i=>s.password=i),modelModifiers:{trim:!0},placeholder:"密码",type:"password",tabindex:"2","prefix-icon":n.Lock,size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1},8,["model","onKeyup"])]),e("div",Z,[e("button",{onClick:S(m,["prevent"])},"登录",8,$)])])])])])}}});const T=z(j,[["__scopeId","data-v-d454cd41"]]);export{T as default};
