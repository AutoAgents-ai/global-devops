import{c as Ne}from"./classnames-25f5e917.js";import{r as n,a as ae}from"./react-f8c4b268.js";import{c as P,f as Vt,e as H,g as be,h as Rr,d as Dr}from"./@babel-8debb48f.js";import{c as Ht,a as A,d as Wr,u as Vr,r as dr,s as Bt,e as Tr,f as ze,i as ur,h as Hr,j as mr,g as sr,k as Br,l as Ar,m as Fr,n as Ir,o as Ur,p as hr}from"./rc-util-35a1817f.js";import{r as vr}from"./react-dom-daa06353.js";import"./react-is-e8e5dbb3.js";import{R as Lr}from"./rc-resize-observer-db8399b3.js";import{C as $r}from"./rc-motion-6af00954.js";var _r=n.createContext(null),gr=[];function jr(e,r){var t=n.useState(function(){if(!Ht())return null;var y=document.createElement("div");return y}),o=P(t,1),a=o[0],i=n.useRef(!1),l=n.useContext(_r),s=n.useState(gr),m=P(s,2),v=m[0],h=m[1],u=l||(i.current?void 0:function(y){h(function(C){var E=[y].concat(Vt(C));return E})});function g(){a.parentElement||document.body.appendChild(a),i.current=!0}function f(){var y;(y=a.parentElement)===null||y===void 0||y.removeChild(a),i.current=!1}return A(function(){return e?l?l(g):g():f(),f},[e]),A(function(){v.length&&(v.forEach(function(y){return y()}),h(gr))},[v]),[a,u]}function qr(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Qr="rc-util-locker-".concat(Date.now()),yr=0;function Jr(e){var r=!!e,t=n.useState(function(){return yr+=1,"".concat(Qr,"_").concat(yr)}),o=P(t,1),a=o[0];A(function(){if(r){var i=Wr(document.body).width,l=qr();Vr(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(i,"px);"):"",`
}`),a)}else dr(a);return function(){dr(a)}},[r,a])}var Cr=!1;function Gr(e){return typeof e=="boolean"&&(Cr=e),Cr}var wr=function(r){return r===!1?!1:!Ht()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},At=n.forwardRef(function(e,r){var t=e.open,o=e.autoLock,a=e.getContainer;e.debug;var i=e.autoDestroy,l=i===void 0?!0:i,s=e.children,m=n.useState(t),v=P(m,2),h=v[0],u=v[1],g=h||t;n.useEffect(function(){(l||t)&&u(t)},[t,l]);var f=n.useState(function(){return wr(a)}),y=P(f,2),C=y[0],E=y[1];n.useEffect(function(){var U=wr(a);E(U??null)});var N=jr(g&&!C),M=P(N,2),x=M[0],d=M[1],R=C??x;Jr(o&&t&&Ht()&&(R===x||R===document.body));var Y=null;if(s&&Bt(s)&&r){var G=s;Y=G.ref}var X=Tr(Y,r);if(!g||!Ht()||C===void 0)return null;var oe=R===!1||Gr(),F=s;return r&&(F=n.cloneElement(s,{ref:X})),n.createElement(_r.Provider,{value:d},oe?F:vr.createPortal(F,R))}),br=n.createContext(null);function Mr(e){return e?Array.isArray(e)?e:[e]:[]}function Kr(e,r,t,o){return n.useMemo(function(){var a=Mr(t??r),i=Mr(o??r),l=new Set(a),s=new Set(i);return e&&(l.has("hover")&&(l.delete("hover"),l.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[l,s]},[e,r,t,o])}function Zr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return t?e[0]===r[0]:e[0]===r[0]&&e[1]===r[1]}function Or(e,r,t,o){for(var a=t.points,i=Object.keys(e),l=0;l<i.length;l+=1){var s,m=i[l];if(Zr((s=e[m])===null||s===void 0?void 0:s.points,a,o))return"".concat(r,"-placement-").concat(m)}return""}function Sr(e,r,t,o){return r||(t?{motionName:"".concat(e,"-").concat(t)}:o?{motionName:o}:null)}function ht(e){return e.ownerDocument.defaultView}function cr(e){for(var r=[],t=e==null?void 0:e.parentElement,o=["hidden","scroll","clip","auto"];t;){var a=ht(t).getComputedStyle(t),i=a.overflowX,l=a.overflowY,s=a.overflow;[i,l,s].some(function(m){return o.includes(m)})&&r.push(t),t=t.parentElement}return r}function mt(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?r:e}function dt(e){return mt(parseFloat(e),0)}function Pr(e,r){var t=H({},e);return(r||[]).forEach(function(o){if(!(o instanceof HTMLBodyElement||o instanceof HTMLHtmlElement)){var a=ht(o).getComputedStyle(o),i=a.overflow,l=a.overflowClipMargin,s=a.borderTopWidth,m=a.borderBottomWidth,v=a.borderLeftWidth,h=a.borderRightWidth,u=o.getBoundingClientRect(),g=o.offsetHeight,f=o.clientHeight,y=o.offsetWidth,C=o.clientWidth,E=dt(s),N=dt(m),M=dt(v),x=dt(h),d=mt(Math.round(u.width/y*1e3)/1e3),R=mt(Math.round(u.height/g*1e3)/1e3),Y=(y-C-M-x)*d,G=(g-f-E-N)*R,X=E*R,oe=N*R,F=M*d,U=x*d,me=0,se=0;if(i==="clip"){var z=dt(l);me=z*d,se=z*R}var j=u.x+F-me,D=u.y+X-se,b=j+u.width+2*me-F-U-Y,I=D+u.height+2*se-X-oe-G;t.left=Math.max(t.left,j),t.top=Math.max(t.top,D),t.right=Math.min(t.right,b),t.bottom=Math.min(t.bottom,I)}}),t}function Er(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t="".concat(r),o=t.match(/^(.*)\%$/);return o?e*(parseFloat(o[1])/100):parseFloat(t)}function Nr(e,r){var t=r||[],o=P(t,2),a=o[0],i=o[1];return[Er(e.width,a),Er(e.height,i)]}function kr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function it(e,r){var t=r[0],o=r[1],a,i;return t==="t"?i=e.y:t==="b"?i=e.y+e.height:i=e.y+e.height/2,o==="l"?a=e.x:o==="r"?a=e.x+e.width:a=e.x+e.width/2,{x:a,y:i}}function je(e,r){var t={t:"b",b:"t",l:"r",r:"l"};return e.map(function(o,a){return a===r?t[o]||"c":o}).join("")}function Yr(e,r,t,o,a,i,l){var s=n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[o]||{}}),m=P(s,2),v=m[0],h=m[1],u=n.useRef(0),g=n.useMemo(function(){return r?cr(r):[]},[r]),f=n.useRef({}),y=function(){f.current={}};e||y();var C=ze(function(){if(r&&t&&e){let J=function($t,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Me,ot=T.x+$t,ft=T.y+_e,nr=ot+p,ar=ft+L,or=Math.max(ot,et.left),ir=Math.max(ft,et.top),c=Math.min(nr,et.right),w=Math.min(ar,et.bottom);return Math.max(0,(c-or)*(w-ir))},Lt=function(){He=T.y+V,nt=He+L,Be=T.x+k,Ze=Be+p};var M,x,d=r,R=d.ownerDocument,Y=ht(d),G=Y.getComputedStyle(d),X=G.width,oe=G.height,F=G.position,U=d.style.left,me=d.style.top,se=d.style.right,z=d.style.bottom,j=H(H({},a[o]),i),D=R.createElement("div");(M=d.parentElement)===null||M===void 0||M.appendChild(D),D.style.left="".concat(d.offsetLeft,"px"),D.style.top="".concat(d.offsetTop,"px"),D.style.position=F,D.style.height="".concat(d.offsetHeight,"px"),D.style.width="".concat(d.offsetWidth,"px"),d.style.left="0",d.style.top="0",d.style.right="auto",d.style.bottom="auto";var b;if(Array.isArray(t))b={x:t[0],y:t[1],width:0,height:0};else{var I=t.getBoundingClientRect();b={x:I.x,y:I.y,width:I.width,height:I.height}}var T=d.getBoundingClientRect(),K=R.documentElement,W=K.clientWidth,qe=K.clientHeight,We=K.scrollWidth,he=K.scrollHeight,ke=K.scrollTop,ie=K.scrollLeft,L=T.height,p=T.width,ee=b.height,Z=b.width,Ve={left:0,top:0,right:W,bottom:qe},Qe={left:-ie,top:-ke,right:We-ie,bottom:he-ke},q=j.htmlRegion,xe="visible",ge="visibleFirst";q!=="scroll"&&q!==ge&&(q=xe);var Q=q===ge,ye=Pr(Qe,g),S=Pr(Ve,g),Me=q===xe?S:ye,te=Q?S:Me;d.style.left="auto",d.style.top="auto",d.style.right="0",d.style.bottom="0";var Je=d.getBoundingClientRect();d.style.left=U,d.style.top=me,d.style.right=se,d.style.bottom=z,(x=d.parentElement)===null||x===void 0||x.removeChild(D);var Re=mt(Math.round(p/parseFloat(X)*1e3)/1e3),De=mt(Math.round(L/parseFloat(oe)*1e3)/1e3);if(Re===0||De===0||ur(t)&&!Hr(t))return;var Ce=j.offset,le=j.targetOffset,ce=Nr(T,Ce),O=P(ce,2),we=O[0],ve=O[1],Se=Nr(b,le),gt=P(Se,2),Ft=gt[0],tt=gt[1];b.x-=Ft,b.y-=tt;var fe=j.points||[],Te=P(fe,2),Ut=Te[0],jt=Te[1],Ie=kr(jt),ue=kr(Ut),lt=it(b,Ie),yt=it(T,ue),Le=H({},j),k=lt.x-yt.x+we,V=lt.y-yt.y+ve,re=J(k,V),Ge=J(k,V,S),ut=it(b,["t","l"]),st=it(T,["t","l"]),de=it(b,["b","r"]),Ct=it(T,["b","r"]),Ke=j.overflow||{},ct=Ke.adjustX,wt=Ke.adjustY,bt=Ke.shiftX,vt=Ke.shiftY,rt=function(_e){return typeof _e=="boolean"?_e:_e>=0},He,nt,Be,Ze;Lt();var Mt=rt(wt),Oe=ue[0]===Ie[0];if(Mt&&ue[0]==="t"&&(nt>te.bottom||f.current.bt)){var Ye=V;Oe?Ye-=L-ee:Ye=ut.y-Ct.y-ve;var ne=J(k,Ye),qt=J(k,Ye,S);ne>re||ne===re&&(!Q||qt>=Ge)?(f.current.bt=!0,V=Ye,ve=-ve,Le.points=[je(ue,0),je(Ie,0)]):f.current.bt=!1}if(Mt&&ue[0]==="b"&&(He<te.top||f.current.tb)){var Xe=V;Oe?Xe+=L-ee:Xe=de.y-st.y-ve;var St=J(k,Xe),Qt=J(k,Xe,S);St>re||St===re&&(!Q||Qt>=Ge)?(f.current.tb=!0,V=Xe,ve=-ve,Le.points=[je(ue,0),je(Ie,0)]):f.current.tb=!1}var Pt=rt(ct),Et=ue[1]===Ie[1];if(Pt&&ue[1]==="l"&&(Ze>te.right||f.current.rl)){var pe=k;Et?pe-=p-Z:pe=ut.x-Ct.x-we;var Nt=J(pe,V),Jt=J(pe,V,S);Nt>re||Nt===re&&(!Q||Jt>=Ge)?(f.current.rl=!0,k=pe,we=-we,Le.points=[je(ue,1),je(Ie,1)]):f.current.rl=!1}if(Pt&&ue[1]==="r"&&(Be<te.left||f.current.lr)){var Pe=k;Et?Pe+=p-Z:Pe=de.x-st.x-we;var at=J(Pe,V),Gt=J(Pe,V,S);at>re||at===re&&(!Q||Gt>=Ge)?(f.current.lr=!0,k=Pe,we=-we,Le.points=[je(ue,1),je(Ie,1)]):f.current.lr=!1}Lt();var Ae=bt===!0?0:bt;typeof Ae=="number"&&(Be<S.left&&(k-=Be-S.left-we,b.x+Z<S.left+Ae&&(k+=b.x-S.left+Z-Ae)),Ze>S.right&&(k-=Ze-S.right-we,b.x>S.right-Ae&&(k+=b.x-S.right+Ae)));var Ee=vt===!0?0:vt;typeof Ee=="number"&&(He<S.top&&(V-=He-S.top-ve,b.y+ee<S.top+Ee&&(V+=b.y-S.top+ee-Ee)),nt>S.bottom&&(V-=nt-S.bottom-ve,b.y>S.bottom-Ee&&(V+=b.y-S.bottom+Ee)));var $e=T.x+k,kt=$e+p,Fe=T.y+V,Ue=Fe+L,xt=b.x,Kt=xt+Z,Rt=b.y,Dt=Rt+ee,Zt=Math.max($e,xt),Ot=Math.min(kt,Kt),Yt=(Zt+Ot)/2,Tt=Yt-$e,Xt=Math.max(Fe,Rt),pt=Math.min(Ue,Dt),It=(Xt+pt)/2,er=It-Fe;l==null||l(r,Le);var tr=Je.right-T.x-(k+T.width),rr=Je.bottom-T.y-(V+T.height);h({ready:!0,offsetX:k/Re,offsetY:V/De,offsetR:tr/Re,offsetB:rr/De,arrowX:Tt/Re,arrowY:er/De,scaleX:Re,scaleY:De,align:Le})}}),E=function(){u.current+=1;var x=u.current;Promise.resolve().then(function(){u.current===x&&C()})},N=function(){h(function(x){return H(H({},x),{},{ready:!1})})};return A(N,[o]),A(function(){e||N()},[e]),[v.ready,v.offsetX,v.offsetY,v.offsetR,v.offsetB,v.arrowX,v.arrowY,v.scaleX,v.scaleY,v.align,E]}function Xr(e,r,t,o,a){A(function(){if(e&&r&&t){let u=function(){o(),a()};var i=r,l=t,s=cr(i),m=cr(l),v=ht(l),h=new Set([v].concat(Vt(s),Vt(m)));return h.forEach(function(g){g.addEventListener("scroll",u,{passive:!0})}),v.addEventListener("resize",u,{passive:!0}),o(),function(){h.forEach(function(g){g.removeEventListener("scroll",u),v.removeEventListener("resize",u)})}}},[e,r,t])}function pr(e,r,t,o,a,i,l,s){var m=n.useRef(e),v=n.useRef(!1);m.current!==e&&(v.current=!0,m.current=e),n.useEffect(function(){var h=mr(function(){v.current=!1});return function(){mr.cancel(h)}},[e]),n.useEffect(function(){if(r&&o&&(!a||i)){var h=function(){var Y=!1,G=function(F){var U=F.target;Y=l(U)},X=function(F){var U=F.target;!v.current&&m.current&&!Y&&!l(U)&&s(!1)};return[G,X]},u=h(),g=P(u,2),f=g[0],y=g[1],C=h(),E=P(C,2),N=E[0],M=E[1],x=ht(o);x.addEventListener("mousedown",f,!0),x.addEventListener("click",y,!0),x.addEventListener("contextmenu",y,!0);var d=sr(t);return d&&(d.addEventListener("mousedown",N,!0),d.addEventListener("click",M,!0),d.addEventListener("contextmenu",M,!0)),function(){x.removeEventListener("mousedown",f,!0),x.removeEventListener("click",y,!0),x.removeEventListener("contextmenu",y,!0),d&&(d.removeEventListener("mousedown",N,!0),d.removeEventListener("click",M,!0),d.removeEventListener("contextmenu",M,!0))}}},[r,t,o,a,i])}function en(e){var r=e.prefixCls,t=e.align,o=e.arrow,a=e.arrowPos,i=o||{},l=i.className,s=i.content,m=a.x,v=m===void 0?0:m,h=a.y,u=h===void 0?0:h,g=n.useRef();if(!t||!t.points)return null;var f={position:"absolute"};if(t.autoArrow!==!1){var y=t.points[0],C=t.points[1],E=y[0],N=y[1],M=C[0],x=C[1];E===M||!["t","b"].includes(E)?f.top=u:E==="t"?f.top=0:f.bottom=0,N===x||!["l","r"].includes(N)?f.left=v:N==="l"?f.left=0:f.right=0}return n.createElement("div",{ref:g,className:Ne("".concat(r,"-arrow"),l),style:f},s)}function tn(e){var r=e.prefixCls,t=e.open,o=e.zIndex,a=e.mask,i=e.motion;return a?n.createElement($r,be({},i,{motionAppear:!0,visible:t,removeOnLeave:!0}),function(l){var s=l.className;return n.createElement("div",{style:{zIndex:o},className:Ne("".concat(r,"-mask"),s)})}):null}var rn=n.memo(function(e){var r=e.children;return r},function(e,r){return r.cache}),nn=n.forwardRef(function(e,r){var t=e.popup,o=e.className,a=e.prefixCls,i=e.style,l=e.target,s=e.onVisibleChanged,m=e.open,v=e.keepDom,h=e.onClick,u=e.mask,g=e.arrow,f=e.arrowPos,y=e.align,C=e.motion,E=e.maskMotion,N=e.forceRender,M=e.getPopupContainer,x=e.autoDestroy,d=e.portal,R=e.zIndex,Y=e.onMouseEnter,G=e.onMouseLeave,X=e.onPointerEnter,oe=e.ready,F=e.offsetX,U=e.offsetY,me=e.offsetR,se=e.offsetB,z=e.onAlign,j=e.onPrepare,D=e.stretch,b=e.targetWidth,I=e.targetHeight,T=typeof t=="function"?t():t,K=m||v,W=(M==null?void 0:M.length)>0,qe=n.useState(!M||!W),We=P(qe,2),he=We[0],ke=We[1];if(A(function(){!he&&W&&l&&ke(!0)},[he,W,l]),!he)return null;var ie="auto",L={left:"-1000vw",top:"-1000vh",right:ie,bottom:ie};if(oe||!m){var p=y.points,ee=y._experimental,Z=ee==null?void 0:ee.dynamicInset,Ve=Z&&p[0][1]==="r",Qe=Z&&p[0][0]==="b";Ve?(L.right=me,L.left=ie):(L.left=F,L.right=ie),Qe?(L.bottom=se,L.top=ie):(L.top=U,L.bottom=ie)}var q={};return D&&(D.includes("height")&&I?q.height=I:D.includes("minHeight")&&I&&(q.minHeight=I),D.includes("width")&&b?q.width=b:D.includes("minWidth")&&b&&(q.minWidth=b)),m||(q.pointerEvents="none"),n.createElement(d,{open:N||K,getContainer:M&&function(){return M(l)},autoDestroy:x},n.createElement(tn,{prefixCls:a,open:m,zIndex:R,mask:u,motion:E}),n.createElement(Lr,{onResize:z,disabled:!m},function(xe){return n.createElement($r,be({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:N,leavedClassName:"".concat(a,"-hidden")},C,{onAppearPrepare:j,onEnterPrepare:j,visible:m,onVisibleChanged:function(Q){var ye;C==null||(ye=C.onVisibleChanged)===null||ye===void 0||ye.call(C,Q),s(Q)}}),function(ge,Q){var ye=ge.className,S=ge.style,Me=Ne(a,ye,o);return n.createElement("div",{ref:Br(xe,r,Q),className:Me,style:H(H(H(H({"--arrow-x":"".concat(f.x||0,"px"),"--arrow-y":"".concat(f.y||0,"px")},L),q),S),{},{boxSizing:"border-box",zIndex:R},i),onMouseEnter:Y,onMouseLeave:G,onPointerEnter:X,onClick:h},g&&n.createElement(en,{prefixCls:a,arrow:g,arrowPos:f,align:y}),n.createElement(rn,{cache:!m},T))})}))}),an=n.forwardRef(function(e,r){var t=e.children,o=e.getTriggerDOMNode,a=Bt(t),i=n.useCallback(function(s){Ar(r,o?o(s):s)},[o]),l=Tr(i,t.ref);return a?n.cloneElement(t,{ref:l}):t}),on=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ln(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:At,r=n.forwardRef(function(t,o){var a=t.prefixCls,i=a===void 0?"rc-trigger-popup":a,l=t.children,s=t.action,m=s===void 0?"hover":s,v=t.showAction,h=t.hideAction,u=t.popupVisible,g=t.defaultPopupVisible,f=t.onPopupVisibleChange,y=t.afterPopupVisibleChange,C=t.mouseEnterDelay,E=t.mouseLeaveDelay,N=E===void 0?.1:E,M=t.focusDelay,x=t.blurDelay,d=t.mask,R=t.maskClosable,Y=R===void 0?!0:R,G=t.getPopupContainer,X=t.forceRender,oe=t.autoDestroy,F=t.destroyPopupOnHide,U=t.popup,me=t.popupClassName,se=t.popupStyle,z=t.popupPlacement,j=t.builtinPlacements,D=j===void 0?{}:j,b=t.popupAlign,I=t.zIndex,T=t.stretch,K=t.getPopupClassNameFromAlign,W=t.alignPoint,qe=t.onPopupClick,We=t.onPopupAlign,he=t.arrow,ke=t.popupMotion,ie=t.maskMotion,L=t.popupTransitionName,p=t.popupAnimation,ee=t.maskTransitionName,Z=t.maskAnimation,Ve=t.className,Qe=t.getTriggerDOMNode,q=Rr(t,on),xe=oe||F||!1,ge=n.useState(!1),Q=P(ge,2),ye=Q[0],S=Q[1];A(function(){S(Fr())},[]);var Me=n.useRef({}),te=n.useContext(br),Je=n.useMemo(function(){return{registerSubPopup:function(w,$){Me.current[w]=$,te==null||te.registerSubPopup(w,$)}}},[te]),Re=Ir(),De=n.useState(null),Ce=P(De,2),le=Ce[0],ce=Ce[1],O=ze(function(c){ur(c)&&le!==c&&ce(c),te==null||te.registerSubPopup(Re,c)}),we=n.useState(null),ve=P(we,2),Se=ve[0],gt=ve[1],Ft=ze(function(c){ur(c)&&Se!==c&&gt(c)}),tt=n.Children.only(l),fe=(tt==null?void 0:tt.props)||{},Te={},Ut=ze(function(c){var w,$,B=Se;return(B==null?void 0:B.contains(c))||((w=sr(B))===null||w===void 0?void 0:w.host)===c||c===B||(le==null?void 0:le.contains(c))||(($=sr(le))===null||$===void 0?void 0:$.host)===c||c===le||Object.values(Me.current).some(function(_){return(_==null?void 0:_.contains(c))||c===_})}),jt=Sr(i,ke,p,L),Ie=Sr(i,ie,Z,ee),ue=n.useState(g||!1),lt=P(ue,2),yt=lt[0],Le=lt[1],k=u??yt,V=ze(function(c){u===void 0&&Le(c)});A(function(){Le(u||!1)},[u]);var re=n.useRef(k);re.current=k;var Ge=ze(function(c){vr.flushSync(function(){k!==c&&(V(c),f==null||f(c))})}),ut=n.useRef(),st=function(){clearTimeout(ut.current)},de=function(w){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;st(),$===0?Ge(w):ut.current=setTimeout(function(){Ge(w)},$*1e3)};n.useEffect(function(){return st},[]);var Ct=n.useState(!1),Ke=P(Ct,2),ct=Ke[0],wt=Ke[1];A(function(c){(!c||k)&&wt(!0)},[k]);var bt=n.useState(null),vt=P(bt,2),rt=vt[0],He=vt[1],nt=n.useState([0,0]),Be=P(nt,2),Ze=Be[0],Mt=Be[1],Oe=function(w){Mt([w.clientX,w.clientY])},Ye=Yr(k,le,W?Ze:Se,z,D,b,We),ne=P(Ye,11),qt=ne[0],Xe=ne[1],St=ne[2],Qt=ne[3],Pt=ne[4],Et=ne[5],pe=ne[6],Nt=ne[7],Jt=ne[8],Pe=ne[9],at=ne[10],Gt=Kr(ye,m,v,h),Ae=P(Gt,2),Ee=Ae[0],$e=Ae[1],kt=Ee.has("click"),Fe=$e.has("click")||$e.has("contextMenu"),Ue=ze(function(){ct||at()}),xt=function(){re.current&&W&&Fe&&de(!1)};Xr(k,Se,le,Ue,xt),A(function(){Ue()},[Ze,z]),A(function(){k&&!(D!=null&&D[z])&&Ue()},[JSON.stringify(b)]);var Kt=n.useMemo(function(){var c=Or(D,i,Pe,W);return Ne(c,K==null?void 0:K(Pe))},[Pe,K,D,i,W]);n.useImperativeHandle(o,function(){return{forceAlign:Ue}});var Rt=n.useState(0),Dt=P(Rt,2),Zt=Dt[0],Ot=Dt[1],Yt=n.useState(0),Tt=P(Yt,2),Xt=Tt[0],pt=Tt[1],It=function(){if(T&&Se){var w=Se.getBoundingClientRect();Ot(w.width),pt(w.height)}},er=function(){It(),Ue()},tr=function(w){wt(!1),at(),y==null||y(w)},rr=function(){return new Promise(function(w){It(),He(function(){return w})})};A(function(){rt&&(at(),rt(),He(null))},[rt]);function J(c,w,$,B){Te[c]=function(_){var _t;B==null||B(_),de(w,$);for(var lr=arguments.length,fr=new Array(lr>1?lr-1:0),zt=1;zt<lr;zt++)fr[zt-1]=arguments[zt];(_t=fe[c])===null||_t===void 0||_t.call.apply(_t,[fe,_].concat(fr))}}(kt||Fe)&&(Te.onClick=function(c){var w;re.current&&Fe?de(!1):!re.current&&kt&&(Oe(c),de(!0));for(var $=arguments.length,B=new Array($>1?$-1:0),_=1;_<$;_++)B[_-1]=arguments[_];(w=fe.onClick)===null||w===void 0||w.call.apply(w,[fe,c].concat(B))}),pr(k,Fe,Se,le,d,Y,Ut,de);var Lt=Ee.has("hover"),$t=$e.has("hover"),_e,et;Lt&&(J("onMouseEnter",!0,C,function(c){Oe(c)}),J("onPointerEnter",!0,C,function(c){Oe(c)}),_e=function(){(k||ct)&&de(!0,C)},W&&(Te.onMouseMove=function(c){var w;(w=fe.onMouseMove)===null||w===void 0||w.call(fe,c)})),$t&&(J("onMouseLeave",!1,N),J("onPointerLeave",!1,N),et=function(){de(!1,N)}),Ee.has("focus")&&J("onFocus",!0,M),$e.has("focus")&&J("onBlur",!1,x),Ee.has("contextMenu")&&(Te.onContextMenu=function(c){var w;re.current&&$e.has("contextMenu")?de(!1):(Oe(c),de(!0)),c.preventDefault();for(var $=arguments.length,B=new Array($>1?$-1:0),_=1;_<$;_++)B[_-1]=arguments[_];(w=fe.onContextMenu)===null||w===void 0||w.call.apply(w,[fe,c].concat(B))}),Ve&&(Te.className=Ne(fe.className,Ve));var ot=H(H({},fe),Te),ft={},nr=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];nr.forEach(function(c){q[c]&&(ft[c]=function(){for(var w,$=arguments.length,B=new Array($),_=0;_<$;_++)B[_]=arguments[_];(w=ot[c])===null||w===void 0||w.call.apply(w,[ot].concat(B)),q[c].apply(q,B)})});var ar=n.cloneElement(tt,H(H({},ot),ft)),or={x:Et,y:pe},ir=he?H({},he!==!0?he:{}):null;return n.createElement(n.Fragment,null,n.createElement(Lr,{disabled:!k,ref:Ft,onResize:er},n.createElement(an,{getTriggerDOMNode:Qe},ar)),n.createElement(br.Provider,{value:Je},n.createElement(nn,{portal:e,ref:O,prefixCls:i,popup:U,className:Ne(me,Kt),style:se,target:Se,onMouseEnter:_e,onMouseLeave:et,onPointerEnter:_e,zIndex:I,open:k,keepDom:ct,onClick:qe,mask:d,motion:jt,maskMotion:Ie,onVisibleChanged:tr,onPrepare:rr,forceRender:X,autoDestroy:xe,getPopupContainer:G,align:Pe,arrow:ir,arrowPos:or,ready:qt,offsetX:Xe,offsetY:St,offsetR:Qt,offsetB:Pt,onAlign:Ue,stretch:T,targetWidth:Zt/Nt,targetHeight:Xt/Jt})))});return r}const un=ln(At);function kn(e){var r=n.createContext(void 0),t=function(a){var i=a.value,l=a.children,s=n.useRef(i);s.current=i;var m=n.useState(function(){return{getValue:function(){return s.current},listeners:new Set}}),v=P(m,1),h=v[0];return A(function(){vr.unstable_batchedUpdates(function(){h.listeners.forEach(function(u){u(i)})})},[i]),n.createElement(r.Provider,{value:h},l)};return{Context:r,Provider:t,defaultValue:e}}function xn(e,r){var t=ze(typeof r=="function"?r:function(u){if(r===void 0)return u;if(!Array.isArray(r))return u[r];var g={};return r.forEach(function(f){g[f]=u[f]}),g}),o=n.useContext(e==null?void 0:e.Context),a=o||{},i=a.listeners,l=a.getValue,s=n.useRef();s.current=t(o?l():e==null?void 0:e.defaultValue);var m=n.useState({}),v=P(m,2),h=v[1];return A(function(){if(!o)return;function u(g){var f=t(g);Ur(s.current,f,!0)||h({})}return i.add(u),function(){i.delete(u)}},[o]),s.current}function Rn(){var e=n.createContext(null);function r(){return n.useContext(e)}function t(a,i){var l=Bt(a),s=function(v,h){var u=l?{ref:h}:{},g=n.useRef(0),f=n.useRef(v),y=r();return y!==null?n.createElement(a,be({},v,u)):((!i||i(f.current,v))&&(g.current+=1),f.current=v,n.createElement(e.Provider,{value:g.current},n.createElement(a,be({},v,u))))};return l?n.forwardRef(s):s}function o(a,i){var l=Bt(a),s=function(v,h){var u=l?{ref:h}:{};return r(),n.createElement(a,be({},v,u))};return l?n.memo(n.forwardRef(s),i):n.memo(s,i)}return{makeImmutable:t,responseImmutable:o,useImmutableMark:r}}function sn(e){var r=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,o=e.getBoundingClientRect(),a=o.top,i=o.right,l=o.bottom,s=o.left;return a>=0&&s>=0&&i<=r&&l<=t}function cn(e,r,t){var o;return(o=t??r)!==null&&o!==void 0?o:e===null?"center":"bottom"}function vn(e,r,t,o){var a=n.useState(void 0),i=P(a,2),l=i[0],s=i[1];A(function(){var C=typeof e=="function"?e():e;s(C||null)});var m=n.useState(null),v=P(m,2),h=v[0],u=v[1],g=ze(function(){if(l){!sn(l)&&r&&l.scrollIntoView(o);var C=l.getBoundingClientRect(),E=C.left,N=C.top,M=C.width,x=C.height,d={left:E,top:N,width:M,height:x,radius:0};u(function(R){return JSON.stringify(R)!==JSON.stringify(d)?d:R})}else u(null)}),f=function(E){var N;return(N=Array.isArray(t==null?void 0:t.offset)?t==null?void 0:t.offset[E]:t==null?void 0:t.offset)!==null&&N!==void 0?N:6};A(function(){return g(),window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}},[l,r,g]);var y=n.useMemo(function(){if(!h)return h;var C=f(0),E=f(1),N=(t==null?void 0:t.radius)||2;return{left:h.left-C,top:h.top-E,width:h.width+C*2,height:h.height+E*2,radius:N}},[h,t]);return[y,l]}var Wt={fill:"transparent",pointerEvents:"auto"},fn=function(r){var t=r.prefixCls,o=r.rootClassName,a=r.pos,i=r.showMask,l=r.style,s=l===void 0?{}:l,m=r.fill,v=m===void 0?"rgba(0,0,0,0.5)":m,h=r.open,u=r.animated,g=r.zIndex,f=Ir(),y="".concat(t,"-mask-").concat(f),C=Dr(u)==="object"?u==null?void 0:u.placeholder:u;return ae.createElement(At,{open:h,autoLock:!0},ae.createElement("div",{className:Ne("".concat(t,"-mask"),o),style:H({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:g,pointerEvents:"none"},s)},i?ae.createElement("svg",{style:{width:"100%",height:"100%"}},ae.createElement("defs",null,ae.createElement("mask",{id:y},ae.createElement("rect",{x:"0",y:"0",width:"100vw",height:"100vh",fill:"white"}),a&&ae.createElement("rect",{x:a.left,y:a.top,rx:a.radius,width:a.width,height:a.height,fill:"black",className:C?"".concat(t,"-placeholder-animated"):""}))),ae.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:v,mask:"url(#".concat(y,")")}),a&&ae.createElement(ae.Fragment,null,ae.createElement("rect",be({},Wt,{x:"0",y:"0",width:"100%",height:a.top})),ae.createElement("rect",be({},Wt,{x:"0",y:"0",width:a.left,height:"100%"})),ae.createElement("rect",be({},Wt,{x:"0",y:a.top+a.height,width:"100%",height:"calc(100vh - ".concat(a.top+a.height,"px)")})),ae.createElement("rect",be({},Wt,{x:a.left+a.width,y:"0",width:"calc(100vw - ".concat(a.left+a.width,"px)"),height:"100%"})))):null))},dn=[0,0],xr={left:{points:["cr","cl"],offset:[-8,0]},right:{points:["cl","cr"],offset:[8,0]},top:{points:["bc","tc"],offset:[0,-8]},bottom:{points:["tc","bc"],offset:[0,8]},topLeft:{points:["bl","tl"],offset:[0,-8]},leftTop:{points:["tr","tl"],offset:[-8,0]},topRight:{points:["br","tr"],offset:[0,-8]},rightTop:{points:["tl","tr"],offset:[8,0]},bottomRight:{points:["tr","br"],offset:[0,8]},rightBottom:{points:["bl","br"],offset:[8,0]},bottomLeft:{points:["tl","bl"],offset:[0,8]},leftBottom:{points:["br","bl"],offset:[-8,0]}};function zr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r={};return Object.keys(xr).forEach(function(t){r[t]=H(H({},xr[t]),{},{autoArrow:e,targetOffset:dn})}),r}zr();function mn(e){var r=e.prefixCls,t=e.current,o=e.total,a=e.title,i=e.description,l=e.onClose,s=e.onPrev,m=e.onNext,v=e.onFinish,h=e.className,u=e.closeIcon,g=u!==!1&&u!==null,f=u!==void 0&&u!==!0?u:n.createElement("span",{className:"".concat(r,"-close-x")},"Ã—");return n.createElement("div",{className:Ne("".concat(r,"-content"),h)},n.createElement("div",{className:"".concat(r,"-inner")},g&&n.createElement("button",{type:"button",onClick:l,"aria-label":"Close",className:"".concat(r,"-close")},f),n.createElement("div",{className:"".concat(r,"-header")},n.createElement("div",{className:"".concat(r,"-title")},a)),n.createElement("div",{className:"".concat(r,"-description")},i),n.createElement("div",{className:"".concat(r,"-footer")},n.createElement("div",{className:"".concat(r,"-sliders")},o>1?Vt(Array.from({length:o}).keys()).map(function(y,C){return n.createElement("span",{key:y,className:C===t?"active":""})}):null),n.createElement("div",{className:"".concat(r,"-buttons")},t!==0?n.createElement("button",{className:"".concat(r,"-prev-btn"),onClick:s},"Prev"):null,t===o-1?n.createElement("button",{className:"".concat(r,"-finish-btn"),onClick:v},"Finish"):n.createElement("button",{className:"".concat(r,"-next-btn"),onClick:m},"Next")))))}var hn=function(r){var t=r.current,o=r.renderPanel;return n.createElement(n.Fragment,null,typeof o=="function"?o(r,t):n.createElement(mn,r))},gn=["prefixCls","steps","defaultCurrent","current","onChange","onClose","onFinish","open","mask","arrow","rootClassName","placement","renderPanel","gap","animated","scrollIntoViewOptions","zIndex","closeIcon"],yn={left:"50%",top:"50%",width:1,height:1},Dn=function(r){var t=r.prefixCls,o=t===void 0?"rc-tour":t,a=r.steps,i=a===void 0?[]:a,l=r.defaultCurrent,s=r.current,m=r.onChange,v=r.onClose,h=r.onFinish,u=r.open,g=r.mask,f=g===void 0?!0:g,y=r.arrow,C=y===void 0?!0:y,E=r.rootClassName,N=r.placement,M=r.renderPanel,x=r.gap,d=r.animated,R=r.scrollIntoViewOptions,Y=R===void 0?!0:R,G=r.zIndex,X=G===void 0?1001:G,oe=r.closeIcon,F=Rr(r,gn),U=n.useRef(),me=hr(0,{value:s,defaultValue:l}),se=P(me,2),z=se[0],j=se[1],D=hr(void 0,{value:u,postState:function(O){return z<0||z>=i.length?!1:O??!0}}),b=P(D,2),I=b[0],T=b[1],K=n.useRef(I);A(function(){I&&!K.current&&j(0),K.current=I},[I]);var W=i[z]||{},qe=W.target,We=W.placement,he=W.style,ke=W.arrow,ie=W.className,L=W.mask,p=W.scrollIntoViewOptions,ee=W.closeIcon,Z=I&&(L??f),Ve=ee??oe,Qe=p??Y,q=vn(qe,u,x,Qe),xe=P(q,2),ge=xe[0],Q=xe[1],ye=cn(Q,N,We),S=Q?typeof ke>"u"?C:ke:!1,Me=Dr(S)==="object"?S.pointAtCenter:!1;A(function(){var ce;(ce=U.current)===null||ce===void 0||ce.forceAlign()},[Me,z]);var te=function(O){j(O),m==null||m(O)};if(Q===void 0)return null;var Je=function(){T(!1),v==null||v(z)},Re=function(){return n.createElement(hn,be({arrow:S,key:"content",prefixCls:o,total:i.length,renderPanel:M,onPrev:function(){te(z-1)},onNext:function(){te(z+1)},onClose:Je,current:z,onFinish:function(){Je(),h==null||h()},closeIcon:Ve},i[z]))},De=typeof Z=="boolean"?Z:!!Z,Ce=typeof Z=="boolean"?void 0:Z,le=function(O){return O||Q||document.body};return n.createElement(n.Fragment,null,n.createElement(fn,{zIndex:X,prefixCls:o,pos:ge,showMask:De,style:Ce==null?void 0:Ce.style,fill:Ce==null?void 0:Ce.color,open:I,animated:d,rootClassName:E}),n.createElement(un,be({builtinPlacements:zr(Me)},F,{ref:U,popupStyle:he,popupPlacement:ye,popupVisible:I,popupClassName:Ne(E,ie),prefixCls:o,popup:Re,forceRender:!1,destroyPopupOnHide:!0,zIndex:X,getTriggerDOMNode:le,arrow:!!S}),n.createElement(At,{open:I,autoLock:!0},n.createElement("div",{className:Ne(E,"".concat(o,"-target-placeholder")),style:H(H({},ge||yn),{},{position:"fixed",pointerEvents:"none"})}))))};export{At as P,Dn as T,un as a,kn as b,Rn as c,xn as u};
