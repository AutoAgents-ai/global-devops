import{c as F,g as ae,b as re,d as Te,k as Ee,e as G,f as w}from"./@babel-8091a5a2.js";import{r as c,a as Q}from"./react-2c40f691.js";import{r as Ie}from"./react-dom-833b3563.js";import{c as j}from"./classnames-312deb01.js";import{a as Ue}from"./rc-motion-593fcb89.js";var e={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(n){var l=n.keyCode;if(n.altKey&&!n.ctrlKey||n.metaKey||l>=e.F1&&l<=e.F12)return!1;switch(l){case e.ALT:case e.CAPS_LOCK:case e.CONTEXT_MENU:case e.CTRL:case e.DOWN:case e.END:case e.ESC:case e.HOME:case e.INSERT:case e.LEFT:case e.MAC_FF_META:case e.META:case e.NUMLOCK:case e.NUM_CENTER:case e.PAGE_DOWN:case e.PAGE_UP:case e.PAUSE:case e.PRINT_SCREEN:case e.RIGHT:case e.SHIFT:case e.UP:case e.WIN_KEY:case e.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(n){if(n>=e.ZERO&&n<=e.NINE||n>=e.NUM_ZERO&&n<=e.NUM_MULTIPLY||n>=e.A&&n<=e.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&n===0)return!0;switch(n){case e.SPACE:case e.QUESTION_MARK:case e.NUM_PLUS:case e.NUM_MINUS:case e.NUM_PERIOD:case e.NUM_DIVISION:case e.SEMICOLON:case e.DASH:case e.EQUALS:case e.COMMA:case e.PERIOD:case e.SLASH:case e.APOSTROPHE:case e.SINGLE_QUOTE:case e.OPEN_SQUARE_BRACKET:case e.BACKSLASH:case e.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Oe=c.forwardRef(function(t,n){var l=t.prefixCls,v=t.style,u=t.className,f=t.duration,m=f===void 0?4.5:f,U=t.eventKey,T=t.content,I=t.closable,P=t.closeIcon,k=P===void 0?"x":P,N=t.props,C=t.onClick,E=t.onNoticeClose,O=t.times,_=t.hovering,d=c.useState(!1),h=F(d,2),M=h[0],A=h[1],S=_||M,R=function(){E(U)},i=function(o){(o.key==="Enter"||o.code==="Enter"||o.keyCode===e.ENTER)&&R()};c.useEffect(function(){if(!S&&m>0){var a=setTimeout(function(){R()},m*1e3);return function(){clearTimeout(a)}}},[m,S,O]);var r="".concat(l,"-notice");return c.createElement("div",ae({},N,{ref:n,className:j(r,u,re({},"".concat(r,"-closable"),I)),style:v,onMouseEnter:function(o){var s;A(!0),N==null||(s=N.onMouseEnter)===null||s===void 0||s.call(N,o)},onMouseLeave:function(o){var s;A(!1),N==null||(s=N.onMouseLeave)===null||s===void 0||s.call(N,o)},onClick:C}),c.createElement("div",{className:"".concat(r,"-content")},T),I&&c.createElement("a",{tabIndex:0,className:"".concat(r,"-close"),onKeyDown:i,onClick:function(o){o.preventDefault(),o.stopPropagation(),R()}},k))}),Ne=Q.createContext({}),Ge=function(n){var l=n.children,v=n.classNames;return Q.createElement(Ne.Provider,{value:{classNames:v}},l)},le=8,ue=3,fe=16,he=function(n){var l={offset:le,threshold:ue,gap:fe};if(n&&Te(n)==="object"){var v,u,f;l.offset=(v=n.offset)!==null&&v!==void 0?v:le,l.threshold=(u=n.threshold)!==null&&u!==void 0?u:ue,l.gap=(f=n.gap)!==null&&f!==void 0?f:fe}return[!!n,l]},Le=["className","style","classNames","styles"],Pe=function(n){var l,v=n.configList,u=n.placement,f=n.prefixCls,m=n.className,U=n.style,T=n.motion,I=n.onAllNoticeRemoved,P=n.onNoticeClose,k=n.stack,N=c.useContext(Ne),C=N.classNames,E=c.useRef({}),O=c.useState(null),_=F(O,2),d=_[0],h=_[1],M=c.useState([]),A=F(M,2),S=A[0],R=A[1],i=v.map(function(y){return{config:y,key:String(y.key)}}),r=he(k),a=F(r,2),o=a[0],s=a[1],g=s.offset,x=s.threshold,p=s.gap,D=o&&(S.length>0||i.length<=x),de=typeof T=="function"?T(u):T;return c.useEffect(function(){o&&S.length>1&&R(function(y){return y.filter(function(H){return i.some(function(B){var q=B.key;return H===q})})})},[S,i,o]),c.useEffect(function(){var y;if(o&&E.current[(y=i[i.length-1])===null||y===void 0?void 0:y.key]){var H;h(E.current[(H=i[i.length-1])===null||H===void 0?void 0:H.key])}},[i,o]),Q.createElement(Ue,ae({key:u,className:j(f,"".concat(f,"-").concat(u),C==null?void 0:C.list,m,(l={},re(l,"".concat(f,"-stack"),!!o),re(l,"".concat(f,"-stack-expanded"),D),l)),style:U,keys:i,motionAppear:!0},de,{onAllRemoved:function(){I(u)}}),function(y,H){var B=y.config,q=y.className,me=y.style,Ce=y.index,se=B,J=se.key,Se=se.times,L=String(J),W=B,ye=W.className,_e=W.style,V=W.classNames,Y=W.styles,Ae=Ee(W,Le),z=i.findIndex(function(X){return X.key===L}),Z={};if(o){var b=i.length-1-(z>-1?z:Ce-1),ce=u==="top"||u==="bottom"?"-50%":"0";if(b>0){var $,ee,te;Z.height=D?($=E.current[L])===null||$===void 0?void 0:$.offsetHeight:d==null?void 0:d.offsetHeight;for(var ie=0,ne=0;ne<b;ne++){var oe;ie+=((oe=E.current[i[i.length-1-ne].key])===null||oe===void 0?void 0:oe.offsetHeight)+p}var Re=(D?ie:b*g)*(u.startsWith("top")?1:-1),Me=!D&&d!==null&&d!==void 0&&d.offsetWidth&&(ee=E.current[L])!==null&&ee!==void 0&&ee.offsetWidth?((d==null?void 0:d.offsetWidth)-g*2*(b<3?b:3))/((te=E.current[L])===null||te===void 0?void 0:te.offsetWidth):1;Z.transform="translate3d(".concat(ce,", ").concat(Re,"px, 0) scaleX(").concat(Me,")")}else Z.transform="translate3d(".concat(ce,", 0, 0)")}return Q.createElement("div",{ref:H,className:j("".concat(f,"-notice-wrapper"),q,V==null?void 0:V.wrapper),style:G(G(G({},me),Z),Y==null?void 0:Y.wrapper),onMouseEnter:function(){return R(function(K){return K.includes(L)?K:[].concat(w(K),[L])})},onMouseLeave:function(){return R(function(K){return K.filter(function(ge){return ge!==L})})}},Q.createElement(Oe,ae({},Ae,{ref:function(K){z>-1?E.current[L]=K:delete E.current[L]},prefixCls:f,classNames:V,styles:Y,className:j(ye,C==null?void 0:C.notice),style:_e,times:Se,key:J,eventKey:J,onNoticeClose:P,hovering:o&&S.length>0})))})},ke=c.forwardRef(function(t,n){var l=t.prefixCls,v=l===void 0?"rc-notification":l,u=t.container,f=t.motion,m=t.maxCount,U=t.className,T=t.style,I=t.onAllRemoved,P=t.stack,k=t.renderNotifications,N=c.useState([]),C=F(N,2),E=C[0],O=C[1],_=function(a){var o,s=E.find(function(g){return g.key===a});s==null||(o=s.onClose)===null||o===void 0||o.call(s),O(function(g){return g.filter(function(x){return x.key!==a})})};c.useImperativeHandle(n,function(){return{open:function(a){O(function(o){var s=w(o),g=s.findIndex(function(D){return D.key===a.key}),x=G({},a);if(g>=0){var p;x.times=(((p=o[g])===null||p===void 0?void 0:p.times)||0)+1,s[g]=x}else x.times=0,s.push(x);return m>0&&s.length>m&&(s=s.slice(-m)),s})},close:function(a){_(a)},destroy:function(){O([])}}});var d=c.useState({}),h=F(d,2),M=h[0],A=h[1];c.useEffect(function(){var r={};E.forEach(function(a){var o=a.placement,s=o===void 0?"topRight":o;s&&(r[s]=r[s]||[],r[s].push(a))}),Object.keys(M).forEach(function(a){r[a]=r[a]||[]}),A(r)},[E]);var S=function(a){A(function(o){var s=G({},o),g=s[a]||[];return g.length||delete s[a],s})},R=c.useRef(!1);if(c.useEffect(function(){Object.keys(M).length>0?R.current=!0:R.current&&(I==null||I(),R.current=!1)},[M]),!u)return null;var i=Object.keys(M);return Ie.createPortal(c.createElement(c.Fragment,null,i.map(function(r){var a=M[r],o=c.createElement(Pe,{key:r,configList:a,placement:r,prefixCls:v,className:U==null?void 0:U(r),style:T==null?void 0:T(r),motion:f,onNoticeClose:_,onAllNoticeRemoved:S,stack:P});return k?k(o,{prefixCls:v,key:r}):o})),u)}),xe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Fe=function(){return document.body},ve=0;function He(){for(var t={},n=arguments.length,l=new Array(n),v=0;v<n;v++)l[v]=arguments[v];return l.forEach(function(u){u&&Object.keys(u).forEach(function(f){var m=u[f];m!==void 0&&(t[f]=m)})}),t}function we(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.getContainer,l=n===void 0?Fe:n,v=t.motion,u=t.prefixCls,f=t.maxCount,m=t.className,U=t.style,T=t.onAllRemoved,I=t.stack,P=t.renderNotifications,k=Ee(t,xe),N=c.useState(),C=F(N,2),E=C[0],O=C[1],_=c.useRef(),d=c.createElement(ke,{container:E,ref:_,prefixCls:u,motion:v,maxCount:f,className:m,style:U,onAllRemoved:T,stack:I,renderNotifications:P}),h=c.useState([]),M=F(h,2),A=M[0],S=M[1],R=c.useMemo(function(){return{open:function(r){var a=He(k,r);(a.key===null||a.key===void 0)&&(a.key="rc-notification-".concat(ve),ve+=1),S(function(o){return[].concat(w(o),[{type:"open",config:a}])})},close:function(r){S(function(a){return[].concat(w(a),[{type:"close",key:r}])})},destroy:function(){S(function(r){return[].concat(w(r),[{type:"destroy"}])})}}},[]);return c.useEffect(function(){O(l())}),c.useEffect(function(){_.current&&A.length&&(A.forEach(function(i){switch(i.type){case"open":_.current.open(i.config);break;case"close":_.current.close(i.key);break;case"destroy":_.current.destroy();break}}),S(function(i){return i.filter(function(r){return!A.includes(r)})}))},[A]),[R,d]}export{Oe as N,Ge as a,we as u};
