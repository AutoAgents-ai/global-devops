import{c as M,e as L,b as ee,d as Le,k as pe,g as ge,f as Sn}from"./@babel-8091a5a2.js";import{c as fe}from"./classnames-312deb01.js";import{r,a as de}from"./react-2c40f691.js";import{D as hn}from"./rc-dialog-aaf1c20f.js";import"./react-is-e8e5dbb3.js";import{R as Ge}from"./react-dom-833b3563.js";import{P as En}from"./@rc-component-8f0c1db2.js";import{C as wn}from"./rc-motion-593fcb89.js";function nn(){var n=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:n,height:e}}function Rn(n){var e=n.getBoundingClientRect(),t=document.documentElement;return{left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}function ze(n){var e=r.useRef();e.current=n;var t=r.useCallback(function(){for(var o,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(o=e.current)===null||o===void 0?void 0:o.call.apply(o,[e].concat(a))},[]);return t}function Nn(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var je=Nn()?r.useLayoutEffect:r.useEffect,pn=function(e,t){var o=r.useRef(!0);je(function(){return e(o.current)},t),je(function(){return o.current=!1,function(){o.current=!0}},[])},Be=function(e,t){pn(function(o){if(!o)return e()},t)};function Qe(n){var e=r.useRef(!1),t=r.useState(n),o=M(t,2),s=o[0],a=o[1];r.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function i(c,m){m&&e.current||a(c)}return[s,i]}function De(n){return n!==void 0}function Ye(n,e){var t=e||{},o=t.defaultValue,s=t.value,a=t.onChange,i=t.postState,c=Qe(function(){return De(s)?s:De(o)?typeof o=="function"?o():o:typeof n=="function"?n():n}),m=M(c,2),u=m[0],d=m[1],f=s!==void 0?s:u,p=i?i(f):f,C=ze(a),g=Qe([f]),T=M(g,2),h=T[0],w=T[1];Be(function(){var U=h[0];u!==U&&C(u,U)},[h]),Be(function(){De(s)||d(s)},[s]);var R=ze(function(U,k){d(U,k),w([f],k)});return[p,R]}var Ke=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"],Te=r.createContext(null),qe=0;function _n(n,e){var t=r.useState(function(){return qe+=1,String(qe)}),o=M(t,1),s=o[0],a=r.useContext(Te),i={data:e,canPreview:n};return r.useEffect(function(){if(a)return a.register(s,i)},[]),r.useEffect(function(){a&&a.register(s,i)},[n,e]),s}function In(n){return new Promise(function(e){var t=document.createElement("img");t.onerror=function(){return e(!1)},t.onload=function(){return e(!0)},t.src=n})}function tn(n){var e=n.src,t=n.isCustomPlaceholder,o=n.fallback,s=r.useState(t?"loading":"normal"),a=M(s,2),i=a[0],c=a[1],m=r.useRef(!1),u=i==="error";r.useEffect(function(){var C=!0;return In(e).then(function(g){!g&&C&&c("error")}),function(){C=!1}},[e]),r.useEffect(function(){t&&!m.current?c("loading"):u&&c("normal")},[e]);var d=function(){c("normal")},f=function(g){m.current=!1,i==="loading"&&g!==null&&g!==void 0&&g.complete&&(g.naturalWidth||g.naturalHeight)&&(m.current=!0,d())},p=u&&o?{src:o}:{onLoad:d,src:e};return[f,p,i]}function Me(n,e,t,o){var s=Ge.unstable_batchedUpdates?function(i){Ge.unstable_batchedUpdates(t,i)}:t;return n!=null&&n.addEventListener&&n.addEventListener(e,s,o),{remove:function(){n!=null&&n.removeEventListener&&n.removeEventListener(e,s,o)}}}var l={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=l.F1&&t<=l.F12)return!1;switch(t){case l.ALT:case l.CAPS_LOCK:case l.CONTEXT_MENU:case l.CTRL:case l.DOWN:case l.END:case l.ESC:case l.HOME:case l.INSERT:case l.LEFT:case l.MAC_FF_META:case l.META:case l.NUMLOCK:case l.NUM_CENTER:case l.PAGE_DOWN:case l.PAGE_UP:case l.PAUSE:case l.PRINT_SCREEN:case l.RIGHT:case l.SHIFT:case l.UP:case l.WIN_KEY:case l.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=l.ZERO&&e<=l.NINE||e>=l.NUM_ZERO&&e<=l.NUM_MULTIPLY||e>=l.A&&e<=l.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case l.SPACE:case l.QUESTION_MARK:case l.NUM_PLUS:case l.NUM_MINUS:case l.NUM_PERIOD:case l.NUM_DIVISION:case l.SEMICOLON:case l.DASH:case l.EQUALS:case l.COMMA:case l.PERIOD:case l.SLASH:case l.APOSTROPHE:case l.SINGLE_QUOTE:case l.OPEN_SQUARE_BRACKET:case l.BACKSLASH:case l.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Xe={},Pn=function(e){};function bn(n,e){}function Mn(n,e){}function Tn(){Xe={}}function an(n,e,t){!e&&!Xe[t]&&(n(!1,t),Xe[t]=!0)}function xe(n,e){an(bn,n,e)}function On(n,e){an(Mn,n,e)}xe.preMessage=Pn;xe.resetWarned=Tn;xe.noteOnce=On;function Je(n,e,t,o){var s=e+t,a=(t-o)/2;if(t>o){if(e>0)return ee({},n,a);if(e<0&&s<o)return ee({},n,-a)}else if(e<0||s>o)return ee({},n,e<0?a:-a);return{}}function Ln(n,e,t,o){var s=nn(),a=s.width,i=s.height,c=null;return n<=a&&e<=i?c={x:0,y:0}:(n>a||e>i)&&(c=L(L({},Je("x",t,n,a)),Je("y",o,e,i))),c}function xn(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=new Set;function s(a,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=o.has(a);if(xe(!m,"Warning: There may be circular references"),m)return!1;if(a===i)return!0;if(t&&c>1)return!1;o.add(a);var u=c+1;if(Array.isArray(a)){if(!Array.isArray(i)||a.length!==i.length)return!1;for(var d=0;d<a.length;d++)if(!s(a[d],i[d],u))return!1;return!0}if(a&&i&&Le(a)==="object"&&Le(i)==="object"){var f=Object.keys(a);return f.length!==Object.keys(i).length?!1:f.every(function(p){return s(a[p],i[p],u)})}return!1}return s(n,e)}var rn=function(e){return+setTimeout(e,16)},on=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(rn=function(e){return window.requestAnimationFrame(e)},on=function(e){return window.cancelAnimationFrame(e)});var en=0,He=new Map;function sn(n){He.delete(n)}var cn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;en+=1;var o=en;function s(a){if(a===0)sn(o),e();else{var i=rn(function(){s(a-1)});He.set(o,i)}}return s(t),o};cn.cancel=function(n){var e=He.get(n);return sn(n),on(e)};var Oe={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function yn(n,e,t,o){var s=r.useRef(null),a=r.useRef([]),i=r.useState(Oe),c=M(i,2),m=c[0],u=c[1],d=function(g){u(Oe),o&&!xn(Oe,m)&&o({transform:Oe,action:g})},f=function(g,T){s.current===null&&(a.current=[],s.current=cn(function(){u(function(h){var w=h;return a.current.forEach(function(R){w=L(L({},w),R)}),s.current=null,o==null||o({transform:w,action:T}),w})})),a.current.push(L(L({},m),g))},p=function(g,T,h,w){var R=n.current,U=R.width,k=R.height,O=R.offsetWidth,Z=R.offsetHeight,G=R.offsetLeft,E=R.offsetTop,x=g,_=m.scale*g;_>t?(x=t/m.scale,_=t):_<e&&(x=e/m.scale,_=e);var $=h??innerWidth/2,F=w??innerHeight/2,D=x-1,z=D*U*.5,ne=D*k*.5,V=D*($-m.x-G),j=D*(F-m.y-E),y=m.x-(V-z),B=m.y-(j-ne);if(g<1&&_===1){var X=O*_,H=Z*_,Q=nn(),te=Q.width,P=Q.height;X<=te&&H<=P&&(y=0,B=0)}f({x:y,y:B,scale:_},T)};return{transform:m,resetTransform:d,updateTransform:f,dispatchZoomChange:p}}var An=function(e){var t=e.visible,o=e.maskTransitionName,s=e.getContainer,a=e.prefixCls,i=e.rootClassName,c=e.icons,m=e.countRender,u=e.showSwitch,d=e.showProgress,f=e.current,p=e.transform,C=e.count,g=e.scale,T=e.minScale,h=e.maxScale,w=e.closeIcon,R=e.onSwitchLeft,U=e.onSwitchRight,k=e.onClose,O=e.onZoomIn,Z=e.onZoomOut,G=e.onRotateRight,E=e.onRotateLeft,x=e.onFlipX,_=e.onFlipY,$=e.toolbarRender,F=r.useContext(Te),D=c.rotateLeft,z=c.rotateRight,ne=c.zoomIn,V=c.zoomOut,j=c.close,y=c.left,B=c.right,X=c.flipX,H=c.flipY,Q="".concat(a,"-operations-operation");r.useEffect(function(){var N=function(W){W.keyCode===l.ESC&&k()};return t&&window.addEventListener("keydown",N),function(){window.removeEventListener("keydown",N)}},[t]);var te=[{icon:H,onClick:_,type:"flipY"},{icon:X,onClick:x,type:"flipX"},{icon:D,onClick:E,type:"rotateLeft"},{icon:z,onClick:G,type:"rotateRight"},{icon:V,onClick:Z,type:"zoomOut",disabled:g===T},{icon:ne,onClick:O,type:"zoomIn",disabled:g===h}],P=te.map(function(N){var b,W=N.icon,q=N.onClick,S=N.type,oe=N.disabled;return r.createElement("div",{className:fe(Q,(b={},ee(b,"".concat(a,"-operations-operation-").concat(S),!0),ee(b,"".concat(a,"-operations-operation-disabled"),!!oe),b)),onClick:q,key:S},W)}),re=r.createElement("div",{className:"".concat(a,"-operations")},P);return r.createElement(wn,{visible:t,motionName:o},function(N){var b=N.className,W=N.style;return r.createElement(En,{open:!0,getContainer:s??document.body},r.createElement("div",{className:fe("".concat(a,"-operations-wrapper"),b,i),style:W},w===null?null:r.createElement("button",{className:"".concat(a,"-close"),onClick:k},w||j),u&&r.createElement(r.Fragment,null,r.createElement("div",{className:fe("".concat(a,"-switch-left"),ee({},"".concat(a,"-switch-left-disabled"),f===0)),onClick:R},y),r.createElement("div",{className:fe("".concat(a,"-switch-right"),ee({},"".concat(a,"-switch-right-disabled"),f===C-1)),onClick:U},B)),r.createElement("div",{className:"".concat(a,"-footer")},d&&r.createElement("div",{className:"".concat(a,"-progress")},m?m(f+1,C):"".concat(f+1," / ").concat(C)),$?$(re,L({icons:{flipYIcon:P[0],flipXIcon:P[1],rotateLeftIcon:P[2],rotateRightIcon:P[3],zoomOutIcon:P[4],zoomInIcon:P[5]},actions:{onFlipY:_,onFlipX:x,onRotateLeft:E,onRotateRight:G,onZoomOut:Z,onZoomIn:O},transform:p},F?{current:f,total:C}:{})):re)))})},Ne=1,Un=1,kn=["fallback","src","imgRef"],Fn=["prefixCls","src","alt","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],Dn=function(e){var t=e.fallback,o=e.src,s=e.imgRef,a=pe(e,kn),i=tn({src:o,fallback:t}),c=M(i,2),m=c[0],u=c[1];return de.createElement("img",ge({ref:function(f){s.current=f,m(f)}},a,u))},ln=function(e){var t=e.prefixCls,o=e.src,s=e.alt,a=e.fallback,i=e.movable,c=i===void 0?!0:i,m=e.onClose,u=e.visible,d=e.icons,f=d===void 0?{}:d,p=e.rootClassName,C=e.closeIcon,g=e.getContainer,T=e.current,h=T===void 0?0:T,w=e.count,R=w===void 0?1:w,U=e.countRender,k=e.scaleStep,O=k===void 0?.5:k,Z=e.minScale,G=Z===void 0?1:Z,E=e.maxScale,x=E===void 0?50:E,_=e.transitionName,$=_===void 0?"zoom":_,F=e.maskTransitionName,D=F===void 0?"fade":F,z=e.imageRender,ne=e.imgCommonProps,V=e.toolbarRender,j=e.onTransform,y=e.onChange,B=pe(e,Fn),X=r.useRef(),H=r.useRef({deltaX:0,deltaY:0,transformX:0,transformY:0}),Q=r.useState(!1),te=M(Q,2),P=te[0],re=te[1],N=r.useContext(Te),b=N&&R>1,W=N&&R>=1,q=yn(X,G,x,j),S=q.transform,oe=q.resetTransform,Y=q.updateTransform,ie=q.dispatchZoomChange,_e=r.useState(!0),me=M(_e,2),ve=me[0],J=me[1],K=S.rotate,A=S.scale,se=S.x,ce=S.y,ye=fe(ee({},"".concat(t,"-moving"),P));r.useEffect(function(){ve||J(!0)},[ve]);var Ae=function(){oe("close")},Ce=function(){ie(Ne+O,"zoomIn")},Ue=function(){ie(Ne/(Ne+O),"zoomOut")},ke=function(){Y({rotate:K+90},"rotateRight")},Fe=function(){Y({rotate:K-90},"rotateLeft")},le=function(){Y({flipX:!S.flipX},"flipX")},ue=function(){Y({flipY:!S.flipY},"flipY")},Ie=function(v){v==null||v.preventDefault(),v==null||v.stopPropagation(),h>0&&(J(!1),oe("prev"),y==null||y(h-1,h))},Pe=function(v){v==null||v.preventDefault(),v==null||v.stopPropagation(),h<R-1&&(J(!1),oe("next"),y==null||y(h+1,h))},be=function(){if(u&&P){re(!1);var v=H.current,Se=v.transformX,he=v.transformY,ae=se!==Se&&ce!==he;if(!ae)return;var Ee=X.current.offsetWidth*A,we=X.current.offsetHeight*A,Re=X.current.getBoundingClientRect(),gn=Re.left,Cn=Re.top,Ve=K%180!==0,Ze=Ln(Ve?we:Ee,Ve?Ee:we,gn,Cn);Ze&&Y(L({},Ze),"dragRebound")}},fn=function(v){!c||v.button!==0||(v.preventDefault(),v.stopPropagation(),H.current={deltaX:v.pageX-S.x,deltaY:v.pageY-S.y,transformX:S.x,transformY:S.y},re(!0))},We=function(v){u&&P&&Y({x:v.pageX-H.current.deltaX,y:v.pageY-H.current.deltaY},"move")},mn=function(v){if(!(!u||v.deltaY==0)){var Se=Math.abs(v.deltaY/100),he=Math.min(Se,Un),ae=Ne+he*O;v.deltaY>0&&(ae=Ne/ae),ie(ae,"wheel",v.clientX,v.clientY)}},vn=function(v){!u||!b||(v.keyCode===l.LEFT?Ie():v.keyCode===l.RIGHT&&Pe())},dn=function(v){u&&(A!==1?Y({x:0,y:0,scale:1},"doubleClick"):ie(Ne+O,"doubleClick",v.clientX,v.clientY))};r.useEffect(function(){var I,v,Se,he;if(c){Se=Me(window,"mouseup",be,!1),he=Me(window,"mousemove",We,!1);try{window.top!==window.self&&(I=Me(window.top,"mouseup",be,!1),v=Me(window.top,"mousemove",We,!1))}catch{}}return function(){var ae,Ee,we,Re;(ae=Se)===null||ae===void 0||ae.remove(),(Ee=he)===null||Ee===void 0||Ee.remove(),(we=I)===null||we===void 0||we.remove(),(Re=v)===null||Re===void 0||Re.remove()}},[u,P,se,ce,K,c]),r.useEffect(function(){var I=Me(window,"keydown",vn,!1);return function(){I.remove()}},[u,b,h]);var $e=de.createElement(Dn,ge({},ne,{width:e.width,height:e.height,imgRef:X,className:"".concat(t,"-img"),alt:s,style:{transform:"translate3d(".concat(S.x,"px, ").concat(S.y,"px, 0) scale3d(").concat(S.flipX?"-":"").concat(A,", ").concat(S.flipY?"-":"").concat(A,", 1) rotate(").concat(K,"deg)"),transitionDuration:!ve&&"0s"},fallback:a,src:o,onWheel:mn,onMouseDown:fn,onDoubleClick:dn}));return de.createElement(de.Fragment,null,de.createElement(hn,ge({transitionName:$,maskTransitionName:D,closable:!1,keyboard:!0,prefixCls:t,onClose:m,visible:u,classNames:{wrapper:ye},rootClassName:p,getContainer:g},B,{afterClose:Ae}),de.createElement("div",{className:"".concat(t,"-img-wrapper")},z?z($e,L({transform:S},N?{current:h}:{})):$e)),de.createElement(An,{visible:u,transform:S,maskTransitionName:D,closeIcon:C,getContainer:g,prefixCls:t,rootClassName:p,icons:f,countRender:U,showSwitch:b,showProgress:W,current:h,count:R,scale:A,minScale:G,maxScale:x,toolbarRender:V,onSwitchLeft:Ie,onSwitchRight:Pe,onZoomIn:Ce,onZoomOut:Ue,onRotateRight:ke,onRotateLeft:Fe,onFlipX:le,onFlipY:ue,onClose:m}))};function Yn(n){var e=r.useState({}),t=M(e,2),o=t[0],s=t[1],a=r.useCallback(function(c,m){return s(function(u){return L(L({},u),{},ee({},c,m))}),function(){s(function(u){var d=L({},u);return delete d[c],d})}},[]),i=r.useMemo(function(){return n?n.map(function(c){if(typeof c=="string")return{data:{src:c}};var m={};return Object.keys(c).forEach(function(u){["src"].concat(Sn(Ke)).includes(u)&&(m[u]=c[u])}),{data:m}}):Object.keys(o).reduce(function(c,m){var u=o[m],d=u.canPreview,f=u.data;return d&&c.push({data:f,id:m}),c},[])},[n,o]);return[i,a]}var Kn=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Xn=["src"],Hn=function(e){var t,o=e.previewPrefixCls,s=o===void 0?"rc-image-preview":o,a=e.children,i=e.icons,c=i===void 0?{}:i,m=e.items,u=e.preview,d=e.fallback,f=Le(u)==="object"?u:{},p=f.visible,C=f.onVisibleChange,g=f.getContainer,T=f.current,h=f.movable,w=f.minScale,R=f.maxScale,U=f.countRender,k=f.closeIcon,O=f.onChange,Z=f.onTransform,G=f.toolbarRender,E=f.imageRender,x=pe(f,Kn),_=Yn(m),$=M(_,2),F=$[0],D=$[1],z=Ye(0,{value:T}),ne=M(z,2),V=ne[0],j=ne[1],y=r.useState(!1),B=M(y,2),X=B[0],H=B[1],Q=((t=F[V])===null||t===void 0?void 0:t.data)||{},te=Q.src,P=pe(Q,Xn),re=Ye(!!p,{value:p,onChange:function(K,A){C==null||C(K,A,V)}}),N=M(re,2),b=N[0],W=N[1],q=r.useState(null),S=M(q,2),oe=S[0],Y=S[1],ie=r.useCallback(function(J,K,A){var se=F.findIndex(function(ce){return ce.id===J});W(!0),Y({x:K,y:A}),j(se<0?0:se),H(!0)},[F]);r.useEffect(function(){b?X||j(0):H(!1)},[b]);var _e=function(K,A){j(K),O==null||O(K,A)},me=function(){W(!1),Y(null)},ve=r.useMemo(function(){return{register:D,onPreview:ie}},[D,ie]);return r.createElement(Te.Provider,{value:ve},a,r.createElement(ln,ge({"aria-hidden":!b,movable:h,visible:b,prefixCls:s,closeIcon:k,onClose:me,mousePosition:oe,imgCommonProps:P,src:te,fallback:d,icons:c,minScale:w,maxScale:R,getContainer:g,current:V,count:F.length,countRender:U,onTransform:Z,toolbarRender:G,imageRender:E,onChange:_e},x)))},Wn=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],$n=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],un=function(e){var t=e.src,o=e.alt,s=e.onPreviewClose,a=e.prefixCls,i=a===void 0?"rc-image":a,c=e.previewPrefixCls,m=c===void 0?"".concat(i,"-preview"):c,u=e.placeholder,d=e.fallback,f=e.width,p=e.height,C=e.style,g=e.preview,T=g===void 0?!0:g,h=e.className,w=e.onClick,R=e.onError,U=e.wrapperClassName,k=e.wrapperStyle,O=e.rootClassName,Z=pe(e,Wn),G=u&&u!==!0,E=Le(T)==="object"?T:{},x=E.src,_=E.visible,$=_===void 0?void 0:_,F=E.onVisibleChange,D=F===void 0?s:F,z=E.getContainer,ne=z===void 0?void 0:z,V=E.mask,j=E.maskClassName,y=E.movable,B=E.icons,X=E.scaleStep,H=E.minScale,Q=E.maxScale,te=E.imageRender,P=E.toolbarRender,re=pe(E,$n),N=x??t,b=Ye(!!$,{value:$,onChange:D}),W=M(b,2),q=W[0],S=W[1],oe=tn({src:t,isCustomPlaceholder:G,fallback:d}),Y=M(oe,3),ie=Y[0],_e=Y[1],me=Y[2],ve=r.useState(null),J=M(ve,2),K=J[0],A=J[1],se=r.useContext(Te),ce=!!T,ye=function(){S(!1),A(null)},Ae=fe(i,U,O,ee({},"".concat(i,"-error"),me==="error")),Ce=r.useMemo(function(){var le={};return Ke.forEach(function(ue){e[ue]!==void 0&&(le[ue]=e[ue])}),le},Ke.map(function(le){return e[le]})),Ue=r.useMemo(function(){return L(L({},Ce),{},{src:N})},[N,Ce]),ke=_n(ce,Ue),Fe=function(ue){var Ie=Rn(ue.target),Pe=Ie.left,be=Ie.top;se?se.onPreview(ke,Pe,be):(A({x:Pe,y:be}),S(!0)),w==null||w(ue)};return r.createElement(r.Fragment,null,r.createElement("div",ge({},Z,{className:Ae,onClick:ce?Fe:w,style:L({width:f,height:p},k)}),r.createElement("img",ge({},Ce,{className:fe("".concat(i,"-img"),ee({},"".concat(i,"-img-placeholder"),u===!0),h),style:L({height:p},C),ref:ie},_e,{width:f,height:p,onError:R})),me==="loading"&&r.createElement("div",{"aria-hidden":"true",className:"".concat(i,"-placeholder")},u),V&&ce&&r.createElement("div",{className:fe("".concat(i,"-mask"),j),style:{display:(C==null?void 0:C.display)==="none"?"none":void 0}},V)),!se&&ce&&r.createElement(ln,ge({"aria-hidden":!q,visible:q,prefixCls:m,onClose:ye,mousePosition:K,src:N,alt:o,fallback:d,getContainer:ne,icons:B,movable:y,scaleStep:X,minScale:H,maxScale:Q,rootClassName:O,imageRender:te,imgCommonProps:Ce,toolbarRender:P},re)))};un.PreviewGroup=Hn;un.displayName="Image";export{un as I};
