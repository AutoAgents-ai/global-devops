import{c as b}from"./classnames-312deb01.js";import{r as c,a as v}from"./react-2c40f691.js";import{e as I,b as D,g as ie,d as ge,c as P,k as he,f as Ne}from"./@babel-8091a5a2.js";function z(n){return!!(n.addonBefore||n.addonAfter)}function ue(n){return!!(n.prefix||n.suffix||n.allowClear)}function se(n,e,o,t){if(o){var a=e;if(e.type==="click"){var u=n.cloneNode(!0);a=Object.create(e,{target:{value:u},currentTarget:{value:u}}),u.value="",o(a);return}if(t!==void 0){a=Object.create(e,{target:{value:n},currentTarget:{value:n}}),n.value=t,o(a);return}o(a)}}function be(n,e){if(n){n.focus(e);var o=e||{},t=o.cursor;if(t){var a=n.value.length;switch(t){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(a,a);break;default:n.setSelectionRange(0,a)}}}}var Ie=function(e){var o,t,a=e.inputElement,u=e.prefixCls,s=e.prefix,C=e.suffix,w=e.addonBefore,h=e.addonAfter,S=e.className,R=e.style,k=e.disabled,j=e.readOnly,V=e.focused,L=e.triggerFocus,y=e.allowClear,F=e.value,U=e.handleReset,N=e.hidden,l=e.classes,f=e.classNames,$=e.dataAttrs,x=e.styles,m=e.components,ne=(m==null?void 0:m.affixWrapper)||"span",X=(m==null?void 0:m.groupWrapper)||"span",te=(m==null?void 0:m.wrapper)||"span",K=(m==null?void 0:m.groupAddon)||"span",W=c.useRef(null),d=function(E){var A;(A=W.current)!==null&&A!==void 0&&A.contains(E.target)&&(L==null||L())},G=function(){var E;if(!y)return null;var A=!k&&!j&&F,Q="".concat(u,"-clear-icon"),ee=ge(y)==="object"&&y!==null&&y!==void 0&&y.clearIcon?y.clearIcon:"âœ–";return v.createElement("span",{onClick:U,onMouseDown:function(re){return re.preventDefault()},className:b(Q,(E={},D(E,"".concat(Q,"-hidden"),!A),D(E,"".concat(Q,"-has-suffix"),!!C),E)),role:"button",tabIndex:-1},ee)},T=c.cloneElement(a,{value:F,hidden:N,className:b((o=a.props)===null||o===void 0?void 0:o.className,!ue(e)&&!z(e)&&S)||null,style:I(I({},(t=a.props)===null||t===void 0?void 0:t.style),!ue(e)&&!z(e)?R:{})});if(ue(e)){var _,p="".concat(u,"-affix-wrapper"),Y=b(p,(_={},D(_,"".concat(p,"-disabled"),k),D(_,"".concat(p,"-focused"),V),D(_,"".concat(p,"-readonly"),j),D(_,"".concat(p,"-input-with-clear-btn"),C&&y&&F),_),!z(e)&&S,l==null?void 0:l.affixWrapper,f==null?void 0:f.affixWrapper),H=(C||y)&&v.createElement("span",{className:b("".concat(u,"-suffix"),f==null?void 0:f.suffix),style:x==null?void 0:x.suffix},G(),C);T=v.createElement(ne,ie({className:Y,style:I(I({},z(e)?void 0:R),x==null?void 0:x.affixWrapper),hidden:!z(e)&&N,onClick:d},$==null?void 0:$.affixWrapper,{ref:W}),s&&v.createElement("span",{className:b("".concat(u,"-prefix"),f==null?void 0:f.prefix),style:x==null?void 0:x.prefix},s),c.cloneElement(a,{value:F,hidden:null}),H)}if(z(e)){var Z="".concat(u,"-group"),q="".concat(Z,"-addon"),J=b("".concat(u,"-wrapper"),Z,l==null?void 0:l.wrapper),ae=b("".concat(u,"-group-wrapper"),S,l==null?void 0:l.group);return v.createElement(X,{className:ae,style:R,hidden:N},v.createElement(te,{className:J},w&&v.createElement(K,{className:q},w),c.cloneElement(T,{hidden:null}),h&&v.createElement(K,{className:q},h)))}return T};function fe(n){var e=c.useRef();e.current=n;var o=c.useCallback(function(){for(var t,a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return(t=e.current)===null||t===void 0?void 0:t.call.apply(t,[e].concat(u))},[]);return o}function Fe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var de=Fe()?c.useLayoutEffect:c.useEffect,_e=function(e,o){var t=c.useRef(!0);de(function(){return e(t.current)},o),de(function(){return t.current=!1,function(){t.current=!0}},[])},ve=function(e,o){_e(function(t){if(!t)return e()},o)};function me(n){var e=c.useRef(!1),o=c.useState(n),t=P(o,2),a=t[0],u=t[1];c.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(C,w){w&&e.current||u(C)}return[a,s]}function le(n){return n!==void 0}function pe(n,e){var o=e||{},t=o.defaultValue,a=o.value,u=o.onChange,s=o.postState,C=me(function(){return le(a)?a:le(t)?typeof t=="function"?t():t:typeof n=="function"?n():n}),w=P(C,2),h=w[0],S=w[1],R=a!==void 0?a:h,k=s?s(R):R,j=fe(u),V=me([R]),L=P(V,2),y=L[0],F=L[1];ve(function(){var N=y[0];h!==N&&j(h,N)},[y]),ve(function(){le(a)||S(a)},[a]);var U=fe(function(N,l){S(N,l),F([R],l)});return[k,U]}function Ae(n,e){var o=I({},n);return Array.isArray(e)&&e.forEach(function(t){delete o[t]}),o}var Be=["show"];function Le(n,e){return c.useMemo(function(){var o={};e&&(o.show=ge(e)==="object"&&e.formatter?e.formatter:!!e),o=I(I({},o),n);var t=o,a=t.show,u=he(t,Be);return I(I({},u),{},{show:!!a,showFormatter:typeof a=="function"?a:void 0,strategy:u.strategy||function(s){return s.length}})},[n,e])}var Me=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Oe=c.forwardRef(function(n,e){var o=n.autoComplete,t=n.onChange,a=n.onFocus,u=n.onBlur,s=n.onPressEnter,C=n.onKeyDown,w=n.prefixCls,h=w===void 0?"rc-input":w,S=n.disabled,R=n.htmlSize,k=n.className,j=n.maxLength,V=n.suffix,L=n.showCount,y=n.count,F=n.type,U=F===void 0?"text":F,N=n.classes,l=n.classNames,f=n.styles,$=n.onCompositionStart,x=n.onCompositionEnd,m=he(n,Me),ne=c.useState(!1),X=P(ne,2),te=X[0],K=X[1],W=v.useRef(!1),d=c.useRef(null),G=function(r){d.current&&be(d.current,r)},T=pe(n.defaultValue,{value:n.value}),_=P(T,2),p=_[0],Y=_[1],H=p==null?"":String(p),Z=v.useState(null),q=P(Z,2),J=q[0],ae=q[1],g=Le(y,L),E=g.max||j,A=g.strategy(H),Q=!!E&&A>E;c.useImperativeHandle(e,function(){return{focus:G,blur:function(){var r;(r=d.current)===null||r===void 0||r.blur()},setSelectionRange:function(r,B,M){var O;(O=d.current)===null||O===void 0||O.setSelectionRange(r,B,M)},select:function(){var r;(r=d.current)===null||r===void 0||r.select()},input:d.current}}),c.useEffect(function(){K(function(i){return i&&S?!1:i})},[S]);var ee=function(r,B){var M=B;if(!W.current&&g.exceedFormatter&&g.max&&g.strategy(B)>g.max&&(M=g.exceedFormatter(B,{max:g.max}),B!==M)){var O,oe;ae([((O=d.current)===null||O===void 0?void 0:O.selectionStart)||0,((oe=d.current)===null||oe===void 0?void 0:oe.selectionEnd)||0])}Y(M),d.current&&se(d.current,r,t,M)};v.useEffect(function(){if(J){var i;(i=d.current)===null||i===void 0||i.setSelectionRange.apply(i,Ne(J))}},[J]);var ce=function(r){ee(r,r.target.value)},re=function(r){W.current=!1,ee(r,r.currentTarget.value),x==null||x(r)},ye=function(r){s&&r.key==="Enter"&&s(r),C==null||C(r)},xe=function(r){K(!0),a==null||a(r)},Ce=function(r){K(!1),u==null||u(r)},Ee=function(r){Y(""),G(),d.current&&se(d.current,r,t)},Se=Q&&"".concat(h,"-out-of-range"),we=function(){var r=Ae(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return v.createElement("input",ie({autoComplete:o},r,{onChange:ce,onFocus:xe,onBlur:Ce,onKeyDown:ye,className:b(h,D({},"".concat(h,"-disabled"),S),l==null?void 0:l.input),style:f==null?void 0:f.input,ref:d,size:R,type:U,onCompositionStart:function(M){W.current=!0,$==null||$(M)},onCompositionEnd:re}))},Re=function(){var r=Number(E)>0;if(V||g.show){var B=g.showFormatter?g.showFormatter({value:H,count:A,maxLength:E}):"".concat(A).concat(r?" / ".concat(E):"");return v.createElement(v.Fragment,null,g.show&&v.createElement("span",{className:b("".concat(h,"-show-count-suffix"),D({},"".concat(h,"-show-count-has-suffix"),!!V),l==null?void 0:l.count),style:I({},f==null?void 0:f.count)},B),V)}return null};return v.createElement(Ie,ie({},m,{prefixCls:h,className:b(k,Se),inputElement:we(),handleReset:Ee,value:H,focused:te,triggerFocus:G,suffix:Re(),disabled:S,classes:N,classNames:l,styles:f}))});export{Ie as B,Oe as I,se as r,Le as u};
