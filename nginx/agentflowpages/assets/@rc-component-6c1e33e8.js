import{c as Pe}from"./classnames-8d1dfefd.js";import{r as n,a as ne}from"./react-7f16ae65.js";import{c as jt,a as Q,g as Br,u as Fr,r as dr,s as Dr,d as Tr,e as Vr,f as Ar,h as je,i as sr,j as jr,k as mr,l as cr,m as Ur,n as Rr,o as hr}from"./rc-util-1b099f2e.js";import{r as qr}from"./react-dom-c2cdb871.js";import{c as N,f as Ut,g as Ue,e as F,k as Lr,d as $r}from"./@babel-d162aaab.js";import{R as Ir}from"./rc-resize-observer-72c86465.js";import{C as _r}from"./rc-motion-9f8dc1dc.js";var zr=n.createContext(null),gr=[];function Qr(t,r){var e=n.useState(function(){if(!jt())return null;var g=document.createElement("div");return g}),a=N(e,1),o=a[0],l=n.useRef(!1),u=n.useContext(zr),v=n.useState(gr),d=N(v,2),m=d[0],C=d[1],c=u||(l.current?void 0:function(g){C(function(y){var M=[g].concat(Ut(y));return M})});function w(){o.parentElement||document.body.appendChild(o),l.current=!0}function f(){var g;(g=o.parentElement)===null||g===void 0||g.removeChild(o),l.current=!1}return Q(function(){return t?u?u(w):w():f(),f},[t]),Q(function(){m.length&&(m.forEach(function(g){return g()}),C(gr))},[m]),[o,c]}function Jr(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Gr="rc-util-locker-".concat(Date.now()),yr=0;function Kr(t){var r=!!t,e=n.useState(function(){return yr+=1,"".concat(Gr,"_").concat(yr)}),a=N(e,1),o=a[0];Q(function(){if(r){var l=Br(document.body).width,u=Jr();Fr(`
html body {
  overflow-y: hidden;
  `.concat(u?"width: calc(100% - ".concat(l,"px);"):"",`
}`),o)}else dr(o);return function(){dr(o)}},[r,o])}var Cr=!1;function Zr(t){return typeof t=="boolean"&&(Cr=t),Cr}var wr=function(r){return r===!1?!1:!jt()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},qt=n.forwardRef(function(t,r){var e=t.open,a=t.autoLock,o=t.getContainer;t.debug;var l=t.autoDestroy,u=l===void 0?!0:l,v=t.children,d=n.useState(e),m=N(d,2),C=m[0],c=m[1],w=C||e;n.useEffect(function(){(u||e)&&c(e)},[e,u]);var f=n.useState(function(){return wr(o)}),g=N(f,2),y=g[0],M=g[1];n.useEffect(function(){var U=wr(o);M(U??null)});var E=Qr(w&&!y),k=N(E,2),S=k[0],s=k[1],D=y??S;Kr(a&&e&&jt()&&(D===S||D===document.body));var J=null;if(v&&Dr(v)&&r){var G=v;J=G.ref}var p=Tr(J,r);if(!w||!jt()||y===void 0)return null;var ae=D===!1||Zr(),j=v;return r&&(j=n.cloneElement(v,{ref:p})),n.createElement(zr.Provider,{value:s},ae?j:qr.createPortal(j,D))});function Or(t){var r=t.prefixCls,e=t.align,a=t.arrow,o=t.arrowPos,l=a||{},u=l.className,v=l.content,d=o.x,m=d===void 0?0:d,C=o.y,c=C===void 0?0:C,w=n.useRef();if(!e||!e.points)return null;var f={position:"absolute"};if(e.autoArrow!==!1){var g=e.points[0],y=e.points[1],M=g[0],E=g[1],k=y[0],S=y[1];M===k||!["t","b"].includes(M)?f.top=c:M==="t"?f.top=0:f.bottom=0,E===S||!["l","r"].includes(E)?f.left=m:E==="l"?f.left=0:f.right=0}return n.createElement("div",{ref:w,className:Pe("".concat(r,"-arrow"),u),style:f},v)}function Yr(t){var r=t.prefixCls,e=t.open,a=t.zIndex,o=t.mask,l=t.motion;return o?n.createElement(_r,Ue({},l,{motionAppear:!0,visible:e,removeOnLeave:!0}),function(u){var v=u.className;return n.createElement("div",{style:{zIndex:a},className:Pe("".concat(r,"-mask"),v)})}):null}var Xr=n.memo(function(t){var r=t.children;return r},function(t,r){return r.cache}),pr=n.forwardRef(function(t,r){var e=t.popup,a=t.className,o=t.prefixCls,l=t.style,u=t.target,v=t.onVisibleChanged,d=t.open,m=t.keepDom,C=t.fresh,c=t.onClick,w=t.mask,f=t.arrow,g=t.arrowPos,y=t.align,M=t.motion,E=t.maskMotion,k=t.forceRender,S=t.getPopupContainer,s=t.autoDestroy,D=t.portal,J=t.zIndex,G=t.onMouseEnter,p=t.onMouseLeave,ae=t.onPointerEnter,j=t.ready,U=t.offsetX,me=t.offsetY,se=t.offsetR,W=t.offsetB,q=t.onAlign,T=t.onPrepare,P=t.stretch,R=t.targetWidth,x=t.targetHeight,K=typeof e=="function"?e():e,te=d||m,oe=(S==null?void 0:S.length)>0,qe=n.useState(!S||!oe),Ie=N(qe,2),ie=Ie[0],_e=Ie[1];if(Q(function(){!ie&&oe&&u&&_e(!0)},[ie,oe,u]),!ie)return null;var V="auto",L={left:"-1000vw",top:"-1000vh",right:V,bottom:V};if(j||!d){var ee,Z=y.points,ze=y.dynamicInset||((ee=y._experimental)===null||ee===void 0?void 0:ee.dynamicInset),We=ze&&Z[0][1]==="r",he=ze&&Z[0][0]==="b";We?(L.right=se,L.left=V):(L.left=U,L.right=V),he?(L.bottom=W,L.top=V):(L.top=me,L.bottom=V)}var O={};return P&&(P.includes("height")&&x?O.height=x:P.includes("minHeight")&&x&&(O.minHeight=x),P.includes("width")&&R?O.width=R:P.includes("minWidth")&&R&&(O.minWidth=R)),d||(O.pointerEvents="none"),n.createElement(D,{open:k||te,getContainer:S&&function(){return S(u)},autoDestroy:s},n.createElement(Yr,{prefixCls:o,open:d,zIndex:J,mask:w,motion:E}),n.createElement(Ir,{onResize:q,disabled:!d},function(Ee){return n.createElement(_r,Ue({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:k,leavedClassName:"".concat(o,"-hidden")},M,{onAppearPrepare:T,onEnterPrepare:T,visible:d,onVisibleChanged:function(ge){var b;M==null||(b=M.onVisibleChanged)===null||b===void 0||b.call(M,ge),v(ge)}}),function(Y,ge){var b=Y.className,Ne=Y.style,ce=Pe(o,b,a);return n.createElement("div",{ref:Vr(Ee,r,ge),className:ce,style:F(F(F(F({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},L),O),Ne),{},{boxSizing:"border-box",zIndex:J},l),onMouseEnter:G,onMouseLeave:p,onPointerEnter:ae,onClick:c},f&&n.createElement(Or,{prefixCls:o,arrow:f,arrowPos:g,align:y}),n.createElement(Xr,{cache:!d&&!C},K))})}))}),en=n.forwardRef(function(t,r){var e=t.children,a=t.getTriggerDOMNode,o=Dr(e),l=n.useCallback(function(v){Ar(r,a?a(v):v)},[a]),u=Tr(l,e.ref);return o?n.cloneElement(e,{ref:u}):e}),br=n.createContext(null);function Mr(t){return t?Array.isArray(t)?t:[t]:[]}function tn(t,r,e,a){return n.useMemo(function(){var o=Mr(e??r),l=Mr(a??r),u=new Set(o),v=new Set(l);return t&&(u.has("hover")&&(u.delete("hover"),u.add("click")),v.has("hover")&&(v.delete("hover"),v.add("click"))),[u,v]},[t,r,e,a])}function rn(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return e?t[0]===r[0]:t[0]===r[0]&&t[1]===r[1]}function nn(t,r,e,a){for(var o=e.points,l=Object.keys(t),u=0;u<l.length;u+=1){var v,d=l[u];if(rn((v=t[d])===null||v===void 0?void 0:v.points,o,a))return"".concat(r,"-placement-").concat(d)}return""}function Sr(t,r,e,a){return r||(e?{motionName:"".concat(t,"-").concat(e)}:a?{motionName:a}:null)}function wt(t){return t.ownerDocument.defaultView}function vr(t){for(var r=[],e=t==null?void 0:t.parentElement,a=["hidden","scroll","clip","auto"];e;){var o=wt(e).getComputedStyle(e),l=o.overflowX,u=o.overflowY,v=o.overflow;[l,u,v].some(function(d){return a.includes(d)})&&r.push(e),e=e.parentElement}return r}function Ct(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?r:t}function yt(t){return Ct(parseFloat(t),0)}function Pr(t,r){var e=F({},t);return(r||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)){var o=wt(a).getComputedStyle(a),l=o.overflow,u=o.overflowClipMargin,v=o.borderTopWidth,d=o.borderBottomWidth,m=o.borderLeftWidth,C=o.borderRightWidth,c=a.getBoundingClientRect(),w=a.offsetHeight,f=a.clientHeight,g=a.offsetWidth,y=a.clientWidth,M=yt(v),E=yt(d),k=yt(m),S=yt(C),s=Ct(Math.round(c.width/g*1e3)/1e3),D=Ct(Math.round(c.height/w*1e3)/1e3),J=(g-y-k-S)*s,G=(w-f-M-E)*D,p=M*D,ae=E*D,j=k*s,U=S*s,me=0,se=0;if(l==="clip"){var W=yt(u);me=W*s,se=W*D}var q=c.x+j-me,T=c.y+p-se,P=q+c.width+2*me-j-U-J,R=T+c.height+2*se-p-ae-G;e.left=Math.max(e.left,q),e.top=Math.max(e.top,T),e.right=Math.min(e.right,P),e.bottom=Math.min(e.bottom,R)}}),e}function Er(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e="".concat(r),a=e.match(/^(.*)\%$/);return a?t*(parseFloat(a[1])/100):parseFloat(e)}function Nr(t,r){var e=r||[],a=N(e,2),o=a[0],l=a[1];return[Er(t.width,o),Er(t.height,l)]}function kr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function ut(t,r){var e=r[0],a=r[1],o,l;return e==="t"?l=t.y:e==="b"?l=t.y+t.height:l=t.y+t.height/2,a==="l"?o=t.x:a==="r"?o=t.x+t.width:o=t.x+t.width/2,{x:o,y:l}}function Ae(t,r){var e={t:"b",b:"t",l:"r",r:"l"};return t.map(function(a,o){return o===r?e[a]||"c":a}).join("")}function an(t,r,e,a,o,l,u){var v=n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[a]||{}}),d=N(v,2),m=d[0],C=d[1],c=n.useRef(0),w=n.useMemo(function(){return r?vr(r):[]},[r]),f=n.useRef({}),g=function(){f.current={}};t||g();var y=je(function(){if(r&&e&&t){let fe=function(zt,de){var it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ne,Wt=x.x+zt,lt=x.y+de,Ht=Wt+L,gt=lt+V,Bt=Math.max(Wt,it.left),or=Math.max(lt,it.top),ir=Math.min(Ht,it.right),lr=Math.min(gt,it.bottom);return Math.max(0,(ir-Bt)*(lr-or))},_t=function(){Ke=x.y+_,Ze=Ke+V,Re=x.x+B,Oe=Re+L};var k,S,s=r,D=s.ownerDocument,J=wt(s),G=J.getComputedStyle(s),p=G.width,ae=G.height,j=G.position,U=s.style.left,me=s.style.top,se=s.style.right,W=s.style.bottom,q=F(F({},o[a]),l),T=D.createElement("div");(k=s.parentElement)===null||k===void 0||k.appendChild(T),T.style.left="".concat(s.offsetLeft,"px"),T.style.top="".concat(s.offsetTop,"px"),T.style.position=j,T.style.height="".concat(s.offsetHeight,"px"),T.style.width="".concat(s.offsetWidth,"px"),s.style.left="0",s.style.top="0",s.style.right="auto",s.style.bottom="auto";var P;if(Array.isArray(e))P={x:e[0],y:e[1],width:0,height:0};else{var R=e.getBoundingClientRect();P={x:R.x,y:R.y,width:R.width,height:R.height}}var x=s.getBoundingClientRect(),K=D.documentElement,te=K.clientWidth,oe=K.clientHeight,qe=K.scrollWidth,Ie=K.scrollHeight,ie=K.scrollTop,_e=K.scrollLeft,V=x.height,L=x.width,ee=P.height,Z=P.width,ze={left:0,top:0,right:te,bottom:oe},We={left:-_e,top:-ie,right:qe-_e,bottom:Ie-ie},he=q.htmlRegion,O="visible",Ee="visibleFirst";he!=="scroll"&&he!==Ee&&(he=O);var Y=he===Ee,ge=Pr(We,w),b=Pr(ze,w),Ne=he===O?b:ge,ce=Y?b:Ne;s.style.left="auto",s.style.top="auto",s.style.right="0",s.style.bottom="0";var le=s.getBoundingClientRect();s.style.left=U,s.style.top=me,s.style.right=se,s.style.bottom=W,(S=s.parentElement)===null||S===void 0||S.removeChild(T);var ke=Ct(Math.round(L/parseFloat(p)*1e3)/1e3),xe=Ct(Math.round(V/parseFloat(ae)*1e3)/1e3);if(ke===0||xe===0||sr(e)&&!jr(e))return;var Me=q.offset,tt=q.targetOffset,H=Nr(x,Me),X=N(H,2),ye=X[0],Ce=X[1],bt=Nr(P,tt),we=N(bt,2),Qt=we[0],Mt=we[1];P.x-=Qt,P.y-=Mt;var Jt=q.points||[],Qe=N(Jt,2),ve=Qe[0],He=Qe[1],De=kr(He),ue=kr(ve),St=ut(P,De),Pt=ut(x,ue),Te=F({},q),B=St.x-Pt.x+ye,_=St.y-Pt.y+Ce,z=fe(B,_),rt=fe(B,_,b),Be=ut(P,["t","l"]),Je=ut(x,["t","l"]),st=ut(P,["b","r"]),ct=ut(x,["b","r"]),Ge=q.overflow||{},be=Ge.adjustX,Gt=Ge.adjustY,vt=Ge.shiftX,nt=Ge.shiftY,ft=function(de){return typeof de=="boolean"?de:de>=0},Ke,Ze,Re,Oe;_t();var Et=ft(Gt),dt=ue[0]===De[0];if(Et&&ue[0]==="t"&&(Ze>ce.bottom||f.current.bt)){var Fe=_;dt?Fe-=V-ee:Fe=Be.y-ct.y-Ce;var Nt=fe(B,Fe),at=fe(B,Fe,b);Nt>z||Nt===z&&(!Y||at>=rt)?(f.current.bt=!0,_=Fe,Ce=-Ce,Te.points=[Ae(ue,0),Ae(De,0)]):f.current.bt=!1}if(Et&&ue[0]==="b"&&(Ke<ce.top||f.current.tb)){var Ye=_;dt?Ye+=V-ee:Ye=st.y-Je.y-Ce;var re=fe(B,Ye),Kt=fe(B,Ye,b);re>z||re===z&&(!Y||Kt>=rt)?(f.current.tb=!0,_=Ye,Ce=-Ce,Te.points=[Ae(ue,0),Ae(De,0)]):f.current.tb=!1}var kt=ft(be),xt=ue[1]===De[1];if(kt&&ue[1]==="l"&&(Oe>ce.right||f.current.rl)){var Xe=B;xt?Xe-=L-Z:Xe=Be.x-ct.x-ye;var Dt=fe(Xe,_),Zt=fe(Xe,_,b);Dt>z||Dt===z&&(!Y||Zt>=rt)?(f.current.rl=!0,B=Xe,ye=-ye,Te.points=[Ae(ue,1),Ae(De,1)]):f.current.rl=!1}if(kt&&ue[1]==="r"&&(Re<ce.left||f.current.lr)){var pe=B;xt?pe+=L-Z:pe=st.x-Je.x-ye;var Tt=fe(pe,_),Ot=fe(pe,_,b);Tt>z||Tt===z&&(!Y||Ot>=rt)?(f.current.lr=!0,B=pe,ye=-ye,Te.points=[Ae(ue,1),Ae(De,1)]):f.current.lr=!1}_t();var Se=vt===!0?0:vt;typeof Se=="number"&&(Re<b.left&&(B-=Re-b.left-ye,P.x+Z<b.left+Se&&(B+=P.x-b.left+Z-Se)),Oe>b.right&&(B-=Oe-b.right-ye,P.x>b.right-Se&&(B+=P.x-b.right+Se)));var Le=nt===!0?0:nt;typeof Le=="number"&&(Ke<b.top&&(_-=Ke-b.top-Ce,P.y+ee<b.top+Le&&(_+=P.y-b.top+ee-Le)),Ze>b.bottom&&(_-=Ze-b.bottom-Ce,P.y>b.bottom-Le&&(_+=P.y-b.bottom+Le)));var mt=x.x+B,Rt=mt+L,Ve=x.y+_,et=Ve+V,ht=P.x,ot=ht+Z,$e=P.y,Yt=$e+ee,Xt=Math.max(mt,ht),pt=Math.min(Rt,ot),Lt=(Xt+pt)/2,er=Lt-mt,tr=Math.max(Ve,$e),rr=Math.min(et,Yt),$t=(tr+rr)/2,nr=$t-Ve;u==null||u(r,Te);var ar=le.right-x.x-(B+x.width),It=le.bottom-x.y-(_+x.height);C({ready:!0,offsetX:B/ke,offsetY:_/xe,offsetR:ar/ke,offsetB:It/xe,arrowX:er/ke,arrowY:nr/xe,scaleX:ke,scaleY:xe,align:Te})}}),M=function(){c.current+=1;var S=c.current;Promise.resolve().then(function(){c.current===S&&y()})},E=function(){C(function(S){return F(F({},S),{},{ready:!1})})};return Q(E,[a]),Q(function(){t||E()},[t]),[m.ready,m.offsetX,m.offsetY,m.offsetR,m.offsetB,m.arrowX,m.arrowY,m.scaleX,m.scaleY,m.align,M]}function on(t,r,e,a,o){Q(function(){if(t&&r&&e){let c=function(){a(),o()};var l=r,u=e,v=vr(l),d=vr(u),m=wt(u),C=new Set([m].concat(Ut(v),Ut(d)));return C.forEach(function(w){w.addEventListener("scroll",c,{passive:!0})}),m.addEventListener("resize",c,{passive:!0}),a(),function(){C.forEach(function(w){w.removeEventListener("scroll",c),m.removeEventListener("resize",c)})}}},[t,r,e])}function ln(t,r,e,a,o,l,u,v){var d=n.useRef(t),m=n.useRef(!1);d.current!==t&&(m.current=!0,d.current=t),n.useEffect(function(){var C=mr(function(){m.current=!1});return function(){mr.cancel(C)}},[t]),n.useEffect(function(){if(r&&a&&(!o||l)){var C=function(){var J=!1,G=function(j){var U=j.target;J=u(U)},p=function(j){var U=j.target;!m.current&&d.current&&!J&&!u(U)&&v(!1)};return[G,p]},c=C(),w=N(c,2),f=w[0],g=w[1],y=C(),M=N(y,2),E=M[0],k=M[1],S=wt(a);S.addEventListener("mousedown",f,!0),S.addEventListener("click",g,!0),S.addEventListener("contextmenu",g,!0);var s=cr(e);return s&&(s.addEventListener("mousedown",E,!0),s.addEventListener("click",k,!0),s.addEventListener("contextmenu",k,!0)),function(){S.removeEventListener("mousedown",f,!0),S.removeEventListener("click",g,!0),S.removeEventListener("contextmenu",g,!0),s&&(s.removeEventListener("mousedown",E,!0),s.removeEventListener("click",k,!0),s.removeEventListener("contextmenu",k,!0))}}},[r,e,a,o,l])}var un=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function sn(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qt,r=n.forwardRef(function(e,a){var o=e.prefixCls,l=o===void 0?"rc-trigger-popup":o,u=e.children,v=e.action,d=v===void 0?"hover":v,m=e.showAction,C=e.hideAction,c=e.popupVisible,w=e.defaultPopupVisible,f=e.onPopupVisibleChange,g=e.afterPopupVisibleChange,y=e.mouseEnterDelay,M=e.mouseLeaveDelay,E=M===void 0?.1:M,k=e.focusDelay,S=e.blurDelay,s=e.mask,D=e.maskClosable,J=D===void 0?!0:D,G=e.getPopupContainer,p=e.forceRender,ae=e.autoDestroy,j=e.destroyPopupOnHide,U=e.popup,me=e.popupClassName,se=e.popupStyle,W=e.popupPlacement,q=e.builtinPlacements,T=q===void 0?{}:q,P=e.popupAlign,R=e.zIndex,x=e.stretch,K=e.getPopupClassNameFromAlign,te=e.fresh,oe=e.alignPoint,qe=e.onPopupClick,Ie=e.onPopupAlign,ie=e.arrow,_e=e.popupMotion,V=e.maskMotion,L=e.popupTransitionName,ee=e.popupAnimation,Z=e.maskTransitionName,ze=e.maskAnimation,We=e.className,he=e.getTriggerDOMNode,O=Lr(e,un),Ee=ae||j||!1,Y=n.useState(!1),ge=N(Y,2),b=ge[0],Ne=ge[1];Q(function(){Ne(Ur())},[]);var ce=n.useRef({}),le=n.useContext(br),ke=n.useMemo(function(){return{registerSubPopup:function(h,$){ce.current[h]=$,le==null||le.registerSubPopup(h,$)}}},[le]),xe=Rr(),Me=n.useState(null),tt=N(Me,2),H=tt[0],X=tt[1],ye=je(function(i){sr(i)&&H!==i&&X(i),le==null||le.registerSubPopup(xe,i)}),Ce=n.useState(null),bt=N(Ce,2),we=bt[0],Qt=bt[1],Mt=n.useRef(null),Jt=je(function(i){sr(i)&&we!==i&&(Qt(i),Mt.current=i)}),Qe=n.Children.only(u),ve=(Qe==null?void 0:Qe.props)||{},He={},De=je(function(i){var h,$,A=we;return(A==null?void 0:A.contains(i))||((h=cr(A))===null||h===void 0?void 0:h.host)===i||i===A||(H==null?void 0:H.contains(i))||(($=cr(H))===null||$===void 0?void 0:$.host)===i||i===H||Object.values(ce.current).some(function(I){return(I==null?void 0:I.contains(i))||i===I})}),ue=Sr(l,_e,ee,L),St=Sr(l,V,ze,Z),Pt=n.useState(w||!1),Te=N(Pt,2),B=Te[0],_=Te[1],z=c??B,rt=je(function(i){c===void 0&&_(i)});Q(function(){_(c||!1)},[c]);var Be=n.useRef(z);Be.current=z;var Je=n.useRef([]);Je.current=[];var st=je(function(i){var h;rt(i),((h=Je.current[Je.current.length-1])!==null&&h!==void 0?h:z)!==i&&(Je.current.push(i),f==null||f(i))}),ct=n.useRef(),Ge=function(){clearTimeout(ct.current)},be=function(h){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ge(),$===0?st(h):ct.current=setTimeout(function(){st(h)},$*1e3)};n.useEffect(function(){return Ge},[]);var Gt=n.useState(!1),vt=N(Gt,2),nt=vt[0],ft=vt[1];Q(function(i){(!i||z)&&ft(!0)},[z]);var Ke=n.useState(null),Ze=N(Ke,2),Re=Ze[0],Oe=Ze[1],Et=n.useState([0,0]),dt=N(Et,2),Fe=dt[0],Nt=dt[1],at=function(h){Nt([h.clientX,h.clientY])},Ye=an(z,H,oe?Fe:we,W,T,P,Ie),re=N(Ye,11),Kt=re[0],kt=re[1],xt=re[2],Xe=re[3],Dt=re[4],Zt=re[5],pe=re[6],Tt=re[7],Ot=re[8],Se=re[9],Le=re[10],mt=tn(b,d,m,C),Rt=N(mt,2),Ve=Rt[0],et=Rt[1],ht=Ve.has("click"),ot=et.has("click")||et.has("contextMenu"),$e=je(function(){nt||Le()}),Yt=function(){Be.current&&oe&&ot&&be(!1)};on(z,we,H,$e,Yt),Q(function(){$e()},[Fe,W]),Q(function(){z&&!(T!=null&&T[W])&&$e()},[JSON.stringify(P)]);var Xt=n.useMemo(function(){var i=nn(T,l,Se,oe);return Pe(i,K==null?void 0:K(Se))},[Se,K,T,l,oe]);n.useImperativeHandle(a,function(){return{nativeElement:Mt.current,forceAlign:$e}});var pt=n.useState(0),Lt=N(pt,2),er=Lt[0],tr=Lt[1],rr=n.useState(0),$t=N(rr,2),nr=$t[0],ar=$t[1],It=function(){if(x&&we){var h=we.getBoundingClientRect();tr(h.width),ar(h.height)}},fe=function(){It(),$e()},_t=function(h){ft(!1),Le(),g==null||g(h)},zt=function(){return new Promise(function(h){It(),Oe(function(){return h})})};Q(function(){Re&&(Le(),Re(),Oe(null))},[Re]);function de(i,h,$,A){He[i]=function(I){var Ft;A==null||A(I),be(h,$);for(var ur=arguments.length,fr=new Array(ur>1?ur-1:0),Vt=1;Vt<ur;Vt++)fr[Vt-1]=arguments[Vt];(Ft=ve[i])===null||Ft===void 0||Ft.call.apply(Ft,[ve,I].concat(fr))}}(ht||ot)&&(He.onClick=function(i){var h;Be.current&&ot?be(!1):!Be.current&&ht&&(at(i),be(!0));for(var $=arguments.length,A=new Array($>1?$-1:0),I=1;I<$;I++)A[I-1]=arguments[I];(h=ve.onClick)===null||h===void 0||h.call.apply(h,[ve,i].concat(A))}),ln(z,ot,we,H,s,J,De,be);var it=Ve.has("hover"),Wt=et.has("hover"),lt,Ht;it&&(de("onMouseEnter",!0,y,function(i){at(i)}),de("onPointerEnter",!0,y,function(i){at(i)}),lt=function(){(z||nt)&&be(!0,y)},oe&&(He.onMouseMove=function(i){var h;(h=ve.onMouseMove)===null||h===void 0||h.call(ve,i)})),Wt&&(de("onMouseLeave",!1,E),de("onPointerLeave",!1,E),Ht=function(){be(!1,E)}),Ve.has("focus")&&de("onFocus",!0,k),et.has("focus")&&de("onBlur",!1,S),Ve.has("contextMenu")&&(He.onContextMenu=function(i){var h;Be.current&&et.has("contextMenu")?be(!1):(at(i),be(!0)),i.preventDefault();for(var $=arguments.length,A=new Array($>1?$-1:0),I=1;I<$;I++)A[I-1]=arguments[I];(h=ve.onContextMenu)===null||h===void 0||h.call.apply(h,[ve,i].concat(A))}),We&&(He.className=Pe(ve.className,We));var gt=F(F({},ve),He),Bt={},or=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];or.forEach(function(i){O[i]&&(Bt[i]=function(){for(var h,$=arguments.length,A=new Array($),I=0;I<$;I++)A[I]=arguments[I];(h=gt[i])===null||h===void 0||h.call.apply(h,[gt].concat(A)),O[i].apply(O,A)})});var ir=n.cloneElement(Qe,F(F({},gt),Bt)),lr={x:Zt,y:pe},Hr=ie?F({},ie!==!0?ie:{}):null;return n.createElement(n.Fragment,null,n.createElement(Ir,{disabled:!z,ref:Jt,onResize:fe},n.createElement(en,{getTriggerDOMNode:he},ir)),n.createElement(br.Provider,{value:ke},n.createElement(pr,{portal:t,ref:ye,prefixCls:l,popup:U,className:Pe(me,Xt),style:se,target:we,onMouseEnter:lt,onMouseLeave:Ht,onPointerEnter:lt,zIndex:R,open:z,keepDom:nt,fresh:te,onClick:qe,mask:s,motion:ue,maskMotion:St,onVisibleChanged:_t,onPrepare:zt,forceRender:p,autoDestroy:Ee,getPopupContainer:G,align:Se,arrow:Hr,arrowPos:lr,ready:Kt,offsetX:kt,offsetY:xt,offsetR:Xe,offsetB:Dt,onAlign:$e,stretch:x,targetWidth:er/Tt,targetHeight:nr/Ot})))});return r}const cn=sn(qt);function vn(t){var r=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,a=t.getBoundingClientRect(),o=a.top,l=a.right,u=a.bottom,v=a.left;return o>=0&&v>=0&&l<=r&&u<=e}function fn(t,r,e){var a;return(a=e??r)!==null&&a!==void 0?a:t===null?"center":"bottom"}function dn(t,r,e,a){var o=n.useState(void 0),l=N(o,2),u=l[0],v=l[1];Q(function(){var y=typeof t=="function"?t():t;v(y||null)});var d=n.useState(null),m=N(d,2),C=m[0],c=m[1],w=je(function(){if(u){!vn(u)&&r&&u.scrollIntoView(a);var y=u.getBoundingClientRect(),M=y.left,E=y.top,k=y.width,S=y.height,s={left:M,top:E,width:k,height:S,radius:0};c(function(D){return JSON.stringify(D)!==JSON.stringify(s)?s:D})}else c(null)}),f=function(M){var E;return(E=Array.isArray(e==null?void 0:e.offset)?e==null?void 0:e.offset[M]:e==null?void 0:e.offset)!==null&&E!==void 0?E:6};Q(function(){return w(),window.addEventListener("resize",w),function(){window.removeEventListener("resize",w)}},[u,r,w]);var g=n.useMemo(function(){if(!C)return C;var y=f(0),M=f(1),E=(e==null?void 0:e.radius)||2;return{left:C.left-y,top:C.top-M,width:C.width+y*2,height:C.height+M*2,radius:E}},[C,e]);return[g,u]}var At={fill:"transparent",pointerEvents:"auto"},mn=function(r){var e=r.prefixCls,a=r.rootClassName,o=r.pos,l=r.showMask,u=r.style,v=u===void 0?{}:u,d=r.fill,m=d===void 0?"rgba(0,0,0,0.5)":d,C=r.open,c=r.animated,w=r.zIndex,f=Rr(),g="".concat(e,"-mask-").concat(f),y=$r(c)==="object"?c==null?void 0:c.placeholder:c;return ne.createElement(qt,{open:C,autoLock:!0},ne.createElement("div",{className:Pe("".concat(e,"-mask"),a),style:F({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:w,pointerEvents:"none"},v)},l?ne.createElement("svg",{style:{width:"100%",height:"100%"}},ne.createElement("defs",null,ne.createElement("mask",{id:g},ne.createElement("rect",{x:"0",y:"0",width:"100vw",height:"100vh",fill:"white"}),o&&ne.createElement("rect",{x:o.left,y:o.top,rx:o.radius,width:o.width,height:o.height,fill:"black",className:y?"".concat(e,"-placeholder-animated"):""}))),ne.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:m,mask:"url(#".concat(g,")")}),o&&ne.createElement(ne.Fragment,null,ne.createElement("rect",Ue({},At,{x:"0",y:"0",width:"100%",height:o.top})),ne.createElement("rect",Ue({},At,{x:"0",y:"0",width:o.left,height:"100%"})),ne.createElement("rect",Ue({},At,{x:"0",y:o.top+o.height,width:"100%",height:"calc(100vh - ".concat(o.top+o.height,"px)")})),ne.createElement("rect",Ue({},At,{x:o.left+o.width,y:"0",width:"calc(100vw - ".concat(o.left+o.width,"px)"),height:"100%"})))):null))},hn=[0,0],xr={left:{points:["cr","cl"],offset:[-8,0]},right:{points:["cl","cr"],offset:[8,0]},top:{points:["bc","tc"],offset:[0,-8]},bottom:{points:["tc","bc"],offset:[0,8]},topLeft:{points:["bl","tl"],offset:[0,-8]},leftTop:{points:["tr","tl"],offset:[-8,0]},topRight:{points:["br","tr"],offset:[0,-8]},rightTop:{points:["tl","tr"],offset:[8,0]},bottomRight:{points:["tr","br"],offset:[0,8]},rightBottom:{points:["bl","br"],offset:[8,0]},bottomLeft:{points:["tl","bl"],offset:[0,8]},leftBottom:{points:["br","bl"],offset:[-8,0]}};function Wr(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r={};return Object.keys(xr).forEach(function(e){r[e]=F(F({},xr[e]),{},{autoArrow:t,targetOffset:hn})}),r}Wr();function gn(t){var r=t.prefixCls,e=t.current,a=t.total,o=t.title,l=t.description,u=t.onClose,v=t.onPrev,d=t.onNext,m=t.onFinish,C=t.className,c=t.closeIcon,w=c!==!1&&c!==null,f=c!==void 0&&c!==!0?c:n.createElement("span",{className:"".concat(r,"-close-x")},"×");return n.createElement("div",{className:Pe("".concat(r,"-content"),C)},n.createElement("div",{className:"".concat(r,"-inner")},w&&n.createElement("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(r,"-close")},f),n.createElement("div",{className:"".concat(r,"-header")},n.createElement("div",{className:"".concat(r,"-title")},o)),n.createElement("div",{className:"".concat(r,"-description")},l),n.createElement("div",{className:"".concat(r,"-footer")},n.createElement("div",{className:"".concat(r,"-sliders")},a>1?Ut(Array.from({length:a}).keys()).map(function(g,y){return n.createElement("span",{key:g,className:y===e?"active":""})}):null),n.createElement("div",{className:"".concat(r,"-buttons")},e!==0?n.createElement("button",{className:"".concat(r,"-prev-btn"),onClick:v},"Prev"):null,e===a-1?n.createElement("button",{className:"".concat(r,"-finish-btn"),onClick:m},"Finish"):n.createElement("button",{className:"".concat(r,"-next-btn"),onClick:d},"Next")))))}var yn=function(r){var e=r.current,a=r.renderPanel;return n.createElement(n.Fragment,null,typeof a=="function"?a(r,e):n.createElement(gn,r))},Cn=["prefixCls","steps","defaultCurrent","current","onChange","onClose","onFinish","open","mask","arrow","rootClassName","placement","renderPanel","gap","animated","scrollIntoViewOptions","zIndex","closeIcon"],wn={left:"50%",top:"50%",width:1,height:1},xn=function(r){var e=r.prefixCls,a=e===void 0?"rc-tour":e,o=r.steps,l=o===void 0?[]:o,u=r.defaultCurrent,v=r.current,d=r.onChange,m=r.onClose,C=r.onFinish,c=r.open,w=r.mask,f=w===void 0?!0:w,g=r.arrow,y=g===void 0?!0:g,M=r.rootClassName,E=r.placement,k=r.renderPanel,S=r.gap,s=r.animated,D=r.scrollIntoViewOptions,J=D===void 0?!0:D,G=r.zIndex,p=G===void 0?1001:G,ae=r.closeIcon,j=Lr(r,Cn),U=n.useRef(),me=hr(0,{value:v,defaultValue:u}),se=N(me,2),W=se[0],q=se[1],T=hr(void 0,{value:c,postState:function(X){return W<0||W>=l.length?!1:X??!0}}),P=N(T,2),R=P[0],x=P[1],K=n.useRef(R);Q(function(){R&&!K.current&&q(0),K.current=R},[R]);var te=l[W]||{},oe=te.target,qe=te.placement,Ie=te.style,ie=te.arrow,_e=te.className,V=te.mask,L=te.scrollIntoViewOptions,ee=te.closeIcon,Z=R&&(V??f),ze=ee??ae,We=L??J,he=dn(oe,c,S,We),O=N(he,2),Ee=O[0],Y=O[1],ge=fn(Y,E,qe),b=Y?typeof ie>"u"?y:ie:!1,Ne=$r(b)==="object"?b.pointAtCenter:!1;Q(function(){var H;(H=U.current)===null||H===void 0||H.forceAlign()},[Ne,W]);var ce=function(X){q(X),d==null||d(X)};if(Y===void 0)return null;var le=function(){x(!1),m==null||m(W)},ke=function(){return n.createElement(yn,Ue({arrow:b,key:"content",prefixCls:a,total:l.length,renderPanel:k,onPrev:function(){ce(W-1)},onNext:function(){ce(W+1)},onClose:le,current:W,onFinish:function(){le(),C==null||C()},closeIcon:ze},l[W]))},xe=typeof Z=="boolean"?Z:!!Z,Me=typeof Z=="boolean"?void 0:Z,tt=function(X){return X||Y||document.body};return n.createElement(n.Fragment,null,n.createElement(mn,{zIndex:p,prefixCls:a,pos:Ee,showMask:xe,style:Me==null?void 0:Me.style,fill:Me==null?void 0:Me.color,open:R,animated:s,rootClassName:M}),n.createElement(cn,Ue({builtinPlacements:Wr(Ne)},j,{ref:U,popupStyle:Ie,popupPlacement:ge,popupVisible:R,popupClassName:Pe(M,_e),prefixCls:a,popup:ke,forceRender:!1,destroyPopupOnHide:!0,zIndex:p,getTriggerDOMNode:tt,arrow:!!b}),n.createElement(qt,{open:R,autoLock:!0},n.createElement("div",{className:Pe(M,"".concat(a,"-target-placeholder")),style:F(F({},Ee||wn),{},{position:"fixed",pointerEvents:"none"})}))))};export{qt as P,xn as T,cn as a};
