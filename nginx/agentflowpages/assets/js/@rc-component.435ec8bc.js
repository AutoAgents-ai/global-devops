import{c as Ee}from"./classnames.087671f5.js";import{r as n,a as oe}from"./react.4ec6b4a2.js";import{c as P,f as Ut,g as we,e as H,k as Tr,d as Ir}from"./@babel.fdde90cc.js";import{c as jt,a as U,g as Br,u as Fr,r as hr,s as qt,d as $r,e as Ar,f as Ur,h as Ie,i as vr,j as jr,k as gr,l as fr,m as qr,n as Lr,o as Qr,p as yr}from"./rc-util.402b0550.js";import{r as _r}from"./react-dom.963eef6b.js";import"./react-is.e5978b8b.js";import{R as zr}from"./rc-resize-observer.4224b398.js";import{C as Wr}from"./rc-motion.da861633.js";var Vr=n.createContext(null),Cr=[];function Jr(e,r){var t=n.useState(function(){if(!jt())return null;var g=document.createElement("div");return g}),o=P(t,1),a=o[0],i=n.useRef(!1),l=n.useContext(Vr),s=n.useState(Cr),m=P(s,2),v=m[0],h=m[1],u=l||(i.current?void 0:function(g){h(function(w){var M=[g].concat(Ut(w));return M})});function y(){a.parentElement||document.body.appendChild(a),i.current=!0}function d(){var g;(g=a.parentElement)===null||g===void 0||g.removeChild(a),i.current=!1}return U(function(){return e?l?l(y):y():d(),d},[e]),U(function(){v.length&&(v.forEach(function(g){return g()}),h(Cr))},[v]),[a,u]}function Gr(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Kr="rc-util-locker-".concat(Date.now()),wr=0;function Zr(e){var r=!!e,t=n.useState(function(){return wr+=1,"".concat(Kr,"_").concat(wr)}),o=P(t,1),a=o[0];U(function(){if(r){var i=Br(document.body).width,l=Gr();Fr(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(i,"px);"):"",`
}`),a)}else hr(a);return function(){hr(a)}},[r,a])}var br=!1;function Or(e){return typeof e=="boolean"&&(br=e),br}var Mr=function(r){return r===!1?!1:!jt()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},Qt=n.forwardRef(function(e,r){var t=e.open,o=e.autoLock,a=e.getContainer;e.debug;var i=e.autoDestroy,l=i===void 0?!0:i,s=e.children,m=n.useState(t),v=P(m,2),h=v[0],u=v[1],y=h||t;n.useEffect(function(){(l||t)&&u(t)},[t,l]);var d=n.useState(function(){return Mr(a)}),g=P(d,2),w=g[0],M=g[1];n.useEffect(function(){var q=Mr(a);M(q??null)});var k=Jr(y&&!w),N=P(k,2),S=N[0],f=N[1],D=w??S;Zr(o&&t&&jt()&&(D===S||D===document.body));var J=null;if(s&&qt(s)&&r){var G=s;J=G.ref}var O=$r(J,r);if(!y||!jt()||w===void 0)return null;var ie=D===!1||Or(),j=s;return r&&(j=n.cloneElement(s,{ref:O})),n.createElement(Vr.Provider,{value:f},ie?j:_r.createPortal(j,D))});function Yr(e){var r=e.prefixCls,t=e.align,o=e.arrow,a=e.arrowPos,i=o||{},l=i.className,s=i.content,m=a.x,v=m===void 0?0:m,h=a.y,u=h===void 0?0:h,y=n.useRef();if(!t||!t.points)return null;var d={position:"absolute"};if(t.autoArrow!==!1){var g=t.points[0],w=t.points[1],M=g[0],k=g[1],N=w[0],S=w[1];M===N||!["t","b"].includes(M)?d.top=u:M==="t"?d.top=0:d.bottom=0,k===S||!["l","r"].includes(k)?d.left=v:k==="l"?d.left=0:d.right=0}return n.createElement("div",{ref:y,className:Ee("".concat(r,"-arrow"),l),style:d},s)}function Xr(e){var r=e.prefixCls,t=e.open,o=e.zIndex,a=e.mask,i=e.motion;return a?n.createElement(Wr,we({},i,{motionAppear:!0,visible:t,removeOnLeave:!0}),function(l){var s=l.className;return n.createElement("div",{style:{zIndex:o},className:Ee("".concat(r,"-mask"),s)})}):null}var pr=n.memo(function(e){var r=e.children;return r},function(e,r){return r.cache}),en=n.forwardRef(function(e,r){var t=e.popup,o=e.className,a=e.prefixCls,i=e.style,l=e.target,s=e.onVisibleChanged,m=e.open,v=e.keepDom,h=e.fresh,u=e.onClick,y=e.mask,d=e.arrow,g=e.arrowPos,w=e.align,M=e.motion,k=e.maskMotion,N=e.forceRender,S=e.getPopupContainer,f=e.autoDestroy,D=e.portal,J=e.zIndex,G=e.onMouseEnter,O=e.onMouseLeave,ie=e.onPointerEnter,j=e.ready,q=e.offsetX,ye=e.offsetY,ve=e.offsetR,W=e.offsetB,fe=e.onAlign,L=e.onPrepare,_=e.stretch,b=e.targetWidth,te=e.targetHeight,R=typeof t=="function"?t():t,B=m||v,le=(S==null?void 0:S.length)>0,Ue=n.useState(!S||!le),$e=P(Ue,2),de=$e[0],Le=$e[1];if(U(function(){!de&&le&&l&&Le(!0)},[de,le,l]),!de)return null;var Y="auto",T={left:"-1000vw",top:"-1000vh",right:Y,bottom:Y};if(j||!m){var K,Z=w.points,me=w.dynamicInset||((K=w._experimental)===null||K===void 0?void 0:K.dynamicInset),_e=me&&Z[0][1]==="r",je=me&&Z[0][0]==="b";_e?(T.right=ve,T.left=Y):(T.left=q,T.right=Y),je?(T.bottom=W,T.top=Y):(T.top=ye,T.bottom=Y)}var F={};return _&&(_.includes("height")&&te?F.height=te:_.includes("minHeight")&&te&&(F.minHeight=te),_.includes("width")&&b?F.width=b:_.includes("minWidth")&&b&&(F.minWidth=b)),m||(F.pointerEvents="none"),n.createElement(D,{open:N||B,getContainer:S&&function(){return S(l)},autoDestroy:f},n.createElement(Xr,{prefixCls:a,open:m,zIndex:J,mask:y,motion:k}),n.createElement(zr,{onResize:fe,disabled:!m},function(ke){return n.createElement(Wr,we({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:N,leavedClassName:"".concat(a,"-hidden")},M,{onAppearPrepare:L,onEnterPrepare:L,visible:m,onVisibleChanged:function(X){var re;M==null||(re=M.onVisibleChanged)===null||re===void 0||re.call(M,X),s(X)}}),function(ue,X){var re=ue.className,x=ue.style,be=Ee(a,re,o);return n.createElement("div",{ref:Ar(ke,r,X),className:be,style:H(H(H(H({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},T),F),x),{},{boxSizing:"border-box",zIndex:J},i),onMouseEnter:G,onMouseLeave:O,onPointerEnter:ie,onClick:u},d&&n.createElement(Yr,{prefixCls:a,arrow:d,arrowPos:g,align:w}),n.createElement(pr,{cache:!m&&!h},R))})}))}),tn=n.forwardRef(function(e,r){var t=e.children,o=e.getTriggerDOMNode,a=qt(t),i=n.useCallback(function(s){Ur(r,o?o(s):s)},[o]),l=$r(i,t.ref);return a?n.cloneElement(t,{ref:l}):t}),Sr=n.createContext(null);function Pr(e){return e?Array.isArray(e)?e:[e]:[]}function rn(e,r,t,o){return n.useMemo(function(){var a=Pr(t??r),i=Pr(o??r),l=new Set(a),s=new Set(i);return e&&(l.has("hover")&&(l.delete("hover"),l.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[l,s]},[e,r,t,o])}function nn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0;return t?e[0]===r[0]:e[0]===r[0]&&e[1]===r[1]}function an(e,r,t,o){for(var a=t.points,i=Object.keys(e),l=0;l<i.length;l+=1){var s,m=i[l];if(nn((s=e[m])===null||s===void 0?void 0:s.points,a,o))return"".concat(r,"-placement-").concat(m)}return""}function Er(e,r,t,o){return r||(t?{motionName:"".concat(e,"-").concat(t)}:o?{motionName:o}:null)}function bt(e){return e.ownerDocument.defaultView}function dr(e){for(var r=[],t=e==null?void 0:e.parentElement,o=["hidden","scroll","clip","auto"];t;){var a=bt(t).getComputedStyle(t),i=a.overflowX,l=a.overflowY,s=a.overflow;[i,l,s].some(function(m){return o.includes(m)})&&r.push(t),t=t.parentElement}return r}function wt(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?r:e}function Ct(e){return wt(parseFloat(e),0)}function kr(e,r){var t=H({},e);return(r||[]).forEach(function(o){if(!(o instanceof HTMLBodyElement||o instanceof HTMLHtmlElement)){var a=bt(o).getComputedStyle(o),i=a.overflow,l=a.overflowClipMargin,s=a.borderTopWidth,m=a.borderBottomWidth,v=a.borderLeftWidth,h=a.borderRightWidth,u=o.getBoundingClientRect(),y=o.offsetHeight,d=o.clientHeight,g=o.offsetWidth,w=o.clientWidth,M=Ct(s),k=Ct(m),N=Ct(v),S=Ct(h),f=wt(Math.round(u.width/g*1e3)/1e3),D=wt(Math.round(u.height/y*1e3)/1e3),J=(g-w-N-S)*f,G=(y-d-M-k)*D,O=M*D,ie=k*D,j=N*f,q=S*f,ye=0,ve=0;if(i==="clip"){var W=Ct(l);ye=W*f,ve=W*D}var fe=u.x+j-ye,L=u.y+O-ve,_=fe+u.width+2*ye-j-q-J,b=L+u.height+2*ve-O-ie-G;t.left=Math.max(t.left,fe),t.top=Math.max(t.top,L),t.right=Math.min(t.right,_),t.bottom=Math.min(t.bottom,b)}}),t}function xr(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t="".concat(r),o=t.match(/^(.*)\%$/);return o?e*(parseFloat(o[1])/100):parseFloat(t)}function Nr(e,r){var t=r||[],o=P(t,2),a=o[0],i=o[1];return[xr(e.width,a),xr(e.height,i)]}function Rr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function ut(e,r){var t=r[0],o=r[1],a,i;return t==="t"?i=e.y:t==="b"?i=e.y+e.height:i=e.y+e.height/2,o==="l"?a=e.x:o==="r"?a=e.x+e.width:a=e.x+e.width/2,{x:a,y:i}}function Ae(e,r){var t={t:"b",b:"t",l:"r",r:"l"};return e.map(function(o,a){return a===r?t[o]||"c":o}).join("")}function on(e,r,t,o,a,i,l){var s=n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[o]||{}}),m=P(s,2),v=m[0],h=m[1],u=n.useRef(0),y=n.useMemo(function(){return r?dr(r):[]},[r]),d=n.useRef({}),g=function(){d.current={}};e||g();var w=Ie(function(){if(r&&t&&e){let ge=function(Te,Ye){var it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be,lt=R.x+Te,gt=R.y+Ye,yt=lt+K,Ht=gt+T,ir=Math.max(lt,it.left),lr=Math.max(gt,it.top),ur=Math.min(yt,it.right),sr=Math.min(Ht,it.bottom);return Math.max(0,(ur-ir)*(sr-lr))},Vt=function(){Ve=R.y+E,He=Ve+T,Be=R.x+z,rt=Be+K};var N,S,f=r,D=f.ownerDocument,J=bt(f),G=J.getComputedStyle(f),O=G.width,ie=G.height,j=G.position,q=f.style.left,ye=f.style.top,ve=f.style.right,W=f.style.bottom,fe=f.style.overflow,L=H(H({},a[o]),i),_=D.createElement("div");(N=f.parentElement)===null||N===void 0||N.appendChild(_),_.style.left="".concat(f.offsetLeft,"px"),_.style.top="".concat(f.offsetTop,"px"),_.style.position=j,_.style.height="".concat(f.offsetHeight,"px"),_.style.width="".concat(f.offsetWidth,"px"),f.style.left="0",f.style.top="0",f.style.right="auto",f.style.bottom="auto",f.style.overflow="hidden";var b;if(Array.isArray(t))b={x:t[0],y:t[1],width:0,height:0};else{var te=t.getBoundingClientRect();b={x:te.x,y:te.y,width:te.width,height:te.height}}var R=f.getBoundingClientRect(),B=D.documentElement,le=B.clientWidth,Ue=B.clientHeight,$e=B.scrollWidth,de=B.scrollHeight,Le=B.scrollTop,Y=B.scrollLeft,T=R.height,K=R.width,Z=b.height,me=b.width,_e={left:0,top:0,right:le,bottom:Ue},je={left:-Y,top:-Le,right:$e-Y,bottom:de-Le},F=L.htmlRegion,ke="visible",ue="visibleFirst";F!=="scroll"&&F!==ue&&(F=ke);var X=F===ue,re=kr(je,y),x=kr(_e,y),be=F===ke?x:re,p=X?x:be;f.style.left="auto",f.style.top="auto",f.style.right="0",f.style.bottom="0";var Xe=f.getBoundingClientRect();f.style.left=q,f.style.top=ye,f.style.right=ve,f.style.bottom=W,f.style.overflow=fe,(S=f.parentElement)===null||S===void 0||S.removeChild(_);var xe=wt(Math.round(K/parseFloat(O)*1e3)/1e3),ne=wt(Math.round(T/parseFloat(ie)*1e3)/1e3);if(xe===0||ne===0||vr(t)&&!jr(t))return;var pe=L.offset,V=L.targetOffset,ee=Nr(R,pe),Mt=P(ee,2),Ce=Mt[0],he=Mt[1],Me=Nr(b,V),St=P(Me,2),Pt=St[0],Jt=St[1];b.x-=Pt,b.y-=Jt;var et=L.points||[],se=P(et,2),ze=se[0],Gt=se[1],Ne=Rr(Gt),ce=Rr(ze),Et=ut(b,Ne),st=ut(R,ce),We=H({},L),z=Et.x-st.x+Ce,E=Et.y-st.y+he,Se=ge(z,E),Pe=ge(z,E,x),qe=ut(b,["t","l"]),ct=ut(R,["t","l"]),vt=ut(b,["b","r"]),ft=ut(R,["b","r"]),ae=L.overflow||{},Kt=ae.adjustX,kt=ae.adjustY,tt=ae.shiftX,dt=ae.shiftY,xt=function(Ye){return typeof Ye=="boolean"?Ye:Ye>=0},Ve,He,Be,rt;Vt();var mt=xt(kt),ht=ce[0]===Ne[0];if(mt&&ce[0]==="t"&&(He>p.bottom||d.current.bt)){var Qe=E;ht?Qe-=T-Z:Qe=qe.y-ft.y-he;var Je=ge(z,Qe),Zt=ge(z,Qe,x);Je>Se||Je===Se&&(!X||Zt>=Pe)?(d.current.bt=!0,E=Qe,he=-he,We.points=[Ae(ce,0),Ae(Ne,0)]):d.current.bt=!1}if(mt&&ce[0]==="b"&&(Ve<p.top||d.current.tb)){var Q=E;ht?Q+=T-Z:Q=vt.y-ct.y-he;var Nt=ge(z,Q),Ot=ge(z,Q,x);Nt>Se||Nt===Se&&(!X||Ot>=Pe)?(d.current.tb=!0,E=Q,he=-he,We.points=[Ae(ce,0),Ae(Ne,0)]):d.current.tb=!1}var Rt=xt(Kt),Dt=ce[1]===Ne[1];if(Rt&&ce[1]==="l"&&(rt>p.right||d.current.rl)){var Ge=z;Dt?Ge-=K-me:Ge=qe.x-ft.x-Ce;var Tt=ge(Ge,E),Yt=ge(Ge,E,x);Tt>Se||Tt===Se&&(!X||Yt>=Pe)?(d.current.rl=!0,z=Ge,Ce=-Ce,We.points=[Ae(ce,1),Ae(Ne,1)]):d.current.rl=!1}if(Rt&&ce[1]==="r"&&(Be<p.left||d.current.lr)){var Ke=z;Dt?Ke+=K-me:Ke=vt.x-ct.x-Ce;var It=ge(Ke,E),nt=ge(Ke,E,x);It>Se||It===Se&&(!X||nt>=Pe)?(d.current.lr=!0,z=Ke,Ce=-Ce,We.points=[Ae(ce,1),Ae(Ne,1)]):d.current.lr=!1}Vt();var Re=tt===!0?0:tt;typeof Re=="number"&&(Be<x.left&&(z-=Be-x.left-Ce,b.x+me<x.left+Re&&(z+=b.x-x.left+me-Re)),rt>x.right&&(z-=rt-x.right-Ce,b.x>x.right-Re&&(z+=b.x-x.right+Re)));var Ze=dt===!0?0:dt;typeof Ze=="number"&&(Ve<x.top&&(E-=Ve-x.top-he,b.y+Z<x.top+Ze&&(E+=b.y-x.top+Z-Ze)),He>x.bottom&&(E-=He-x.bottom-he,b.y>x.bottom-Ze&&(E+=b.y-x.bottom+Ze)));var at=R.x+z,ot=at+K,De=R.y+E,$t=De+T,Oe=b.x,Fe=Oe+me,Lt=b.y,Xt=Lt+Z,pt=Math.max(at,Oe),_t=Math.min(ot,Fe),er=(pt+_t)/2,tr=er-at,rr=Math.max(De,Lt),zt=Math.min($t,Xt),nr=(rr+zt)/2,ar=nr-De;l==null||l(r,We);var Wt=Xe.right-R.x-(z+R.width),or=Xe.bottom-R.y-(E+R.height);h({ready:!0,offsetX:z/xe,offsetY:E/ne,offsetR:Wt/xe,offsetB:or/ne,arrowX:tr/xe,arrowY:ar/ne,scaleX:xe,scaleY:ne,align:We})}}),M=function(){u.current+=1;var S=u.current;Promise.resolve().then(function(){u.current===S&&w()})},k=function(){h(function(S){return H(H({},S),{},{ready:!1})})};return U(k,[o]),U(function(){e||k()},[e]),[v.ready,v.offsetX,v.offsetY,v.offsetR,v.offsetB,v.arrowX,v.arrowY,v.scaleX,v.scaleY,v.align,M]}function ln(e,r,t,o,a){U(function(){if(e&&r&&t){let u=function(){o(),a()};var i=r,l=t,s=dr(i),m=dr(l),v=bt(l),h=new Set([v].concat(Ut(s),Ut(m)));return h.forEach(function(y){y.addEventListener("scroll",u,{passive:!0})}),v.addEventListener("resize",u,{passive:!0}),o(),function(){h.forEach(function(y){y.removeEventListener("scroll",u),v.removeEventListener("resize",u)})}}},[e,r,t])}function un(e,r,t,o,a,i,l,s){var m=n.useRef(e),v=n.useRef(!1);m.current!==e&&(v.current=!0,m.current=e),n.useEffect(function(){var h=gr(function(){v.current=!1});return function(){gr.cancel(h)}},[e]),n.useEffect(function(){if(r&&o&&(!a||i)){var h=function(){var J=!1,G=function(j){var q=j.target;J=l(q)},O=function(j){var q=j.target;!v.current&&m.current&&!J&&!l(q)&&s(!1)};return[G,O]},u=h(),y=P(u,2),d=y[0],g=y[1],w=h(),M=P(w,2),k=M[0],N=M[1],S=bt(o);S.addEventListener("mousedown",d,!0),S.addEventListener("click",g,!0),S.addEventListener("contextmenu",g,!0);var f=fr(t);return f&&(f.addEventListener("mousedown",k,!0),f.addEventListener("click",N,!0),f.addEventListener("contextmenu",N,!0)),function(){S.removeEventListener("mousedown",d,!0),S.removeEventListener("click",g,!0),S.removeEventListener("contextmenu",g,!0),f&&(f.removeEventListener("mousedown",k,!0),f.removeEventListener("click",N,!0),f.removeEventListener("contextmenu",N,!0))}}},[r,t,o,a,i])}var sn=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function cn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qt,r=n.forwardRef(function(t,o){var a=t.prefixCls,i=a===void 0?"rc-trigger-popup":a,l=t.children,s=t.action,m=s===void 0?"hover":s,v=t.showAction,h=t.hideAction,u=t.popupVisible,y=t.defaultPopupVisible,d=t.onPopupVisibleChange,g=t.afterPopupVisibleChange,w=t.mouseEnterDelay,M=t.mouseLeaveDelay,k=M===void 0?.1:M,N=t.focusDelay,S=t.blurDelay,f=t.mask,D=t.maskClosable,J=D===void 0?!0:D,G=t.getPopupContainer,O=t.forceRender,ie=t.autoDestroy,j=t.destroyPopupOnHide,q=t.popup,ye=t.popupClassName,ve=t.popupStyle,W=t.popupPlacement,fe=t.builtinPlacements,L=fe===void 0?{}:fe,_=t.popupAlign,b=t.zIndex,te=t.stretch,R=t.getPopupClassNameFromAlign,B=t.fresh,le=t.alignPoint,Ue=t.onPopupClick,$e=t.onPopupAlign,de=t.arrow,Le=t.popupMotion,Y=t.maskMotion,T=t.popupTransitionName,K=t.popupAnimation,Z=t.maskTransitionName,me=t.maskAnimation,_e=t.className,je=t.getTriggerDOMNode,F=Tr(t,sn),ke=ie||j||!1,ue=n.useState(!1),X=P(ue,2),re=X[0],x=X[1];U(function(){x(qr())},[]);var be=n.useRef({}),p=n.useContext(Sr),Xe=n.useMemo(function(){return{registerSubPopup:function(C,I){be.current[C]=I,p==null||p.registerSubPopup(C,I)}}},[p]),xe=Lr(),ne=n.useState(null),pe=P(ne,2),V=pe[0],ee=pe[1],Mt=Ie(function(c){vr(c)&&V!==c&&ee(c),p==null||p.registerSubPopup(xe,c)}),Ce=n.useState(null),he=P(Ce,2),Me=he[0],St=he[1],Pt=n.useRef(null),Jt=Ie(function(c){vr(c)&&Me!==c&&(St(c),Pt.current=c)}),et=n.Children.only(l),se=(et==null?void 0:et.props)||{},ze={},Gt=Ie(function(c){var C,I,A=Me;return(A==null?void 0:A.contains(c))||((C=fr(A))===null||C===void 0?void 0:C.host)===c||c===A||(V==null?void 0:V.contains(c))||((I=fr(V))===null||I===void 0?void 0:I.host)===c||c===V||Object.values(be.current).some(function($){return($==null?void 0:$.contains(c))||c===$})}),Ne=Er(i,Le,K,T),ce=Er(i,Y,me,Z),Et=n.useState(y||!1),st=P(Et,2),We=st[0],z=st[1],E=u??We,Se=Ie(function(c){u===void 0&&z(c)});U(function(){z(u||!1)},[u]);var Pe=n.useRef(E);Pe.current=E;var qe=n.useRef([]);qe.current=[];var ct=Ie(function(c){var C;Se(c),((C=qe.current[qe.current.length-1])!==null&&C!==void 0?C:E)!==c&&(qe.current.push(c),d==null||d(c))}),vt=n.useRef(),ft=function(){clearTimeout(vt.current)},ae=function(C){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ft(),I===0?ct(C):vt.current=setTimeout(function(){ct(C)},I*1e3)};n.useEffect(function(){return ft},[]);var Kt=n.useState(!1),kt=P(Kt,2),tt=kt[0],dt=kt[1];U(function(c){(!c||E)&&dt(!0)},[E]);var xt=n.useState(null),Ve=P(xt,2),He=Ve[0],Be=Ve[1],rt=n.useState([0,0]),mt=P(rt,2),ht=mt[0],Qe=mt[1],Je=function(C){Qe([C.clientX,C.clientY])},Zt=on(E,V,le?ht:Me,W,L,_,$e),Q=P(Zt,11),Nt=Q[0],Ot=Q[1],Rt=Q[2],Dt=Q[3],Ge=Q[4],Tt=Q[5],Yt=Q[6],Ke=Q[7],It=Q[8],nt=Q[9],Re=Q[10],Ze=rn(re,m,v,h),at=P(Ze,2),ot=at[0],De=at[1],$t=ot.has("click"),Oe=De.has("click")||De.has("contextMenu"),Fe=Ie(function(){tt||Re()}),Lt=function(){Pe.current&&le&&Oe&&ae(!1)};ln(E,Me,V,Fe,Lt),U(function(){Fe()},[ht,W]),U(function(){E&&!(L!=null&&L[W])&&Fe()},[JSON.stringify(_)]);var Xt=n.useMemo(function(){var c=an(L,i,nt,le);return Ee(c,R==null?void 0:R(nt))},[nt,R,L,i,le]);n.useImperativeHandle(o,function(){return{nativeElement:Pt.current,forceAlign:Fe}});var pt=n.useState(0),_t=P(pt,2),er=_t[0],tr=_t[1],rr=n.useState(0),zt=P(rr,2),nr=zt[0],ar=zt[1],Wt=function(){if(te&&Me){var C=Me.getBoundingClientRect();tr(C.width),ar(C.height)}},or=function(){Wt(),Fe()},ge=function(C){dt(!1),Re(),g==null||g(C)},Vt=function(){return new Promise(function(C){Wt(),Be(function(){return C})})};U(function(){He&&(Re(),He(),Be(null))},[He]);function Te(c,C,I,A){ze[c]=function($){var Bt;A==null||A($),ae(C,I);for(var cr=arguments.length,mr=new Array(cr>1?cr-1:0),Ft=1;Ft<cr;Ft++)mr[Ft-1]=arguments[Ft];(Bt=se[c])===null||Bt===void 0||Bt.call.apply(Bt,[se,$].concat(mr))}}($t||Oe)&&(ze.onClick=function(c){var C;Pe.current&&Oe?ae(!1):!Pe.current&&$t&&(Je(c),ae(!0));for(var I=arguments.length,A=new Array(I>1?I-1:0),$=1;$<I;$++)A[$-1]=arguments[$];(C=se.onClick)===null||C===void 0||C.call.apply(C,[se,c].concat(A))}),un(E,Oe,Me,V,f,J,Gt,ae);var Ye=ot.has("hover"),it=De.has("hover"),lt,gt;Ye&&(Te("onMouseEnter",!0,w,function(c){Je(c)}),Te("onPointerEnter",!0,w,function(c){Je(c)}),lt=function(){(E||tt)&&ae(!0,w)},le&&(ze.onMouseMove=function(c){var C;(C=se.onMouseMove)===null||C===void 0||C.call(se,c)})),it&&(Te("onMouseLeave",!1,k),Te("onPointerLeave",!1,k),gt=function(){ae(!1,k)}),ot.has("focus")&&Te("onFocus",!0,N),De.has("focus")&&Te("onBlur",!1,S),ot.has("contextMenu")&&(ze.onContextMenu=function(c){var C;Pe.current&&De.has("contextMenu")?ae(!1):(Je(c),ae(!0)),c.preventDefault();for(var I=arguments.length,A=new Array(I>1?I-1:0),$=1;$<I;$++)A[$-1]=arguments[$];(C=se.onContextMenu)===null||C===void 0||C.call.apply(C,[se,c].concat(A))}),_e&&(ze.className=Ee(se.className,_e));var yt=H(H({},se),ze),Ht={},ir=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ir.forEach(function(c){F[c]&&(Ht[c]=function(){for(var C,I=arguments.length,A=new Array(I),$=0;$<I;$++)A[$]=arguments[$];(C=yt[c])===null||C===void 0||C.call.apply(C,[yt].concat(A)),F[c].apply(F,A)})});var lr=n.cloneElement(et,H(H({},yt),Ht)),ur={x:Tt,y:Yt},sr=de?H({},de!==!0?de:{}):null;return n.createElement(n.Fragment,null,n.createElement(zr,{disabled:!E,ref:Jt,onResize:or},n.createElement(tn,{getTriggerDOMNode:je},lr)),n.createElement(Sr.Provider,{value:Xe},n.createElement(en,{portal:e,ref:Mt,prefixCls:i,popup:q,className:Ee(ye,Xt),style:ve,target:Me,onMouseEnter:lt,onMouseLeave:gt,onPointerEnter:lt,zIndex:b,open:E,keepDom:tt,fresh:B,onClick:Ue,mask:f,motion:Ne,maskMotion:ce,onVisibleChanged:ge,onPrepare:Vt,forceRender:O,autoDestroy:ke,getPopupContainer:G,align:nt,arrow:sr,arrowPos:ur,ready:Nt,offsetX:Ot,offsetY:Rt,offsetR:Dt,offsetB:Ge,onAlign:Fe,stretch:te,targetWidth:er/Ke,targetHeight:nr/It})))});return r}const vn=cn(Qt);function Dn(e){var r=n.createContext(void 0),t=function(a){var i=a.value,l=a.children,s=n.useRef(i);s.current=i;var m=n.useState(function(){return{getValue:function(){return s.current},listeners:new Set}}),v=P(m,1),h=v[0];return U(function(){_r.unstable_batchedUpdates(function(){h.listeners.forEach(function(u){u(i)})})},[i]),n.createElement(r.Provider,{value:h},l)};return{Context:r,Provider:t,defaultValue:e}}function Tn(e,r){var t=Ie(typeof r=="function"?r:function(u){if(r===void 0)return u;if(!Array.isArray(r))return u[r];var y={};return r.forEach(function(d){y[d]=u[d]}),y}),o=n.useContext(e==null?void 0:e.Context),a=o||{},i=a.listeners,l=a.getValue,s=n.useRef();s.current=t(o?l():e==null?void 0:e.defaultValue);var m=n.useState({}),v=P(m,2),h=v[1];return U(function(){if(!o)return;function u(y){var d=t(y);Qr(s.current,d,!0)||h({})}return i.add(u),function(){i.delete(u)}},[o]),s.current}function In(){var e=n.createContext(null);function r(){return n.useContext(e)}function t(a,i){var l=qt(a),s=function(v,h){var u=l?{ref:h}:{},y=n.useRef(0),d=n.useRef(v),g=r();return g!==null?n.createElement(a,we({},v,u)):((!i||i(d.current,v))&&(y.current+=1),d.current=v,n.createElement(e.Provider,{value:y.current},n.createElement(a,we({},v,u))))};return l?n.forwardRef(s):s}function o(a,i){var l=qt(a),s=function(v,h){var u=l?{ref:h}:{};return r(),n.createElement(a,we({},v,u))};return l?n.memo(n.forwardRef(s),i):n.memo(s,i)}return{makeImmutable:t,responseImmutable:o,useImmutableMark:r}}function fn(e){var r=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,o=e.getBoundingClientRect(),a=o.top,i=o.right,l=o.bottom,s=o.left;return a>=0&&s>=0&&i<=r&&l<=t}function dn(e,r,t){var o;return(o=t??r)!==null&&o!==void 0?o:e===null?"center":"bottom"}function mn(e,r,t,o){var a=n.useState(void 0),i=P(a,2),l=i[0],s=i[1];U(function(){var w=typeof e=="function"?e():e;s(w||null)});var m=n.useState(null),v=P(m,2),h=v[0],u=v[1],y=Ie(function(){if(l){!fn(l)&&r&&l.scrollIntoView(o);var w=l.getBoundingClientRect(),M=w.left,k=w.top,N=w.width,S=w.height,f={left:M,top:k,width:N,height:S,radius:0};u(function(D){return JSON.stringify(D)!==JSON.stringify(f)?f:D})}else u(null)}),d=function(M){var k;return(k=Array.isArray(t==null?void 0:t.offset)?t==null?void 0:t.offset[M]:t==null?void 0:t.offset)!==null&&k!==void 0?k:6};U(function(){return y(),window.addEventListener("resize",y),function(){window.removeEventListener("resize",y)}},[l,r,y]);var g=n.useMemo(function(){if(!h)return h;var w=d(0),M=d(1),k=(t==null?void 0:t.radius)||2;return{left:h.left-w,top:h.top-M,width:h.width+w*2,height:h.height+M*2,radius:k}},[h,t]);return[g,l]}var At={fill:"transparent",pointerEvents:"auto"},hn=function(r){var t=r.prefixCls,o=r.rootClassName,a=r.pos,i=r.showMask,l=r.style,s=l===void 0?{}:l,m=r.fill,v=m===void 0?"rgba(0,0,0,0.5)":m,h=r.open,u=r.animated,y=r.zIndex,d=Lr(),g="".concat(t,"-mask-").concat(d),w=Ir(u)==="object"?u==null?void 0:u.placeholder:u;return oe.createElement(Qt,{open:h,autoLock:!0},oe.createElement("div",{className:Ee("".concat(t,"-mask"),o),style:H({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:y,pointerEvents:"none"},s)},i?oe.createElement("svg",{style:{width:"100%",height:"100%"}},oe.createElement("defs",null,oe.createElement("mask",{id:g},oe.createElement("rect",{x:"0",y:"0",width:"100vw",height:"100vh",fill:"white"}),a&&oe.createElement("rect",{x:a.left,y:a.top,rx:a.radius,width:a.width,height:a.height,fill:"black",className:w?"".concat(t,"-placeholder-animated"):""}))),oe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:v,mask:"url(#".concat(g,")")}),a&&oe.createElement(oe.Fragment,null,oe.createElement("rect",we({},At,{x:"0",y:"0",width:"100%",height:a.top})),oe.createElement("rect",we({},At,{x:"0",y:"0",width:a.left,height:"100%"})),oe.createElement("rect",we({},At,{x:"0",y:a.top+a.height,width:"100%",height:"calc(100vh - ".concat(a.top+a.height,"px)")})),oe.createElement("rect",we({},At,{x:a.left+a.width,y:"0",width:"calc(100vw - ".concat(a.left+a.width,"px)"),height:"100%"})))):null))},gn=[0,0],Dr={left:{points:["cr","cl"],offset:[-8,0]},right:{points:["cl","cr"],offset:[8,0]},top:{points:["bc","tc"],offset:[0,-8]},bottom:{points:["tc","bc"],offset:[0,8]},topLeft:{points:["bl","tl"],offset:[0,-8]},leftTop:{points:["tr","tl"],offset:[-8,0]},topRight:{points:["br","tr"],offset:[0,-8]},rightTop:{points:["tl","tr"],offset:[8,0]},bottomRight:{points:["tr","br"],offset:[0,8]},rightBottom:{points:["bl","br"],offset:[8,0]},bottomLeft:{points:["tl","bl"],offset:[0,8]},leftBottom:{points:["br","bl"],offset:[-8,0]}};function Hr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r={};return Object.keys(Dr).forEach(function(t){r[t]=H(H({},Dr[t]),{},{autoArrow:e,targetOffset:gn})}),r}Hr();function yn(e){var r=e.prefixCls,t=e.current,o=e.total,a=e.title,i=e.description,l=e.onClose,s=e.onPrev,m=e.onNext,v=e.onFinish,h=e.className,u=e.closeIcon,y=u!==!1&&u!==null,d=u!==void 0&&u!==!0?u:n.createElement("span",{className:"".concat(r,"-close-x")},"Ã—");return n.createElement("div",{className:Ee("".concat(r,"-content"),h)},n.createElement("div",{className:"".concat(r,"-inner")},y&&n.createElement("button",{type:"button",onClick:l,"aria-label":"Close",className:"".concat(r,"-close")},d),n.createElement("div",{className:"".concat(r,"-header")},n.createElement("div",{className:"".concat(r,"-title")},a)),n.createElement("div",{className:"".concat(r,"-description")},i),n.createElement("div",{className:"".concat(r,"-footer")},n.createElement("div",{className:"".concat(r,"-sliders")},o>1?Ut(Array.from({length:o}).keys()).map(function(g,w){return n.createElement("span",{key:g,className:w===t?"active":""})}):null),n.createElement("div",{className:"".concat(r,"-buttons")},t!==0?n.createElement("button",{className:"".concat(r,"-prev-btn"),onClick:s},"Prev"):null,t===o-1?n.createElement("button",{className:"".concat(r,"-finish-btn"),onClick:v},"Finish"):n.createElement("button",{className:"".concat(r,"-next-btn"),onClick:m},"Next")))))}var Cn=function(r){var t=r.current,o=r.renderPanel;return n.createElement(n.Fragment,null,typeof o=="function"?o(r,t):n.createElement(yn,r))},wn=["prefixCls","steps","defaultCurrent","current","onChange","onClose","onFinish","open","mask","arrow","rootClassName","placement","renderPanel","gap","animated","scrollIntoViewOptions","zIndex","closeIcon"],bn={left:"50%",top:"50%",width:1,height:1},$n=function(r){var t=r.prefixCls,o=t===void 0?"rc-tour":t,a=r.steps,i=a===void 0?[]:a,l=r.defaultCurrent,s=r.current,m=r.onChange,v=r.onClose,h=r.onFinish,u=r.open,y=r.mask,d=y===void 0?!0:y,g=r.arrow,w=g===void 0?!0:g,M=r.rootClassName,k=r.placement,N=r.renderPanel,S=r.gap,f=r.animated,D=r.scrollIntoViewOptions,J=D===void 0?!0:D,G=r.zIndex,O=G===void 0?1001:G,ie=r.closeIcon,j=Tr(r,wn),q=n.useRef(),ye=yr(0,{value:s,defaultValue:l}),ve=P(ye,2),W=ve[0],fe=ve[1],L=yr(void 0,{value:u,postState:function(ee){return W<0||W>=i.length?!1:ee??!0}}),_=P(L,2),b=_[0],te=_[1],R=n.useRef(b);U(function(){b&&!R.current&&fe(0),R.current=b},[b]);var B=i[W]||{},le=B.target,Ue=B.placement,$e=B.style,de=B.arrow,Le=B.className,Y=B.mask,T=B.scrollIntoViewOptions,K=B.closeIcon,Z=b&&(Y??d),me=K??ie,_e=T??J,je=mn(le,u,S,_e),F=P(je,2),ke=F[0],ue=F[1],X=dn(ue,k,Ue),re=ue?typeof de>"u"?w:de:!1,x=Ir(re)==="object"?re.pointAtCenter:!1;U(function(){var V;(V=q.current)===null||V===void 0||V.forceAlign()},[x,W]);var be=function(ee){fe(ee),m==null||m(ee)};if(ue===void 0)return null;var p=function(){te(!1),v==null||v(W)},Xe=function(){return n.createElement(Cn,we({arrow:re,key:"content",prefixCls:o,total:i.length,renderPanel:N,onPrev:function(){be(W-1)},onNext:function(){be(W+1)},onClose:p,current:W,onFinish:function(){p(),h==null||h()},closeIcon:me},i[W]))},xe=typeof Z=="boolean"?Z:!!Z,ne=typeof Z=="boolean"?void 0:Z,pe=function(ee){return ee||ue||document.body};return n.createElement(n.Fragment,null,n.createElement(hn,{zIndex:O,prefixCls:o,pos:ke,showMask:xe,style:ne==null?void 0:ne.style,fill:ne==null?void 0:ne.color,open:b,animated:f,rootClassName:M}),n.createElement(vn,we({builtinPlacements:Hr(x)},j,{ref:q,popupStyle:$e,popupPlacement:X,popupVisible:b,popupClassName:Ee(M,Le),prefixCls:o,popup:Xe,forceRender:!1,destroyPopupOnHide:!0,zIndex:O,getTriggerDOMNode:pe,arrow:!!re}),n.createElement(Qt,{open:b,autoLock:!0},n.createElement("div",{className:Ee(M,"".concat(o,"-target-placeholder")),style:H(H({},ke||bn),{},{position:"fixed",pointerEvents:"none"})}))))};export{Qt as P,$n as T,vn as a,Dn as b,In as c,Tn as u};
