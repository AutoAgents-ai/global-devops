import{a as b,r as x}from"./react.4ec6b4a2.js";import"./d3-transition.42ff895a.js";import{z as Oo,i as Fe}from"./d3-zoom.f9fb7460.js";import{c as ue}from"./classcat.fbd937ed.js";import{u as Ho}from"./use-sync-external-store.adb9b08a.js";import{r as Bo}from"./react-dom.963eef6b.js";import{s as mn,p as Lo}from"./d3-selection.a6bf8644.js";import{d as Vo}from"./d3-drag.0d22c9fb.js";const Yt=e=>{let t;const n=new Set,o=(l,u)=>{const a=typeof l=="function"?l(t):l;if(!Object.is(a,t)){const d=t;t=u??(typeof a!="object"||a===null)?a:Object.assign({},t,a),n.forEach(p=>p(t,d))}},s=()=>t,c={setState:o,getState:s,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{n.clear()}};return t=e(o,s,c),c},Fo=e=>e?Yt(e):Yt,{useDebugValue:Yo}=b,{useSyncExternalStoreWithSelector:Wo}=Ho;function hn(e,t=e.getState,n){const o=Wo(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return Yo(o),o}const Wt=(e,t)=>{const n=Fo(e),o=(s,i=t)=>hn(n,s,i);return Object.assign(o,n),o},Xo=(e,t)=>e?Wt(e,t):Wt;function ie(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Object.is(e[n[o]],t[n[o]]))return!1;return!0}const ut=x.createContext(null),Zo=ut.Provider,he={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},yn=he.error001();function G(e,t){const n=x.useContext(ut);if(n===null)throw new Error(yn);return hn(n,e,t)}const ne=()=>{const e=x.useContext(ut);if(e===null)throw new Error(yn);return x.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Ko=e=>e.userSelectionActive?"none":"all";function Uo({position:e,children:t,className:n,style:o,...s}){const i=G(Ko),r=`${e}`.split("-");return b.createElement("div",{className:ue(["react-flow__panel",n,...r]),style:{...o,pointerEvents:i},...s},t)}function Go({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:b.createElement(Uo,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},b.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const qo=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:r=[2,4],labelBgBorderRadius:c=2,children:l,className:u,...a})=>{const d=x.useRef(null),[p,f]=x.useState({x:0,y:0,width:0,height:0}),E=ue(["react-flow__edge-textwrapper",u]);return x.useEffect(()=>{if(d.current){const g=d.current.getBBox();f({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:b.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:E,visibility:p.width?"visible":"hidden",...a},s&&b.createElement("rect",{width:p.width+2*r[0],x:-r[0],y:-r[1],height:p.height+2*r[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),b.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:d,style:o},n),l)};var Qo=x.memo(qo);const vt=e=>({width:e.offsetWidth,height:e.offsetHeight}),Xe=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$t=(e={x:0,y:0},t)=>({x:Xe(e.x,t[0][0],t[1][0]),y:Xe(e.y,t[0][1],t[1][1])}),Xt=(e,t,n)=>e<t?Xe(Math.abs(e-t),1,50)/50:e>n?-Xe(Math.abs(e-n),1,50)/50:0,xn=(e,t)=>{const n=Xt(e.x,35,t.width-35)*20,o=Xt(e.y,35,t.height-35)*20;return[n,o]},Sn=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Jo=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Dt=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),jo=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Zt=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Et=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},es=e=>le(e.width)&&le(e.height)&&le(e.x)&&le(e.y),le=e=>!isNaN(e)&&isFinite(e),ee=Symbol.for("internals"),En=["Enter"," ","Escape"],ts=(e,t)=>{},ns=e=>"nativeEvent"in e;function wt(e){var s,i;const t=ns(e)?e.nativeEvent:e,n=((i=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const wn=e=>"clientX"in e,be=(e,t)=>{var i,r;const n=wn(e),o=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(r=e.touches)==null?void 0:r[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},it=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},tt=({id:e,path:t,labelX:n,labelY:o,label:s,labelStyle:i,labelShowBg:r,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:u,style:a,markerEnd:d,markerStart:p,interactionWidth:f=20})=>b.createElement(b.Fragment,null,b.createElement("path",{id:e,style:a,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:p}),f&&b.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),s&&le(n)&&le(o)?b.createElement(Qo,{x:n,y:o,label:s,labelStyle:i,labelShowBg:r,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:u}):null);tt.displayName="BaseEdge";function qe(e,t,n){return n===void 0?n:o=>{const s=t().edges.find(i=>i.id===e);s&&n(o,{...s})}}function bn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,r=Math.abs(o-t)/2,c=o<t?o+r:o-r;return[i,c,s,r]}function Nn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:s,sourceControlY:i,targetControlX:r,targetControlY:c}){const l=e*.125+s*.375+r*.375+n*.125,u=t*.125+i*.375+c*.375+o*.125,a=Math.abs(l-e),d=Math.abs(u-t);return[l,u,a,d]}var Te;(function(e){e.Strict="strict",e.Loose="loose"})(Te||(Te={}));var Re;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Re||(Re={}));var je;(function(e){e.Partial="partial",e.Full="full"})(je||(je={}));var we;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(we||(we={}));var ct;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ct||(ct={}));var O;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(O||(O={}));function Kt({pos:e,x1:t,y1:n,x2:o,y2:s}){return e===O.Left||e===O.Right?[.5*(t+o),n]:[t,.5*(n+s)]}function Cn({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:o,targetY:s,targetPosition:i=O.Top}){const[r,c]=Kt({pos:n,x1:e,y1:t,x2:o,y2:s}),[l,u]=Kt({pos:i,x1:o,y1:s,x2:e,y2:t}),[a,d,p,f]=Nn({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:r,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${r},${c} ${l},${u} ${o},${s}`,a,d,p,f]}const kt=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:s=O.Bottom,targetPosition:i=O.Top,label:r,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:a,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:E,interactionWidth:g})=>{const[m,h,y]=Cn({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:o,targetPosition:i});return b.createElement(tt,{path:m,labelX:h,labelY:y,label:r,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:a,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:E,interactionWidth:g})});kt.displayName="SimpleBezierEdge";const Ut={[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}},os=({source:e,sourcePosition:t=O.Bottom,target:n})=>t===O.Left||t===O.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Gt=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ss({source:e,sourcePosition:t=O.Bottom,target:n,targetPosition:o=O.Top,center:s,offset:i}){const r=Ut[t],c=Ut[o],l={x:e.x+r.x*i,y:e.y+r.y*i},u={x:n.x+c.x*i,y:n.y+c.y*i},a=os({source:l,sourcePosition:t,target:u}),d=a.x!==0?"x":"y",p=a[d];let f=[],E,g;const m={x:0,y:0},h={x:0,y:0},[y,N,M,R]=bn({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*c[d]===-1){E=s.x||y,g=s.y||N;const T=[{x:E,y:l.y},{x:E,y:u.y}],A=[{x:l.x,y:g},{x:u.x,y:g}];r[d]===p?f=d==="x"?T:A:f=d==="x"?A:T}else{const T=[{x:l.x,y:u.y}],A=[{x:u.x,y:l.y}];if(d==="x"?f=r.x===p?A:T:f=r.y===p?T:A,t===o){const S=Math.abs(e[d]-n[d]);if(S<=i){const $=Math.min(i-1,i-S);r[d]===p?m[d]=(l[d]>e[d]?-1:1)*$:h[d]=(u[d]>n[d]?-1:1)*$}}if(t!==o){const S=d==="x"?"y":"x",$=r[d]===c[S],D=l[S]>u[S],B=l[S]<u[S];(r[d]===1&&(!$&&D||$&&B)||r[d]!==1&&(!$&&B||$&&D))&&(f=d==="x"?T:A)}const C={x:l.x+m.x,y:l.y+m.y},z={x:u.x+h.x,y:u.y+h.y},k=Math.max(Math.abs(C.x-f[0].x),Math.abs(z.x-f[0].x)),I=Math.max(Math.abs(C.y-f[0].y),Math.abs(z.y-f[0].y));k>=I?(E=(C.x+z.x)/2,g=f[0].y):(E=f[0].x,g=(C.y+z.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...f,{x:u.x+h.x,y:u.y+h.y},n],E,g,M,R]}function rs(e,t,n,o){const s=Math.min(Gt(e,t)/2,Gt(t,n)/2,o),{x:i,y:r}=t;if(e.x===i&&i===n.x||e.y===r&&r===n.y)return`L${i} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,a=e.y<n.y?1:-1;return`L ${i+s*u},${r}Q ${i},${r} ${i},${r+s*a}`}const c=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${r+s*l}Q ${i},${r} ${i+s*c},${r}`}function bt({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:o,targetY:s,targetPosition:i=O.Top,borderRadius:r=5,centerX:c,centerY:l,offset:u=20}){const[a,d,p,f,E]=ss({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:s},targetPosition:i,center:{x:c,y:l},offset:u});return[a.reduce((m,h,y)=>{let N="";return y>0&&y<a.length-1?N=rs(a[y-1],h,a[y+1],r):N=`${y===0?"M":"L"}${h.x} ${h.y}`,m+=N,m},""),d,p,f,E]}const dt=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:s,labelStyle:i,labelShowBg:r,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:u,style:a,sourcePosition:d=O.Bottom,targetPosition:p=O.Top,markerEnd:f,markerStart:E,pathOptions:g,interactionWidth:m})=>{const[h,y,N]=bt({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:o,targetPosition:p,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return b.createElement(tt,{path:h,labelX:y,labelY:N,label:s,labelStyle:i,labelShowBg:r,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:u,style:a,markerEnd:f,markerStart:E,interactionWidth:m})});dt.displayName="SmoothStepEdge";const Rt=x.memo(e=>{var t;return b.createElement(dt,{...e,pathOptions:x.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Rt.displayName="StepEdge";function is({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[s,i,r,c]=bn({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,s,i,r,c]}const Tt=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:s,labelStyle:i,labelShowBg:r,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:u,style:a,markerEnd:d,markerStart:p,interactionWidth:f})=>{const[E,g,m]=is({sourceX:e,sourceY:t,targetX:n,targetY:o});return b.createElement(tt,{path:E,labelX:g,labelY:m,label:s,labelStyle:i,labelShowBg:r,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:u,style:a,markerEnd:d,markerStart:p,interactionWidth:f})});Tt.displayName="StraightEdge";function nt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function qt({pos:e,x1:t,y1:n,x2:o,y2:s,c:i}){switch(e){case O.Left:return[t-nt(t-o,i),n];case O.Right:return[t+nt(o-t,i),n];case O.Top:return[t,n-nt(n-s,i)];case O.Bottom:return[t,n+nt(s-n,i)]}}function Mn({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:o,targetY:s,targetPosition:i=O.Top,curvature:r=.25}){const[c,l]=qt({pos:n,x1:e,y1:t,x2:o,y2:s,c:r}),[u,a]=qt({pos:i,x1:o,y1:s,x2:e,y2:t,c:r}),[d,p,f,E]=Nn({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:c,sourceControlY:l,targetControlX:u,targetControlY:a});return[`M${e},${t} C${c},${l} ${u},${a} ${o},${s}`,d,p,f,E]}const at=x.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:s=O.Bottom,targetPosition:i=O.Top,label:r,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:a,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:E,pathOptions:g,interactionWidth:m})=>{const[h,y,N]=Mn({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:o,targetPosition:i,curvature:g==null?void 0:g.curvature});return b.createElement(tt,{path:h,labelX:y,labelY:N,label:r,labelStyle:c,labelShowBg:l,labelBgStyle:u,labelBgPadding:a,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:E,interactionWidth:m})});at.displayName="BezierEdge";const It=x.createContext(null),cs=It.Provider;It.Consumer;const as=()=>x.useContext(It),ls=e=>"id"in e&&"source"in e&&"target"in e,us=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,Nt=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,ds=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),fs=(e,t)=>{if(!e.source||!e.target)return t;let n;return ls(e)?n={...e}:n={...e,id:us(e)},ds(n,t)?t:t.concat(n)},Ct=({x:e,y:t},[n,o,s],i,[r,c])=>{const l={x:(e-n)/s,y:(t-o)/s};return i?{x:r*Math.round(l.x/r),y:c*Math.round(l.y/c)}:l},An=({x:e,y:t},[n,o,s])=>({x:e*s+n,y:t*s+o}),Ye=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:s}},_t=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,s)=>{const{x:i,y:r}=Ye(s,t).positionAbsolute;return Jo(o,Dt({x:i,y:r,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jo(n)},Pn=(e,t,[n,o,s]=[0,0,1],i=!1,r=!1,c=[0,0])=>{const l={x:(t.x-n)/s,y:(t.y-o)/s,width:t.width/s,height:t.height/s},u=[];return e.forEach(a=>{const{width:d,height:p,selectable:f=!0,hidden:E=!1}=a;if(r&&!f||E)return!1;const{positionAbsolute:g}=Ye(a,c),m={x:g.x,y:g.y,width:d||0,height:p||0},h=Et(l,m),y=typeof d>"u"||typeof p>"u"||d===null||p===null,N=i&&h>0,M=(d||0)*(p||0);(y||N||h>=M||a.dragging)&&u.push(a)}),u},vn=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},$n=(e,t,n,o,s,i=.1)=>{const r=t/(e.width*(1+i)),c=n/(e.height*(1+i)),l=Math.min(r,c),u=Xe(l,o,s),a=e.x+e.width/2,d=e.y+e.height/2,p=t/2-a*u,f=n/2-d*u;return{x:p,y:f,zoom:u}},ke=(e,t=0)=>e.transition().duration(t);function Qt(e,t,n,o){return(t[n]||[]).reduce((s,i)=>{var r,c;return`${e.id}-${i.id}-${n}`!==o&&s.push({id:i.id||null,type:n,nodeId:e.id,x:(((r=e.positionAbsolute)==null?void 0:r.x)??0)+i.x+i.width/2,y:(((c=e.positionAbsolute)==null?void 0:c.y)??0)+i.y+i.height/2}),s},[])}function gs(e,t,n,o,s,i){const{x:r,y:c}=be(e),u=t.elementsFromPoint(r,c).find(E=>E.classList.contains("react-flow__handle"));if(u){const E=u.getAttribute("data-nodeid");if(E){const g=zt(void 0,u),m=u.getAttribute("data-handleid"),h=i({nodeId:E,id:m,type:g});if(h){const y=s.find(N=>N.nodeId===E&&N.type===g&&N.id===m);return{handle:{id:m,type:g,nodeId:E,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:h}}}}let a=[],d=1/0;if(s.forEach(E=>{const g=Math.sqrt((E.x-n.x)**2+(E.y-n.y)**2);if(g<=o){const m=i(E);g<=d&&(g<d?a=[{handle:E,validHandleResult:m}]:g===d&&a.push({handle:E,validHandleResult:m}),d=g)}}),!a.length)return{handle:null,validHandleResult:Dn()};if(a.length===1)return a[0];const p=a.some(({validHandleResult:E})=>E.isValid),f=a.some(({handle:E})=>E.type==="target");return a.find(({handle:E,validHandleResult:g})=>f?E.type==="target":p?g.isValid:!0)||a[0]}const ps={source:null,target:null,sourceHandle:null,targetHandle:null},Dn=()=>({handleDomNode:null,isValid:!1,connection:ps,endHandle:null});function kn(e,t,n,o,s,i,r){const c=s==="target",l=r.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Dn(),handleDomNode:l};if(l){const a=zt(void 0,l),d=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),f=l.classList.contains("connectable"),E=l.classList.contains("connectableend"),g={source:c?d:n,sourceHandle:c?p:o,target:c?n:d,targetHandle:c?o:p};u.connection=g,f&&E&&(t===Te.Strict?c&&a==="source"||!c&&a==="target":d!==n||p!==o)&&(u.endHandle={nodeId:d,handleId:p,type:a},u.isValid=i(g))}return u}function ms({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((s,i)=>{if(i[ee]){const{handleBounds:r}=i[ee];let c=[],l=[];r&&(c=Qt(i,r,"source",`${t}-${n}-${o}`),l=Qt(i,r,"target",`${t}-${n}-${o}`)),s.push(...c,...l)}return s},[])}function zt(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function mt(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function hs(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Rn({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:s,getState:i,setState:r,isValidConnection:c,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const a=Sn(e.target),{connectionMode:d,domNode:p,autoPanOnConnect:f,connectionRadius:E,onConnectStart:g,panBy:m,getNodes:h,cancelConnection:y}=i();let N=0,M;const{x:R,y:_}=be(e),T=a==null?void 0:a.elementFromPoint(R,_),A=zt(l,T),C=p==null?void 0:p.getBoundingClientRect();if(!C||!A)return;let z,k=be(e,C),I=!1,S=null,$=!1,D=null;const B=ms({nodes:h(),nodeId:n,handleId:t,handleType:A}),Y=()=>{if(!f)return;const[P,v]=xn(k,C);m({x:P,y:v}),N=requestAnimationFrame(Y)};r({connectionPosition:k,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:A});function H(P){const{transform:v}=i();k=be(P,C);const{handle:L,validHandleResult:V}=gs(P,a,Ct(k,v,!1,[1,1]),E,B,W=>kn(W,d,n,t,s?"target":"source",c,a));if(M=L,I||(Y(),I=!0),D=V.handleDomNode,S=V.connection,$=V.isValid,r({connectionPosition:M&&$?An({x:M.x,y:M.y},v):k,connectionStatus:hs(!!M,$),connectionEndHandle:V.endHandle}),!M&&!$&&!D)return mt(z);S.source!==S.target&&D&&(mt(z),z=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",$),D.classList.toggle("react-flow__handle-valid",$))}function w(P){var v,L;(M||D)&&S&&$&&(o==null||o(S)),(L=(v=i()).onConnectEnd)==null||L.call(v,P),l&&(u==null||u(P)),mt(z),y(),cancelAnimationFrame(N),I=!1,$=!1,S=null,D=null,a.removeEventListener("mousemove",H),a.removeEventListener("mouseup",w),a.removeEventListener("touchmove",H),a.removeEventListener("touchend",w)}a.addEventListener("mousemove",H),a.addEventListener("mouseup",w),a.addEventListener("touchmove",H),a.addEventListener("touchend",w)}const Jt=()=>!0,ys=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),xs=(e,t,n)=>o=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:r}=o;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n}},Tn=x.forwardRef(({type:e="source",position:t=O.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:r,onConnect:c,children:l,className:u,onMouseDown:a,onTouchStart:d,...p},f)=>{var C,z;const E=r||null,g=e==="target",m=ne(),h=as(),{connectOnClick:y,noPanClassName:N}=G(ys,ie),{connecting:M,clickConnecting:R}=G(xs(h,E,e),ie);h||(z=(C=m.getState()).onError)==null||z.call(C,"010",he.error010());const _=k=>{const{defaultEdgeOptions:I,onConnect:S,hasDefaultEdges:$}=m.getState(),D={...I,...k};if($){const{edges:B,setEdges:Y}=m.getState();Y(fs(D,B))}S==null||S(D),c==null||c(D)},T=k=>{if(!h)return;const I=wn(k);s&&(I&&k.button===0||!I)&&Rn({event:k,handleId:E,nodeId:h,onConnect:_,isTarget:g,getState:m.getState,setState:m.setState,isValidConnection:n||m.getState().isValidConnection||Jt}),I?a==null||a(k):d==null||d(k)},A=k=>{const{onClickConnectStart:I,onClickConnectEnd:S,connectionClickStartHandle:$,connectionMode:D,isValidConnection:B}=m.getState();if(!h||!$&&!s)return;if(!$){I==null||I(k,{nodeId:h,handleId:E,handleType:e}),m.setState({connectionClickStartHandle:{nodeId:h,type:e,handleId:E}});return}const Y=Sn(k.target),H=n||B||Jt,{connection:w,isValid:P}=kn({nodeId:h,id:E,type:e},D,$.nodeId,$.handleId||null,$.type,H,Y);P&&_(w),S==null||S(k),m.setState({connectionClickStartHandle:null})};return b.createElement("div",{"data-handleid":E,"data-nodeid":h,"data-handlepos":t,"data-id":`${h}-${E}-${e}`,className:ue(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!g,target:g,connectable:o,connectablestart:s,connectableend:i,connecting:R,connectionindicator:o&&(s&&!M||i&&M)}]),onMouseDown:T,onTouchStart:T,onClick:y?A:void 0,ref:f,...p},l)});Tn.displayName="Handle";var lt=x.memo(Tn);const In=({data:e,isConnectable:t,targetPosition:n=O.Top,sourcePosition:o=O.Bottom})=>b.createElement(b.Fragment,null,b.createElement(lt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,b.createElement(lt,{type:"source",position:o,isConnectable:t}));In.displayName="DefaultNode";var Mt=x.memo(In);const _n=({data:e,isConnectable:t,sourcePosition:n=O.Bottom})=>b.createElement(b.Fragment,null,e==null?void 0:e.label,b.createElement(lt,{type:"source",position:n,isConnectable:t}));_n.displayName="InputNode";var zn=x.memo(_n);const On=({data:e,isConnectable:t,targetPosition:n=O.Top})=>b.createElement(b.Fragment,null,b.createElement(lt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);On.displayName="OutputNode";var Hn=x.memo(On);const Ot=()=>null;Ot.displayName="GroupNode";const Ss=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),ot=e=>e.id;function Es(e,t){return ie(e.selectedNodes.map(ot),t.selectedNodes.map(ot))&&ie(e.selectedEdges.map(ot),t.selectedEdges.map(ot))}const Bn=x.memo(({onSelectionChange:e})=>{const t=ne(),{selectedNodes:n,selectedEdges:o}=G(Ss,Es);return x.useEffect(()=>{const s={nodes:n,edges:o};e==null||e(s),t.getState().onSelectionChange.forEach(i=>i(s))},[n,o,e]),null});Bn.displayName="SelectionListener";const ws=e=>!!e.onSelectionChange;function bs({onSelectionChange:e}){const t=G(ws);return e||t?b.createElement(Bn,{onSelectionChange:e}):null}const Ns=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Oe(e,t){x.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function X(e,t,n){x.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Cs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:s,onConnectStart:i,onConnectEnd:r,onClickConnectStart:c,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:a,nodesFocusable:d,edgesFocusable:p,edgesUpdatable:f,elevateNodesOnSelect:E,minZoom:g,maxZoom:m,nodeExtent:h,onNodesChange:y,onEdgesChange:N,elementsSelectable:M,connectionMode:R,snapGrid:_,snapToGrid:T,translateExtent:A,connectOnClick:C,defaultEdgeOptions:z,fitView:k,fitViewOptions:I,onNodesDelete:S,onEdgesDelete:$,onNodeDrag:D,onNodeDragStart:B,onNodeDragStop:Y,onSelectionDrag:H,onSelectionDragStart:w,onSelectionDragStop:P,noPanClassName:v,nodeOrigin:L,rfId:V,autoPanOnConnect:W,autoPanOnNodeDrag:Z,onError:q,connectionRadius:te,isValidConnection:J,nodeDragThreshold:j})=>{const{setNodes:U,setEdges:se,setDefaultNodesAndEdges:de,setMinZoom:ge,setMaxZoom:Q,setTranslateExtent:K,setNodeExtent:re,reset:ce}=G(Ns,ie),F=ne();return x.useEffect(()=>{const Ne=o==null?void 0:o.map(Ce=>({...Ce,...z}));return de(n,Ne),()=>{ce()}},[]),X("defaultEdgeOptions",z,F.setState),X("connectionMode",R,F.setState),X("onConnect",s,F.setState),X("onConnectStart",i,F.setState),X("onConnectEnd",r,F.setState),X("onClickConnectStart",c,F.setState),X("onClickConnectEnd",l,F.setState),X("nodesDraggable",u,F.setState),X("nodesConnectable",a,F.setState),X("nodesFocusable",d,F.setState),X("edgesFocusable",p,F.setState),X("edgesUpdatable",f,F.setState),X("elementsSelectable",M,F.setState),X("elevateNodesOnSelect",E,F.setState),X("snapToGrid",T,F.setState),X("snapGrid",_,F.setState),X("onNodesChange",y,F.setState),X("onEdgesChange",N,F.setState),X("connectOnClick",C,F.setState),X("fitViewOnInit",k,F.setState),X("fitViewOnInitOptions",I,F.setState),X("onNodesDelete",S,F.setState),X("onEdgesDelete",$,F.setState),X("onNodeDrag",D,F.setState),X("onNodeDragStart",B,F.setState),X("onNodeDragStop",Y,F.setState),X("onSelectionDrag",H,F.setState),X("onSelectionDragStart",w,F.setState),X("onSelectionDragStop",P,F.setState),X("noPanClassName",v,F.setState),X("nodeOrigin",L,F.setState),X("rfId",V,F.setState),X("autoPanOnConnect",W,F.setState),X("autoPanOnNodeDrag",Z,F.setState),X("onError",q,F.setState),X("connectionRadius",te,F.setState),X("isValidConnection",J,F.setState),X("nodeDragThreshold",j,F.setState),Oe(e,U),Oe(t,se),Oe(g,ge),Oe(m,Q),Oe(A,K),Oe(h,re),null},jt={display:"none"},Ms={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ln="react-flow__node-desc",Vn="react-flow__edge-desc",As="react-flow__aria-live",Ps=e=>e.ariaLiveMessage;function vs({rfId:e}){const t=G(Ps);return b.createElement("div",{id:`${As}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ms},t)}function $s({rfId:e,disableKeyboardA11y:t}){return b.createElement(b.Fragment,null,b.createElement("div",{id:`${Ln}-${e}`,style:jt},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),b.createElement("div",{id:`${Vn}-${e}`,style:jt},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&b.createElement(vs,{rfId:e}))}var et=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=x.useState(!1),s=x.useRef(!1),i=x.useRef(new Set([])),[r,c]=x.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),a=u.reduce((d,p)=>d.concat(...p),[]);return[u,a]}return[[],[]]},[e]);return x.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const a=f=>{if(s.current=f.ctrlKey||f.metaKey||f.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&wt(f))return!1;const g=tn(f.code,c);i.current.add(f[g]),en(r,i.current,!1)&&(f.preventDefault(),o(!0))},d=f=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&wt(f))return!1;const g=tn(f.code,c);en(r,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(f[g]),f.key==="Meta"&&i.current.clear(),s.current=!1},p=()=>{i.current.clear(),o(!1)};return u==null||u.addEventListener("keydown",a),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",a),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",p)}}},[e,o]),n};function en(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(s=>t.has(s)))}function tn(e,t){return t.includes(e)?"code":"key"}function Fn(e,t,n,o){var r,c;if(!e.parentNode)return n;const s=t.get(e.parentNode),i=Ye(s,o);return Fn(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((r=s[ee])==null?void 0:r.z)??0)>(n.z??0)?((c=s[ee])==null?void 0:c.z)??0:n.z??0},o)}function Yn(e,t,n){e.forEach(o=>{var s;if(o.parentNode&&!e.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||n!=null&&n[o.id]){const{x:i,y:r,z:c}=Fn(o,e,{...o.position,z:((s=o[ee])==null?void 0:s.z)??0},t);o.positionAbsolute={x:i,y:r},o[ee].z=c,n!=null&&n[o.id]&&(o[ee].isParent=!0)}})}function ht(e,t,n,o){const s=new Map,i={},r=o?1e3:0;return e.forEach(c=>{var d;const l=(le(c.zIndex)?c.zIndex:0)+(c.selected?r:0),u=t.get(c.id),a={width:u==null?void 0:u.width,height:u==null?void 0:u.height,...c,positionAbsolute:{x:c.position.x,y:c.position.y}};c.parentNode&&(a.parentNode=c.parentNode,i[c.parentNode]=!0),Object.defineProperty(a,ee,{enumerable:!1,value:{handleBounds:(d=u==null?void 0:u[ee])==null?void 0:d.handleBounds,z:l}}),s.set(c.id,a)}),Yn(s,n,i),s}function Wn(e,t={}){const{getNodes:n,width:o,height:s,minZoom:i,maxZoom:r,d3Zoom:c,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:a,nodeOrigin:d}=e(),p=t.initial&&!u&&a;if(c&&l&&(p||!t.initial)){const E=n().filter(m=>{var y;const h=t.includeHiddenNodes?m.width&&m.height:!m.hidden;return(y=t.nodes)!=null&&y.length?h&&t.nodes.some(N=>N.id===m.id):h}),g=E.every(m=>m.width&&m.height);if(E.length>0&&g){const m=_t(E,d),{x:h,y,zoom:N}=$n(m,o,s,t.minZoom??i,t.maxZoom??r,t.padding??.1),M=Fe.translate(h,y).scale(N);return typeof t.duration=="number"&&t.duration>0?c.transform(ke(l,t.duration),M):c.transform(l,M),!0}}return!1}function Ds(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[ee]:o[ee],selected:n.selected})}),new Map(t)}function ks(e,t){return t.map(n=>{const o=e.find(s=>s.id===n.id);return o&&(n.selected=o.selected),n})}function st({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:s,edges:i,onNodesChange:r,onEdgesChange:c,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&o({nodeInternals:Ds(e,s)}),r==null||r(e)),t!=null&&t.length&&(u&&o({edges:ks(t,i)}),c==null||c(t))}const He=()=>{},Rs={zoomIn:He,zoomOut:He,zoomTo:He,getZoom:()=>1,setViewport:He,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:He,fitBounds:He,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Ts=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Is=()=>{const e=ne(),{d3Zoom:t,d3Selection:n}=G(Ts,ie);return x.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(ke(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(ke(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,i)=>t.scaleTo(ke(n,i==null?void 0:i.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,i)=>{const[r,c,l]=e.getState().transform,u=Fe.translate(s.x??r,s.y??c).scale(s.zoom??l);t.transform(ke(n,i==null?void 0:i.duration),u)},getViewport:()=>{const[s,i,r]=e.getState().transform;return{x:s,y:i,zoom:r}},fitView:s=>Wn(e.getState,s),setCenter:(s,i,r)=>{const{width:c,height:l,maxZoom:u}=e.getState(),a=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:u,d=c/2-s*a,p=l/2-i*a,f=Fe.translate(d,p).scale(a);t.transform(ke(n,r==null?void 0:r.duration),f)},fitBounds:(s,i)=>{const{width:r,height:c,minZoom:l,maxZoom:u}=e.getState(),{x:a,y:d,zoom:p}=$n(s,r,c,l,u,(i==null?void 0:i.padding)??.1),f=Fe.translate(a,d).scale(p);t.transform(ke(n,i==null?void 0:i.duration),f)},project:s=>{const{transform:i,snapToGrid:r,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ct(s,i,r,c)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:r,snapGrid:c,domNode:l}=e.getState();if(!l)return s;const{x:u,y:a}=l.getBoundingClientRect(),d={x:s.x-u,y:s.y-a};return Ct(d,i,r,c)},flowToScreenPosition:s=>{const{transform:i,domNode:r}=e.getState();if(!r)return s;const{x:c,y:l}=r.getBoundingClientRect(),u=An(s,i);return{x:u.x+c,y:u.y+l}},viewportInitialized:!0}:Rs,[t,n])};function Xn(){const e=Is(),t=ne(),n=x.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),o=x.useCallback(g=>t.getState().nodeInternals.get(g),[]),s=x.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(m=>({...m}))},[]),i=x.useCallback(g=>{const{edges:m=[]}=t.getState();return m.find(h=>h.id===g)},[]),r=x.useCallback(g=>{const{getNodes:m,setNodes:h,hasDefaultNodes:y,onNodesChange:N}=t.getState(),M=m(),R=typeof g=="function"?g(M):g;if(y)h(R);else if(N){const _=R.length===0?M.map(T=>({type:"remove",id:T.id})):R.map(T=>({item:T,type:"reset"}));N(_)}},[]),c=x.useCallback(g=>{const{edges:m=[],setEdges:h,hasDefaultEdges:y,onEdgesChange:N}=t.getState(),M=typeof g=="function"?g(m):g;if(y)h(M);else if(N){const R=M.length===0?m.map(_=>({type:"remove",id:_.id})):M.map(_=>({item:_,type:"reset"}));N(R)}},[]),l=x.useCallback(g=>{const m=Array.isArray(g)?g:[g],{getNodes:h,setNodes:y,hasDefaultNodes:N,onNodesChange:M}=t.getState();if(N){const _=[...h(),...m];y(_)}else if(M){const R=m.map(_=>({item:_,type:"add"}));M(R)}},[]),u=x.useCallback(g=>{const m=Array.isArray(g)?g:[g],{edges:h=[],setEdges:y,hasDefaultEdges:N,onEdgesChange:M}=t.getState();if(N)y([...h,...m]);else if(M){const R=m.map(_=>({item:_,type:"add"}));M(R)}},[]),a=x.useCallback(()=>{const{getNodes:g,edges:m=[],transform:h}=t.getState(),[y,N,M]=h;return{nodes:g().map(R=>({...R})),edges:m.map(R=>({...R})),viewport:{x:y,y:N,zoom:M}}},[]),d=x.useCallback(({nodes:g,edges:m})=>{const{nodeInternals:h,getNodes:y,edges:N,hasDefaultNodes:M,hasDefaultEdges:R,onNodesDelete:_,onEdgesDelete:T,onNodesChange:A,onEdgesChange:C}=t.getState(),z=(g||[]).map(D=>D.id),k=(m||[]).map(D=>D.id),I=y().reduce((D,B)=>{const Y=!z.includes(B.id)&&B.parentNode&&D.find(w=>w.id===B.parentNode);return(typeof B.deletable=="boolean"?B.deletable:!0)&&(z.includes(B.id)||Y)&&D.push(B),D},[]),S=N.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),$=S.filter(D=>k.includes(D.id));if(I||$){const D=vn(I,S),B=[...$,...D],Y=B.reduce((H,w)=>(H.includes(w.id)||H.push(w.id),H),[]);if((R||M)&&(R&&t.setState({edges:N.filter(H=>!Y.includes(H.id))}),M&&(I.forEach(H=>{h.delete(H.id)}),t.setState({nodeInternals:new Map(h)}))),Y.length>0&&(T==null||T(B),C&&C(Y.map(H=>({id:H,type:"remove"})))),I.length>0&&(_==null||_(I),A)){const H=I.map(w=>({id:w.id,type:"remove"}));A(H)}}},[]),p=x.useCallback(g=>{const m=es(g),h=m?null:t.getState().nodeInternals.get(g.id);return[m?g:Zt(h),h,m]},[]),f=x.useCallback((g,m=!0,h)=>{const[y,N,M]=p(g);return y?(h||t.getState().getNodes()).filter(R=>{if(!M&&(R.id===N.id||!R.positionAbsolute))return!1;const _=Zt(R),T=Et(_,y);return m&&T>0||T>=y.width*y.height}):[]},[]),E=x.useCallback((g,m,h=!0)=>{const[y]=p(g);if(!y)return!1;const N=Et(y,m);return h&&N>0||N>=y.width*y.height},[]);return x.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:s,getEdge:i,setNodes:r,setEdges:c,addNodes:l,addEdges:u,toObject:a,deleteElements:d,getIntersectingNodes:f,isNodeIntersecting:E}),[e,n,o,s,i,r,c,l,u,a,d,f,E])}const _s={actInsideInputWithModifier:!1};var zs=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ne(),{deleteElements:o}=Xn(),s=et(e,_s),i=et(t);x.useEffect(()=>{if(s){const{edges:r,getNodes:c}=n.getState(),l=c().filter(a=>a.selected),u=r.filter(a=>a.selected);o({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),x.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Os(e){const t=ne();x.useEffect(()=>{let n;const o=()=>{var i,r;if(!e.current)return;const s=vt(e.current);(s.height===0||s.width===0)&&((r=(i=t.getState()).onError)==null||r.call(i,"004",he.error004())),t.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const Ht={position:"absolute",width:"100%",height:"100%",top:0,left:0},Hs=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,rt=e=>({x:e.x,y:e.y,zoom:e.k}),Be=(e,t)=>e.target.closest(`.${t}`),nn=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),on=e=>{const t=e.ctrlKey&&it()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Bs=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Ls=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:r=!1,panOnScrollSpeed:c=.5,panOnScrollMode:l=Re.Free,zoomOnDoubleClick:u=!0,elementsSelectable:a,panOnDrag:d=!0,defaultViewport:p,translateExtent:f,minZoom:E,maxZoom:g,zoomActivationKeyCode:m,preventScrolling:h=!0,children:y,noWheelClassName:N,noPanClassName:M})=>{const R=x.useRef(),_=ne(),T=x.useRef(!1),A=x.useRef(!1),C=x.useRef(null),z=x.useRef({x:0,y:0,zoom:0}),{d3Zoom:k,d3Selection:I,d3ZoomHandler:S,userSelectionActive:$}=G(Bs,ie),D=et(m),B=x.useRef(0),Y=x.useRef(!1),H=x.useRef();return Os(C),x.useEffect(()=>{if(C.current){const w=C.current.getBoundingClientRect(),P=Oo().scaleExtent([E,g]).translateExtent(f),v=mn(C.current).call(P),L=Fe.translate(p.x,p.y).scale(Xe(p.zoom,E,g)),V=[[0,0],[w.width,w.height]],W=P.constrain()(L,V,f);P.transform(v,W),P.wheelDelta(on),_.setState({d3Zoom:P,d3Selection:v,d3ZoomHandler:v.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:C.current.closest(".react-flow")})}},[]),x.useEffect(()=>{I&&k&&(r&&!D&&!$?I.on("wheel.zoom",w=>{if(Be(w,N))return!1;w.preventDefault(),w.stopImmediatePropagation();const P=I.property("__zoom").k||1,v=it();if(w.ctrlKey&&i&&v){const j=Lo(w),U=on(w),se=P*Math.pow(2,U);k.scaleTo(I,se,j,w);return}const L=w.deltaMode===1?20:1;let V=l===Re.Vertical?0:w.deltaX*L,W=l===Re.Horizontal?0:w.deltaY*L;!v&&w.shiftKey&&l!==Re.Vertical&&(V=w.deltaY*L,W=0),k.translateBy(I,-(V/P)*c,-(W/P)*c,{internal:!0});const Z=rt(I.property("__zoom")),{onViewportChangeStart:q,onViewportChange:te,onViewportChangeEnd:J}=_.getState();clearTimeout(H.current),Y.current||(Y.current=!0,t==null||t(w,Z),q==null||q(Z)),Y.current&&(e==null||e(w,Z),te==null||te(Z),H.current=setTimeout(()=>{n==null||n(w,Z),J==null||J(Z),Y.current=!1},150))},{passive:!1}):typeof S<"u"&&I.on("wheel.zoom",function(w,P){if(!h||Be(w,N))return null;w.preventDefault(),S.call(this,w,P)},{passive:!1}))},[$,r,l,I,k,S,D,i,h,N,t,e,n]),x.useEffect(()=>{k&&k.on("start",w=>{var L,V;if(!w.sourceEvent||w.sourceEvent.internal)return null;B.current=(L=w.sourceEvent)==null?void 0:L.button;const{onViewportChangeStart:P}=_.getState(),v=rt(w.transform);T.current=!0,z.current=v,((V=w.sourceEvent)==null?void 0:V.type)==="mousedown"&&_.setState({paneDragging:!0}),P==null||P(v),t==null||t(w.sourceEvent,v)})},[k,t]),x.useEffect(()=>{k&&($&&!T.current?k.on("zoom",null):$||k.on("zoom",w=>{var v;const{onViewportChange:P}=_.getState();if(_.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),A.current=!!(o&&nn(d,B.current??0)),(e||P)&&!((v=w.sourceEvent)!=null&&v.internal)){const L=rt(w.transform);P==null||P(L),e==null||e(w.sourceEvent,L)}}))},[$,k,e,d,o]),x.useEffect(()=>{k&&k.on("end",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;const{onViewportChangeEnd:P}=_.getState();if(T.current=!1,_.setState({paneDragging:!1}),o&&nn(d,B.current??0)&&!A.current&&o(w.sourceEvent),A.current=!1,(n||P)&&Hs(z.current,w.transform)){const v=rt(w.transform);z.current=v,clearTimeout(R.current),R.current=setTimeout(()=>{P==null||P(v),n==null||n(w.sourceEvent,v)},r?150:0)}})},[k,r,d,n,o]),x.useEffect(()=>{k&&k.filter(w=>{const P=D||s,v=i&&w.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&w.button===1&&w.type==="mousedown"&&(Be(w,"react-flow__node")||Be(w,"react-flow__edge")))return!0;if(!d&&!P&&!r&&!u&&!i||$||!u&&w.type==="dblclick"||Be(w,N)&&w.type==="wheel"||Be(w,M)&&(w.type!=="wheel"||r&&w.type==="wheel"&&!D)||!i&&w.ctrlKey&&w.type==="wheel"||!P&&!r&&!v&&w.type==="wheel"||!d&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(d)&&!d.includes(w.button)&&(w.type==="mousedown"||w.type==="touchstart"))return!1;const L=Array.isArray(d)&&d.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&L})},[$,k,s,i,r,u,d,a,D]),b.createElement("div",{className:"react-flow__renderer",ref:C,style:Ht},y)},Vs=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Fs(){const{userSelectionActive:e,userSelectionRect:t}=G(Vs,ie);return e&&t?b.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function sn(e,t){const n=e.find(o=>o.id===t.parentNode);if(n){const o=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,o>0&&(n.style.width+=o),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ys(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,s)=>{const i=e.filter(c=>c.id===s.id);if(i.length===0)return o.push(s),o;const r={...s};for(const c of i)if(c)switch(c.type){case"select":{r.selected=c.selected;break}case"position":{typeof c.position<"u"&&(r.position=c.position),typeof c.positionAbsolute<"u"&&(r.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(r.dragging=c.dragging),r.expandParent&&sn(o,r);break}case"dimensions":{typeof c.dimensions<"u"&&(r.width=c.dimensions.width,r.height=c.dimensions.height),typeof c.updateStyle<"u"&&(r.style={...r.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(r.resizing=c.resizing),r.expandParent&&sn(o,r);break}case"remove":return o}return o.push(r),o},n)}function Ws(e,t){return Ys(e,t)}const Ee=(e,t)=>({id:e,type:"select",selected:t});function Ve(e,t){return e.reduce((n,o)=>{const s=t.includes(o.id);return!o.selected&&s?(o.selected=!0,n.push(Ee(o.id,!0))):o.selected&&!s&&(o.selected=!1,n.push(Ee(o.id,!1))),n},[])}const yt=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Xs=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Zn=x.memo(({isSelecting:e,selectionMode:t=je.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:r,onPaneScroll:c,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:a,children:d})=>{const p=x.useRef(null),f=ne(),E=x.useRef(0),g=x.useRef(0),m=x.useRef(),{userSelectionActive:h,elementsSelectable:y,dragging:N}=G(Xs,ie),M=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),E.current=0,g.current=0},R=S=>{i==null||i(S),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})},_=S=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){S.preventDefault();return}r==null||r(S)},T=c?S=>c(S):void 0,A=S=>{const{resetSelectedElements:$,domNode:D}=f.getState();if(m.current=D==null?void 0:D.getBoundingClientRect(),!y||!e||S.button!==0||S.target!==p.current||!m.current)return;const{x:B,y:Y}=be(S,m.current);$(),f.setState({userSelectionRect:{width:0,height:0,startX:B,startY:Y,x:B,y:Y}}),o==null||o(S)},C=S=>{const{userSelectionRect:$,nodeInternals:D,edges:B,transform:Y,onNodesChange:H,onEdgesChange:w,nodeOrigin:P,getNodes:v}=f.getState();if(!e||!m.current||!$)return;f.setState({userSelectionActive:!0,nodesSelectionActive:!1});const L=be(S,m.current),V=$.startX??0,W=$.startY??0,Z={...$,x:L.x<V?L.x:V,y:L.y<W?L.y:W,width:Math.abs(L.x-V),height:Math.abs(L.y-W)},q=v(),te=Pn(D,Z,Y,t===je.Partial,!0,P),J=vn(te,B).map(U=>U.id),j=te.map(U=>U.id);if(E.current!==j.length){E.current=j.length;const U=Ve(q,j);U.length&&(H==null||H(U))}if(g.current!==J.length){g.current=J.length;const U=Ve(B,J);U.length&&(w==null||w(U))}f.setState({userSelectionRect:Z})},z=S=>{if(S.button!==0)return;const{userSelectionRect:$}=f.getState();!h&&$&&S.target===p.current&&(R==null||R(S)),f.setState({nodesSelectionActive:E.current>0}),M(),s==null||s(S)},k=S=>{h&&(f.setState({nodesSelectionActive:E.current>0}),s==null||s(S)),M()},I=y&&(e||h);return b.createElement("div",{className:ue(["react-flow__pane",{dragging:N,selection:e}]),onClick:I?void 0:yt(R,p),onContextMenu:yt(_,p),onWheel:yt(T,p),onMouseEnter:I?void 0:l,onMouseDown:I?A:void 0,onMouseMove:I?C:u,onMouseUp:I?z:void 0,onMouseLeave:I?k:a,ref:p,style:Ht},d,b.createElement(Fs,null))});Zn.displayName="Pane";function Kn(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Kn(n,t):!1}function rn(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Zs(e,t,n,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||!Kn(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var i,r;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=s.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((r=s.positionAbsolute)==null?void 0:r.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode,width:s.width,height:s.height,expandParent:s.expandParent}})}function Ks(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Un(e,t,n,o,s=[0,0],i){const r=Ks(e,e.extent||o);let c=r;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const a=n.get(e.parentNode),{x:d,y:p}=Ye(a,s).positionAbsolute;c=a&&le(d)&&le(p)&&le(a.width)&&le(a.height)?[[d+e.width*s[0],p+e.height*s[1]],[d+a.width-e.width+e.width*s[0],p+a.height-e.height+e.height*s[1]]]:c}else i==null||i("005",he.error005()),c=r;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const a=n.get(e.parentNode),{x:d,y:p}=Ye(a,s).positionAbsolute;c=[[e.extent[0][0]+d,e.extent[0][1]+p],[e.extent[1][0]+d,e.extent[1][1]+p]]}let l={x:0,y:0};if(e.parentNode){const a=n.get(e.parentNode);l=Ye(a,s).positionAbsolute}const u=c&&c!=="parent"?$t(t,c):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function xt({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const cn=(e,t,n,o)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const i=Array.from(s),r=t.getBoundingClientRect(),c={x:r.width*o[0],y:r.height*o[1]};return i.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-r.left-c.x)/n,y:(u.top-r.top-c.y)/n,...vt(l)}})};function Qe(e,t,n){return n===void 0?n:o=>{const s=t().nodeInternals.get(e);s&&n(o,{...s})}}function At({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:r,nodeInternals:c,onError:l}=t.getState(),u=c.get(e);if(!u){l==null||l("012",he.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&r)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var a;return(a=o==null?void 0:o.current)==null?void 0:a.blur()})):s([e])}function Us(){const e=ne();return x.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:s,snapToGrid:i}=e.getState(),r=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,l={x:(r-o[0])/o[2],y:(c-o[1])/o[2]};return{xSnapped:i?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:i?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function St(e){return(t,n,o)=>e==null?void 0:e(t,o)}function Gn({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:s,isSelectable:i,selectNodesOnDrag:r}){const c=ne(),[l,u]=x.useState(!1),a=x.useRef([]),d=x.useRef({x:null,y:null}),p=x.useRef(0),f=x.useRef(null),E=x.useRef({x:0,y:0}),g=x.useRef(null),m=x.useRef(!1),h=x.useRef(!1),y=Us();return x.useEffect(()=>{if(e!=null&&e.current){const N=mn(e.current),M=({x:T,y:A})=>{const{nodeInternals:C,onNodeDrag:z,onSelectionDrag:k,updateNodePositions:I,nodeExtent:S,snapGrid:$,snapToGrid:D,nodeOrigin:B,onError:Y}=c.getState();d.current={x:T,y:A};let H=!1,w={x:0,y:0,x2:0,y2:0};if(a.current.length>1&&S){const v=_t(a.current,B);w=Dt(v)}if(a.current=a.current.map(v=>{const L={x:T-v.distance.x,y:A-v.distance.y};D&&(L.x=$[0]*Math.round(L.x/$[0]),L.y=$[1]*Math.round(L.y/$[1]));const V=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];a.current.length>1&&S&&!v.extent&&(V[0][0]=v.positionAbsolute.x-w.x+S[0][0],V[1][0]=v.positionAbsolute.x+(v.width??0)-w.x2+S[1][0],V[0][1]=v.positionAbsolute.y-w.y+S[0][1],V[1][1]=v.positionAbsolute.y+(v.height??0)-w.y2+S[1][1]);const W=Un(v,L,C,V,B,Y);return H=H||v.position.x!==W.position.x||v.position.y!==W.position.y,v.position=W.position,v.positionAbsolute=W.positionAbsolute,v}),!H)return;I(a.current,!0,!0),u(!0);const P=s?z:St(k);if(P&&g.current){const[v,L]=xt({nodeId:s,dragItems:a.current,nodeInternals:C});P(g.current,v,L)}},R=()=>{if(!f.current)return;const[T,A]=xn(E.current,f.current);if(T!==0||A!==0){const{transform:C,panBy:z}=c.getState();d.current.x=(d.current.x??0)-T/C[2],d.current.y=(d.current.y??0)-A/C[2],z({x:T,y:A})&&M(d.current)}p.current=requestAnimationFrame(R)},_=T=>{var B;const{nodeInternals:A,multiSelectionActive:C,nodesDraggable:z,unselectNodesAndEdges:k,onNodeDragStart:I,onSelectionDragStart:S}=c.getState();h.current=!0;const $=s?I:St(S);(!r||!i)&&!C&&s&&((B=A.get(s))!=null&&B.selected||k()),s&&i&&r&&At({id:s,store:c,nodeRef:e});const D=y(T);if(d.current=D,a.current=Zs(A,z,D,s),$&&a.current){const[Y,H]=xt({nodeId:s,dragItems:a.current,nodeInternals:A});$(T.sourceEvent,Y,H)}};if(t)N.on(".drag",null);else{const T=Vo().on("start",A=>{const{domNode:C,nodeDragThreshold:z}=c.getState();z===0&&_(A);const k=y(A);d.current=k,f.current=(C==null?void 0:C.getBoundingClientRect())||null,E.current=be(A.sourceEvent,f.current)}).on("drag",A=>{var I,S;const C=y(A),{autoPanOnNodeDrag:z,nodeDragThreshold:k}=c.getState();if(!m.current&&h.current&&z&&(m.current=!0,R()),!h.current){const $=C.xSnapped-(((I=d==null?void 0:d.current)==null?void 0:I.x)??0),D=C.ySnapped-(((S=d==null?void 0:d.current)==null?void 0:S.y)??0);Math.sqrt($*$+D*D)>k&&_(A)}(d.current.x!==C.xSnapped||d.current.y!==C.ySnapped)&&a.current&&h.current&&(g.current=A.sourceEvent,E.current=be(A.sourceEvent,f.current),M(C))}).on("end",A=>{if(h.current&&(u(!1),m.current=!1,h.current=!1,cancelAnimationFrame(p.current),a.current)){const{updateNodePositions:C,nodeInternals:z,onNodeDragStop:k,onSelectionDragStop:I}=c.getState(),S=s?k:St(I);if(C(a.current,!1,!1),S){const[$,D]=xt({nodeId:s,dragItems:a.current,nodeInternals:z});S(A.sourceEvent,$,D)}}}).filter(A=>{const C=A.target;return!A.button&&(!n||!rn(C,`.${n}`,e))&&(!o||rn(C,o,e))});return N.call(T),()=>{N.on(".drag",null)}}}},[e,t,n,o,i,c,s,r,y]),l}function qn(){const e=ne();return x.useCallback(n=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:i,getNodes:r,snapToGrid:c,snapGrid:l,onError:u,nodesDraggable:a}=e.getState(),d=r().filter(y=>y.selected&&(y.draggable||a&&typeof y.draggable>"u")),p=c?l[0]:5,f=c?l[1]:5,E=n.isShiftPressed?4:1,g=n.x*p*E,m=n.y*f*E,h=d.map(y=>{if(y.positionAbsolute){const N={x:y.positionAbsolute.x+g,y:y.positionAbsolute.y+m};c&&(N.x=l[0]*Math.round(N.x/l[0]),N.y=l[1]*Math.round(N.y/l[1]));const{positionAbsolute:M,position:R}=Un(y,N,o,s,void 0,u);y.position=R,y.positionAbsolute=M}return y});i(h,!0,!1)},[])}const We={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Je=e=>{const t=({id:n,type:o,data:s,xPos:i,yPos:r,xPosOrigin:c,yPosOrigin:l,selected:u,onClick:a,onMouseEnter:d,onMouseMove:p,onMouseLeave:f,onContextMenu:E,onDoubleClick:g,style:m,className:h,isDraggable:y,isSelectable:N,isConnectable:M,isFocusable:R,selectNodesOnDrag:_,sourcePosition:T,targetPosition:A,hidden:C,resizeObserver:z,dragHandle:k,zIndex:I,isParent:S,noDragClassName:$,noPanClassName:D,initialized:B,disableKeyboardA11y:Y,ariaLabel:H,rfId:w})=>{const P=ne(),v=x.useRef(null),L=x.useRef(T),V=x.useRef(A),W=x.useRef(o),Z=N||y||a||d||p||f,q=qn(),te=Qe(n,P.getState,d),J=Qe(n,P.getState,p),j=Qe(n,P.getState,f),U=Qe(n,P.getState,E),se=Qe(n,P.getState,g),de=K=>{const{nodeDragThreshold:re}=P.getState();if(N&&(!_||!y||re>0)&&At({id:n,store:P,nodeRef:v}),a){const ce=P.getState().nodeInternals.get(n);ce&&a(K,{...ce})}},ge=K=>{if(!wt(K))if(En.includes(K.key)&&N){const re=K.key==="Escape";At({id:n,store:P,unselect:re,nodeRef:v})}else!Y&&y&&u&&Object.prototype.hasOwnProperty.call(We,K.key)&&(P.setState({ariaLiveMessage:`Moved selected node ${K.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~r}`}),q({x:We[K.key].x,y:We[K.key].y,isShiftPressed:K.shiftKey}))};x.useEffect(()=>{if(v.current&&!C){const K=v.current;return z==null||z.observe(K),()=>z==null?void 0:z.unobserve(K)}},[C]),x.useEffect(()=>{const K=W.current!==o,re=L.current!==T,ce=V.current!==A;v.current&&(K||re||ce)&&(K&&(W.current=o),re&&(L.current=T),ce&&(V.current=A),P.getState().updateNodeDimensions([{id:n,nodeElement:v.current,forceUpdate:!0}]))},[n,o,T,A]);const Q=Gn({nodeRef:v,disabled:C||!y,noDragClassName:$,handleSelector:k,nodeId:n,isSelectable:N,selectNodesOnDrag:_});return C?null:b.createElement("div",{className:ue(["react-flow__node",`react-flow__node-${o}`,{[D]:y},h,{selected:u,selectable:N,parent:S,dragging:Q}]),ref:v,style:{zIndex:I,transform:`translate(${c}px,${l}px)`,pointerEvents:Z?"all":"none",visibility:B?"visible":"hidden",...m},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:te,onMouseMove:J,onMouseLeave:j,onContextMenu:U,onClick:de,onDoubleClick:se,onKeyDown:R?ge:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":Y?void 0:`${Ln}-${w}`,"aria-label":H},b.createElement(cs,{value:n},b.createElement(e,{id:n,data:s,type:o,xPos:i,yPos:r,selected:u,isConnectable:M,sourcePosition:T,targetPosition:A,dragging:Q,dragHandle:k,zIndex:I})))};return t.displayName="NodeWrapper",x.memo(t)};const Gs=e=>{const t=e.getNodes().filter(n=>n.selected);return{..._t(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function qs({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ne(),{width:s,height:i,x:r,y:c,transformString:l,userSelectionActive:u}=G(Gs,ie),a=qn(),d=x.useRef(null);if(x.useEffect(()=>{var E;n||(E=d.current)==null||E.focus({preventScroll:!0})},[n]),Gn({nodeRef:d}),u||!s||!i)return null;const p=e?E=>{const g=o.getState().getNodes().filter(m=>m.selected);e(E,g)}:void 0,f=E=>{Object.prototype.hasOwnProperty.call(We,E.key)&&a({x:We[E.key].x,y:We[E.key].y,isShiftPressed:E.shiftKey})};return b.createElement("div",{className:ue(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},b.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:s,height:i,top:c,left:r}}))}var Qs=x.memo(qs);const Js=e=>e.nodesSelectionActive,Qn=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:r,deleteKeyCode:c,onMove:l,onMoveStart:u,onMoveEnd:a,selectionKeyCode:d,selectionOnDrag:p,selectionMode:f,onSelectionStart:E,onSelectionEnd:g,multiSelectionKeyCode:m,panActivationKeyCode:h,zoomActivationKeyCode:y,elementsSelectable:N,zoomOnScroll:M,zoomOnPinch:R,panOnScroll:_,panOnScrollSpeed:T,panOnScrollMode:A,zoomOnDoubleClick:C,panOnDrag:z,defaultViewport:k,translateExtent:I,minZoom:S,maxZoom:$,preventScrolling:D,onSelectionContextMenu:B,noWheelClassName:Y,noPanClassName:H,disableKeyboardA11y:w})=>{const P=G(Js),v=et(d),L=et(h),V=L||z,W=L||_,Z=v||p&&V!==!0;return zs({deleteKeyCode:c,multiSelectionKeyCode:m}),b.createElement(Ls,{onMove:l,onMoveStart:u,onMoveEnd:a,onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:M,zoomOnPinch:R,panOnScroll:W,panOnScrollSpeed:T,panOnScrollMode:A,zoomOnDoubleClick:C,panOnDrag:!v&&V,defaultViewport:k,translateExtent:I,minZoom:S,maxZoom:$,zoomActivationKeyCode:y,preventScrolling:D,noWheelClassName:Y,noPanClassName:H},b.createElement(Zn,{onSelectionStart:E,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:r,panOnDrag:V,isSelecting:!!Z,selectionMode:f},e,P&&b.createElement(Qs,{onSelectionContextMenu:B,noPanClassName:H,disableKeyboardA11y:w})))};Qn.displayName="FlowRenderer";var js=x.memo(Qn);function er(e){return G(x.useCallback(n=>e?Pn(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function tr(e){const t={input:Je(e.input||zn),default:Je(e.default||Mt),output:Je(e.output||Hn),group:Je(e.group||Ot)},n={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=Je(e[i]||Mt),s),n);return{...t,...o}}const nr=({x:e,y:t,width:n,height:o,origin:s})=>!n||!o?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-o*s[1]},or=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Jn=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:i,onError:r}=G(or,ie),c=er(e.onlyRenderVisibleElements),l=x.useRef(),u=x.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const a=new ResizeObserver(d=>{const p=d.map(f=>({id:f.target.getAttribute("data-id"),nodeElement:f.target,forceUpdate:!0}));i(p)});return l.current=a,a},[]);return x.useEffect(()=>()=>{var a;(a=l==null?void 0:l.current)==null||a.disconnect()},[]),b.createElement("div",{className:"react-flow__nodes",style:Ht},c.map(a=>{var R,_;let d=a.type||"default";e.nodeTypes[d]||(r==null||r("003",he.error003(d)),d="default");const p=e.nodeTypes[d]||e.nodeTypes.default,f=!!(a.draggable||t&&typeof a.draggable>"u"),E=!!(a.selectable||s&&typeof a.selectable>"u"),g=!!(a.connectable||n&&typeof a.connectable>"u"),m=!!(a.focusable||o&&typeof a.focusable>"u"),h=e.nodeExtent?$t(a.positionAbsolute,e.nodeExtent):a.positionAbsolute,y=(h==null?void 0:h.x)??0,N=(h==null?void 0:h.y)??0,M=nr({x:y,y:N,width:a.width??0,height:a.height??0,origin:e.nodeOrigin});return b.createElement(p,{key:a.id,id:a.id,className:a.className,style:a.style,type:d,data:a.data,sourcePosition:a.sourcePosition||O.Bottom,targetPosition:a.targetPosition||O.Top,hidden:a.hidden,xPos:y,yPos:N,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!a.selected,isDraggable:f,isSelectable:E,isConnectable:g,isFocusable:m,resizeObserver:u,dragHandle:a.dragHandle,zIndex:((R=a[ee])==null?void 0:R.z)??0,isParent:!!((_=a[ee])!=null&&_.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!a.width&&!!a.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:a.ariaLabel})}))};Jn.displayName="NodeRenderer";var sr=x.memo(Jn);const rr=(e,t,n)=>n===O.Left?e-t:n===O.Right?e+t:e,ir=(e,t,n)=>n===O.Top?e-t:n===O.Bottom?e+t:e,an="react-flow__edgeupdater",ln=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:s,onMouseEnter:i,onMouseOut:r,type:c})=>b.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:r,className:ue([an,`${an}-${c}`]),cx:rr(t,o,e),cy:ir(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),cr=()=>!0;var Le=e=>{const t=({id:n,className:o,type:s,data:i,onClick:r,onEdgeDoubleClick:c,selected:l,animated:u,label:a,labelStyle:d,labelShowBg:p,labelBgStyle:f,labelBgPadding:E,labelBgBorderRadius:g,style:m,source:h,target:y,sourceX:N,sourceY:M,targetX:R,targetY:_,sourcePosition:T,targetPosition:A,elementsSelectable:C,hidden:z,sourceHandleId:k,targetHandleId:I,onContextMenu:S,onMouseEnter:$,onMouseMove:D,onMouseLeave:B,edgeUpdaterRadius:Y,onEdgeUpdate:H,onEdgeUpdateStart:w,onEdgeUpdateEnd:P,markerEnd:v,markerStart:L,rfId:V,ariaLabel:W,isFocusable:Z,isUpdatable:q,pathOptions:te,interactionWidth:J})=>{const j=x.useRef(null),[U,se]=x.useState(!1),[de,ge]=x.useState(!1),Q=ne(),K=x.useMemo(()=>`url(#${Nt(L,V)})`,[L,V]),re=x.useMemo(()=>`url(#${Nt(v,V)})`,[v,V]);if(z)return null;const ce=oe=>{var pe;const{edges:ae,addSelectedEdges:Pe,unselectNodesAndEdges:ve,multiSelectionActive:$e}=Q.getState(),me=ae.find(Ue=>Ue.id===n);me&&(C&&(Q.setState({nodesSelectionActive:!1}),me.selected&&$e?(ve({nodes:[],edges:[me]}),(pe=j.current)==null||pe.blur()):Pe([n])),r&&r(oe,me))},F=qe(n,Q.getState,c),Ne=qe(n,Q.getState,S),Ce=qe(n,Q.getState,$),Ze=qe(n,Q.getState,D),Ie=qe(n,Q.getState,B),Me=(oe,ae)=>{if(oe.button!==0)return;const{edges:Pe,isValidConnection:ve}=Q.getState(),$e=ae?y:h,me=(ae?I:k)||null,pe=ae?"target":"source",Ue=ve||cr,ft=ae,Ge=Pe.find(De=>De.id===n);ge(!0),w==null||w(oe,Ge,pe);const gt=De=>{ge(!1),P==null||P(De,Ge,pe)};Rn({event:oe,handleId:me,nodeId:$e,onConnect:De=>H==null?void 0:H(Ge,De),isTarget:ft,getState:Q.getState,setState:Q.setState,isValidConnection:Ue,edgeUpdaterType:pe,onEdgeUpdateEnd:gt})},ye=oe=>Me(oe,!0),_e=oe=>Me(oe,!1),xe=()=>se(!0),Ae=()=>se(!1),Ke=!C&&!r,ze=oe=>{var ae;if(En.includes(oe.key)&&C){const{unselectNodesAndEdges:Pe,addSelectedEdges:ve,edges:$e}=Q.getState();oe.key==="Escape"?((ae=j.current)==null||ae.blur(),Pe({edges:[$e.find(pe=>pe.id===n)]})):ve([n])}};return b.createElement("g",{className:ue(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:l,animated:u,inactive:Ke,updating:U}]),onClick:ce,onDoubleClick:F,onContextMenu:Ne,onMouseEnter:Ce,onMouseMove:Ze,onMouseLeave:Ie,onKeyDown:Z?ze:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${h} to ${y}`,"aria-describedby":Z?`${Vn}-${V}`:void 0,ref:j},!de&&b.createElement(e,{id:n,source:h,target:y,selected:l,animated:u,label:a,labelStyle:d,labelShowBg:p,labelBgStyle:f,labelBgPadding:E,labelBgBorderRadius:g,data:i,style:m,sourceX:N,sourceY:M,targetX:R,targetY:_,sourcePosition:T,targetPosition:A,sourceHandleId:k,targetHandleId:I,markerStart:K,markerEnd:re,pathOptions:te,interactionWidth:J}),q&&b.createElement(b.Fragment,null,(q==="source"||q===!0)&&b.createElement(ln,{position:T,centerX:N,centerY:M,radius:Y,onMouseDown:ye,onMouseEnter:xe,onMouseOut:Ae,type:"source"}),(q==="target"||q===!0)&&b.createElement(ln,{position:A,centerX:R,centerY:_,radius:Y,onMouseDown:_e,onMouseEnter:xe,onMouseOut:Ae,type:"target"})))};return t.displayName="EdgeWrapper",x.memo(t)};function ar(e){const t={default:Le(e.default||at),straight:Le(e.bezier||Tt),step:Le(e.step||Rt),smoothstep:Le(e.step||dt),simplebezier:Le(e.simplebezier||kt)},n={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=Le(e[i]||at),s),n);return{...t,...o}}function un(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,r=(n==null?void 0:n.height)||t.height;switch(e){case O.Top:return{x:o+i/2,y:s};case O.Right:return{x:o+i,y:s+r/2};case O.Bottom:return{x:o+i/2,y:s+r};case O.Left:return{x:o,y:s+r/2}}}function dn(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const lr=(e,t,n,o,s,i)=>{const r=un(n,e,t),c=un(i,o,s);return{sourceX:r.x,sourceY:r.y,targetX:c.x,targetY:c.y}};function ur({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:s,targetHeight:i,width:r,height:c,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const a=Dt({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:r/l[2],height:c/l[2]}),d=Math.max(0,Math.min(a.x2,u.x2)-Math.max(a.x,u.x)),p=Math.max(0,Math.min(a.y2,u.y2)-Math.max(a.y,u.y));return Math.ceil(d*p)>0}function fn(e){var o,s,i,r,c;const t=((o=e==null?void 0:e[ee])==null?void 0:o.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)||0,y:((c=e==null?void 0:e.positionAbsolute)==null?void 0:c.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const dr=[{level:0,isMaxLevel:!0,edges:[]}];function fr(e,t,n=!1){let o=-1;const s=e.reduce((r,c)=>{var a,d;const l=le(c.zIndex);let u=l?c.zIndex:0;if(n){const p=t.get(c.target),f=t.get(c.source),E=c.selected||(p==null?void 0:p.selected)||(f==null?void 0:f.selected),g=Math.max(((a=f==null?void 0:f[ee])==null?void 0:a.z)||0,((d=p==null?void 0:p[ee])==null?void 0:d.z)||0,1e3);u=(l?c.zIndex:0)+(E?g:0)}return r[u]?r[u].push(c):r[u]=[c],o=u>o?u:o,r},{}),i=Object.entries(s).map(([r,c])=>{const l=+r;return{edges:c,level:l,isMaxLevel:l===o}});return i.length===0?dr:i}function gr(e,t,n){const o=G(x.useCallback(s=>e?s.edges.filter(i=>{const r=t.get(i.source),c=t.get(i.target);return(r==null?void 0:r.width)&&(r==null?void 0:r.height)&&(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&ur({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return fr(o,t,n)}const pr=({color:e="none",strokeWidth:t=1})=>b.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mr=({color:e="none",strokeWidth:t=1})=>b.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),gn={[ct.Arrow]:pr,[ct.ArrowClosed]:mr};function hr(e){const t=ne();return x.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(gn,e)?gn[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",he.error009(e)),null)},[e])}const yr=({id:e,type:t,color:n,width:o=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:r,orient:c="auto-start-reverse"})=>{const l=hr(t);return l?b.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0"},b.createElement(l,{color:n,strokeWidth:r})):null},xr=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(r=>{if(r&&typeof r=="object"){const c=Nt(r,t);o.includes(c)||(s.push({id:c,color:r.color||e,...r}),o.push(c))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},jn=({defaultColor:e,rfId:t})=>{const n=G(x.useCallback(xr({defaultColor:e,rfId:t}),[e,t]),(o,s)=>!(o.length!==s.length||o.some((i,r)=>i.id!==s[r].id)));return b.createElement("defs",null,n.map(o=>b.createElement(yr,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};jn.displayName="MarkerDefinitions";var Sr=x.memo(jn);const Er=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),eo=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:s,noPanClassName:i,onEdgeUpdate:r,onEdgeContextMenu:c,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:a,onEdgeClick:d,edgeUpdaterRadius:p,onEdgeDoubleClick:f,onEdgeUpdateStart:E,onEdgeUpdateEnd:g,children:m})=>{const{edgesFocusable:h,edgesUpdatable:y,elementsSelectable:N,width:M,height:R,connectionMode:_,nodeInternals:T,onError:A}=G(Er,ie),C=gr(t,T,n);return M?b.createElement(b.Fragment,null,C.map(({level:z,edges:k,isMaxLevel:I})=>b.createElement("svg",{key:z,style:{zIndex:z},width:M,height:R,className:"react-flow__edges react-flow__container"},I&&b.createElement(Sr,{defaultColor:e,rfId:o}),b.createElement("g",null,k.map(S=>{const[$,D,B]=fn(T.get(S.source)),[Y,H,w]=fn(T.get(S.target));if(!B||!w)return null;let P=S.type||"default";s[P]||(A==null||A("011",he.error011(P)),P="default");const v=s[P]||s.default,L=_===Te.Strict?H.target:(H.target??[]).concat(H.source??[]),V=dn(D.source,S.sourceHandle),W=dn(L,S.targetHandle),Z=(V==null?void 0:V.position)||O.Bottom,q=(W==null?void 0:W.position)||O.Top,te=!!(S.focusable||h&&typeof S.focusable>"u"),J=typeof r<"u"&&(S.updatable||y&&typeof S.updatable>"u");if(!V||!W)return A==null||A("008",he.error008(V,S)),null;const{sourceX:j,sourceY:U,targetX:se,targetY:de}=lr($,V,Z,Y,W,q);return b.createElement(v,{key:S.id,id:S.id,className:ue([S.className,i]),type:P,data:S.data,selected:!!S.selected,animated:!!S.animated,hidden:!!S.hidden,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,style:S.style,source:S.source,target:S.target,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerEnd:S.markerEnd,markerStart:S.markerStart,sourceX:j,sourceY:U,targetX:se,targetY:de,sourcePosition:Z,targetPosition:q,elementsSelectable:N,onEdgeUpdate:r,onContextMenu:c,onMouseEnter:l,onMouseMove:u,onMouseLeave:a,onClick:d,edgeUpdaterRadius:p,onEdgeDoubleClick:f,onEdgeUpdateStart:E,onEdgeUpdateEnd:g,rfId:o,ariaLabel:S.ariaLabel,isFocusable:te,isUpdatable:J,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth})})))),m):null};eo.displayName="EdgeRenderer";var wr=x.memo(eo);const br=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Nr({children:e}){const t=G(br);return b.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Cr(e){const t=Xn(),n=x.useRef(!1);x.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Mr={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top},to=({nodeId:e,handleType:t,style:n,type:o=we.Bezier,CustomComponent:s,connectionStatus:i})=>{var _,T,A;const{fromNode:r,handleId:c,toX:l,toY:u,connectionMode:a}=G(x.useCallback(C=>({fromNode:C.nodeInternals.get(e),handleId:C.connectionHandleId,toX:(C.connectionPosition.x-C.transform[0])/C.transform[2],toY:(C.connectionPosition.y-C.transform[1])/C.transform[2],connectionMode:C.connectionMode}),[e]),ie),d=(_=r==null?void 0:r[ee])==null?void 0:_.handleBounds;let p=d==null?void 0:d[t];if(a===Te.Loose&&(p=p||(d==null?void 0:d[t==="source"?"target":"source"])),!r||!p)return null;const f=c?p.find(C=>C.id===c):p[0],E=f?f.x+f.width/2:(r.width??0)/2,g=f?f.y+f.height/2:r.height??0,m=(((T=r.positionAbsolute)==null?void 0:T.x)??0)+E,h=(((A=r.positionAbsolute)==null?void 0:A.y)??0)+g,y=f==null?void 0:f.position,N=y?Mr[y]:null;if(!y||!N)return null;if(s)return b.createElement(s,{connectionLineType:o,connectionLineStyle:n,fromNode:r,fromHandle:f,fromX:m,fromY:h,toX:l,toY:u,fromPosition:y,toPosition:N,connectionStatus:i});let M="";const R={sourceX:m,sourceY:h,sourcePosition:y,targetX:l,targetY:u,targetPosition:N};return o===we.Bezier?[M]=Mn(R):o===we.Step?[M]=bt({...R,borderRadius:0}):o===we.SmoothStep?[M]=bt(R):o===we.SimpleBezier?[M]=Cn(R):M=`M${m},${h} ${l},${u}`,b.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:n})};to.displayName="ConnectionLine";const Ar=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Pr({containerStyle:e,style:t,type:n,component:o}){const{nodeId:s,handleType:i,nodesConnectable:r,width:c,height:l,connectionStatus:u}=G(Ar,ie);return!(s&&i&&c&&r)?null:b.createElement("svg",{style:e,width:c,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},b.createElement("g",{className:ue(["react-flow__connection",u])},b.createElement(to,{nodeId:s,handleType:i,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function pn(e,t){return x.useRef(null),ne(),x.useMemo(()=>t(e),[e])}const no=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:s,onInit:i,onNodeClick:r,onEdgeClick:c,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:a,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:f,onSelectionContextMenu:E,onSelectionStart:g,onSelectionEnd:m,connectionLineType:h,connectionLineStyle:y,connectionLineComponent:N,connectionLineContainerStyle:M,selectionKeyCode:R,selectionOnDrag:_,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:z,deleteKeyCode:k,onlyRenderVisibleElements:I,elementsSelectable:S,selectNodesOnDrag:$,defaultViewport:D,translateExtent:B,minZoom:Y,maxZoom:H,preventScrolling:w,defaultMarkerColor:P,zoomOnScroll:v,zoomOnPinch:L,panOnScroll:V,panOnScrollSpeed:W,panOnScrollMode:Z,zoomOnDoubleClick:q,panOnDrag:te,onPaneClick:J,onPaneMouseEnter:j,onPaneMouseMove:U,onPaneMouseLeave:se,onPaneScroll:de,onPaneContextMenu:ge,onEdgeUpdate:Q,onEdgeContextMenu:K,onEdgeMouseEnter:re,onEdgeMouseMove:ce,onEdgeMouseLeave:F,edgeUpdaterRadius:Ne,onEdgeUpdateStart:Ce,onEdgeUpdateEnd:Ze,noDragClassName:Ie,noWheelClassName:Me,noPanClassName:ye,elevateEdgesOnSelect:_e,disableKeyboardA11y:xe,nodeOrigin:Ae,nodeExtent:Ke,rfId:ze})=>{const oe=pn(e,tr),ae=pn(t,ar);return Cr(i),b.createElement(js,{onPaneClick:J,onPaneMouseEnter:j,onPaneMouseMove:U,onPaneMouseLeave:se,onPaneContextMenu:ge,onPaneScroll:de,deleteKeyCode:k,selectionKeyCode:R,selectionOnDrag:_,selectionMode:T,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:z,elementsSelectable:S,onMove:n,onMoveStart:o,onMoveEnd:s,zoomOnScroll:v,zoomOnPinch:L,zoomOnDoubleClick:q,panOnScroll:V,panOnScrollSpeed:W,panOnScrollMode:Z,panOnDrag:te,defaultViewport:D,translateExtent:B,minZoom:Y,maxZoom:H,onSelectionContextMenu:E,preventScrolling:w,noDragClassName:Ie,noWheelClassName:Me,noPanClassName:ye,disableKeyboardA11y:xe},b.createElement(Nr,null,b.createElement(wr,{edgeTypes:ae,onEdgeClick:c,onEdgeDoubleClick:u,onEdgeUpdate:Q,onlyRenderVisibleElements:I,onEdgeContextMenu:K,onEdgeMouseEnter:re,onEdgeMouseMove:ce,onEdgeMouseLeave:F,onEdgeUpdateStart:Ce,onEdgeUpdateEnd:Ze,edgeUpdaterRadius:Ne,defaultMarkerColor:P,noPanClassName:ye,elevateEdgesOnSelect:!!_e,disableKeyboardA11y:xe,rfId:ze},b.createElement(Pr,{style:y,type:h,component:N,containerStyle:M})),b.createElement("div",{className:"react-flow__edgelabel-renderer"}),b.createElement(sr,{nodeTypes:oe,onNodeClick:r,onNodeDoubleClick:l,onNodeMouseEnter:a,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:f,selectNodesOnDrag:$,onlyRenderVisibleElements:I,noPanClassName:ye,noDragClassName:Ie,disableKeyboardA11y:xe,nodeOrigin:Ae,nodeExtent:Ke,rfId:ze})))};no.displayName="GraphView";var vr=x.memo(no);const Pt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Se={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Pt,nodeExtent:Pt,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Te.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ts,isValidConnection:void 0},$r=()=>Xo((e,t)=>({...Se,setNodes:n=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:i}=t();e({nodeInternals:ht(n,o,s,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(n,o)=>{const s=typeof n<"u",i=typeof o<"u",r=s?ht(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:r,edges:i?o:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:r,fitViewOnInitOptions:c,domNode:l,nodeOrigin:u}=t(),a=l==null?void 0:l.querySelector(".react-flow__viewport");if(!a)return;const d=window.getComputedStyle(a),{m22:p}=new window.DOMMatrixReadOnly(d.transform),f=n.reduce((g,m)=>{const h=s.get(m.id);if(h){const y=vt(m.nodeElement);!!(y.width&&y.height&&(h.width!==y.width||h.height!==y.height||m.forceUpdate))&&(s.set(h.id,{...h,[ee]:{...h[ee],handleBounds:{source:cn(".source",m.nodeElement,p,u),target:cn(".target",m.nodeElement,p,u)}},...y}),g.push({id:h.id,type:"dimensions",dimensions:y}))}return g},[]);Yn(s,u);const E=r||i&&!r&&Wn(t,{initial:!0,...c});e({nodeInternals:new Map(s),fitViewOnInitDone:E}),(f==null?void 0:f.length)>0&&(o==null||o(f))},updateNodePositions:(n,o=!0,s=!1)=>{const{triggerNodeChanges:i}=t(),r=n.map(c=>{const l={id:c.id,type:"position",dragging:s};return o&&(l.positionAbsolute=c.positionAbsolute,l.position=c.position),l});i(r)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:r,getNodes:c,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(i){const u=Ws(n,c()),a=ht(u,s,r,l);e({nodeInternals:a})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:s,getNodes:i}=t();let r,c=null;o?r=n.map(l=>Ee(l,!0)):(r=Ve(i(),n),c=Ve(s,[])),st({changedNodes:r,changedEdges:c,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:s,getNodes:i}=t();let r,c=null;o?r=n.map(l=>Ee(l,!0)):(r=Ve(s,n),c=Ve(i(),[])),st({changedNodes:c,changedEdges:r,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:s,getNodes:i}=t(),r=n||i(),c=o||s,l=r.map(a=>(a.selected=!1,Ee(a.id,!1))),u=c.map(a=>Ee(a.id,!1));st({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:s}=t();o==null||o.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:s}=t();o==null||o.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;(o=t().d3Zoom)==null||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),i=o().filter(c=>c.selected).map(c=>Ee(c.id,!1)),r=n.filter(c=>c.selected).map(c=>Ee(c.id,!1));st({changedNodes:i,changedEdges:r,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(s=>{s.positionAbsolute=$t(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:s,height:i,d3Zoom:r,d3Selection:c,translateExtent:l}=t();if(!r||!c||!n.x&&!n.y)return!1;const u=Fe.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),a=[[0,0],[s,i]],d=r==null?void 0:r.constrain()(u,a,l);return r.transform(c,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Se.connectionNodeId,connectionHandleId:Se.connectionHandleId,connectionHandleType:Se.connectionHandleType,connectionStatus:Se.connectionStatus,connectionStartHandle:Se.connectionStartHandle,connectionEndHandle:Se.connectionEndHandle}),reset:()=>e({...Se})}),Object.is),oo=({children:e})=>{const t=x.useRef(null);return t.current||(t.current=$r()),b.createElement(Zo,{value:t.current},e)};oo.displayName="ReactFlowProvider";const so=({children:e})=>x.useContext(ut)?b.createElement(b.Fragment,null,e):b.createElement(oo,null,e);so.displayName="ReactFlowWrapper";const Dr={input:zn,default:Mt,output:Hn,group:Ot},kr={default:at,straight:Tt,step:Rt,smoothstep:dt,simplebezier:kt},Rr=[0,0],Tr=[15,15],Ir={x:0,y:0,zoom:1},_r={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},zr=x.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:s,nodeTypes:i=Dr,edgeTypes:r=kr,onNodeClick:c,onEdgeClick:l,onInit:u,onMove:a,onMoveStart:d,onMoveEnd:p,onConnect:f,onConnectStart:E,onConnectEnd:g,onClickConnectStart:m,onClickConnectEnd:h,onNodeMouseEnter:y,onNodeMouseMove:N,onNodeMouseLeave:M,onNodeContextMenu:R,onNodeDoubleClick:_,onNodeDragStart:T,onNodeDrag:A,onNodeDragStop:C,onNodesDelete:z,onEdgesDelete:k,onSelectionChange:I,onSelectionDragStart:S,onSelectionDrag:$,onSelectionDragStop:D,onSelectionContextMenu:B,onSelectionStart:Y,onSelectionEnd:H,connectionMode:w=Te.Strict,connectionLineType:P=we.Bezier,connectionLineStyle:v,connectionLineComponent:L,connectionLineContainerStyle:V,deleteKeyCode:W="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:q=!1,selectionMode:te=je.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:j=it()?"Meta":"Control",zoomActivationKeyCode:U=it()?"Meta":"Control",snapToGrid:se=!1,snapGrid:de=Tr,onlyRenderVisibleElements:ge=!1,selectNodesOnDrag:Q=!0,nodesDraggable:K,nodesConnectable:re,nodesFocusable:ce,nodeOrigin:F=Rr,edgesFocusable:Ne,edgesUpdatable:Ce,elementsSelectable:Ze,defaultViewport:Ie=Ir,minZoom:Me=.5,maxZoom:ye=2,translateExtent:_e=Pt,preventScrolling:xe=!0,nodeExtent:Ae,defaultMarkerColor:Ke="#b1b1b7",zoomOnScroll:ze=!0,zoomOnPinch:oe=!0,panOnScroll:ae=!1,panOnScrollSpeed:Pe=.5,panOnScrollMode:ve=Re.Free,zoomOnDoubleClick:$e=!0,panOnDrag:me=!0,onPaneClick:pe,onPaneMouseEnter:Ue,onPaneMouseMove:ft,onPaneMouseLeave:Ge,onPaneScroll:gt,onPaneContextMenu:Bt,children:De,onEdgeUpdate:io,onEdgeContextMenu:co,onEdgeDoubleClick:ao,onEdgeMouseEnter:lo,onEdgeMouseMove:uo,onEdgeMouseLeave:fo,onEdgeUpdateStart:go,onEdgeUpdateEnd:po,edgeUpdaterRadius:mo=10,onNodesChange:ho,onEdgesChange:yo,noDragClassName:xo="nodrag",noWheelClassName:So="nowheel",noPanClassName:Lt="nopan",fitView:Eo=!1,fitViewOptions:wo,connectOnClick:bo=!0,attributionPosition:No,proOptions:Co,defaultEdgeOptions:Mo,elevateNodesOnSelect:Ao=!0,elevateEdgesOnSelect:Po=!1,disableKeyboardA11y:Vt=!1,autoPanOnConnect:vo=!0,autoPanOnNodeDrag:$o=!0,connectionRadius:Do=20,isValidConnection:ko,onError:Ro,style:To,id:Ft,nodeDragThreshold:Io,..._o},zo)=>{const pt=Ft||"1";return b.createElement("div",{..._o,style:{...To,..._r},ref:zo,className:ue(["react-flow",s]),"data-testid":"rf__wrapper",id:Ft},b.createElement(so,null,b.createElement(vr,{onInit:u,onMove:a,onMoveStart:d,onMoveEnd:p,onNodeClick:c,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:N,onNodeMouseLeave:M,onNodeContextMenu:R,onNodeDoubleClick:_,nodeTypes:i,edgeTypes:r,connectionLineType:P,connectionLineStyle:v,connectionLineComponent:L,connectionLineContainerStyle:V,selectionKeyCode:Z,selectionOnDrag:q,selectionMode:te,deleteKeyCode:W,multiSelectionKeyCode:j,panActivationKeyCode:J,zoomActivationKeyCode:U,onlyRenderVisibleElements:ge,selectNodesOnDrag:Q,defaultViewport:Ie,translateExtent:_e,minZoom:Me,maxZoom:ye,preventScrolling:xe,zoomOnScroll:ze,zoomOnPinch:oe,zoomOnDoubleClick:$e,panOnScroll:ae,panOnScrollSpeed:Pe,panOnScrollMode:ve,panOnDrag:me,onPaneClick:pe,onPaneMouseEnter:Ue,onPaneMouseMove:ft,onPaneMouseLeave:Ge,onPaneScroll:gt,onPaneContextMenu:Bt,onSelectionContextMenu:B,onSelectionStart:Y,onSelectionEnd:H,onEdgeUpdate:io,onEdgeContextMenu:co,onEdgeDoubleClick:ao,onEdgeMouseEnter:lo,onEdgeMouseMove:uo,onEdgeMouseLeave:fo,onEdgeUpdateStart:go,onEdgeUpdateEnd:po,edgeUpdaterRadius:mo,defaultMarkerColor:Ke,noDragClassName:xo,noWheelClassName:So,noPanClassName:Lt,elevateEdgesOnSelect:Po,rfId:pt,disableKeyboardA11y:Vt,nodeOrigin:F,nodeExtent:Ae}),b.createElement(Cs,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:f,onConnectStart:E,onConnectEnd:g,onClickConnectStart:m,onClickConnectEnd:h,nodesDraggable:K,nodesConnectable:re,nodesFocusable:ce,edgesFocusable:Ne,edgesUpdatable:Ce,elementsSelectable:Ze,elevateNodesOnSelect:Ao,minZoom:Me,maxZoom:ye,nodeExtent:Ae,onNodesChange:ho,onEdgesChange:yo,snapToGrid:se,snapGrid:de,connectionMode:w,translateExtent:_e,connectOnClick:bo,defaultEdgeOptions:Mo,fitView:Eo,fitViewOptions:wo,onNodesDelete:z,onEdgesDelete:k,onNodeDragStart:T,onNodeDrag:A,onNodeDragStop:C,onSelectionDrag:$,onSelectionDragStart:S,onSelectionDragStop:D,noPanClassName:Lt,nodeOrigin:F,rfId:pt,autoPanOnConnect:vo,autoPanOnNodeDrag:$o,onError:Ro,connectionRadius:Do,isValidConnection:ko,nodeDragThreshold:Io}),b.createElement(bs,{onSelectionChange:I}),De,b.createElement(Go,{proOptions:Co,position:No}),b.createElement($s,{rfId:pt,disableKeyboardA11y:Vt})))});zr.displayName="ReactFlow";const Or=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Jr({children:e}){const t=G(Or);return t?Bo.createPortal(e,t):null}function Hr(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Object.is(e[n[o]],t[n[o]]))return!1;return!0}var fe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(fe||(fe={}));function Br({color:e,dimensions:t,lineWidth:n}){return b.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Lr({color:e,radius:t}){return b.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Vr={[fe.Dots]:"#91919a",[fe.Lines]:"#eee",[fe.Cross]:"#e2e2e2"},Fr={[fe.Dots]:1,[fe.Lines]:1,[fe.Cross]:6},Yr=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ro({id:e,variant:t=fe.Dots,gap:n=20,size:o,lineWidth:s=1,offset:i=2,color:r,style:c,className:l}){const u=x.useRef(null),{transform:a,patternId:d}=G(Yr,Hr),p=r||Vr[t],f=o||Fr[t],E=t===fe.Dots,g=t===fe.Cross,m=Array.isArray(n)?n:[n,n],h=[m[0]*a[2]||1,m[1]*a[2]||1],y=f*a[2],N=g?[y,y]:h,M=E?[y/i,y/i]:[N[0]/i,N[1]/i];return b.createElement("svg",{className:ue(["react-flow__background",l]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},b.createElement("pattern",{id:d+e,x:a[0]%h[0],y:a[1]%h[1],width:h[0],height:h[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},E?b.createElement(Lr,{color:p,radius:y/i}):b.createElement(Br,{dimensions:N,color:p,lineWidth:s})),b.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}ro.displayName="Background";var jr=x.memo(ro);export{tt as B,Jr as E,lt as H,O as P,zr as R,jr as a,bt as g};
