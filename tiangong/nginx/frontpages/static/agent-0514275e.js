import{i as I,j as A}from"./index-e4a3aec9.js";import{aC as h,r as p}from"./vue-82a6b7fc.js";const m=["https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/1.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/10.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/11.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/12.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/13.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/14.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/15.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/16.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/17.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/18.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/19.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/2.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/20.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/21.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/22.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/23.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/24.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/25.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/26.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/27.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/28.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/29.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/3.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/30.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/31.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/32.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/33.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/34.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/35.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/36.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/37.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/38.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/4.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/5.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/6.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/7.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/8.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/9.png"],c=(t,s)=>t.find(o=>o.moduleType===s),b=h("flow",()=>{const t=p([]),s=p([]),o=p();return{appSystemModuleList:t,appToolModuleList:s,initTemplate:o,setInitTemplate:()=>{o.value={initInputNodes:{id:"simpleInputId",type:"custom",data:c(t.value,"questionInput"),position:{x:-172,y:415}},initAiNodes:{id:"simpleAichatId",type:"custom",data:c(t.value,"aiChat"),position:{x:685,y:364}},initKnowledgeNodes:{id:"simpleKnowledgeId",type:"custom",data:c(t.value,"knowledgesSearch"),position:{x:211,y:119}},initConfirmreplyNodes:{id:"simpleConfirmreplyId",type:"custom",data:c(t.value,"confirmreply"),position:{x:684,y:39}},initInputAiEdges:[{id:"vueflow__edge-input-ai",sourceHandle:"userChatInput",targetHandle:"text",type:"custom",source:"simpleInputId",target:"simpleAichatId",animated:!1}],initInputAiKdEdges:[{id:"vueflow__edge-input-kd",sourceHandle:"userChatInput",targetHandle:"text",type:"custom",source:"simpleInputId",target:"simpleKnowledgeId",animated:!1},{id:"vueflow__edge-kd-reply",sourceHandle:"isEmpty",targetHandle:"switch",type:"custom",source:"simpleKnowledgeId",target:"simpleConfirmreplyId",animated:!1},{id:"vueflow__edge-kd-ai2",sourceHandle:"unEmpty",targetHandle:"switch",type:"custom",source:"simpleKnowledgeId",target:"simpleAichatId",animated:!1},{id:"vueflow__edge-kd-ai3",sourceHandle:"quoteQA",targetHandle:"knSearch",type:"custom",source:"simpleKnowledgeId",target:"simpleAichatId",animated:!1}]}},setAppSystemModuleList:u=>{t.value=u},setAppToolModuleList:u=>{s.value=u,s.value}}}),T=h("agent",()=>{const t=p({avatar:"",name:"新的Agent",intro:"",uuid:"",guides:[],chatAvatar:"",shareAble:!1,searchInWeb:!1,createImage:!1,appModel:{nodes:[],edges:[]}}),s=p(I()),o=a=>{s.value=a,A(a)},d=p([]),g=p([]);return{agentInfo:t,setAgentInfo:a=>{t.value.name=a.name||"新的Agent",t.value.avatar=a.avatar||m[j(0,m.length-1)],t.value.intro=a.intro||"",t.value.uuid=a.uuid||"",t.value.chatAvatar=a.chatAvatar||"",t.value.shareAble=a.shareAble||!1,t.value.guides=a.guides||[],t.value.searchInWeb=a.searchInWeb||!1,t.value.createImage=a.createImage||!1,t.value.appModel=a.appModel?JSON.parse(a.appModel):{nodes:[],edges:[]}},setAgentModel:a=>{t.value.appModel=a},changeAgentInfo:a=>{t.value.name=a.name||"新的Agent",t.value.avatar=a.avatar,t.value.intro=a.intro,t.value.uuid=a.uuid,t.value.chatAvatar=a.chatAvatar||"",t.value.guides=a.guides,t.value.searchInWeb=a.searchInWeb,t.value.createImage=a.createImage;const{initTemplate:r}=b();if(r){const n=JSON.parse(JSON.stringify(r));i(t.value.appModel.nodes,"simpleInputId")||t.value.appModel.nodes.push(n.initInputNodes);const v=i(t.value.appModel.nodes,"simpleAichatId");if(v?v.data.inputs.map(e=>{e.key==="model"&&(e.value=a.aiModelName),e.key==="quotePrompt"&&(e.value=a.aiPrompt)}):(n.initAiNodes.data.inputs.map(e=>{e.key==="model"&&(e.value=a.aiModelName),e.key==="quotePrompt"&&(e.value=a.aiPrompt)}),t.value.appModel.nodes.push(n.initAiNodes)),i(t.value.appModel.edges,"vueflow__edge-input-ai")||t.value.appModel.edges.push(n.initInputAiEdges[0]),a.datasets.length>0){const e=i(t.value.appModel.nodes,"simpleKnowledgeId");i(t.value.appModel.nodes,"simpleConfirmreplyId")||t.value.appModel.nodes.push(n.initConfirmreplyNodes),e?e.data.inputs.map(l=>{l.key==="datasets"&&(l.value=a.datasets)}):(n.initKnowledgeNodes.data.inputs.map(l=>{l.key==="datasets"&&(l.value=a.datasets)}),t.value.appModel.nodes.push(n.initKnowledgeNodes)),i(t.value.appModel.edges,"vueflow__edge-input-kd")||t.value.appModel.edges.push(n.initInputAiKdEdges[0]),i(t.value.appModel.edges,"vueflow__edge-kd-reply")||t.value.appModel.edges.push(n.initInputAiKdEdges[1]),i(t.value.appModel.edges,"vueflow__edge-kd-ai2")||t.value.appModel.edges.push(n.initInputAiKdEdges[2]),i(t.value.appModel.edges,"vueflow__edge-kd-ai3")||t.value.appModel.edges.push(n.initInputAiKdEdges[3])}else t.value.appModel.nodes=t.value.appModel.nodes.filter(e=>e.id!=="simpleKnowledgeId"),t.value.appModel.nodes=t.value.appModel.nodes.filter(e=>e.id!=="simpleConfirmreplyId")}},knowDataList:d,allChatList:g,setKnowDataList:a=>{d.value=a},setAllChatList:a=>{g.value=a},shareAgent:s,setShareAgent:o}});function i(t,s){return t.find(o=>o.id===s)}function j(t,s){return Math.floor(Math.random()*(s-t))+t}export{b as a,m as l,T as u};
