import"./index-ca8ac1ae.js";import{aC as m,r as p}from"./vue-82a6b7fc.js";const c=(t,s)=>t.find(i=>i.moduleType===s),I=m("flow",()=>{const t=p([]),s=p([]),i=p();return{appSystemModuleList:t,appToolModuleList:s,initTemplate:i,setInitTemplate:()=>{i.value={initInputNodes:{id:"simpleInputId",type:"custom",data:c(t.value,"questionInput"),position:{x:-172,y:415}},initAiNodes:{id:"simpleAichatId",type:"custom",data:c(t.value,"aiChat"),position:{x:685,y:364}},initKnowledgeNodes:{id:"simpleKnowledgeId",type:"custom",data:c(t.value,"knowledgesSearch"),position:{x:211,y:119}},initConfirmreplyNodes:{id:"simpleConfirmreplyId",type:"custom",data:c(t.value,"confirmreply"),position:{x:684,y:39}},initInputAiEdges:[{id:"vueflow__edge-input-ai",sourceHandle:"userChatInput",targetHandle:"text",type:"custom",source:"simpleInputId",target:"simpleAichatId",animated:!1}],initInputAiKdEdges:[{id:"vueflow__edge-input-kd",sourceHandle:"userChatInput",targetHandle:"text",type:"custom",source:"simpleInputId",target:"simpleKnowledgeId",animated:!1},{id:"vueflow__edge-kd-reply",sourceHandle:"isEmpty",targetHandle:"switch",type:"custom",source:"simpleKnowledgeId",target:"simpleConfirmreplyId",animated:!1},{id:"vueflow__edge-kd-ai2",sourceHandle:"unEmpty",targetHandle:"switch",type:"custom",source:"simpleKnowledgeId",target:"simpleAichatId",animated:!1},{id:"vueflow__edge-kd-ai3",sourceHandle:"quoteQA",targetHandle:"knSearch",type:"custom",source:"simpleKnowledgeId",target:"simpleAichatId",animated:!1}]}},setAppSystemModuleList:l=>{t.value=l},setAppToolModuleList:l=>{s.value=l,s.value}}}),r=["https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/1.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/10.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/11.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/12.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/13.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/14.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/15.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/16.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/17.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/18.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/19.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/2.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/20.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/21.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/22.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/23.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/24.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/25.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/26.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/27.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/28.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/29.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/3.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/30.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/31.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/32.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/33.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/34.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/35.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/36.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/37.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/38.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/4.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/5.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/6.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/7.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/8.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/9.png"],C=m("agent",()=>{const t=p({avatar:"",name:"新的Agent",intro:"",uuid:"",guides:[],searchInWeb:!1,createImage:!1,appModel:{nodes:[],edges:[]}}),s=p([]),i=p([]);return{agentInfo:t,setAgentInfo:e=>{t.value.name=e.name||"新的Agent",t.value.avatar=e.avatar||r[b(0,r.length-1)],t.value.intro=e.intro||"",t.value.uuid=e.uuid||"",t.value.guides=e.guides||[],t.value.searchInWeb=e.searchInWeb||!1,t.value.createImage=e.createImage||!1,t.value.appModel=e.appModel?JSON.parse(e.appModel):{nodes:[],edges:[]}},setAgentModel:e=>{t.value.appModel=e},changeAgentInfo:e=>{t.value.name=e.name||"新的Agent",t.value.avatar=e.avatar,t.value.intro=e.intro,t.value.uuid=e.uuid,t.value.guides=e.guides,t.value.searchInWeb=e.searchInWeb,t.value.createImage=e.createImage;const{initTemplate:d}=I();if(d){const n=JSON.parse(JSON.stringify(d));o(t.value.appModel.nodes,"simpleInputId")||t.value.appModel.nodes.push(n.initInputNodes);const g=o(t.value.appModel.nodes,"simpleAichatId");if(g?g.data.inputs.map(a=>{a.key==="model"&&(a.value=e.aiModelName),a.key==="quotePrompt"&&(a.value=e.aiPrompt)}):(n.initAiNodes.data.inputs.map(a=>{a.key==="model"&&(a.value=e.aiModelName),a.key==="quotePrompt"&&(a.value=e.aiPrompt)}),t.value.appModel.nodes.push(n.initAiNodes)),o(t.value.appModel.edges,"vueflow__edge-input-ai")||t.value.appModel.edges.push(n.initInputAiEdges[0]),e.datasets.length>0){const a=o(t.value.appModel.nodes,"simpleKnowledgeId");o(t.value.appModel.nodes,"simpleConfirmreplyId")||t.value.appModel.nodes.push(n.initConfirmreplyNodes),a?a.data.inputs.map(u=>{u.key==="datasets"&&(u.value=e.datasets)}):(n.initKnowledgeNodes.data.inputs.map(u=>{u.key==="datasets"&&(u.value=e.datasets)}),t.value.appModel.nodes.push(n.initKnowledgeNodes)),o(t.value.appModel.edges,"vueflow__edge-input-kd")||t.value.appModel.edges.push(n.initInputAiKdEdges[0]),o(t.value.appModel.edges,"vueflow__edge-kd-reply")||t.value.appModel.edges.push(n.initInputAiKdEdges[1]),o(t.value.appModel.edges,"vueflow__edge-kd-ai2")||t.value.appModel.edges.push(n.initInputAiKdEdges[2]),o(t.value.appModel.edges,"vueflow__edge-kd-ai3")||t.value.appModel.edges.push(n.initInputAiKdEdges[3])}else t.value.appModel.nodes=t.value.appModel.nodes.filter(a=>a.id!=="simpleKnowledgeId"),t.value.appModel.nodes=t.value.appModel.nodes.filter(a=>a.id!=="simpleConfirmreplyId")}},knowDataList:s,allChatList:i,setKnowDataList:e=>{s.value=e},setAllChatList:e=>{i.value=e}}});function o(t,s){return t.find(i=>i.id===s)}function b(t,s){return Math.floor(Math.random()*(s-t))+t}export{I as a,r as l,C as u};
