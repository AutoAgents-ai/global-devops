import{H as N,aI as K,aD as S,r as _,ah as r,l as A,m as P,p as n,V as t,u as d,U as p,a9 as U,P as o,T as c,F as E}from"./vue-6e387ee8.js";import{k as F,D as M,b as Q}from"./index-01bb7d9f.js";import{f as R}from"./index-7f15ee15.js";import{u as q,a as H}from"./knowledge-2ebf1ecd.js";import{f as x}from"./element-3f409242.js";import{_ as j}from"./index-29809860.js";import"./vxe-e514f80f.js";const G={class:"knowledge-header"},J={class:"back"},L={class:"knowledge-name"},O=["src"],W={class:"knowledge-tabs"},X={class:"tab-container"},Y={class:"btn-box"},Z=N({__name:"knowledgeTable",setup(ee){const{proxy:h}=q(),{knowInfo:m}=K(H()),v=S(),g=_(),w=_([]),b=_(0),i=_({pageNum:1,pageSize:10,count:!0,keywords:"",kbId:m.value.id,parentId:m.value.parentId}),T=e=>{x.confirm(`您确定${e.state=="2"?"启用":"弃用"}该文件吗？`,"提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{F({id:e.id,name:e.name,state:e.state=="1"?"2":"1"}).then(()=>{h.$message.success("操作成功"),u()})}).catch(()=>{})},C=e=>{x.confirm("此操作将永久删除数据,是否继续?","提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{M(e).then(()=>{h.$message.success("删除成功"),u()})}).catch(()=>{})},u=async()=>{i.value.keywords=g.value,Q(i.value).then(e=>{w.value=e.data.list,b.value=e.data.total})};u();const k=()=>{u()},D=e=>{i.value.pageNum=e,u()},B=e=>{switch(e){case"folder":return"数据文件夹";case"file":return"文件";case"uri":return"链接";case"virtual":return"手工录入"}};return(e,s)=>{const y=r("svg-icon"),I=r("el-input"),f=r("el-button"),l=r("el-table-column"),V=r("el-table"),$=r("el-pagination");return A(),P(E,null,[n("div",G,[n("div",J,[t(y,{name:"back",class:"back-icon",onClick:s[0]||(s[0]=a=>d(v).push({name:"knowledge"}))}),n("div",L,[n("img",{src:d(m).avatarUrl},null,8,O),n("div",null,p(d(m).name),1)])]),n("div",W,[n("div",X,[t(y,{name:"search-knowledge",class:"search"}),t(I,{class:"inp",modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=a=>g.value=a),onBlur:k,onKeydown:U(k,["enter"]),placeholder:"搜索知识库中的文档"},null,8,["modelValue","onKeydown"])])]),n("div",Y,[t(f,{type:"primary",class:"save-btn",onClick:s[2]||(s[2]=a=>d(v).push({name:"importData"}))},{default:o(()=>[c("导入数据")]),_:1})])]),t(V,{data:w.value,style:{width:"1280px"},"row-style":{height:"56px"},"header-row-style":{height:"48px"}},{default:o(()=>[t(l,{prop:"name",label:"名称",width:"320"}),t(l,{prop:"type",label:"类型",width:"120"},{default:o(a=>[c(p(B(a.row.type)),1)]),_:1}),t(l,{prop:"dataAmount",label:"切片数量",width:"120"}),t(l,{prop:"createAt",label:"创建时间"},{default:o(a=>[c(p(d(R)(a.row.createAt)),1)]),_:1}),t(l,{prop:"state",label:"状态",width:"120"},{default:o(a=>[c(p(a.row.state==1?"启用":"弃用"),1)]),_:1}),t(l,{fixed:"right",label:"操作",width:"160"},{default:o(a=>[t(f,{link:"",type:"primary",size:"small",onClick:z=>T(a.row)},{default:o(()=>[c(p(a.row.state==1?"弃用":"启用"),1)]),_:2},1032,["onClick"]),t(f,{link:"",type:"danger",size:"small",onClick:z=>C(a.row.id)},{default:o(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t($,{class:"pagination",small:"",background:"",layout:"prev, pager, next",total:b.value,"page-size":i.value.pageSize,"current-page":i.value.pageNum,onCurrentChange:D},null,8,["total","page-size","current-page"])],64)}}});const ce=j(Z,[["__scopeId","data-v-616812fb"]]);export{ce as default};
