import{H as y,r as d,aD as I,c as k,_ as E,ah as i,l as u,m as f,u as N,S as V,p as e,V as t,P as c,a9 as L,a3 as O,aE as C,aF as S}from"./vue-25cdfb55.js";import{f as F,l as M,_ as R}from"./index-543d1121.js";import"./element-e5236e8d.js";import"./vxe-9027ceee.js";const h=n=>(C("data-v-0b7b7a68"),n=n(),S(),n),W={class:"mobileLogin"},z={key:0,class:"mobileLogin-left"},B={class:"mobileLogin-right"},K={class:"right-head"},U={class:"head"},q={class:"head-logo"},D=h(()=>e("div",{class:"head-fool"},[e("span",null,"欢迎来到灵搭")],-1)),A={class:"right-form"},H={class:"form-con"},P=h(()=>e("div",{class:"con-head"},[e("div",{class:"head-span"},"账号登录"),e("div",{class:"head-el-tabs__active-bar"})],-1)),j={class:"con-input"},G={class:"con-button"},J=["onClick"],Q=y({__name:"mobileLogin",setup(n){let a=d(!0);const g=I();k(()=>{window.innerWidth<=1e3?a.value=!1:window.innerWidth>1e3&&(a.value=!0),window.addEventListener("resize",()=>{window.innerWidth<=1e3?a.value=!1:window.innerWidth>1e3&&(a.value=!0)})});const v=d(null);d(!1);const o=E({userNameOrExternalId:"",password:""}),w={userNameOrExternalId:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:5,message:"用户名不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},_=async()=>{const r=F.hashSync(o.password);let{data:s}=await M({userNameOrExternalId:o.userNameOrExternalId,password:r});s.token&&(localStorage.setItem("k_sso_token",s.token),g.push("/"))};return(r,s)=>{const b=i("svg-icon"),m=i("el-input"),p=i("el-form-item"),x=i("el-form");return u(),f("div",W,[N(a)===!0?(u(),f("div",z)):V("",!0),e("div",B,[e("div",K,[e("div",U,[e("div",q,[t(b,{name:"group-ic",class:"share"})]),D])]),e("div",A,[e("div",H,[P,e("div",j,[t(x,{ref_key:"loginFormRef",ref:v,model:o,rules:w,onKeyup:L(_,["enter"])},{default:c(()=>[t(p,{prop:"userNameOrExternalId"},{default:c(()=>[t(m,{modelValue:o.userNameOrExternalId,"onUpdate:modelValue":s[0]||(s[0]=l=>o.userNameOrExternalId=l),modelModifiers:{trim:!0},placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":r.User,size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(p,{prop:"password"},{default:c(()=>[t(m,{modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=l=>o.password=l),modelModifiers:{trim:!0},placeholder:"密码",type:"password",tabindex:"2","prefix-icon":r.Lock,size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1},8,["model","onKeyup"])]),e("div",G,[e("button",{onClick:O(_,["prevent"])},"登录",8,J)])])])])])}}});const $=R(Q,[["__scopeId","data-v-0b7b7a68"]]);export{$ as default};
