import"./index-f817ca3a.js";import{aC as r,r as u}from"./vue-6e387ee8.js";const p=(t,n)=>t.find(i=>i.moduleType===n),v=r("flow",()=>{const t=u([]),n=u([]),i=u();return{appSystemModuleList:t,appToolModuleList:n,initTemplate:i,setInitTemplate:()=>{i.value={initInputNodes:{id:"simpleInputId",type:"custom",data:p(t.value,"questionInput"),position:{x:-172,y:415}},initAiNodes:{id:"simpleAichatId",type:"custom",data:p(t.value,"aiChat"),position:{x:685,y:364}},initKnowledgeNodes:{id:"simpleKnowledgeId",type:"custom",data:p(t.value,"knowledgesSearch"),position:{x:211,y:119}},initConfirmreplyNodes:{id:"simpleConfirmreplyId",type:"custom",data:p(t.value,"confirmreply"),position:{x:684,y:39}},initInputAiEdges:[{id:"vueflow__edge-input-ai",sourceHandle:"userChatInput",targetHandle:"text",type:"custom",source:"simpleInputId",target:"simpleAichatId",animated:!1}],initInputAiKdEdges:[{id:"vueflow__edge-input-kd",sourceHandle:"userChatInput",targetHandle:"text",type:"custom",source:"simpleInputId",target:"simpleKnowledgeId",animated:!1},{id:"vueflow__edge-kd-reply",sourceHandle:"isEmpty",targetHandle:"switch",type:"custom",source:"simpleKnowledgeId",target:"simpleConfirmreplyId",animated:!1},{id:"vueflow__edge-kd-ai2",sourceHandle:"unEmpty",targetHandle:"switch",type:"custom",source:"simpleKnowledgeId",target:"simpleAichatId",animated:!1},{id:"vueflow__edge-kd-ai3",sourceHandle:"quoteQA",targetHandle:"knSearch",type:"custom",source:"simpleKnowledgeId",target:"simpleAichatId",animated:!1}]}},setAppSystemModuleList:s=>{t.value=s},setAppToolModuleList:s=>{n.value=s}}}),d=["https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/1.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/10.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/11.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/12.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/13.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/14.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/15.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/16.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/17.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/18.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/19.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/2.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/20.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/21.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/22.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/23.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/24.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/25.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/26.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/27.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/28.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/29.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/3.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/30.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/31.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/32.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/33.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/34.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/35.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/36.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/37.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/38.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/4.jpg","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/5.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/6.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/7.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/8.png","https://autoagents.oss-cn-beijing.aliyuncs.com/static/avatar/9.png"],f=r("agent",()=>{const t=u({avatar:"",name:"新的Agent",intro:"",uuid:"",guides:[],searchInWeb:!1,createImage:!1,appModel:{nodes:[],edges:[]}});return{agentInfo:t,setAgentInfo:a=>{t.value.name=a.name||"新的Agent",t.value.avatar=a.avatar||d[y(0,d.length-1)],t.value.intro=a.intro||"",t.value.uuid=a.uuid||"",t.value.guides=a.guides||[],t.value.searchInWeb=a.searchInWeb||!1,t.value.createImage=a.createImage||!1,t.value.appModel=a.appModel?JSON.parse(a.appModel):{nodes:[],edges:[]}},setAgentModel:a=>{t.value.appModel=a},changeAgentInfo:a=>{t.value.name=a.name||"新的Agent",t.value.avatar=a.avatar,t.value.intro=a.intro,t.value.uuid=a.uuid,t.value.guides=a.guides,t.value.searchInWeb=a.searchInWeb,t.value.createImage=a.createImage;const{initTemplate:l}=v();if(l){const s=JSON.parse(JSON.stringify(l));c(t.value.appModel.nodes,"simpleInputId")||t.value.appModel.nodes.push(s.initInputNodes);const g=c(t.value.appModel.nodes,"simpleAichatId");if(g?g.data.inputs.map(e=>{e.key==="model"&&(e.value=a.aiModelName),e.key==="quotePrompt"&&(e.value=a.aiPrompt)}):(s.initAiNodes.data.inputs.map(e=>{e.key==="model"&&(e.value=a.aiModelName),e.key==="quotePrompt"&&(e.value=a.aiPrompt)}),t.value.appModel.nodes.push(s.initAiNodes)),a.datasets.length>0){const e=c(t.value.appModel.nodes,"simpleKnowledgeId");c(t.value.appModel.nodes,"simpleConfirmreplyId")||t.value.appModel.nodes.push(s.initConfirmreplyNodes),e?e.data.inputs.map(o=>{o.key==="datasets"&&(o.value=a.datasets)}):(s.initKnowledgeNodes.data.inputs.map(o=>{o.key==="datasets"&&(o.value=a.datasets)}),t.value.appModel.nodes.push(s.initKnowledgeNodes))}else t.value.appModel.nodes=t.value.appModel.nodes.filter(e=>e.id!=="simpleKnowledgeId"),t.value.appModel.nodes=t.value.appModel.nodes.filter(e=>e.id!=="simpleConfirmreplyId");t.value.appModel.edges=a.datasets.length>0?s.initInputAiEdges.concat(s.initInputAiKdEdges):s.initInputAiEdges}}}});function c(t,n){return t.find(i=>i.id===n)}function y(t,n){return Math.floor(Math.random()*(n-t))+t}export{v as a,d as l,f as u};
