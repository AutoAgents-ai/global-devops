import{p as Y,u as ee,D as te,A as oe}from"./index.vue_vue_type_style_index_0_scoped_c7b71ed8_lang-58d613f3.js";import{_ as M,u as ae,s as se,a as le,g as ne,b as ce,c as ie}from"./index-0c15d20b.js";import{H as T,_ as re,ah as l,l as s,O as f,P as o,p as v,V as t,T as $,m,u as w,aD as ue,aE as Z,r as L,U as N,F as P,a8 as F,aF as de,aG as pe,I as W,e as u,aa as _e,R as z,S as A,J as G,X as me,aH as ve,aI as H}from"./vue-6e387ee8.js";import{p as fe,u as ge,f as he,E as be}from"./element-3f409242.js";import{g as U}from"./index-7f15ee15.js";import"./vxe-e514f80f.js";const ye=["src"],ke={class:"dialog-footer"},Ve=T({__name:"EditAccount",props:{dialogAccountVisible:{type:Boolean}},emits:["update:dialogAccountVisible"],setup(d,{emit:e}){const c=e,n=re({avatar:"",userName:"",passWord:"",language:"",timeZone:""}),g=()=>{c("update:dialogAccountVisible",!1)},i=()=>{c("update:dialogAccountVisible",!1)};return(y,a)=>{const S=l("el-icon"),x=l("el-upload"),r=l("el-form-item"),p=l("el-input"),C=l("el-option"),h=l("el-select"),_=l("el-form"),k=l("el-button"),I=l("el-dialog");return s(),f(I,{"model-value":y.dialogAccountVisible,"append-to-body":"",width:480,title:"账户设置"},{footer:o(()=>[v("span",ke,[t(k,{onClick:g},{default:o(()=>[$("取消")]),_:1}),t(k,{type:"primary",onClick:i},{default:o(()=>[$("确认")]),_:1})])]),default:o(()=>[t(_,{ref:"accountFormRef",model:n,rules:y.rules,"label-position":"top"},{default:o(()=>[t(r,{prop:"avatar",class:"form-item-uploader"},{default:o(()=>[t(x,{class:"avatar-uploader",action:"","show-file-list":!1},{default:o(()=>[n.avatar?(s(),m("img",{key:0,src:n.avatar,class:"avatar"},null,8,ye)):(s(),f(S,{key:1,size:24,color:"#dcdfe6",class:"avatar-uploader-icon"},{default:o(()=>[t(w(fe))]),_:1}))]),_:1})]),_:1}),t(r,{label:"用户名",prop:"userName"},{default:o(()=>[t(p,{modelValue:n.userName,"onUpdate:modelValue":a[0]||(a[0]=b=>n.userName=b)},null,8,["modelValue"])]),_:1}),t(r,{label:"密码",prop:"passWord"},{default:o(()=>[t(p,{modelValue:n.passWord,"onUpdate:modelValue":a[1]||(a[1]=b=>n.passWord=b),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),t(r,{label:"语言",prop:"language"},{default:o(()=>[t(h,{modelValue:n.language,"onUpdate:modelValue":a[2]||(a[2]=b=>n.language=b)},{default:o(()=>[t(C,{label:"中文（简体）",value:"中文（简体）"}),t(C,{label:"中文（繁体）",value:"中文（繁体）"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"时区",prop:"timeZone"},{default:o(()=>[t(h,{modelValue:n.timeZone,"onUpdate:modelValue":a[3]||(a[3]=b=>n.timeZone=b)},{default:o(()=>[t(C,{label:"中国 北京（GMT+8）",value:"中中国 北京（GMT+8）"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])}}}),xe=M(Ve,[["__scopeId","data-v-0e7427aa"]]),Ce=d=>(de("data-v-615de338"),d=d(),pe(),d),Ie={class:"user-info"},Se={class:"text"},Ae={class:"name"},we={class:"popover"},Te={class:"user-setting"},$e={class:"choose-box"},Me=Ce(()=>v("p",null,"当前账号开通多个天工 API Key，请选择应用平台使用的 API Key",-1)),Le={class:"dialog-footer"},Be=T({__name:"index",setup(d){ue(),Z();const e=ae(),c=L(!1),n=L();L([]);const g=L(!1),i=L(),y=()=>{e.logout(),window.close()},a=()=>{e.apiKeys.length==0?he({title:"提醒",customStyle:{width:"560px",maxWidth:"560px"},showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,message:"当前账号未开通天工 API Key，无法进入大模型应用平台。请前往天工平台申请 API Key。",confirmButtonText:"前往申请"}).then(()=>{e.goTg()}):e.apiKeys.length>1&&(c.value=!0)},S=()=>{se(n.value).then(()=>{be({message:"操作成功",type:"success"})})};return(()=>{le().then(async r=>{r.data.code!==1&&(ne()?(await e.ssoToken(),a()):e.goTg())})})(),(r,p)=>{const C=l("el-avatar"),h=l("svg-icon"),_=l("el-option"),k=l("el-select"),I=l("el-button"),b=l("el-dialog");return s(),m("div",Ie,[v("div",{class:"menu-avatar",ref_key:"userAvatarRef",ref:i},[t(C,{icon:w(ge),size:30},null,8,["icon"]),v("div",Se,[v("h3",Ae,N(w(e).username),1)])],512),v("div",we,[v("div",Te,[v("div",{class:"item",onClick:a},[t(h,{name:"key",class:"icon"}),$(" API Key 设置")]),v("div",{class:"item logout",onClick:y},[t(h,{name:"Logout",class:"icon"}),$(" 退出登录")])])]),t(b,{modelValue:c.value,"onUpdate:modelValue":p[2]||(p[2]=V=>c.value=V),width:560,title:"API Key设置"},{footer:o(()=>[v("span",Le,[t(I,{onClick:p[1]||(p[1]=V=>c.value=!1)},{default:o(()=>[$("取消")]),_:1}),t(I,{type:"primary",onClick:S},{default:o(()=>[$("确认")]),_:1})])]),default:o(()=>[v("div",$e,[Me,t(k,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=V=>n.value=V),placeholder:"选择天工 API Key"},{default:o(()=>[(s(!0),m(P,null,F(w(e).apiKeys,(V,K)=>(s(),f(_,{label:V,value:V,key:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),t(xe,{dialogAccountVisible:g.value,"onUpdate:dialogAccountVisible":p[3]||(p[3]=V=>g.value=V)},null,8,["dialogAccountVisible"])])}}}),Pe=M(Be,[["__scopeId","data-v-615de338"]]),R=d=>/^(https?:|mailto:|tel:)/.test(d),Ke=["href"],Ee=T({__name:"SidebarItemLink",props:{to:{}},setup(d){const e=d;return(c,n)=>{const g=l("router-link");return w(R)(e.to)?(s(),m("a",{key:0,href:e.to,target:"_blank",rel:"noopener"},[W(c.$slots,"default")],8,Ke)):(s(),f(g,{key:1,to:e.to},{default:o(()=>[W(c.$slots,"default")]),_:3},8,["to"]))}}}),Ue={key:2},Ne=T({__name:"SidebarItem",props:{item:{},isCollapse:{type:Boolean,default:!1},isTop:{type:Boolean,default:!1},isFirstLevel:{type:Boolean,default:!0},basePath:{default:""}},setup(d){const e=d,c=u(()=>{var a;return(a=e.item.meta)==null?void 0:a.alwaysShow}),n=u(()=>{var a;return((a=e.item.children)==null?void 0:a.filter(S=>{var x;return!((x=S.meta)!=null&&x.hidden)}))??[]}),g=u(()=>n.value.length),i=u(()=>{const a=g.value;switch(!0){case a>1:return null;case a===1:return n.value[0];default:return{...e.item,path:""}}}),y=a=>{switch(!0){case R(a):return a;case R(e.basePath):return e.basePath;default:return Y.resolve(e.basePath,a)}};return(a,S)=>{var h;const x=l("SvgIcon"),r=l("el-menu-item"),p=l("sidebar-item",!0),C=l("el-sub-menu");return(h=e.item.meta)!=null&&h.hidden?A("",!0):(s(),m("div",{key:0,class:G({"simple-mode":e.isCollapse&&!a.isTop,"first-level":e.isFirstLevel})},[!c.value&&i.value&&!i.value.children?(s(),m(P,{key:0},[i.value.meta?(s(),f(Ee,{key:0,to:y(i.value.path)},{default:o(()=>[t(r,{index:y(i.value.path)},_e({default:o(()=>[i.value.meta.svgIcon?(s(),f(x,{key:0,name:i.value.meta.svgIcon},null,8,["name"])):i.value.meta.elIcon?(s(),f(z(i.value.meta.elIcon),{key:1,class:"el-icon"})):A("",!0)]),_:2},[i.value.meta.title?{name:"title",fn:o(()=>[$(N(i.value.meta.title),1)]),key:"0"}:void 0]),1032,["index"])]),_:1},8,["to"])):A("",!0)],64)):(s(),f(C,{key:1,index:y(e.item.path),teleported:""},{title:o(()=>{var _,k,I;return[(_=e.item.meta)!=null&&_.svgIcon?(s(),f(x,{key:0,name:e.item.meta.svgIcon},null,8,["name"])):(k=e.item.meta)!=null&&k.elIcon?(s(),f(z(e.item.meta.elIcon),{key:1,class:"el-icon"})):A("",!0),(I=e.item.meta)!=null&&I.title?(s(),m("span",Ue,N(e.item.meta.title),1)):A("",!0)]}),default:o(()=>[e.item.children?(s(!0),m(P,{key:0},F(e.item.children,_=>(s(),f(p,{key:_.path,item:_,"is-collapse":e.isCollapse,"is-first-level":!1,"base-path":y(_.path)},null,8,["item","is-collapse","base-path"]))),128)):A("",!0)]),_:1},8,["index"]))],2))}}}),Re=M(Ne,[["__scopeId","data-v-688ba5d0"]]),Fe={class:"layout-logo-container"},De={class:"layout-logo-box"},Oe={key:0,class:"layout-logo-text"},We=T({__name:"index",props:{collapse:{type:Boolean,default:!0}},setup(d){return(e,c)=>{const n=l("svg-icon"),g=l("router-link");return s(),m("div",Fe,[t(me,{name:"layout-logo-fade"},{default:o(()=>[t(g,{to:"/"},{default:o(()=>[v("div",De,[t(n,{name:"LTLogo",color:"#fff",class:"LTLogo"}),e.collapse?A("",!0):(s(),m("h2",Oe,"SkyAgents"))])]),_:1})]),_:1})])}}}),ze=M(We,[["__scopeId","data-v-93af50d9"]]),He=T({__name:"index",setup(d){ve(B=>({"6722f728":X.value,"2f202f4e":q.value,"587add76":J.value,"59ec4889":D.value}));const e=U("--v3-sidebar-menu-bg-color"),c=U("--v3-sidebar-menu-text-color"),n=U("--v3-sidebar-menu-active-text-color"),g=Z(),i=ee(),y=ce(),a=ie(),{sidebar:S,device:x}=H(i),{layoutMode:r,showLogo:p}=H(a),C=u(()=>{const{meta:{activeMenu:B},path:O}=g;return B||O}),h=u(()=>!S.value.opened),_=u(()=>r.value==="left"),k=u(()=>r.value==="top"),I=u(()=>x.value===te.Mobile),b=u(()=>_.value&&p.value),V=u(()=>_.value?e:void 0),K=u(()=>_.value?c:void 0),D=u(()=>_.value?n:void 0),q=u(()=>r.value!=="top"?"var(--v3-sidebar-menu-item-height)":"var(--v3-navigationbar-height)"),J=u(()=>r.value!=="top"?"var(--v3-sidebar-menu-hover-bg-color)":"transparent"),X=u(()=>r.value==="top"?"none":"block");return(B,O)=>{const j=l("el-menu"),Q=l("el-scrollbar");return s(),m("div",{class:G({"has-logo":b.value})},[b.value?(s(),f(ze,{key:0,collapse:h.value},null,8,["collapse"])):A("",!0),t(Q,{"wrap-class":"scrollbar-wrapper"},{default:o(()=>[t(j,{"default-active":C.value,collapse:h.value&&!k.value,"background-color":V.value,"text-color":K.value,"active-text-color":D.value,"unique-opened":!0,"collapse-transition":!1,mode:k.value&&!I.value?"horizontal":"vertical"},{default:o(()=>[(s(!0),m(P,null,F(w(y).routes,E=>(s(),f(Re,{key:E.path,item:E,"base-path":E.path,"is-collapse":h.value,"is-top":k.value},null,8,["item","base-path","is-collapse","is-top"]))),128))]),_:1},8,["default-active","collapse","background-color","text-color","active-text-color","mode"])]),_:1}),t(Pe)],2)}}}),Ze=M(He,[["__scopeId","data-v-c7b71ed8"]]),Ge={class:"app-wrapper"},qe={class:"main-container"},Je=T({__name:"Left",setup(d){return(e,c)=>(s(),m("div",Ge,[t(w(Ze),{class:"sidebar-container"}),v("div",qe,[t(w(oe),{class:"app-main"})])]))}});const Xe=M(Je,[["__scopeId","data-v-32e74378"]]),at=T({__name:"index",setup(d){return(e,c)=>(s(),m("div",null,[t(Xe)]))}});export{at as default};
