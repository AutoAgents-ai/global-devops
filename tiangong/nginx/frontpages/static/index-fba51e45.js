import{p as ee,u as te,D as oe,A as ae}from"./index.vue_vue_type_style_index_0_scoped_c7b71ed8_lang-647e5c11.js";import{_ as T,u as se,g as le,r as ne,a as ce,s as re,b as ie,c as ue,d as de}from"./index-04735513.js";import{l as w,Z as pe,ag as n,m as s,M as g,O as o,q as v,U as t,S as $,p as f,u as A,aD as _e,r as L,T as U,F as B,a7 as R,aE as H,aF as z,H as O,e as p,a9 as me,Q as W,R as C,I as G,W as ve,aG as fe,aH as ge,aI as Z}from"./vue-df4b15ce.js";import{p as be,E as he,f as ye}from"./element-13471b23.js";import{g as E}from"./index-ad1602bc.js";import"./vxe-8a51e91f.js";const ke=["src"],xe={class:"dialog-footer"},Ve=w({__name:"EditAccount",props:{dialogAccountVisible:{type:Boolean}},emits:["update:dialogAccountVisible"],setup(r,{emit:e}){const i=e,l=pe({avatar:"",userName:"",passWord:"",language:"",timeZone:""}),b=()=>{i("update:dialogAccountVisible",!1)},u=()=>{i("update:dialogAccountVisible",!1)};return(y,a)=>{const S=n("el-icon"),x=n("el-upload"),d=n("el-form-item"),_=n("el-input"),V=n("el-option"),k=n("el-select"),m=n("el-form"),h=n("el-button"),I=n("el-dialog");return s(),g(I,{"model-value":y.dialogAccountVisible,"append-to-body":"",width:480,title:"账户设置"},{footer:o(()=>[v("span",xe,[t(h,{onClick:b},{default:o(()=>[$("取消")]),_:1}),t(h,{type:"primary",onClick:u},{default:o(()=>[$("确认")]),_:1})])]),default:o(()=>[t(m,{ref:"accountFormRef",model:l,rules:y.rules,"label-position":"top"},{default:o(()=>[t(d,{prop:"avatar",class:"form-item-uploader"},{default:o(()=>[t(x,{class:"avatar-uploader",action:"","show-file-list":!1},{default:o(()=>[l.avatar?(s(),f("img",{key:0,src:l.avatar,class:"avatar"},null,8,ke)):(s(),g(S,{key:1,size:24,color:"#dcdfe6",class:"avatar-uploader-icon"},{default:o(()=>[t(A(be))]),_:1}))]),_:1})]),_:1}),t(d,{label:"用户名",prop:"userName"},{default:o(()=>[t(_,{modelValue:l.userName,"onUpdate:modelValue":a[0]||(a[0]=c=>l.userName=c)},null,8,["modelValue"])]),_:1}),t(d,{label:"密码",prop:"passWord"},{default:o(()=>[t(_,{modelValue:l.passWord,"onUpdate:modelValue":a[1]||(a[1]=c=>l.passWord=c),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),t(d,{label:"语言",prop:"language"},{default:o(()=>[t(k,{modelValue:l.language,"onUpdate:modelValue":a[2]||(a[2]=c=>l.language=c)},{default:o(()=>[t(V,{label:"中文（简体）",value:"中文（简体）"}),t(V,{label:"中文（繁体）",value:"中文（繁体）"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"时区",prop:"timeZone"},{default:o(()=>[t(k,{modelValue:l.timeZone,"onUpdate:modelValue":a[3]||(a[3]=c=>l.timeZone=c)},{default:o(()=>[t(V,{label:"中国 北京（GMT+8）",value:"中中国 北京（GMT+8）"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])}}}),Se=T(Ve,[["__scopeId","data-v-0e7427aa"]]),Ie=r=>(H("data-v-0d94b65f"),r=r(),z(),r),Ce={class:"user-info"},Ae=["src"],we={class:"text"},$e={class:"name"},Te={class:"popover"},Me={class:"user-setting"},Le={class:"choose-box"},Be=Ie(()=>v("p",null,"当前账号开通多个天工 API Key，请选择应用平台使用的 API Key",-1)),Ke={class:"dialog-footer"},Pe=w({__name:"index",setup(r){_e();const e=se(),i=L(!1),l=L(),b=L(!1),u=L(),y=async()=>{await fetch("https://api.tiangong.cn/usercenter/v1/passport/logout",{headers:{"K-Client-Id":"200007","K-Sso-Token":`Bearer ${le()}`}}).then(async()=>{await ne(),await ce(),location.href="https://sso.tiangong.cn"})},a=()=>{e.apiKeys.length==0?ye({title:"提醒",customStyle:{width:"560px",maxWidth:"560px"},showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,message:"当前账号未开通天工 API Key，无法进入大模型应用平台。请前往天工平台申请 API Key。",confirmButtonText:"前往申请"}).then(()=>{e.goTg()}):e.apiKeys.length>1&&(i.value=!0)},S=()=>{re(l.value).then(()=>{he({message:"操作成功",type:"success"})})};return(()=>{ie().then(async d=>{d.data.code!==1&&a()})})(),(d,_)=>{const V=n("svg-icon"),k=n("el-option"),m=n("el-select"),h=n("el-button"),I=n("el-dialog");return s(),f("div",Ce,[v("div",{class:"menu-avatar",ref_key:"userAvatarRef",ref:u},[v("img",{src:A(e).avatar,class:"avatar"},null,8,Ae),v("div",we,[v("h3",$e,U(A(e).username),1)])],512),v("div",Te,[v("div",Me,[v("div",{class:"item logout",onClick:y},[t(V,{name:"Logout",class:"icon"}),$(" 退出登录")])])]),t(I,{modelValue:i.value,"onUpdate:modelValue":_[2]||(_[2]=c=>i.value=c),width:560,title:"API Key设置"},{footer:o(()=>[v("span",Ke,[t(h,{onClick:_[1]||(_[1]=c=>i.value=!1)},{default:o(()=>[$("取消")]),_:1}),t(h,{type:"primary",onClick:S},{default:o(()=>[$("确认")]),_:1})])]),default:o(()=>[v("div",Le,[Be,t(m,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=c=>l.value=c),placeholder:"选择天工 API Key"},{default:o(()=>[(s(!0),f(B,null,R(A(e).apiKeys,(c,K)=>(s(),g(k,{label:c,value:c,key:K},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),t(Se,{dialogAccountVisible:b.value,"onUpdate:dialogAccountVisible":_[3]||(_[3]=c=>b.value=c)},null,8,["dialogAccountVisible"])])}}}),Ee=T(Pe,[["__scopeId","data-v-0d94b65f"]]),N=r=>/^(https?:|mailto:|tel:)/.test(r),Ue=["href"],Ne=w({__name:"SidebarItemLink",props:{to:{}},setup(r){const e=r;return(i,l)=>{const b=n("router-link");return A(N)(e.to)?(s(),f("a",{key:0,href:e.to,target:"_blank",rel:"noopener"},[O(i.$slots,"default")],8,Ue)):(s(),g(b,{key:1,to:e.to},{default:o(()=>[O(i.$slots,"default")]),_:3},8,["to"]))}}}),Re={key:2},Fe=w({__name:"SidebarItem",props:{item:{},isCollapse:{type:Boolean,default:!1},isTop:{type:Boolean,default:!1},isFirstLevel:{type:Boolean,default:!0},basePath:{default:""}},setup(r){const e=r,i=p(()=>{var a;return(a=e.item.meta)==null?void 0:a.alwaysShow}),l=p(()=>{var a;return((a=e.item.children)==null?void 0:a.filter(S=>{var x;return!((x=S.meta)!=null&&x.hidden)}))??[]}),b=p(()=>l.value.length),u=p(()=>{const a=b.value;switch(!0){case a>1:return null;case a===1:return l.value[0];default:return{...e.item,path:""}}}),y=a=>{switch(!0){case N(a):return a;case N(e.basePath):return e.basePath;default:return ee.resolve(e.basePath,a)}};return(a,S)=>{var k;const x=n("SvgIcon"),d=n("el-menu-item"),_=n("sidebar-item",!0),V=n("el-sub-menu");return(k=e.item.meta)!=null&&k.hidden?C("",!0):(s(),f("div",{key:0,class:G({"simple-mode":e.isCollapse&&!a.isTop,"first-level":e.isFirstLevel})},[!i.value&&u.value&&!u.value.children?(s(),f(B,{key:0},[u.value.meta?(s(),g(Ne,{key:0,to:y(u.value.path)},{default:o(()=>[t(d,{index:y(u.value.path)},me({default:o(()=>[u.value.meta.svgIcon?(s(),g(x,{key:0,name:u.value.meta.svgIcon},null,8,["name"])):u.value.meta.elIcon?(s(),g(W(u.value.meta.elIcon),{key:1,class:"el-icon"})):C("",!0)]),_:2},[u.value.meta.title?{name:"title",fn:o(()=>[$(U(u.value.meta.title),1)]),key:"0"}:void 0]),1032,["index"])]),_:1},8,["to"])):C("",!0)],64)):(s(),g(V,{key:1,index:y(e.item.path),teleported:""},{title:o(()=>{var m,h,I;return[(m=e.item.meta)!=null&&m.svgIcon?(s(),g(x,{key:0,name:e.item.meta.svgIcon},null,8,["name"])):(h=e.item.meta)!=null&&h.elIcon?(s(),g(W(e.item.meta.elIcon),{key:1,class:"el-icon"})):C("",!0),(I=e.item.meta)!=null&&I.title?(s(),f("span",Re,U(e.item.meta.title),1)):C("",!0)]}),default:o(()=>[e.item.children?(s(!0),f(B,{key:0},R(e.item.children,m=>(s(),g(_,{key:m.path,item:m,"is-collapse":e.isCollapse,"is-first-level":!1,"base-path":y(m.path)},null,8,["item","is-collapse","base-path"]))),128)):C("",!0)]),_:1},8,["index"]))],2))}}}),De=T(Fe,[["__scopeId","data-v-688ba5d0"]]),Oe=r=>(H("data-v-b69b52ea"),r=r(),z(),r),We={class:"layout-logo-container"},Ze={class:"layout-logo-box"},He={class:"beta-box"},ze=Oe(()=>v("span",{class:"beta"},"beta",-1)),Ge={key:0,class:"layout-logo-text"},qe=w({__name:"index",props:{collapse:{type:Boolean,default:!0}},setup(r){return(e,i)=>{const l=n("svg-icon"),b=n("router-link");return s(),f("div",We,[t(ve,{name:"layout-logo-fade"},{default:o(()=>[t(b,{to:"/"},{default:o(()=>[v("div",Ze,[t(l,{name:"LTLogo",color:"#fff",class:"LTLogo"}),v("div",He,[ze,e.collapse?C("",!0):(s(),f("h2",Ge,"SkyAgents"))])])]),_:1})]),_:1})])}}}),Qe=T(qe,[["__scopeId","data-v-b69b52ea"]]),je=w({__name:"index",setup(r){fe(M=>({"6722f728":J.value,"2f202f4e":Q.value,"587add76":j.value,"59ec4889":F.value}));const e=E("--v3-sidebar-menu-bg-color"),i=E("--v3-sidebar-menu-text-color"),l=E("--v3-sidebar-menu-active-text-color"),b=ge(),u=te(),y=ue(),a=de(),{sidebar:S,device:x}=Z(u),{layoutMode:d,showLogo:_}=Z(a),V=p(()=>{const{meta:{activeMenu:M},path:D}=b;return M||D}),k=p(()=>!S.value.opened),m=p(()=>d.value==="left"),h=p(()=>d.value==="top"),I=p(()=>x.value===oe.Mobile),c=p(()=>m.value&&_.value),K=p(()=>m.value?e:void 0),q=p(()=>m.value?i:void 0),F=p(()=>m.value?l:void 0),Q=p(()=>d.value!=="top"?"var(--v3-sidebar-menu-item-height)":"var(--v3-navigationbar-height)"),j=p(()=>d.value!=="top"?"var(--v3-sidebar-menu-hover-bg-color)":"transparent"),J=p(()=>d.value==="top"?"none":"block");return(M,D)=>{const X=n("el-menu"),Y=n("el-scrollbar");return s(),f("div",{class:G({"has-logo":c.value})},[c.value?(s(),g(Qe,{key:0,collapse:k.value},null,8,["collapse"])):C("",!0),t(Y,{"wrap-class":"scrollbar-wrapper"},{default:o(()=>[t(X,{"default-active":V.value,collapse:k.value&&!h.value,"background-color":K.value,"text-color":q.value,"active-text-color":F.value,"unique-opened":!0,"collapse-transition":!1,mode:h.value&&!I.value?"horizontal":"vertical"},{default:o(()=>[(s(!0),f(B,null,R(A(y).routes,P=>(s(),g(De,{key:P.path,item:P,"base-path":P.path,"is-collapse":k.value,"is-top":h.value},null,8,["item","base-path","is-collapse","is-top"]))),128))]),_:1},8,["default-active","collapse","background-color","text-color","active-text-color","mode"])]),_:1}),t(Ee)],2)}}}),Je=T(je,[["__scopeId","data-v-c7b71ed8"]]),Xe={class:"app-wrapper"},Ye={class:"main-container"},et=w({__name:"Left",setup(r){return(e,i)=>(s(),f("div",Xe,[t(A(Je),{class:"sidebar-container"}),v("div",Ye,[t(A(ae),{class:"app-main"})])]))}});const tt=T(et,[["__scopeId","data-v-7bfeca45"]]),rt=w({__name:"index",setup(r){return(e,i)=>(s(),f("div",null,[t(tt)]))}});export{rt as default};
